var ME=Object.create;var el=Object.defineProperty,RE=Object.defineProperties,xE=Object.getOwnPropertyDescriptor,OE=Object.getOwnPropertyDescriptors,PE=Object.getOwnPropertyNames,Mp=Object.getOwnPropertySymbols,kE=Object.getPrototypeOf,xp=Object.prototype.hasOwnProperty,LE=Object.prototype.propertyIsEnumerable;var Rp=(t,e,n)=>e in t?el(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})xp.call(e,n)&&Rp(t,n,e[n]);if(Mp)for(var n of Mp(e))LE.call(e,n)&&Rp(t,n,e[n]);return t},oe=(t,e)=>RE(t,OE(e));var Pt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var FE=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PE(e))!xp.call(t,i)&&i!==n&&el(t,i,{get:()=>e[i],enumerable:!(r=xE(e,i))||r.enumerable});return t};var jE=(t,e,n)=>(n=t!=null?ME(kE(t)):{},FE(e||!t||!t.__esModule?el(n,"default",{value:t,enumerable:!0}):n,t));var v=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var fE=Pt((dE,Dp)=>{"use strict";(function(t,e,n){function r(a){var c=this,l=s();c.next=function(){var u=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=u-(c.c=u|0)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(a),c.s0<0&&(c.s0+=1),c.s1-=l(a),c.s1<0&&(c.s1+=1),c.s2-=l(a),c.s2<0&&(c.s2+=1),l=null}function i(a,c){return c.c=a.c,c.s0=a.s0,c.s1=a.s1,c.s2=a.s2,c}function o(a,c){var l=new r(a),u=c&&c.state,d=l.next;return d.int32=function(){return l.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}function s(){var a=4022871197,c=function(l){l=String(l);for(var u=0;u<l.length;u++){a+=l.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return c}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(dE,typeof Dp=="object"&&Dp,typeof define=="function"&&define)});var pE=Pt((hE,bp)=>{"use strict";(function(t,e,n){function r(s){var a=this,c="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:c+=s;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,a.next()}function i(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function o(s,a){var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(hE,typeof bp=="object"&&bp,typeof define=="function"&&define)});var mE=Pt((gE,Sp)=>{"use strict";(function(t,e,n){function r(s){var a=this,c="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:c+=s;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,l==c.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function i(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function o(s,a){var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(gE,typeof Sp=="object"&&Sp,typeof define=="function"&&define)});var yE=Pt((vE,Tp)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var l=a.x,u=a.i,d,f,h;return d=l[u],d^=d>>>7,f=d^d<<24,d=l[u+1&7],f^=d^d>>>10,d=l[u+3&7],f^=d^d>>>3,d=l[u+4&7],f^=d^d<<7,d=l[u+7&7],d=d^d<<13,f^=d^d<<9,l[u]=f,a.i=u+1&7,f};function c(l,u){var d,f,h=[];if(u===(u|0))f=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?f=h[7]=-1:f=h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}c(a,s)}function i(s,a){return a.x=s.x.slice(),a.i=s.i,a}function o(s,a){s==null&&(s=+new Date);var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.x&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(vE,typeof Tp=="object"&&Tp,typeof define=="function"&&define)});var IE=Pt((_E,Ap)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var l=a.w,u=a.X,d=a.i,f,h;return a.w=l=l+1640531527|0,h=u[d+34&127],f=u[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=u[d]=h^f,a.i=d,h+(l^l>>>16)|0};function c(l,u){var d,f,h,p,m,_=[],D=128;for(u===(u|0)?(f=u,u=null):(u=u+"\0",f=0,D=Math.max(D,u.length)),h=0,p=-32;p<D;++p)u&&(f^=u.charCodeAt((p+32)%u.length)),p===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(m=m+1640531527|0,d=_[p&127]^=f+m,h=d==0?h+1:0);for(h>=128&&(_[(u&&u.length||0)&127]=-1),h=127,p=4*128;p>0;--p)f=_[h+34&127],d=_[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,_[h]=f^d;l.w=m,l.X=_,l.i=h}c(a,s)}function i(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function o(s,a){s==null&&(s=+new Date);var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.X&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(_E,typeof Ap=="object"&&Ap,typeof define=="function"&&define)});var EE=Pt((wE,Np)=>{"use strict";(function(t,e,n){function r(s){var a=this,c="";a.next=function(){var u=a.b,d=a.c,f=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-f|0,a.d=f<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):c+=s;for(var l=0;l<c.length+20;l++)a.b^=c.charCodeAt(l)|0,a.next()}function i(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function o(s,a){var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(wE,typeof Np=="object"&&Np,typeof define=="function"&&define)});var CE=Pt(()=>{"use strict"});var bE=Pt((DE,Xc)=>{"use strict";(function(t,e,n){var r=256,i=6,o=52,s="random",a=n.pow(r,i),c=n.pow(2,o),l=c*2,u=r-1,d;function f(w,T,ie){var F=[];T=T==!0?{entropy:!0}:T||{};var K=_(m(T.entropy?[w,B(e)]:w??D(),3),F),pe=new h(F),_e=function(){for(var Re=pe.g(i),Ot=a,vt=0;Re<c;)Re=(Re+vt)*r,Ot*=r,vt=pe.g(1);for(;Re>=l;)Re/=2,Ot/=2,vt>>>=1;return(Re+vt)/Ot};return _e.int32=function(){return pe.g(4)|0},_e.quick=function(){return pe.g(4)/4294967296},_e.double=_e,_(B(pe.S),e),(T.pass||ie||function(Re,Ot,vt,Kt){return Kt&&(Kt.S&&p(Kt,pe),Re.state=function(){return p(pe,{})}),vt?(n[s]=Re,Ot):Re})(_e,K,"global"in T?T.global:this==n,T.state)}function h(w){var T,ie=w.length,F=this,K=0,pe=F.i=F.j=0,_e=F.S=[];for(ie||(w=[ie++]);K<r;)_e[K]=K++;for(K=0;K<r;K++)_e[K]=_e[pe=u&pe+w[K%ie]+(T=_e[K])],_e[pe]=T;(F.g=function(Re){for(var Ot,vt=0,Kt=F.i,cs=F.j,Ei=F.S;Re--;)Ot=Ei[Kt=u&Kt+1],vt=vt*r+Ei[u&(Ei[Kt]=Ei[cs=u&cs+Ot])+(Ei[cs]=Ot)];return F.i=Kt,F.j=cs,vt})(r)}function p(w,T){return T.i=w.i,T.j=w.j,T.S=w.S.slice(),T}function m(w,T){var ie=[],F=typeof w,K;if(T&&F=="object")for(K in w)try{ie.push(m(w[K],T-1))}catch{}return ie.length?ie:F=="string"?w:w+"\0"}function _(w,T){for(var ie=w+"",F,K=0;K<ie.length;)T[u&K]=u&(F^=T[u&K]*19)+ie.charCodeAt(K++);return B(T)}function D(){try{var w;return d&&(w=d.randomBytes)?w=w(r):(w=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(w)),B(w)}catch{var T=t.navigator,ie=T&&T.plugins;return[+new Date,t,ie,t.screen,B(e)]}}function B(w){return String.fromCharCode.apply(0,w)}if(_(n.random(),e),typeof Xc=="object"&&Xc.exports){Xc.exports=f;try{d=CE()}catch{}}else typeof define=="function"&&define.amd?define(function(){return f}):n["seed"+s]=f})(typeof self<"u"?self:DE,[],Math)});var TE=Pt((JH,SE)=>{"use strict";var jP=fE(),UP=pE(),VP=mE(),$P=yE(),BP=IE(),HP=EE(),dr=bE();dr.alea=jP;dr.xor128=UP;dr.xorwow=VP;dr.xorshift7=$P;dr.xor4096=BP;dr.tychei=HP;SE.exports=dr});var nl=null;var tl=1,Op=Symbol("SIGNAL");function U(t){let e=nl;return nl=t,e}function Pp(){return nl}var rl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function UE(t){if(!(cl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tl)){if(!t.producerMustRecompute(t)&&!ol(t)){t.dirty=!1,t.lastCleanEpoch=tl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=tl}}function il(t){return t&&(t.nextProducerIndex=0),U(t)}function kp(t,e){if(U(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(cl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)al(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ol(t){ll(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(UE(n),r!==n.version))return!0}return!1}function sl(t){if(ll(t),cl(t))for(let e=0;e<t.producerNode.length;e++)al(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function al(t,e){if(VE(t),t.liveConsumerNode.length===1&&$E(t))for(let r=0;r<t.producerNode.length;r++)al(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ll(i),i.producerIndexOfThis[r]=e}}function cl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ll(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function VE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function $E(t){return t.producerNode!==void 0}function BE(){throw new Error}var HE=BE;function Lp(t){HE=t}function A(t){return typeof t=="function"}function fr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ls=fr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(A(r))try{r()}catch(o){e=o instanceof ls?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Fp(o)}catch(s){e=e??[],s instanceof ls?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ls(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Fp(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mn(n,e)}remove(e){let{_finalizers:n}=this;n&&Mn(n,e),e instanceof t&&e._removeParent(this)}};se.EMPTY=(()=>{let t=new se;return t.closed=!0,t})();var ul=se.EMPTY;function us(t){return t instanceof se||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function Fp(t){A(t)?t():t.unsubscribe()}var et={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hr={setTimeout(t,e,...n){let{delegate:r}=hr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=hr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ds(t){hr.setTimeout(()=>{let{onUnhandledError:e}=et;if(e)e(t);else throw t})}function Ci(){}var jp=dl("C",void 0,void 0);function Up(t){return dl("E",void 0,t)}function Vp(t){return dl("N",t,void 0)}function dl(t,e,n){return{kind:t,value:e,error:n}}var Rn=null;function pr(t){if(et.useDeprecatedSynchronousErrorHandling){let e=!Rn;if(e&&(Rn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Rn;if(Rn=null,n)throw r}}else t()}function $p(t){et.useDeprecatedSynchronousErrorHandling&&Rn&&(Rn.errorThrown=!0,Rn.error=t)}var xn=class extends se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,us(e)&&e.add(this)):this.destination=GE}static create(e,n,r){return new gr(e,n,r)}next(e){this.isStopped?hl(Vp(e),this):this._next(e)}error(e){this.isStopped?hl(Up(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hl(jp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},WE=Function.prototype.bind;function fl(t,e){return WE.call(t,e)}var pl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){fs(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){fs(r)}else fs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){fs(n)}}},gr=class extends xn{constructor(e,n,r){super();let i;if(A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&et.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fl(e.next,o),error:e.error&&fl(e.error,o),complete:e.complete&&fl(e.complete,o)}):i=e}this.destination=new pl(i)}};function fs(t){et.useDeprecatedSynchronousErrorHandling?$p(t):ds(t)}function zE(t){throw t}function hl(t,e){let{onStoppedNotification:n}=et;n&&hr.setTimeout(()=>n(t,e))}var GE={closed:!0,next:Ci,error:zE,complete:Ci};var mr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function je(t){return t}function gl(...t){return ml(t)}function ml(t){return t.length===0?je:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=YE(n)?n:new gr(n,r,i);return pr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Bp(r),new r((i,o)=>{let s=new gr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[mr](){return this}pipe(...n){return ml(n)(this)}toPromise(n){return n=Bp(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Bp(t){var e;return(e=t??et.Promise)!==null&&e!==void 0?e:Promise}function qE(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function YE(t){return t&&t instanceof xn||qE(t)&&us(t)}function vl(t){return A(t?.lift)}function H(t){return e=>{if(vl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(t,e,n,r,i){return new yl(t,e,n,r,i)}var yl=class extends xn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vr(){return H((t,e)=>{let n=null;t._refCount++;let r=W(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var yr=class extends z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new se;let n=this.getSubject();e.add(this.source.subscribe(W(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=se.EMPTY)}return e}refCount(){return vr()(this)}};var Hp=fr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=(()=>{class t extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new hs(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Hp}next(n){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ul:(this.currentObservers=null,o.push(n),new se(()=>{this.currentObservers=null,Mn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new z;return n.source=this,n}}return t.create=(e,n)=>new hs(e,n),t})(),hs=class extends Se{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ul}};var Ie=class extends Se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _l={now(){return(_l.delegate||Date).now()},delegate:void 0};var ps=class extends se{constructor(e,n){super()}schedule(e,n=0){return this}};var Di={setInterval(t,e,...n){let{delegate:r}=Di;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Di;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _r=class extends ps{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Di.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Di.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Mn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ir=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ir.now=_l.now;var wr=class extends Ir{constructor(e,n=Ir.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Il=new wr(_r);var gs=class extends _r{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ms=class extends wr{};var wl=new ms(gs);var Ue=new z(t=>t.complete());function Wp(t){return t&&A(t.schedule)}function zp(t){return t[t.length-1]}function Gp(t){return A(zp(t))?t.pop():void 0}function Zt(t){return Wp(zp(t))?t.pop():void 0}function El(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Yp(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function qp(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function On(t){return this instanceof On?(this.v=t,this):new On(t)}function Kp(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(_,D){o.push([h,m,_,D])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(m){f(o[0][3],m)}}function l(h){h.value instanceof On?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Zp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qp=="function"?qp(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var vs=t=>t&&typeof t.length=="number"&&typeof t!="function";function ys(t){return A(t?.then)}function _s(t){return A(t[mr])}function Is(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function ws(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Es=KE();function Cs(t){return A(t?.[Es])}function Ds(t){return Kp(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield On(n.read());if(i)return yield On(void 0);yield yield On(r)}}finally{n.releaseLock()}})}function bs(t){return A(t?.getReader)}function ge(t){if(t instanceof z)return t;if(t!=null){if(_s(t))return ZE(t);if(vs(t))return QE(t);if(ys(t))return JE(t);if(Is(t))return Qp(t);if(Cs(t))return XE(t);if(bs(t))return eC(t)}throw ws(t)}function ZE(t){return new z(e=>{let n=t[mr]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QE(t){return new z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function JE(t){return new z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ds)})}function XE(t){return new z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Qp(t){return new z(e=>{tC(t,e).catch(n=>e.error(n))})}function eC(t){return Qp(Ds(t))}function tC(t,e){var n,r,i,o;return Yp(this,void 0,void 0,function*(){try{for(n=Zp(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function xe(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Qt(t,e=0){return H((n,r)=>{n.subscribe(W(r,i=>xe(r,t,()=>r.next(i),e),()=>xe(r,t,()=>r.complete(),e),i=>xe(r,t,()=>r.error(i),e)))})}function Jt(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Jp(t,e){return ge(t).pipe(Jt(e),Qt(e))}function Xp(t,e){return ge(t).pipe(Jt(e),Qt(e))}function eg(t,e){return new z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function tg(t,e){return new z(n=>{let r;return xe(n,e,()=>{r=t[Es](),xe(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}function Ss(t,e){if(!t)throw new Error("Iterable cannot be null");return new z(n=>{xe(n,e,()=>{let r=t[Symbol.asyncIterator]();xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ng(t,e){return Ss(Ds(t),e)}function rg(t,e){if(t!=null){if(_s(t))return Jp(t,e);if(vs(t))return eg(t,e);if(ys(t))return Xp(t,e);if(Is(t))return Ss(t,e);if(Cs(t))return tg(t,e);if(bs(t))return ng(t,e)}throw ws(t)}function ue(t,e){return e?rg(t,e):ge(t)}function N(...t){let e=Zt(t);return ue(t,e)}function Er(t,e){let n=A(t)?t:()=>t,r=i=>i.error(n());return new z(e?i=>e.schedule(r,0,i):r)}function Cl(t){return!!t&&(t instanceof z||A(t.lift)&&A(t.subscribe))}var kt=fr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function V(t,e){return H((n,r)=>{let i=0;n.subscribe(W(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:nC}=Array;function rC(t,e){return nC(e)?t(...e):t(e)}function ig(t){return V(e=>rC(t,e))}var{isArray:iC}=Array,{getPrototypeOf:oC,prototype:sC,keys:aC}=Object;function og(t){if(t.length===1){let e=t[0];if(iC(e))return{args:e,keys:null};if(cC(e)){let n=aC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function cC(t){return t&&typeof t=="object"&&oC(t)===sC}function sg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ts(...t){let e=Zt(t),n=Gp(t),{args:r,keys:i}=og(t);if(r.length===0)return ue([],e);let o=new z(lC(r,e,i?s=>sg(i,s):je));return n?o.pipe(ig(n)):o}function lC(t,e,n=je){return r=>{ag(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ag(e,()=>{let l=ue(t[c],e),u=!1;l.subscribe(W(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ag(t,e,n){t?xe(n,t,e):e()}function cg(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=m=>l<r?p(m):c.push(m),p=m=>{o&&e.next(m),l++;let _=!1;ge(n(m,u++)).subscribe(W(e,D=>{i?.(D),o?h(D):e.next(D)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let D=c.shift();s?xe(e,s,()=>p(D)):p(D)}f()}catch(D){e.error(D)}}))};return t.subscribe(W(e,h,()=>{d=!0,f()})),()=>{a?.()}}function de(t,e,n=1/0){return A(e)?de((r,i)=>V((o,s)=>e(r,o,i,s))(ge(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>cg(r,i,t,n)))}function Dl(t=1/0){return de(je,t)}function lg(){return Dl(1)}function Cr(...t){return lg()(ue(t,Zt(t)))}function As(t){return new z(e=>{ge(t()).subscribe(e)})}function tt(t,e){return H((n,r)=>{let i=0;n.subscribe(W(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Xt(t){return H((e,n)=>{let r=null,i=!1,o;r=e.subscribe(W(n,void 0,void 0,s=>{o=ge(t(s,Xt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function ug(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(W(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Dr(t,e){return A(e)?de(t,e,1):de(t,1)}function en(t){return H((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Lt(t){return t<=0?()=>Ue:H((e,n)=>{let r=0;e.subscribe(W(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bl(t){return V(()=>t)}function Ns(t=uC){return H((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function uC(){return new kt}function bi(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function yt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tt((i,o)=>t(i,o,r)):je,Lt(1),n?en(e):Ns(()=>new kt))}function br(t){return t<=0?()=>Ue:H((e,n)=>{let r=[];e.subscribe(W(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Sl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tt((i,o)=>t(i,o,r)):je,br(1),n?en(e):Ns(()=>new kt))}function Tl(t,e){return H(ug(t,e,arguments.length>=2,!0))}function Al(...t){let e=Zt(t);return H((n,r)=>{(e?Cr(t,n,e):Cr(t,n)).subscribe(r)})}function nt(t,e){return H((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(W(r,c=>{i?.unsubscribe();let l=0,u=o++;ge(t(c,u)).subscribe(i=W(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Nl(t){return H((e,n)=>{ge(t).subscribe(W(n,()=>n.complete(),Ci)),!n.closed&&e.subscribe(n)})}function fe(t,e,n){let r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(W(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):je}var Yg="https://g.co/ng/security#xss",E=class extends Error{constructor(e,n){super(Nu(e,n)),this.code=e}};function Nu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $i(t){return{toString:t}.toString()}var Ms="__parameters__";function dC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Kg(t,e,n){return $i(()=>{let r=dC(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Ms)?c[Ms]:Object.defineProperty(c,Ms,{value:[]})[Ms];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function Oe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Oe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function dg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var fC=J({__forward_ref__:J});function Zg(t){return t.__forward_ref__=Zg,t.toString=function(){return Oe(this())},t}function He(t){return Qg(t)?t():t}function Qg(t){return typeof t=="function"&&t.hasOwnProperty(fC)&&t.__forward_ref__===Zg}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function oa(t){return{providers:t.providers||[],imports:t.imports||[]}}function sa(t){return fg(t,Xg)||fg(t,em)}function Jg(t){return sa(t)!==null}function fg(t,e){return t.hasOwnProperty(e)?t[e]:null}function hC(t){let e=t&&(t[Xg]||t[em]);return e||null}function hg(t){return t&&(t.hasOwnProperty(pg)||t.hasOwnProperty(pC))?t[pg]:null}var Xg=J({\u0275prov:J}),pg=J({\u0275inj:J}),em=J({ngInjectableDef:J}),pC=J({ngInjectorDef:J}),S=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function tm(t){return t&&!!t.\u0275providers}var gC=J({\u0275cmp:J}),mC=J({\u0275dir:J}),vC=J({\u0275pipe:J}),yC=J({\u0275mod:J}),Fs=J({\u0275fac:J}),Ai=J({__NG_ELEMENT_ID__:J}),gg=J({__NG_ENV_ID__:J});function Mu(t){return typeof t=="string"?t:t==null?"":String(t)}function _C(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Mu(t)}function IC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new E(-200,t)}function Ru(t,e){throw new E(-201,!1)}var x=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(x||{}),Ul;function nm(){return Ul}function Be(t){let e=Ul;return Ul=t,e}function rm(t,e,n){let r=sa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&x.Optional)return null;if(e!==void 0)return e;Ru(t,"Injector")}var wC={},Ni=wC,Vl="__NG_DI_FLAG__",js="ngTempTokenPath",EC="ngTokenPath",CC=/\n/gm,DC="\u0275",mg="__source",Nr;function bC(){return Nr}function tn(t){let e=Nr;return Nr=t,e}function SC(t,e=x.Default){if(Nr===void 0)throw new E(-203,!1);return Nr===null?rm(t,void 0,e):Nr.get(t,e&x.Optional?null:void 0,e)}function k(t,e=x.Default){return(nm()||SC)(He(t),e)}function y(t,e=x.Default){return k(t,aa(e))}function aa(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function $l(t){let e=[];for(let n=0;n<t.length;n++){let r=He(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=x.Default;for(let s=0;s<r.length;s++){let a=r[s],c=TC(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(k(i,o))}else e.push(k(r))}return e}function im(t,e){return t[Vl]=e,t.prototype[Vl]=e,t}function TC(t){return t[Vl]}function AC(t,e,n,r){let i=t[js];throw e[mg]&&i.unshift(e[mg]),t.message=NC(`
`+t.message,i,n,r),t[EC]=i,t[js]=null,t}function NC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==DC?t.slice(2):t;let i=Oe(e);if(Array.isArray(e))i=e.map(Oe).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Oe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(CC,`
  `)}`}var ct=im(Kg("Optional"),8);var om=im(Kg("SkipSelf"),4);function Rr(t,e){let n=t.hasOwnProperty(Fs);return n?t[Fs]:null}function xu(t,e){t.forEach(n=>Array.isArray(n)?xu(n,e):e(n))}function sm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Us(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Mi={},_t=[],xr=new S(""),am=new S("",-1),cm=new S(""),Vs=class{get(e,n=Ni){if(n===Ni){let r=new Error(`NullInjectorError: No provider for ${Oe(e)}!`);throw r.name="NullInjectorError",r}return n}},lm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(lm||{}),Et=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Et||{}),on=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(on||{});function MC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Bl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];xC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function RC(t){return t===3||t===4||t===6}function xC(t){return t.charCodeAt(0)===64}function Ou(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?vg(t,n,i,null,e[++r]):vg(t,n,i,null,null))}}return t}function vg(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var um="ng-template";function OC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&MC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Pu(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Pu(t){return t.type===4&&t.value!==um}function PC(t,e,n){let r=t.type===4&&!n?um:t.value;return e===r}function kC(t,e,n){let r=4,i=t.attrs,o=i!==null?jC(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!rt(r)&&!rt(c))return!1;if(s&&rt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!PC(t,c,n)||c===""&&e.length===1){if(rt(r))return!1;s=!0}}else if(r&8){if(i===null||!OC(t,i,c,n)){if(rt(r))return!1;s=!0}}else{let l=e[++a],u=LC(c,i,Pu(t),n);if(u===-1){if(rt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(rt(r))return!1;s=!0}}}}return rt(r)||s}function rt(t){return(t&1)===0}function LC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return UC(e,t)}function FC(t,e,n=!1){for(let r=0;r<e.length;r++)if(kC(t,e[r],n))return!0;return!1}function jC(t){for(let e=0;e<t.length;e++){let n=t[e];if(RC(n))return e}return t.length}function UC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function yg(t,e){return t?":not("+e.trim()+")":e}function VC(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!rt(s)&&(e+=yg(o,i),i=""),r=s,o=o||!rt(r);n++}return i!==""&&(e+=yg(o,i)),e}function $C(t){return t.map(VC).join(",")}function BC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!rt(i))break;i=o}r++}return{attrs:e,classes:n}}function cn(t){return $i(()=>{let e=gm(t),n=oe(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===lm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Et.Emulated,styles:t.styles||_t,_:null,schemas:t.schemas||null,tView:null,id:""});mm(n);let r=t.dependencies;return n.directiveDefs=Ig(r,!1),n.pipeDefs=Ig(r,!0),n.id=zC(n),n})}function HC(t){return kn(t)||dm(t)}function WC(t){return t!==null}function ca(t){return $i(()=>({type:t.type,bootstrap:t.bootstrap||_t,declarations:t.declarations||_t,imports:t.imports||_t,exports:t.exports||_t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function _g(t,e){if(t==null)return Mi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=on.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==on.None?[r,a]:r,e[o]=s):n[o]=r}return n}function $r(t){return $i(()=>{let e=gm(t);return mm(e),e})}function kn(t){return t[gC]||null}function dm(t){return t[mC]||null}function fm(t){return t[vC]||null}function hm(t){let e=kn(t)||dm(t)||fm(t);return e!==null?e.standalone:!1}function pm(t,e){let n=t[yC]||null;if(!n&&e===!0)throw new Error(`Type ${Oe(t)} does not have '\u0275mod' property.`);return n}function gm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Mi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||_t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_g(t.inputs,e),outputs:_g(t.outputs),debugInfo:null}}function mm(t){t.features?.forEach(e=>e(t))}function Ig(t,e){if(!t)return null;let n=e?fm:HC;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(WC)}function zC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ln(t){return{\u0275providers:t}}function GC(...t){return{\u0275providers:vm(!0,t),\u0275fromNgModule:!0}}function vm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return xu(e,s=>{let a=s;Hl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ym(i,o),n}function ym(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ku(i,o=>{e(o,r)})}}function Hl(t,e,n,r){if(t=He(t),!t)return!1;let i=null,o=hg(t),s=!o&&kn(t);if(!o&&!s){let c=t.ngModule;if(o=hg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Hl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{xu(o.imports,u=>{Hl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&ym(l,e)}if(!a){let l=Rr(i)||(()=>new i);e({provide:i,useFactory:l,deps:_t},i),e({provide:cm,useValue:i,multi:!0},i),e({provide:xr,useValue:()=>k(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;ku(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ku(t,e){for(let n of t)tm(n)&&(n=n.\u0275providers),Array.isArray(n)?ku(n,e):e(n)}var qC=J({provide:String,useValue:J});function _m(t){return t!==null&&typeof t=="object"&&qC in t}function YC(t){return!!(t&&t.useExisting)}function KC(t){return!!(t&&t.useFactory)}function Wl(t){return typeof t=="function"}var la=new S(""),xs={},ZC={},Ml;function Lu(){return Ml===void 0&&(Ml=new Vs),Ml}var ze=class{},Ri=class extends ze{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gl(e,s=>this.processProvider(s)),this.records.set(am,Sr(void 0,this)),i.has("environment")&&this.records.set(ze,Sr(void 0,this));let o=this.records.get(la);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(cm,_t,x.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=U(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),U(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=tn(this),r=Be(void 0),i;try{return e()}finally{tn(n),Be(r)}}get(e,n=Ni,r=x.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(gg))return e[gg](this);r=aa(r);let i,o=tn(this),s=Be(void 0);try{if(!(r&x.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=nD(e)&&sa(e);l&&this.injectableDefInScope(l)?c=Sr(zl(e),xs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&x.Self?Lu():this.parent;return n=r&x.Optional&&n===Ni?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[js]=a[js]||[]).unshift(Oe(e)),o)throw a;return AC(a,e,"R3InjectorError",this.source)}else throw a}finally{Be(s),tn(o)}}resolveInjectorInitializers(){let e=U(null),n=tn(this),r=Be(void 0),i;try{let o=this.get(xr,_t,x.Self);for(let s of o)s()}finally{tn(n),Be(r),U(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Oe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(e){e=He(e);let n=Wl(e)?e:He(e&&e.provide),r=JC(e);if(!Wl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Sr(void 0,xs,!0),i.factory=()=>$l(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=U(null);try{return n.value===xs&&(n.value=ZC,n.value=n.factory()),typeof n.value=="object"&&n.value&&tD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{U(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=He(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zl(t){let e=sa(t),n=e!==null?e.factory:Rr(t);if(n!==null)return n;if(t instanceof S)throw new E(204,!1);if(t instanceof Function)return QC(t);throw new E(204,!1)}function QC(t){if(t.length>0)throw new E(204,!1);let n=hC(t);return n!==null?()=>n.factory(t):()=>new t}function JC(t){if(_m(t))return Sr(void 0,t.useValue);{let e=XC(t);return Sr(e,xs)}}function XC(t,e,n){let r;if(Wl(t)){let i=He(t);return Rr(i)||zl(i)}else if(_m(t))r=()=>He(t.useValue);else if(KC(t))r=()=>t.useFactory(...$l(t.deps||[]));else if(YC(t))r=()=>k(He(t.useExisting));else{let i=He(t&&(t.useClass||t.provide));if(eD(t))r=()=>new i(...$l(t.deps));else return Rr(i)||zl(i)}return r}function Sr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function eD(t){return!!t.deps}function tD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function nD(t){return typeof t=="function"||typeof t=="object"&&t instanceof S}function Gl(t,e){for(let n of t)Array.isArray(n)?Gl(n,e):n&&tm(n)?Gl(n.\u0275providers,e):e(n)}function jt(t,e){t instanceof Ri&&t.assertNotDestroyed();let n,r=tn(t),i=Be(void 0);try{return e()}finally{tn(r),Be(i)}}function rD(){return nm()!==void 0||bC()!=null}function iD(t){return typeof t=="function"}var Ut=0,O=1,b=2,Ae=3,it=4,lt=5,xi=6,$s=7,Ce=8,Or=9,Ct=10,Ne=11,Oi=12,wg=13,Br=14,ot=15,Pr=16,Tr=17,kr=18,ua=19,Im=20,nn=21,Rl=22,We=23,st=25,wm=1;var Ln=7,Bs=8,Hs=9,Te=10,Ws=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ws||{});function rn(t){return Array.isArray(t)&&typeof t[wm]=="object"}function Vt(t){return Array.isArray(t)&&t[wm]===!0}function Em(t){return(t.flags&4)!==0}function da(t){return t.componentOffset>-1}function Fu(t){return(t.flags&1)===1}function Bi(t){return!!t.template}function ql(t){return(t[b]&512)!==0}var Yl=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Cm(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function fa(){return Dm}function Dm(t){return t.type.prototype.ngOnChanges&&(t.setInput=sD),oD}fa.ngInherit=!0;function oD(){let t=Sm(this),e=t?.current;if(e){let n=t.previous;if(n===Mi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sD(t,e,n,r,i){let o=this.declaredInputs[r],s=Sm(t)||aD(t,{previous:Mi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Yl(l&&l.currentValue,n,c===Mi),Cm(t,e,i,n)}var bm="__ngSimpleChanges__";function Sm(t){return t[bm]||null}function aD(t,e){return t[bm]=e}var Eg=null;var It=function(t,e,n){Eg?.(t,e,n)},cD="svg",lD="math";function Dt(t){for(;Array.isArray(t);)t=t[Ut];return t}function uD(t,e){return Dt(e[t])}function ut(t,e){return Dt(e[t.index])}function ju(t,e){return t.data[e]}function un(t,e){let n=e[t];return rn(n)?n:n[Ut]}function Uu(t){return(t[b]&128)===128}function dD(t){return Vt(t[Ae])}function Lr(t,e){return e==null?null:t[e]}function Tm(t){t[Tr]=0}function Am(t){t[b]&1024||(t[b]|=1024,Uu(t)&&pa(t))}function fD(t,e){for(;t>0;)e=e[Br],t--;return e}function ha(t){return!!(t[b]&9216||t[We]?.dirty)}function Kl(t){t[Ct].changeDetectionScheduler?.notify(8),t[b]&64&&(t[b]|=1024),ha(t)&&pa(t)}function pa(t){t[Ct].changeDetectionScheduler?.notify(0);let e=Fn(t);for(;e!==null&&!(e[b]&8192||(e[b]|=8192,!Uu(e)));)e=Fn(e)}function Nm(t,e){if((t[b]&256)===256)throw new E(911,!1);t[nn]===null&&(t[nn]=[]),t[nn].push(e)}function hD(t,e){if(t[nn]===null)return;let n=t[nn].indexOf(e);n!==-1&&t[nn].splice(n,1)}function Fn(t){let e=t[Ae];return Vt(e)?e[Ae]:e}var $={lFrame:jm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Mm=!1;function pD(){return $.lFrame.elementDepthCount}function gD(){$.lFrame.elementDepthCount++}function mD(){$.lFrame.elementDepthCount--}function Rm(){return $.bindingsEnabled}function vD(){return $.skipHydrationRootTNode!==null}function yD(t){return $.skipHydrationRootTNode===t}function _D(){$.skipHydrationRootTNode=null}function re(){return $.lFrame.lView}function dn(){return $.lFrame.tView}function ga(t){return $.lFrame.contextLView=t,t[Ce]}function ma(t){return $.lFrame.contextLView=null,t}function Ge(){let t=xm();for(;t!==null&&t.type===64;)t=t.parent;return t}function xm(){return $.lFrame.currentTNode}function ID(){let t=$.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Hi(t,e){let n=$.lFrame;n.currentTNode=t,n.isParent=e}function Om(){return $.lFrame.isParent}function wD(){$.lFrame.isParent=!1}function Pm(){return Mm}function Cg(t){Mm=t}function ED(){let t=$.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function CD(t){return $.lFrame.bindingIndex=t}function va(){return $.lFrame.bindingIndex++}function DD(){return $.lFrame.inI18n}function bD(t,e){let n=$.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zl(e)}function SD(){return $.lFrame.currentDirectiveIndex}function Zl(t){$.lFrame.currentDirectiveIndex=t}function km(t){$.lFrame.currentQueryIndex=t}function TD(t){let e=t[O];return e.type===2?e.declTNode:e.type===1?t[lt]:null}function Lm(t,e,n){if(n&x.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&x.Host);)if(i=TD(o),i===null||(o=o[Br],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=$.lFrame=Fm();return r.currentTNode=e,r.lView=t,!0}function Vu(t){let e=Fm(),n=t[O];$.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Fm(){let t=$.lFrame,e=t===null?null:t.child;return e===null?jm(t):e}function jm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Um(){let t=$.lFrame;return $.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Vm=Um;function $u(){let t=Um();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function AD(t){return($.lFrame.contextLView=fD(t,$.lFrame.contextLView))[Ce]}function ya(){return $.lFrame.selectedIndex}function jn(t){$.lFrame.selectedIndex=t}function ND(){let t=$.lFrame;return ju(t.tView,t.selectedIndex)}function MD(){return $.lFrame.currentNamespace}var $m=!0;function Bu(){return $m}function Hu(t){$m=t}function RD(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Dm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Wu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Os(t,e,n){Bm(t,e,3,n)}function Ps(t,e,n,r){(t[b]&3)===n&&Bm(t,e,n,r)}function xl(t,e){let n=t[b];(n&3)===e&&(n&=16383,n+=1,t[b]=n)}function Bm(t,e,n,r){let i=r!==void 0?t[Tr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Tr]+=65536),(a<o||o==-1)&&(xD(t,n,e,c),t[Tr]=(t[Tr]&4294901760)+c+2),c++}function Dg(t,e){It(4,t,e);let n=U(null);try{e.call(t)}finally{U(n),It(5,t,e)}}function xD(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[b]>>14<t[Tr]>>16&&(t[b]&3)===e&&(t[b]+=16384,Dg(a,o)):Dg(a,o)}var Mr=-1,Pi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function OD(t){return t instanceof Pi}function PD(t){return(t.flags&8)!==0}function kD(t){return(t.flags&16)!==0}var Ol={},Ql=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=aa(r);let i=this.injector.get(e,Ol,r);return i!==Ol||n===Ol?i:this.parentInjector.get(e,n,r)}};function Hm(t){return t!==Mr}function zs(t){return t&32767}function LD(t){return t>>16}function Gs(t,e){let n=LD(t),r=e;for(;n>0;)r=r[Br],n--;return r}var Jl=!0;function bg(t){let e=Jl;return Jl=t,e}var FD=256,Wm=FD-1,zm=5,jD=0,wt={};function UD(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ai)&&(r=n[Ai]),r==null&&(r=n[Ai]=jD++);let i=r&Wm,o=1<<i;e.data[t+(i>>zm)]|=o}function Gm(t,e){let n=qm(t,e);if(n!==-1)return n;let r=e[O];r.firstCreatePass&&(t.injectorIndex=e.length,Pl(r.data,t),Pl(e,null),Pl(r.blueprint,null));let i=zu(t,e),o=t.injectorIndex;if(Hm(i)){let s=zs(i),a=Gs(i,e),c=a[O].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Pl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qm(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Jm(i),r===null)return Mr;if(n++,i=i[Br],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Mr}function VD(t,e,n){UD(t,e,n)}function Ym(t,e,n){if(n&x.Optional||t!==void 0)return t;Ru(e,"NodeInjector")}function Km(t,e,n,r){if(n&x.Optional&&r===void 0&&(r=null),!(n&(x.Self|x.Host))){let i=t[Or],o=Be(void 0);try{return i?i.get(e,r,n&x.Optional):rm(e,r,n&x.Optional)}finally{Be(o)}}return Ym(r,e,n)}function Zm(t,e,n,r=x.Default,i){if(t!==null){if(e[b]&2048&&!(r&x.Self)){let s=zD(t,e,n,r,wt);if(s!==wt)return s}let o=Qm(t,e,n,r,wt);if(o!==wt)return o}return Km(e,n,r,i)}function Qm(t,e,n,r,i){let o=HD(n);if(typeof o=="function"){if(!Lm(e,t,r))return r&x.Host?Ym(i,n,r):Km(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&x.Optional))Ru(n);else return s}finally{Vm()}}else if(typeof o=="number"){let s=null,a=qm(t,e),c=Mr,l=r&x.Host?e[ot][lt]:null;for((a===-1||r&x.SkipSelf)&&(c=a===-1?zu(t,e):e[a+8],c===Mr||!Tg(r,!1)?a=-1:(s=e[O],a=zs(c),e=Gs(c,e)));a!==-1;){let u=e[O];if(Sg(o,a,u.data)){let d=$D(a,e,n,s,r,l);if(d!==wt)return d}c=e[a+8],c!==Mr&&Tg(r,e[O].data[a+8]===l)&&Sg(o,a,e)?(s=u,a=zs(c),e=Gs(c,e)):a=-1}}return i}function $D(t,e,n,r,i,o){let s=e[O],a=s.data[t+8],c=r==null?da(a)&&Jl:r!=s&&(a.type&3)!==0,l=i&x.Host&&o===a,u=BD(a,s,n,c,l);return u!==null?ki(e,s,u,a):wt}function BD(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&Bi(h)&&h.type===n)return c}return null}function ki(t,e,n,r){let i=t[n],o=e.data;if(OD(i)){let s=i;s.resolving&&IC(_C(o[n]));let a=bg(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Be(s.injectImpl):null,u=Lm(t,r,x.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&RD(n,o[n],e)}finally{l!==null&&Be(l),bg(a),s.resolving=!1,Vm()}}return i}function HD(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ai)?t[Ai]:void 0;return typeof e=="number"?e>=0?e&Wm:WD:e}function Sg(t,e,n){let r=1<<t;return!!(n[e+(t>>zm)]&r)}function Tg(t,e){return!(t&x.Self)&&!(t&x.Host&&e)}var Pn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Zm(this._tNode,this._lView,e,aa(r),n)}};function WD(){return new Pn(Ge(),re())}function Gu(t){return $i(()=>{let e=t.prototype.constructor,n=e[Fs]||Xl(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Fs]||Xl(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Xl(t){return Qg(t)?()=>{let e=Xl(He(t));return e&&e()}:Rr(t)}function zD(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[b]&2048&&!(s[b]&512);){let a=Qm(o,s,n,r|x.Self,wt);if(a!==wt)return a;let c=o.parent;if(!c){let l=s[Im];if(l){let u=l.get(n,wt,r);if(u!==wt)return u}c=Jm(s),s=s[Br]}o=c}return i}function Jm(t){let e=t[O],n=e.type;return n===2?e.declTNode:n===1?t[lt]:null}function Ag(t,e=null,n=null,r){let i=Xm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Xm(t,e=null,n=null,r,i=new Set){let o=[n||_t,GC(t)];return r=r||(typeof t=="object"?void 0:Oe(t)),new Ri(o,e||Lu(),r||null,i)}var at=class t{static{this.THROW_IF_NOT_FOUND=Ni}static{this.NULL=new Vs}static create(e,n){if(Array.isArray(e))return Ag({name:""},n,e,"");{let r=e.name??"";return Ag({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=C({token:t,providedIn:"any",factory:()=>k(am)})}static{this.__NG_ELEMENT_ID__=-1}};var GD=new S("");GD.__NG_ELEMENT_ID__=t=>{let e=Ge();if(e===null)throw new E(204,!1);if(e.type&2)return e.value;if(t&x.Optional)return null;throw new E(204,!1)};var qD="ngOriginalError";function kl(t){return t[qD]}var ev=!0,tv=(()=>{class t{static{this.__NG_ELEMENT_ID__=YD}static{this.__NG_ENV_ID__=n=>n}}return t})(),eu=class extends tv{constructor(e){super(),this._lView=e}onDestroy(e){return Nm(this._lView,e),()=>hD(this._lView,e)}};function YD(){return new eu(re())}var Hr=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ie(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}}return t})();var tu=class extends Se{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,rD()&&(this.destroyRef=y(tv,{optional:!0})??void 0,this.pendingTasks=y(Hr,{optional:!0})??void 0)}emit(e){let n=U(null);try{super.next(e)}finally{U(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof se&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},me=tu;function qs(...t){}function nv(t){let e,n;function r(){t=qs;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Ng(t){return queueMicrotask(()=>t()),()=>{t=qs}}var qu="isAngularZone",Ys=qu+"_ID",KD=0,te=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new me(!1),this.onMicrotaskEmpty=new me(!1),this.onStable=new me(!1),this.onError=new me(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ev}=e;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,JD(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qu)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ZD,qs,qs);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ZD={};function Yu(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function QD(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){nv(()=>{t.callbackScheduled=!1,nu(t),t.isCheckStableRunning=!0,Yu(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),nu(t)}function JD(t){let e=()=>{QD(t)},n=KD++;t._inner=t._inner.fork({name:"angular",properties:{[qu]:!0,[Ys]:n,[Ys+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(XD(c))return r.invokeTask(o,s,a,c);try{return Mg(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Rg(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Mg(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!eb(c)&&e(),Rg(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,nu(t),Yu(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function nu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Mg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Rg(t){t._nesting--,Yu(t)}var ru=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new me,this.onMicrotaskEmpty=new me,this.onStable=new me,this.onError=new me}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function XD(t){return rv(t,"__ignore_ng_zone__")}function eb(t){return rv(t,"__scheduler_tick__")}function rv(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Ft=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&kl(e);for(;n&&kl(n);)n=kl(n);return n||null}},tb=new S("",{providedIn:"root",factory:()=>{let t=y(te),e=y(Ft);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function nb(){return _a(Ge(),re())}function _a(t,e){return new Wi(ut(t,e))}var Wi=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=nb}}return t})();function iv(t){return(t.flags&128)===128}var ov=new Map,rb=0;function ib(){return rb++}function ob(t){ov.set(t[ua],t)}function iu(t){ov.delete(t[ua])}var xg="__ngContext__";function Un(t,e){rn(e)?(t[xg]=e[ua],ob(e)):t[xg]=e}function sv(t){return cv(t[Oi])}function av(t){return cv(t[it])}function cv(t){for(;t!==null&&!Vt(t);)t=t[it];return t}var ou;function lv(t){ou=t}function sb(){if(ou!==void 0)return ou;if(typeof document<"u")return document;throw new E(210,!1)}var Ku=new S("",{providedIn:"root",factory:()=>ab}),ab="ng",Zu=new S(""),fn=new S("",{providedIn:"platform",factory:()=>"unknown"});var Qu=new S("",{providedIn:"root",factory:()=>sb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cb="h",lb="b";var ub=()=>null;function Ju(t,e,n=!1){return ub(t,e,n)}var uv=!1,db=new S("",{providedIn:"root",factory:()=>uv});var Ks=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yg})`}};function Xu(t){return t instanceof Ks?t.changingThisBreaksApplicationSecurity:t}function dv(t,e){let n=fb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Yg})`)}return n===e}function fb(t){return t instanceof Ks&&t.getTypeName()||null}var hb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fv(t){return t=String(t),t.match(hb)?t:"unsafe:"+t}var ed=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ed||{});function Ia(t){let e=pb();return e?e.sanitize(ed.URL,t)||"":dv(t,"URL")?Xu(t):fv(Mu(t))}function pb(){let t=re();return t&&t[Ct].sanitizer}function hv(t){return t instanceof Function?t():t}var $n=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}($n||{}),gb;function td(t,e){return gb(t,e)}function Ar(t,e,n,r,i){if(r!=null){let o,s=!1;Vt(r)?o=r:rn(r)&&(s=!0,r=r[Ut]);let a=Dt(r);t===0&&n!==null?i==null?vv(e,n,a):Zs(e,n,a,i||null,!0):t===1&&n!==null?Zs(e,n,a,i||null,!0):t===2?Mb(e,a,s):t===3&&e.destroyNode(a),o!=null&&xb(e,t,o,n,i)}}function mb(t,e){return t.createText(e)}function vb(t,e,n){t.setValue(e,n)}function pv(t,e,n){return t.createElement(e,n)}function yb(t,e){gv(t,e),e[Ut]=null,e[lt]=null}function _b(t,e,n,r,i,o){r[Ut]=i,r[lt]=e,Ea(t,r,n,1,i,o)}function gv(t,e){e[Ct].changeDetectionScheduler?.notify(9),Ea(t,e,e[Ne],2,null,null)}function Ib(t){let e=t[Oi];if(!e)return Ll(t[O],t);for(;e;){let n=null;if(rn(e))n=e[Oi];else{let r=e[Te];r&&(n=r)}if(!n){for(;e&&!e[it]&&e!==t;)rn(e)&&Ll(e[O],e),e=e[Ae];e===null&&(e=t),rn(e)&&Ll(e[O],e),n=e&&e[it]}e=n}}function wb(t,e,n,r){let i=Te+r,o=n.length;r>0&&(n[i-1][it]=e),r<o-Te?(e[it]=n[i],sm(n,Te+r,e)):(n.push(e),e[it]=null),e[Ae]=n;let s=e[Pr];s!==null&&n!==s&&mv(s,e);let a=e[kr];a!==null&&a.insertView(t),Kl(e),e[b]|=128}function mv(t,e){let n=t[Hs],r=e[Ae];if(rn(r))t[b]|=Ws.HasTransplantedViews;else{let i=r[Ae][ot];e[ot]!==i&&(t[b]|=Ws.HasTransplantedViews)}n===null?t[Hs]=[e]:n.push(e)}function nd(t,e){let n=t[Hs],r=n.indexOf(e);n.splice(r,1)}function Li(t,e){if(t.length<=Te)return;let n=Te+e,r=t[n];if(r){let i=r[Pr];i!==null&&i!==t&&nd(i,r),e>0&&(t[n-1][it]=r[it]);let o=Us(t,Te+e);yb(r[O],r);let s=o[kr];s!==null&&s.detachView(o[O]),r[Ae]=null,r[it]=null,r[b]&=-129}return r}function wa(t,e){if(!(e[b]&256)){let n=e[Ne];n.destroyNode&&Ea(t,e,n,3,null,null),Ib(e)}}function Ll(t,e){if(e[b]&256)return;let n=U(null);try{e[b]&=-129,e[b]|=256,e[We]&&sl(e[We]),Cb(t,e),Eb(t,e),e[O].type===1&&e[Ne].destroy();let r=e[Pr];if(r!==null&&Vt(e[Ae])){r!==e[Ae]&&nd(r,e);let i=e[kr];i!==null&&i.detachView(t)}iu(e)}finally{U(n)}}function Eb(t,e){let n=t.cleanup,r=e[$s];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[$s]=null);let i=e[nn];if(i!==null){e[nn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Cb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Pi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];It(4,a,c);try{c.call(a)}finally{It(5,a,c)}}else{It(4,i,o);try{o.call(i)}finally{It(5,i,o)}}}}}function Db(t,e,n){return bb(t,e.parent,n)}function bb(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Ut];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Et.None||o===Et.Emulated)return null}return ut(r,n)}}function Zs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function vv(t,e,n){t.appendChild(e,n)}function Og(t,e,n,r,i){r!==null?Zs(t,e,n,r,i):vv(t,e,n)}function yv(t,e){return t.parentNode(e)}function Sb(t,e){return t.nextSibling(e)}function Tb(t,e,n){return Nb(t,e,n)}function Ab(t,e,n){return t.type&40?ut(t,n):null}var Nb=Ab,Pg;function rd(t,e,n,r){let i=Db(t,r,e),o=e[Ne],s=r.parent||e[lt],a=Tb(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Og(o,i,n[c],a,!1);else Og(o,i,n,a,!1);Pg!==void 0&&Pg(o,r,e,n,i)}function Si(t,e){if(e!==null){let n=e.type;if(n&3)return ut(e,t);if(n&4)return su(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Si(t,r);{let i=t[e.index];return Vt(i)?su(-1,i):Dt(i)}}else{if(n&128)return Si(t,e.next);if(n&32)return td(e,t)()||Dt(t[e.index]);{let r=_v(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Fn(t[ot]);return Si(i,r)}else return Si(t,e.next)}}}return null}function _v(t,e){if(e!==null){let r=t[ot][lt],i=e.projection;return r.projection[i]}return null}function su(t,e){let n=Te+t+1;if(n<e.length){let r=e[n],i=r[O].firstChild;if(i!==null)return Si(r,i)}return e[Ln]}function Mb(t,e,n){t.removeChild(null,e,n)}function id(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Un(Dt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)id(t,e,n.child,r,i,o,!1),Ar(e,t,i,a,o);else if(c&32){let l=td(n,r),u;for(;u=l();)Ar(e,t,i,u,o);Ar(e,t,i,a,o)}else c&16?Rb(t,e,r,n,i,o):Ar(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ea(t,e,n,r,i,o){id(n,r,t.firstChild,e,i,o,!1)}function Rb(t,e,n,r,i,o){let s=n[ot],c=s[lt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Ar(e,t,i,u,o)}else{let l=c,u=s[Ae];iv(r)&&(l.flags|=128),id(t,e,l,u,i,o,!0)}}function xb(t,e,n,r,i){let o=n[Ln],s=Dt(n);o!==s&&Ar(e,t,r,o,i);for(let a=Te;a<n.length;a++){let c=n[a];Ea(c[O],c,t,e,r,o)}}function Ob(t,e,n){t.setAttribute(e,"style",n)}function Iv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function wv(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Bl(t,e,r),i!==null&&Iv(t,e,i),o!==null&&Ob(t,e,o)}var Wr={};function ae(t=1){Ev(dn(),re(),ya()+t,!1)}function Ev(t,e,n,r){if(!r)if((e[b]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Os(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ps(e,o,0,n)}jn(n)}function qe(t,e=x.Default){let n=re();if(n===null)return k(t,e);let r=Ge();return Zm(r,n,He(t),e)}function Cv(t,e,n,r,i,o){let s=U(null);try{let a=null;i&on.SignalBased&&(a=e[r][Op]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&on.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):Cm(e,a,r,o)}finally{U(s)}}function Pb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)jn(~i);else{let o=i,s=n[++r],a=n[++r];bD(s,o);let c=e[o];a(2,c)}}}finally{jn(-1)}}function Ca(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Ut]=i,d[b]=r|4|128|8|64,(l!==null||t&&t[b]&2048)&&(d[b]|=2048),Tm(d),d[Ae]=d[Br]=t,d[Ce]=n,d[Ct]=s||t&&t[Ct],d[Ne]=a||t&&t[Ne],d[Or]=c||t&&t[Or]||null,d[lt]=o,d[ua]=ib(),d[xi]=u,d[Im]=l,d[ot]=e.type==2?t[ot]:d,d}function Da(t,e,n,r,i){let o=t.data[e];if(o===null)o=kb(t,e,n,r,i),DD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ID();o.injectorIndex=s===null?-1:s.injectorIndex}return Hi(o,!0),o}function kb(t,e,n,r,i){let o=xm(),s=Om(),a=s?o:o&&o.parent,c=t.data[e]=Vb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Dv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bv(t,e,n,r,i){let o=ya(),s=r&2;try{jn(-1),s&&e.length>st&&Ev(t,e,st,!1),It(s?2:0,i),n(r,i)}finally{jn(o),It(s?3:1,i)}}function Sv(t,e,n){if(Em(e)){let r=U(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{U(r)}}}function Tv(t,e,n){Rm()&&(qb(t,e,n,ut(n,e)),(n.flags&64)===64&&xv(t,e,n))}function Av(t,e,n=ut){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Nv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=od(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function od(t,e,n,r,i,o,s,a,c,l,u){let d=st+r,f=d+i,h=Lb(d,f),p=typeof l=="function"?l():l;return h[O]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function Lb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Wr);return n}function Fb(t,e,n,r){let o=r.get(db,uv)||n===Et.ShadowDom,s=t.selectRootElement(e,o);return jb(s),s}function jb(t){Ub(t)}var Ub=()=>null;function Vb(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return vD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function kg(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=on.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?Lg(r,n,l,a,c):Lg(r,n,l,a)}return r}function Lg(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function $b(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=kg(0,d.inputs,u,c,h),l=kg(1,d.outputs,u,l,p);let m=c!==null&&s!==null&&!Pu(e)?nS(c,u,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Bb(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Hb(t,e,n,r,i,o,s,a){let c=ut(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(sd(t,n,u,r,i),da(e)&&Wb(n,e.index)):e.type&3?(r=Bb(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Wb(t,e){let n=un(e,t);n[b]&16||(n[b]|=64)}function Mv(t,e,n,r){if(Rm()){let i=r===null?null:{"":-1},o=Kb(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Rv(t,e,n,s,i,a),i&&Zb(n,r,i)}n.mergedAttrs=Ou(n.mergedAttrs,n.attrs)}function Rv(t,e,n,r,i,o){for(let l=0;l<r.length;l++)VD(Gm(n,e),t,r[l].type);Jb(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Dv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Ou(n.mergedAttrs,u.hostAttrs),Xb(t,n,e,c,u),Qb(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}$b(t,n,o)}function zb(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Gb(s)!=a&&s.push(a),s.push(n,r,o)}}function Gb(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function qb(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;da(n)&&eS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Gm(n,e),Un(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=ki(e,t,a,n);if(Un(l,e),s!==null&&tS(e,a-i,l,c,n,s),Bi(c)){let u=un(n.index,e);u[Ce]=ki(e,t,a,n)}}}function xv(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=SD();try{jn(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Zl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Yb(c,l)}}finally{jn(-1),Zl(s)}}function Yb(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Kb(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(FC(e,s.selectors,!1))if(r||(r=[]),Bi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;au(t,e,c)}else r.unshift(s),au(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function au(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Zb(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new E(-301,!1);r.push(e[i],o)}}}function Qb(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bi(e)&&(n[""]=t)}}function Jb(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Xb(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Rr(i.type,!0)),s=new Pi(o,Bi(i),qe);t.blueprint[r]=s,n[r]=s,zb(t,e,r,Dv(t,n,i.hostVars,Wr),i)}function eS(t,e,n){let r=ut(e,t),i=Nv(n),o=t[Ct].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ba(t,Ca(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function tS(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Cv(r,n,c,l,u,d)}}function nS(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Ov(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Pv(t,e){let n=t.contentQueries;if(n!==null){let r=U(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];km(o),a.contentQueries(2,e[s],s)}}}finally{U(r)}}}function ba(t,e){return t[Oi]?t[wg][it]=e:t[Oi]=e,t[wg]=e,e}function cu(t,e,n){km(0);let r=U(null);try{e(t,n)}finally{U(r)}}function rS(t){return t[$s]??=[]}function iS(t){return t.cleanup??=[]}function kv(t,e){let n=t[Or],r=n?n.get(Ft,null):null;r&&r.handleError(e)}function sd(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];Cv(u,l,r,a,c,i)}}function oS(t,e,n){let r=uD(e,t);vb(t[Ne],r,n)}function sS(t,e){let n=un(e,t),r=n[O];aS(r,n);let i=n[Ut];i!==null&&n[xi]===null&&(n[xi]=Ju(i,n[Or])),ad(r,n,n[Ce])}function aS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ad(t,e,n){Vu(e);try{let r=t.viewQuery;r!==null&&cu(1,r,n);let i=t.template;i!==null&&bv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[kr]?.finishViewCreation(t),t.staticContentQueries&&Pv(t,e),t.staticViewQueries&&cu(2,t.viewQuery,n);let o=t.components;o!==null&&cS(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[b]&=-5,$u()}}function cS(t,e){for(let n=0;n<e.length;n++)sS(t,e[n])}function Sa(t,e,n,r){let i=U(null);try{let o=e.tView,a=t[b]&4096?4096:16,c=Ca(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Pr]=l;let u=t[kr];return u!==null&&(c[kr]=u.createEmbeddedView(o)),ad(o,c,n),c}finally{U(i)}}function Lv(t,e){let n=Te+e;if(n<t.length)return t[n]}function Fi(t,e){return!e||e.firstChild===null||iv(t)}function Ta(t,e,n,r=!0){let i=e[O];if(wb(i,e,t,n),r){let s=su(n,t),a=e[Ne],c=yv(a,t[Ln]);c!==null&&_b(i,t[lt],a,e,c,s)}let o=e[xi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Fv(t,e){let n=Li(t,e);return n!==void 0&&wa(n[O],n),n}function Qs(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Dt(o)),Vt(o)&&lS(o,r);let s=n.type;if(s&8)Qs(t,e,n.child,r);else if(s&32){let a=td(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=_v(e,n);if(Array.isArray(a))r.push(...a);else{let c=Fn(e[ot]);Qs(c[O],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function lS(t,e){for(let n=Te;n<t.length;n++){let r=t[n],i=r[O].firstChild;i!==null&&Qs(r[O],r,i,e)}t[Ln]!==t[Ut]&&e.push(t[Ln])}var jv=[];function uS(t){return t[We]??dS(t)}function dS(t){let e=jv.pop()??Object.create(hS);return e.lView=t,e}function fS(t){t.lView[We]!==t&&(t.lView=null,jv.push(t))}var hS=oe(I({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{pa(t.lView)},consumerOnSignalRead(){this.lView[We]=this}});function pS(t){let e=t[We]??Object.create(gS);return e.lView=t,e}var gS=oe(I({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Fn(t.lView);for(;e&&!Uv(e[O]);)e=Fn(e);e&&Am(e)},consumerOnSignalRead(){this.lView[We]=this}});function Uv(t){return t.type!==2}var mS=100;function Vv(t,e=!0,n=0){let r=t[Ct],i=r.rendererFactory,o=!1;o||i.begin?.();try{vS(t,n)}catch(s){throw e&&kv(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function vS(t,e){let n=Pm();try{Cg(!0),lu(t,e);let r=0;for(;ha(t);){if(r===mS)throw new E(103,!1);r++,lu(t,1)}}finally{Cg(n)}}function yS(t,e,n,r){let i=e[b];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Ct].inlineEffectRunner?.flush(),Vu(e);let a=!0,c=null,l=null;o||(Uv(t)?(l=uS(e),c=il(l)):Pp()===null?(a=!1,l=pS(e),c=il(l)):e[We]&&(sl(e[We]),e[We]=null));try{Tm(e),CD(t.bindingStartIndex),n!==null&&bv(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Os(e,h,null)}else{let h=t.preOrderHooks;h!==null&&Ps(e,h,0,null),xl(e,0)}if(s||_S(e),$v(e,0),t.contentQueries!==null&&Pv(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&Os(e,h)}else{let h=t.contentHooks;h!==null&&Ps(e,h,1),xl(e,1)}Pb(t,e);let d=t.components;d!==null&&Hv(e,d,0);let f=t.viewQuery;if(f!==null&&cu(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&Os(e,h)}else{let h=t.viewHooks;h!==null&&Ps(e,h,2),xl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Rl]){for(let h of e[Rl])h();e[Rl]=null}o||(e[b]&=-73)}catch(u){throw o||pa(e),u}finally{l!==null&&(kp(l,c),a&&fS(l)),$u()}}function $v(t,e){for(let n=sv(t);n!==null;n=av(n))for(let r=Te;r<n.length;r++){let i=n[r];Bv(i,e)}}function _S(t){for(let e=sv(t);e!==null;e=av(e)){if(!(e[b]&Ws.HasTransplantedViews))continue;let n=e[Hs];for(let r=0;r<n.length;r++){let i=n[r];Am(i)}}}function IS(t,e,n){let r=un(e,t);Bv(r,n)}function Bv(t,e){Uu(t)&&lu(t,e)}function lu(t,e){let r=t[O],i=t[b],o=t[We],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ol(o)),s||=!1,o&&(o.dirty=!1),t[b]&=-9217,s)yS(r,t,r.template,t[Ce]);else if(i&8192){$v(t,1);let a=r.components;a!==null&&Hv(t,a,1)}}function Hv(t,e,n){for(let r=0;r<e.length;r++)IS(t,e[r],n)}function cd(t,e){let n=Pm()?64:1088;for(t[Ct].changeDetectionScheduler?.notify(e);t;){t[b]|=n;let r=Fn(t);if(ql(t)&&!r)return t;t=r}return null}var Vn=class{get rootNodes(){let e=this._lView,n=e[O];return Qs(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ce]}set context(e){this._lView[Ce]=e}get destroyed(){return(this._lView[b]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ae];if(Vt(e)){let n=e[Bs],r=n?n.indexOf(this):-1;r>-1&&(Li(e,r),Us(n,r))}this._attachedToViewContainer=!1}wa(this._lView[O],this._lView)}onDestroy(e){Nm(this._lView,e)}markForCheck(){cd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[b]&=-129}reattach(){Kl(this._lView),this._lView[b]|=128}detectChanges(){this._lView[b]|=1024,Vv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ql(this._lView),n=this._lView[Pr];n!==null&&!e&&nd(n,this._lView),gv(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e;let n=ql(this._lView),r=this._lView[Pr];r!==null&&!n&&mv(r,this._lView),Kl(this._lView)}},Aa=(()=>{class t{static{this.__NG_ELEMENT_ID__=CS}}return t})(),wS=Aa,ES=class extends wS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Sa(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Vn(i)}};function CS(){return DS(Ge(),re())}function DS(t,e){return t.type&4?new ES(e,t,_a(t,e)):null}var dV=new RegExp(`^(\\d+)*(${lb}|${cb})*(.*)`);var bS=()=>null;function ji(t,e){return bS(t,e)}var Fr=class{},Na=new S("",{providedIn:"root",factory:()=>!1});var Wv=new S(""),zv=new S(""),uu=class{},Js=class{};function SS(t){let e=Error(`No component factory found for ${Oe(t)}.`);return e[TS]=t,e}var TS="ngComponent";var du=class{resolveComponentFactory(e){throw SS(e)}},jr=class{static{this.NULL=new du}},Ur=class{},Ma=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>AS()}}return t})();function AS(){let t=re(),e=Ge(),n=un(e.index,t);return(rn(n)?n:t)[Ne]}var NS=(()=>{class t{static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>null})}}return t})();function fu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=dg(i,a);else if(o==2){let c=a,l=e[++s];r=dg(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Xs=class extends jr{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=kn(e);return new Ui(n,this.ngModule)}};function Fg(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:on.None;e?n.push({propName:s,templateName:r,isSignal:(a&on.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function MS(t){let e=t.toLowerCase();return e==="svg"?cD:e==="math"?lD:null}var Ui=class extends Js{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Fg(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Fg(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=$C(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=U(null);try{i=i||this.ngModule;let s=i instanceof ze?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ql(e,s):e,c=a.get(Ur,null);if(c===null)throw new E(407,!1);let l=a.get(NS,null),u=a.get(Fr,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?Fb(f,r,this.componentDef.encapsulation,a):pv(f,h,MS(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let _=null;p!==null&&(_=Ju(p,a,!0));let D=od(0,null,null,1,0,null,null,null,null,null,null),B=Ca(null,D,null,m,null,null,d,f,a,null,_);Vu(B);let w,T,ie=null;try{let F=this.componentDef,K,pe=null;F.findHostDirectiveDefs?(K=[],pe=new Map,F.findHostDirectiveDefs(F,K,pe),K.push(F)):K=[F];let _e=RS(B,p);ie=xS(_e,p,F,K,B,d,f),T=ju(D,st),p&&kS(f,F,p,r),n!==void 0&&LS(T,this.ngContentSelectors,n),w=PS(ie,F,K,pe,B,[FS]),ad(D,B,null)}catch(F){throw ie!==null&&iu(ie),iu(B),F}finally{$u()}return new hu(this.componentType,w,_a(T,B),B,T)}finally{U(o)}}},hu=class extends uu{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Vn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;sd(o[O],o,i,e,n),this.previousInputValues.set(e,n);let s=un(this._tNode.index,o);cd(s,1)}}get injector(){return new Pn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RS(t,e){let n=t[O],r=st;return t[r]=e,Da(n,r,2,"#host",null)}function xS(t,e,n,r,i,o,s){let a=i[O];OS(r,t,e,s);let c=null;e!==null&&(c=Ju(e,i[Or]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ca(i,Nv(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&au(a,t,r.length-1),ba(i,d),i[t.index]=d}function OS(t,e,n,r){for(let i of t)e.mergedAttrs=Ou(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(fu(e,e.mergedAttrs,!0),n!==null&&wv(r,n,e))}function PS(t,e,n,r,i,o){let s=Ge(),a=i[O],c=ut(s,i);Rv(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=ki(i,a,d,s);Un(f,i)}xv(a,i,s),c&&Un(c,i);let l=ki(i,a,s.directiveStart+s.componentOffset,s);if(t[Ce]=i[Ce]=l,o!==null)for(let u of o)u(l,e);return Sv(a,s,i),l}function kS(t,e,n,r){if(r)Bl(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=BC(e.selectors[0]);i&&Bl(t,n,i),o&&o.length>0&&Iv(t,n,o.join(" "))}}function LS(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function FS(){let t=Ge();Wu(re()[O],t)}var zr=(()=>{class t{static{this.__NG_ELEMENT_ID__=jS}}return t})();function jS(){let t=Ge();return VS(t,re())}var US=zr,Gv=class extends US{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new Pn(this._hostTNode,this._hostLView)}get parentInjector(){let e=zu(this._hostTNode,this._hostLView);if(Hm(e)){let n=Gs(e,this._hostLView),r=zs(e),i=n[O].data[r+8];return new Pn(i,n)}else return new Pn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=jg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Te}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ji(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Fi(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!iD(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new Ui(kn(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?l:this.parentInjector).get(ze,null);m&&(o=m)}let u=kn(c.componentType??{}),d=ji(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,Fi(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(dD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ae],l=new Gv(c,c[lt],c[Ae]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ta(s,i,o,r),e.attachToViewContainerRef(),sm(Fl(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=jg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Li(this._lContainer,n);r&&(Us(Fl(this._lContainer),n),wa(r[O],r))}detach(e){let n=this._adjustIndex(e,-1),r=Li(this._lContainer,n);return r&&Us(Fl(this._lContainer),n)!=null?new Vn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function jg(t){return t[Bs]}function Fl(t){return t[Bs]||(t[Bs]=[])}function VS(t,e){let n,r=e[t.index];return Vt(r)?n=r:(n=Ov(r,e,null,t),e[t.index]=n,ba(e,n)),BS(n,e,t,r),new Gv(n,t,e)}function $S(t,e){let n=t[Ne],r=n.createComment(""),i=ut(e,t),o=yv(n,i);return Zs(n,o,r,Sb(n,i),!1),r}var BS=zS,HS=()=>!1;function WS(t,e,n){return HS(t,e,n)}function zS(t,e,n,r){if(t[Ln])return;let i;n.type&8?i=Dt(r):i=$S(e,n),t[Ln]=i}var Ug=new Set;function zi(t){Ug.has(t)||(Ug.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var sn=class{},Vi=class{};var pu=class extends sn{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xs(this);let o=pm(e);this._bootstrapComponents=hv(o.bootstrap),this._r3Injector=Xm(e,n,[{provide:sn,useValue:this},{provide:jr,useValue:this.componentFactoryResolver},...r],Oe(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gu=class extends Vi{constructor(e){super(),this.moduleType=e}create(e){return new pu(this.moduleType,e,[])}};var ea=class extends sn{constructor(e){super(),this.componentFactoryResolver=new Xs(this),this.instance=null;let n=new Ri([...e.providers,{provide:sn,useValue:this},{provide:jr,useValue:this.componentFactoryResolver}],e.parent||Lu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ld(t,e,n=null){return new ea({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function qv(t){return qS(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function GS(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function qS(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function YS(t,e,n){return t[e]=n}function Vr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function KS(t,e,n,r){let i=Vr(t,e,n);return Vr(t,e+1,r)||i}function ZS(t){return(t.flags&32)===32}function QS(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Da(e,t,4,s||null,a||null);Mv(e,n,u,Lr(l,c)),Wu(e,u);let d=u.tView=od(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function mu(t,e,n,r,i,o,s,a,c,l){let u=n+st,d=e.firstCreatePass?QS(u,e,t,r,i,o,s,a,c):e.data[u];Hi(d,!1);let f=JS(e,t,d,n);Bu()&&rd(e,t,f,d),Un(f,t);let h=Ov(f,t,f,d);return t[u]=h,ba(t,h),WS(h,d,t),Fu(d)&&Tv(e,t,d),c!=null&&Av(t,d,l),d}function dt(t,e,n,r,i,o,s,a){let c=re(),l=dn(),u=Lr(l.consts,o);return mu(c,l,t,e,n,r,i,u,s,a),dt}var JS=XS;function XS(t,e,n,r){return Hu(!0),e[Ne].createComment("")}var Ti=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ti||{}),eT=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Vg=class t{constructor(){this.ngZone=y(te),this.scheduler=y(Fr),this.errorHandler=y(Ft,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ti.EarlyRead,Ti.Write,Ti.MixedReadWrite,Ti.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}};function tT(t,e,n,r){return Vr(t,va(),n)?e+Mu(n)+r:Wr}function we(t,e,n){let r=re(),i=va();if(Vr(r,i,e)){let o=dn(),s=ND();Hb(o,s,r,t,e,r[Ne],n,!1)}return we}function $g(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";sd(t,n,o[s],s,r)}var vu=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function jl(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function nT(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=t.at(o),u=e[o],d=jl(o,l,o,u,n);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let f=t.at(s),h=e[c],p=jl(s,f,c,h,n);if(p!==0){p<0&&t.updateValue(s,h),s--,c--;continue}let m=n(o,l),_=n(s,f),D=n(o,u);if(Object.is(D,_)){let B=n(c,h);Object.is(B,m)?(t.swap(o,s),t.updateValue(s,h),c--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new ta,i??=Hg(t,o,s,n),yu(t,r,o,D))t.updateValue(o,u),o++,s++;else if(i.has(D))r.set(m,t.detach(o)),s--;else{let B=t.create(o,e[o]);t.attach(o,B),o++,s++}}for(;o<=c;)Bg(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=t.at(o),d=l.value,f=jl(o,u,o,d,n);if(f!==0)f<0&&t.updateValue(o,d),o++,l=c.next();else{r??=new ta,i??=Hg(t,o,s,n);let h=n(o,d);if(yu(t,r,o,h))t.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(h))t.attach(o,t.create(o,d)),o++,s++,l=c.next();else{let p=n(o,u);r.set(p,t.detach(o)),s--}}}for(;!l.done;)Bg(t,r,n,t.length,l.value),l=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function yu(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Bg(t,e,n,r,i){if(yu(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Hg(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ta=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function ud(t,e){zi("NgControlFlow");let n=re(),r=va(),i=n[r]!==Wr?n[r]:-1,o=i!==-1?na(n,st+i):void 0,s=0;if(Vr(n,r,t)){let a=U(null);try{if(o!==void 0&&Fv(o,s),t!==-1){let c=st+t,l=na(n,c),u=Eu(n[O],c),d=ji(l,u.tView.ssrId),f=Sa(n,u,e,{dehydratedView:d});Ta(l,f,s,Fi(u,d))}}finally{U(a)}}else if(o!==void 0){let a=Lv(o,s);a!==void 0&&(a[Ce]=e)}}var _u=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Te}};function Yv(t){return t}var Iu=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Kv(t,e,n,r,i,o,s,a,c,l,u,d,f){zi("NgControlFlow");let h=re(),p=dn(),m=c!==void 0,_=re(),D=a?s.bind(_[ot][Ce]):s,B=new Iu(m,D);_[st+t]=B,mu(h,p,t+1,e,n,r,i,Lr(p.consts,o)),m&&mu(h,p,t+2,c,l,u,d,Lr(p.consts,f))}var wu=class extends vu{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Te}at(e){return this.getLView(e)[Ce].$implicit}attach(e,n){let r=n[xi];this.needsIndexUpdate||=e!==this.length,Ta(this.lContainer,n,e,Fi(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,rT(this.lContainer,e)}create(e,n){let r=ji(this.lContainer,this.templateTNode.tView.ssrId),i=Sa(this.hostLView,this.templateTNode,new _u(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){wa(e[O],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ce].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ce].$index=e}getLView(e){return iT(this.lContainer,e)}};function Zv(t){let e=U(null),n=ya();try{let r=re(),i=r[O],o=r[n],s=n+1,a=na(r,s);if(o.liveCollection===void 0){let l=Eu(i,s);o.liveCollection=new wu(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(nT(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=va(),u=c.length===0;if(Vr(r,l,u)){let d=n+2,f=na(r,d);if(u){let h=Eu(i,d),p=ji(f,h.tView.ssrId),m=Sa(r,h,void 0,{dehydratedView:p});Ta(f,m,0,Fi(h,p))}else Fv(f,0)}}}finally{U(e)}}function na(t,e){return t[e]}function rT(t,e){return Li(t,e)}function iT(t,e){return Lv(t,e)}function Eu(t,e){return ju(t,e)}function oT(t,e,n,r,i,o){let s=e.consts,a=Lr(s,i),c=Da(e,t,2,r,a);return Mv(e,n,c,Lr(s,o)),c.attrs!==null&&fu(c,c.attrs,!1),c.mergedAttrs!==null&&fu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function X(t,e,n,r){let i=re(),o=dn(),s=st+t,a=i[Ne],c=o.firstCreatePass?oT(s,o,i,e,n,r):o.data[s],l=sT(o,i,c,a,e,t);i[s]=l;let u=Fu(c);return Hi(c,!0),wv(a,l,c),!ZS(c)&&Bu()&&rd(o,i,l,c),pD()===0&&Un(l,i),gD(),u&&(Tv(o,i,c),Sv(o,c,i)),r!==null&&Av(i,c),X}function ee(){let t=Ge();Om()?wD():(t=t.parent,Hi(t,!1));let e=t;yD(e)&&_D(),mD();let n=dn();return n.firstCreatePass&&(Wu(n,t),Em(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&PD(e)&&$g(n,e,re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&kD(e)&&$g(n,e,re(),e.stylesWithoutHost,!1),ee}function $t(t,e,n,r){return X(t,e,n,r),ee(),$t}var sT=(t,e,n,r,i,o)=>(Hu(!0),pv(r,i,MD()));function dd(){return re()}var ra="en-US";var aT=ra;function cT(t){typeof t=="string"&&(aT=t.toLowerCase().replace(/_/g,"-"))}var lT=(t,e,n)=>{};function Pe(t,e,n,r){let i=re(),o=dn(),s=Ge();return dT(o,i,i[Ne],s,t,e,r),Pe}function uT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[$s],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function dT(t,e,n,r,i,o,s){let a=Fu(r),l=t.firstCreatePass&&iS(t),u=e[Ce],d=rS(e),f=!0;if(r.type&3||s){let m=ut(r,e),_=s?s(m):m,D=d.length,B=s?T=>s(Dt(T[r.index])):r.index,w=null;if(!s&&a&&(w=uT(t,e,i,r.index)),w!==null){let T=w.__ngLastListenerFn__||w;T.__ngNextListenerFn__=o,w.__ngLastListenerFn__=o,f=!1}else{o=zg(r,e,u,o),lT(m,i,o);let T=n.listen(_,i,o);d.push(o,T),l&&l.push(i,B,D,D+1)}}else o=zg(r,e,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let _=0;_<m;_+=2){let D=p[_],B=p[_+1],ie=e[D][B].subscribe(o),F=d.length;d.push(o,ie),l&&l.push(i,r.index,F,-(F+1))}}}function Wg(t,e,n,r){let i=U(null);try{return It(6,e,n),n(r)!==!1}catch(o){return kv(t,o),!1}finally{It(7,e,n),U(i)}}function zg(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?un(t.index,e):e;cd(s,5);let a=Wg(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=Wg(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Ye(t=1){return AD(t)}function De(t,e=""){let n=re(),r=dn(),i=t+st,o=r.firstCreatePass?Da(r,i,1,e,null):r.data[i],s=fT(r,n,o,e,t);n[i]=s,Bu()&&rd(r,n,s,o),Hi(o,!1)}var fT=(t,e,n,r,i)=>(Hu(!0),mb(e[Ne],r));function Bn(t){return hn("",t,""),Bn}function hn(t,e,n){let r=re(),i=tT(r,t,e,n);return i!==Wr&&oS(r,ya(),i),hn}var hT=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=vm(!1,n.type),i=r.length>0?ld([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=C({token:t,providedIn:"environment",factory:()=>new t(k(ze))})}}return t})();function pn(t){zi("NgStandalone"),t.getStandaloneInjector=e=>e.get(hT).getOrCreateStandaloneInjector(t)}function Qv(t,e,n,r,i){return gT(re(),ED(),t,e,n,r,i)}function pT(t,e){let n=t[e];return n===Wr?void 0:n}function gT(t,e,n,r,i,o,s){let a=e+n;return KS(t,a,i,o)?YS(t,a+2,s?r.call(s,i,o):r(i,o)):pT(t,a+2)}var an=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Jv=new an("18.2.13");var Ra=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var Xv=new S("");function Gi(t){return!!t&&typeof t.then=="function"}function ey(t){return!!t&&typeof t.subscribe=="function"}var ty=new S(""),ny=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=y(ty,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Gi(o))n.push(o);else if(ey(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),fd=new S("");function mT(){Lp(()=>{throw new E(600,!1)})}function vT(t){return t.isBoundToModule}var yT=10;function _T(t,e,n){try{let r=n();return Gi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Hn=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=y(tb),this.afterRenderManager=y(eT),this.zonelessEnabled=y(Na),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Se,this.afterTick=new Se,this.componentTypes=[],this.components=[],this.isStable=y(Hr).hasPendingTasks.pipe(V(n=>!n)),this._injector=y(ze)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Js;if(!this._injector.get(ny).done){let f=!i&&hm(n),h=!1;throw new E(405,h)}let s;i?s=n:s=this._injector.get(jr).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=vT(s)?void 0:this._injector.get(sn),c=r||s.selector,l=s.create(at.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Xv,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),ks(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new E(101,!1);let n=U(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,U(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Ur,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<yT;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)IT(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ha(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ks(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(fd,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ks(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ks(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function IT(t,e,n,r){if(!n&&!ha(t))return;Vv(t,e,n&&!r?0:1)}var Cu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},hd=(()=>{class t{compileModuleSync(n){return new gu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=pm(n),o=hv(i.declarations).reduce((s,a)=>{let c=kn(a);return c&&s.push(new Ui(c)),s},[]);return new Cu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wT=(()=>{class t{constructor(){this.zone=y(te),this.changeDetectionScheduler=y(Fr),this.applicationRef=y(Hn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ET=new S("",{factory:()=>!1});function ry({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new te(oe(I({},oy()),{scheduleInRootZone:n})),[{provide:te,useFactory:t},{provide:xr,multi:!0,useFactory:()=>{let r=y(wT,{optional:!0});return()=>r.initialize()}},{provide:xr,multi:!0,useFactory:()=>{let r=y(CT);return()=>{r.initialize()}}},e===!0?{provide:Wv,useValue:!0}:[],{provide:zv,useValue:n??ev}]}function iy(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=ry({ngZoneFactory:()=>{let i=oy(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&zi("NgZone_CoalesceEvent"),new te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return ln([{provide:ET,useValue:!0},{provide:Na,useValue:!1},r])}function oy(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var CT=(()=>{class t{constructor(){this.subscription=new se,this.initialized=!1,this.zone=y(te),this.pendingTasks=y(Hr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var DT=(()=>{class t{constructor(){this.appRef=y(Hn),this.taskService=y(Hr),this.ngZone=y(te),this.zonelessEnabled=y(Na),this.disableScheduling=y(Wv,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new se,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ys):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(y(zv,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ru||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ng:nv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ys+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ng(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function bT(){return typeof $localize<"u"&&$localize.locale||ra}var pd=new S("",{providedIn:"root",factory:()=>y(pd,x.Optional|x.SkipSelf)||bT()});var Du=new S("");function Rs(t){return!t.moduleRef}function ST(t){let e=Rs(t)?t.r3Injector:t.moduleRef.injector,n=e.get(te);return n.run(()=>{Rs(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ft,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Rs(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Du);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Du);s.add(o),t.moduleRef.onDestroy(()=>{ks(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return _T(r,n,()=>{let o=e.get(ny);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(pd,ra);if(cT(s||ra),Rs(t)){let a=e.get(Hn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return TT(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function TT(t,e){let n=t.injector.get(Hn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new E(-403,!1);e.push(t)}var Ls=null;function AT(t=[],e){return at.create({name:e,providers:[{provide:la,useValue:"platform"},{provide:Du,useValue:new Set([()=>Ls=null])},...t]})}function NT(t=[]){if(Ls)return Ls;let e=AT(t);return Ls=e,mT(),MT(e),e}function MT(t){t.get(Zu,null)?.forEach(n=>n())}var qi=(()=>{class t{static{this.__NG_ELEMENT_ID__=RT}}return t})();function RT(t){return xT(Ge(),re(),(t&16)===16)}function xT(t,e,n){if(da(t)&&!n){let r=un(t.index,e);return new Vn(r,r)}else if(t.type&175){let r=e[ot];return new Vn(r,e)}return null}var bu=class{constructor(){}supports(e){return qv(e)}create(e){return new Su(e)}},OT=(t,e)=>e,Su=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||OT}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Gg(r,i,o)?n:r,a=Gg(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!qv(e))throw new E(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,GS(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Tu(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ia),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ia),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Tu=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Au=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ia=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Au,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Gg(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function qg(){return new gd([new bu])}var gd=(()=>{class t{static{this.\u0275prov=C({token:t,providedIn:"root",factory:qg})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||qg()),deps:[[t,new om,new ct]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return t})();function sy(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=NT(r),o=[ry({}),{provide:Fr,useExisting:DT},...n||[]],s=new ea({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return ST({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var fy=null;function Gr(){return fy}function hy(t){fy??=t}var xa=class{};var Ke=new S(""),py=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(FT),providedIn:"platform"})}}return t})();var FT=(()=>{class t extends py{constructor(){super(),this._doc=y(Ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gr().getBaseHref(this._doc)}onPopState(n){let r=Gr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Gr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function gy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ay(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Wn(t){return t&&t[0]!=="?"?"?"+t:t}var Pa=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(my),providedIn:"root"})}}return t})(),jT=new S(""),my=(()=>{class t extends Pa{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??y(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return gy(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Wn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(k(py),k(jT,8))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Yi=(()=>{class t{constructor(n){this._subject=new me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=$T(ay(cy(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Wn(r))}normalize(n){return t.stripTrailingSlash(VT(this._basePath,cy(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Wn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Wn}static{this.joinWithSlash=gy}static{this.stripTrailingSlash=ay}static{this.\u0275fac=function(r){return new(r||t)(k(Pa))}}static{this.\u0275prov=C({token:t,factory:()=>UT(),providedIn:"root"})}}return t})();function UT(){return new Yi(k(Pa))}function VT(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function cy(t){return t.replace(/\/index.html$/,"")}function $T(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function vy(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var md=/\s+/,ly=[],yy=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=ly,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(md):ly}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(md):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(md).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(qe(Wi),qe(Ma))}}static{this.\u0275dir=$r({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var vd=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},_y=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),uy(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);uy(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(qe(zr),qe(Aa),qe(gd))}}static{this.\u0275dir=$r({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function uy(t,e){t.context.$implicit=e.item}var ka=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new yd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){dy("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){dy("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(qe(zr),qe(Aa))}}static{this.\u0275dir=$r({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),yd=class{constructor(){this.$implicit=null,this.ngIf=null}};function dy(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Oe(e)}'.`)}var zn=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=ca({type:t})}static{this.\u0275inj=oa({})}}return t})(),Iy="browser",BT="server";function _d(t){return t===BT}var Oa=class{};var Cd=class extends xa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dd=class t extends Cd{static makeCurrent(){hy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=HT();return n==null?null:WT(n)}resetBaseElement(){Ki=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vy(document.cookie,e)}},Ki=null;function HT(){return Ki=Ki||document.querySelector("base"),Ki?Ki.getAttribute("href"):null}function WT(t){return new URL(t,document.baseURI).pathname}var zT=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),bd=new S(""),Dy=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(k(bd),k(te))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),La=class{constructor(e){this._doc=e}},wd="ng-app-id",by=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_d(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${wd}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(wd),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(wd,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(k(Ke),k(Ku),k(Qu,8),k(fn))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),Ed={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Td=/%COMP%/g,Sy="%COMP%",GT=`_nghost-${Sy}`,qT=`_ngcontent-${Sy}`,YT=!0,KT=new S("",{providedIn:"root",factory:()=>YT});function ZT(t){return qT.replace(Td,t)}function QT(t){return GT.replace(Td,t)}function Ty(t,e){return e.map(n=>n.replace(Td,t))}var wy=(()=>{class t{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=_d(a),this.defaultRenderer=new Zi(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Et.ShadowDom&&(r=oe(I({},r),{encapsulation:Et.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Fa?i.applyToHost(n):i instanceof Qi&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Et.Emulated:o=new Fa(c,l,r,this.appId,u,s,a,d);break;case Et.ShadowDom:return new Sd(c,l,n,r,s,a,this.nonce,d);default:o=new Qi(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(k(Dy),k(by),k(Ku),k(KT),k(Ke),k(fn),k(te),k(Qu))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),Zi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ed[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ey(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ey(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Ed[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ed[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&($n.DashCase|$n.Important)?e.style.setProperty(n,r,i&$n.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&$n.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Gr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Ey(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Sd=class extends Zi{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ty(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qi=class extends Zi{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Ty(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Fa=class extends Qi{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=ZT(l),this.hostAttr=QT(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},JT=(()=>{class t extends La{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(k(Ke))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),Cy=["alt","control","meta","shift"],XT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},e0={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},t0=(()=>{class t extends La{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gr().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Cy.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=XT[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Cy.forEach(s=>{if(s!==i){let a=e0[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(k(Ke))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})();function Ay(t,e){return sy(I({rootComponent:t},n0(e)))}function n0(t){return{appProviders:[...a0,...t?.providers??[]],platformProviders:s0}}function r0(){Dd.makeCurrent()}function i0(){return new Ft}function o0(){return lv(document),document}var s0=[{provide:fn,useValue:Iy},{provide:Zu,useValue:r0,multi:!0},{provide:Ke,useFactory:o0,deps:[]}];var a0=[{provide:la,useValue:"root"},{provide:Ft,useFactory:i0,deps:[]},{provide:bd,useClass:JT,multi:!0,deps:[Ke,te,fn]},{provide:bd,useClass:t0,multi:!0,deps:[Ke]},wy,by,Dy,{provide:Ur,useExisting:wy},{provide:Oa,useClass:zT,deps:[]},[]];var Ny=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(k(Ke))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var R="primary",go=Symbol("RouteTitle"),xd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Jr(t){return new xd(t)}function l0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function u0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bt(t[n],e[n]))return!1;return!0}function bt(t,e){let n=t?Od(t):void 0,r=e?Od(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Fy(t[i],e[i]))return!1;return!0}function Od(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Fy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function jy(t){return t.length>0?t[t.length-1]:null}function mn(t){return Cl(t)?t:Gi(t)?ue(Promise.resolve(t)):N(t)}var d0={exact:Vy,subset:$y},Uy={exact:f0,subset:h0,ignored:()=>!0};function My(t,e,n){return d0[n.paths](t.root,e.root,n.matrixParams)&&Uy[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function f0(t,e){return bt(t,e)}function Vy(t,e,n){if(!qn(t.segments,e.segments)||!Va(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Vy(t.children[r],e.children[r],n))return!1;return!0}function h0(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Fy(t[n],e[n]))}function $y(t,e,n){return By(t,e,e.segments,n)}function By(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!qn(i,n)||e.hasChildren()||!Va(i,n,r))}else if(t.segments.length===n.length){if(!qn(t.segments,n)||!Va(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!$y(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!qn(t.segments,i)||!Va(t.segments,i,r)||!t.children[R]?!1:By(t.children[R],e,o,r)}}function Va(t,e,n){return e.every((r,i)=>Uy[n](t[i].parameters,r.parameters))}var Ht=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jr(this.queryParams),this._queryParamMap}toString(){return m0.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $a(this)}},Gn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Jr(this.parameters),this._parameterMap}toString(){return Wy(this)}};function p0(t,e){return qn(t,e)&&t.every((n,r)=>bt(n.parameters,e[r].parameters))}function qn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function g0(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===R&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==R&&(n=n.concat(e(i,r)))}),n}var sf=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>new io,providedIn:"root"})}}return t})(),io=class{parse(e){let n=new kd(e);return new Ht(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ji(e.root,!0)}`,r=_0(e.queryParams),i=typeof e.fragment=="string"?`#${v0(e.fragment)}`:"";return`${n}${r}${i}`}},m0=new io;function $a(t){return t.segments.map(e=>Wy(e)).join("/")}function Ji(t,e){if(!t.hasChildren())return $a(t);if(e){let n=t.children[R]?Ji(t.children[R],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==R&&r.push(`${i}:${Ji(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=g0(t,(r,i)=>i===R?[Ji(t.children[R],!1)]:[`${i}:${Ji(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[R]!=null?`${$a(t)}/${n[0]}`:`${$a(t)}/(${n.join("//")})`}}function Hy(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ja(t){return Hy(t).replace(/%3B/gi,";")}function v0(t){return encodeURI(t)}function Pd(t){return Hy(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ba(t){return decodeURIComponent(t)}function Ry(t){return Ba(t.replace(/\+/g,"%20"))}function Wy(t){return`${Pd(t.path)}${y0(t.parameters)}`}function y0(t){return Object.entries(t).map(([e,n])=>`;${Pd(e)}=${Pd(n)}`).join("")}function _0(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ja(n)}=${ja(i)}`).join("&"):`${ja(n)}=${ja(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var I0=/^[^\/()?;#]+/;function Ad(t){let e=t.match(I0);return e?e[0]:""}var w0=/^[^\/()?;=#]+/;function E0(t){let e=t.match(w0);return e?e[0]:""}var C0=/^[^=?&#]+/;function D0(t){let e=t.match(C0);return e?e[0]:""}var b0=/^[^&#]+/;function S0(t){let e=t.match(b0);return e?e[0]:""}var kd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[R]=new Y(e,n)),r}parseSegment(){let e=Ad(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new Gn(Ba(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=E0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ad(this.remaining);i&&(r=i,this.capture(r))}e[Ba(n)]=Ba(r)}parseQueryParam(e){let n=D0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=S0(this.remaining);s&&(r=s,this.capture(r))}let i=Ry(n),o=Ry(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ad(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=R);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[R]:new Y([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function zy(t){return t.segments.length>0?new Y([],{[R]:t}):t}function Gy(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Gy(i);if(r===R&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Y(t.segments,e);return T0(n)}function T0(t){if(t.numberOfChildren===1&&t.children[R]){let e=t.children[R];return new Y(t.segments.concat(e.segments),e.children)}return t}function oo(t){return t instanceof Ht}function A0(t,e,n=null,r=null){let i=qy(t);return Yy(i,e,n,r)}function qy(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Y(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=zy(r);return e??i}function Yy(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Nd(i,i,i,n,r);let o=N0(e);if(o.toRoot())return Nd(i,i,new Y([],{}),n,r);let s=M0(o,i,t),a=s.processChildren?to(s.segmentGroup,s.index,o.commands):Zy(s.segmentGroup,s.index,o.commands);return Nd(i,s.segmentGroup,a,n,r)}function Ha(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function so(t){return typeof t=="object"&&t!=null&&t.outlets}function Nd(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=Ky(t,e,n);let a=zy(Gy(s));return new Ht(a,o,i)}function Ky(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Ky(o,e,n)}),new Y(t.segments,r)}var Wa=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ha(r[0]))throw new E(4003,!1);let i=r.find(so);if(i&&i!==jy(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function N0(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Wa(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Wa(n,e,r)}var Kr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function M0(t,e,n){if(t.isAbsolute)return new Kr(e,!0,0);if(!n)return new Kr(e,!1,NaN);if(n.parent===null)return new Kr(n,!0,0);let r=Ha(t.commands[0])?0:1,i=n.segments.length-1+r;return R0(n,i,t.numberOfDoubleDots)}function R0(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Kr(r,!1,i-o)}function x0(t){return so(t[0])?t[0].outlets:{[R]:t}}function Zy(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return to(t,e,n);let r=O0(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Y(t.segments.slice(0,r.pathIndex),{});return o.children[R]=new Y(t.segments.slice(r.pathIndex),t.children),to(o,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?Ld(t,e,n):r.match?to(t,0,i):Ld(t,e,n)}function to(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=x0(n),i={};if(Object.keys(r).some(o=>o!==R)&&t.children[R]&&t.numberOfChildren===1&&t.children[R].segments.length===0){let o=to(t.children[R],e,n);return new Y(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Zy(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Y(t.segments,i)}}function O0(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(so(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Oy(c,l,s))return o;r+=2}else{if(!Oy(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ld(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(so(o)){let c=P0(o.outlets);return new Y(r,c)}if(i===0&&Ha(n[0])){let c=t.segments[e];r.push(new Gn(c.path,xy(n[0]))),i++;continue}let s=so(o)?o.outlets[R]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ha(a)?(r.push(new Gn(s,xy(a))),i+=2):(r.push(new Gn(s,{})),i++)}return new Y(r,{})}function P0(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ld(new Y([],{}),0,r))}),e}function xy(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Oy(t,e,n){return t==n.path&&bt(e,n.parameters)}var no="imperative",Ee=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ee||{}),Ze=class{constructor(e,n){this.id=e,this.url=n}},ao=class extends Ze{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ee.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yn=class extends Ze{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ee.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$e=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}($e||{}),Fd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Fd||{}),Bt=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ee.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kn=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ee.NavigationSkipped}},co=class extends Ze{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ee.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},za=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends Ze{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ee.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vd=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bd=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hd=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Wd=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zd=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gd=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lo=class{},Xr=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function k0(t,e){return t.providers&&!t._injector&&(t._injector=ld(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ft(t){return t.outlet||R}function L0(t,e){let n=t.filter(r=>ft(r)===e);return n.push(...t.filter(r=>ft(r)!==e)),n}function mo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Yd=class{get injector(){return mo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ja(this.rootInjector),this.attachRef=null}},Ja=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Yd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(k(ze))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ga=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Kd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Kd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Zd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zd(e,this._root).map(n=>n.value)}};function Kd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Kd(t,n);if(r)return r}return null}function Zd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Zd(t,n);if(r.length)return r.unshift(e),r}return[]}var Ve=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var qa=class extends Ga{constructor(e,n){super(e),this.snapshot=n,af(this,e)}toString(){return this.snapshot.toString()}};function Qy(t){let e=F0(t),n=new Ie([new Gn("",{})]),r=new Ie({}),i=new Ie({}),o=new Ie({}),s=new Ie(""),a=new ei(n,r,o,s,i,R,t,e.root);return a.snapshot=e.root,new qa(new Ve(a,[]),e)}function F0(t){let e={},n={},r={},i="",o=new Zr([],e,r,i,n,R,t,null,{});return new Ka("",new Ve(o,[]))}var ei=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(V(l=>l[go]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(e=>Jr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(e=>Jr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ya(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&Xy(i)&&(r.resolve[go]=i.title),r}var Zr=class{get title(){return this.data?.[go]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ka=class extends Ga{constructor(e,n){super(n),this.url=e,af(this,n)}toString(){return Jy(this._root)}};function af(t,e){e.value._routerState=t,e.children.forEach(n=>af(t,n))}function Jy(t){let e=t.children.length>0?` { ${t.children.map(Jy).join(", ")} } `:"";return`${t.value}${e}`}function Md(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),bt(e.params,n.params)||t.paramsSubject.next(n.params),u0(e.url,n.url)||t.urlSubject.next(n.url),bt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Qd(t,e){let n=bt(t.params,e.params)&&p0(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Qd(t.parent,e.parent))}function Xy(t){return typeof t.title=="string"||t.title===null}var j0=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=R,this.activateEvents=new me,this.deactivateEvents=new me,this.attachEvents=new me,this.detachEvents=new me,this.parentContexts=y(Ja),this.location=y(zr),this.changeDetector=y(qi),this.inputBinder=y(cf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Jd(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=$r({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fa]})}}return t})(),Jd=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ei?this.route:e===Ja?this.childContexts:this.parent.get(e,n)}},cf=new S("");function U0(t,e,n){let r=uo(t,e._root,n?n._root:void 0);return new qa(r,e)}function uo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=V0(t,e,n);return new Ve(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>uo(t,a)),s}}let r=$0(e.value),i=e.children.map(o=>uo(t,o));return new Ve(r,i)}}function V0(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return uo(t,r,i);return uo(t,r)})}function $0(t){return new ei(new Ie(t.url),new Ie(t.params),new Ie(t.queryParams),new Ie(t.fragment),new Ie(t.data),t.outlet,t.component,t)}var fo=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},e_="ngNavigationCancelingError";function Za(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=t_(!1,$e.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function t_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[e_]=!0,n.cancellationCode=e,n}function B0(t){return n_(t)&&oo(t.url)}function n_(t){return!!t&&t[e_]}var H0=(t,e,n,r)=>V(i=>(new Xd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Xd=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Md(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Yr(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Yr(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Md(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Md(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Qa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qr=class{constructor(e,n){this.component=e,this.route=n}};function W0(t,e,n){let r=t._root,i=e?e._root:null;return Xi(r,i,n,[r.value])}function z0(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ni(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Jg(t)?t:e.get(t):r}function Xi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yr(e);return t.children.forEach(s=>{G0(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ro(a,n.getContext(s),i)),i}function G0(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=q0(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Qa(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Xi(t,e,a?a.children:null,r,i):Xi(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qr(a.outlet.component,s))}else s&&ro(e,a,i),i.canActivateChecks.push(new Qa(r)),o.component?Xi(t,null,a?a.children:null,r,i):Xi(t,null,n,r,i);return i}function q0(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!qn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!qn(t.url,e.url)||!bt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qd(t,e)||!bt(t.queryParams,e.queryParams);case"paramsChange":default:return!Qd(t,e)}}function ro(t,e,n){let r=Yr(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ro(s,e.children.getContext(o),n):ro(s,null,n):ro(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Qr(e.outlet.component,i)):n.canDeactivateChecks.push(new Qr(null,i)):n.canDeactivateChecks.push(new Qr(null,i))}function vo(t){return typeof t=="function"}function Y0(t){return typeof t=="boolean"}function K0(t){return t&&vo(t.canLoad)}function Z0(t){return t&&vo(t.canActivate)}function Q0(t){return t&&vo(t.canActivateChild)}function J0(t){return t&&vo(t.canDeactivate)}function X0(t){return t&&vo(t.canMatch)}function r_(t){return t instanceof kt||t?.name==="EmptyError"}var Ua=Symbol("INITIAL_VALUE");function ti(){return nt(t=>Ts(t.map(e=>e.pipe(Lt(1),Al(Ua)))).pipe(V(e=>{for(let n of e)if(n!==!0){if(n===Ua)return Ua;if(n===!1||eA(n))return n}return!0}),tt(e=>e!==Ua),Lt(1)))}function eA(t){return oo(t)||t instanceof fo}function tA(t,e){return de(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?N(oe(I({},n),{guardsResult:!0})):nA(s,r,i,t).pipe(de(a=>a&&Y0(a)?rA(r,o,t,e):N(a)),V(a=>oe(I({},n),{guardsResult:a})))})}function nA(t,e,n,r){return ue(t).pipe(de(i=>cA(i.component,i.route,n,e,r)),yt(i=>i!==!0,!0))}function rA(t,e,n,r){return ue(e).pipe(Dr(i=>Cr(oA(i.route.parent,r),iA(i.route,r),aA(t,i.path,n),sA(t,i.route,n))),yt(i=>i!==!0,!0))}function iA(t,e){return t!==null&&e&&e(new Gd(t)),N(!0)}function oA(t,e){return t!==null&&e&&e(new Wd(t)),N(!0)}function sA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(o=>As(()=>{let s=mo(e)??n,a=ni(o,s),c=Z0(a)?a.canActivate(e,t):jt(s,()=>a(e,t));return mn(c).pipe(yt())}));return N(i).pipe(ti())}function aA(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>z0(s)).filter(s=>s!==null).map(s=>As(()=>{let a=s.guards.map(c=>{let l=mo(s.node)??n,u=ni(c,l),d=Q0(u)?u.canActivateChild(r,t):jt(l,()=>u(r,t));return mn(d).pipe(yt())});return N(a).pipe(ti())}));return N(o).pipe(ti())}function cA(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return N(!0);let s=o.map(a=>{let c=mo(e)??i,l=ni(a,c),u=J0(l)?l.canDeactivate(t,e,n,r):jt(c,()=>l(t,e,n,r));return mn(u).pipe(yt())});return N(s).pipe(ti())}function lA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let o=i.map(s=>{let a=ni(s,t),c=K0(a)?a.canLoad(e,n):jt(t,()=>a(e,n));return mn(c)});return N(o).pipe(ti(),i_(r))}function i_(t){return gl(fe(e=>{if(typeof e!="boolean")throw Za(t,e)}),V(e=>e===!0))}function uA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let o=i.map(s=>{let a=ni(s,t),c=X0(a)?a.canMatch(e,n):jt(t,()=>a(e,n));return mn(c)});return N(o).pipe(ti(),i_(r))}var ho=class{constructor(e){this.segmentGroup=e||null}},po=class extends Error{constructor(e){super(),this.urlTree=e}};function qr(t){return Er(new ho(t))}function dA(t){return Er(new E(4e3,!1))}function fA(t){return Er(t_(!1,$e.GuardRejected))}var ef=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[R])return dA(`${e.redirectTo}`);i=i.children[R]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:m}=i,_=jt(o,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:m}));if(_ instanceof Ht)throw new po(_);n=_}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new po(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Ht(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Y(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},tf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hA(t,e,n,r,i){let o=o_(t,e,n);return o.matched?(r=k0(e,r),uA(r,e,n,i).pipe(V(s=>s===!0?o:I({},tf)))):N(o)}function o_(t,e,n){if(e.path==="**")return pA(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},tf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||l0)(n,t,e);if(!i)return I({},tf);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?I(I({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function pA(t){return{matched:!0,parameters:t.length>0?jy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Py(t,e,n,r){return n.length>0&&vA(t,n,r)?{segmentGroup:new Y(e,mA(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&yA(t,n,r)?{segmentGroup:new Y(t.segments,gA(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function gA(t,e,n,r){let i={};for(let o of n)if(Xa(t,e,o)&&!r[ft(o)]){let s=new Y([],{});i[ft(o)]=s}return I(I({},r),i)}function mA(t,e){let n={};n[R]=e;for(let r of t)if(r.path===""&&ft(r)!==R){let i=new Y([],{});n[ft(r)]=i}return n}function vA(t,e,n){return n.some(r=>Xa(t,e,r)&&ft(r)!==R)}function yA(t,e,n){return n.some(r=>Xa(t,e,r))}function Xa(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function _A(t,e,n){return e.length===0&&!t.children[n]}var nf=class{};function IA(t,e,n,r,i,o,s="emptyOnly"){return new rf(t,e,n,r,i,s,o).recognize()}var wA=31,rf=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ef(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}recognize(){let e=Py(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(V(({children:n,rootSnapshot:r})=>{let i=new Ve(r,n),o=new Ka("",i),s=A0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Zr([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),R,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,R,n).pipe(V(r=>({children:r,rootSnapshot:n})),Xt(r=>{if(r instanceof po)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ho?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(V(s=>s instanceof Ve?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ue(o).pipe(Dr(s=>{let a=r.children[s],c=L0(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Tl((s,a)=>(s.push(...a),s)),en(null),Sl(),de(s=>{if(s===null)return qr(r);let a=s_(s);return EA(a),N(a)}))}processSegment(e,n,r,i,o,s,a){return ue(n).pipe(Dr(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Xt(l=>{if(l instanceof ho)return N(null);throw l}))),yt(c=>!!c),Xt(c=>{if(r_(c))return _A(r,i,o)?N(new nf):qr(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return ft(r)!==s&&(s===R||!Xa(i,o,r))?qr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):qr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=o_(n,i,o);if(!c)return qr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wA&&(this.allowRedirects=!1));let h=new Zr(o,l,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,ky(i),ft(i),i.component??i._loadedComponent??null,i,Ly(i)),p=Ya(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(de(_=>this.processSegment(e,r,n,_.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=hA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(nt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(nt(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Zr(f,d,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,ky(r),ft(r),r.component??r._loadedComponent??null,r,Ly(r)),m=Ya(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:_,slicedSegments:D}=Py(n,f,h,l);if(D.length===0&&_.hasChildren())return this.processChildren(u,l,_,p).pipe(V(w=>new Ve(p,w)));if(l.length===0&&D.length===0)return N(new Ve(p,[]));let B=ft(r)===o;return this.processSegment(u,l,_,D,B?R:o,!0,p).pipe(V(w=>new Ve(p,w instanceof Ve?[w]:[])))}))):qr(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):lA(e,n,r,this.urlSerializer).pipe(de(i=>i?this.configLoader.loadChildren(e,n).pipe(fe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):fA(n))):N({routes:[],injector:e})}};function EA(t){t.sort((e,n)=>e.value.outlet===R?-1:n.value.outlet===R?1:e.value.outlet.localeCompare(n.value.outlet))}function CA(t){let e=t.value.routeConfig;return e&&e.path===""}function s_(t){let e=[],n=new Set;for(let r of t){if(!CA(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=s_(r.children);e.push(new Ve(r.value,i))}return e.filter(r=>!n.has(r))}function ky(t){return t.data||{}}function Ly(t){return t.resolve||{}}function DA(t,e,n,r,i,o){return de(s=>IA(t,e,n,r,s.extractedUrl,i,o).pipe(V(({state:a,tree:c})=>oe(I({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function bA(t,e){return de(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of a_(c))s.add(l);let a=0;return ue(s).pipe(Dr(c=>o.has(c)?SA(c,r,t,e):(c.data=Ya(c,c.parent,t).resolve,N(void 0))),fe(()=>a++),br(1),de(c=>a===s.size?N(n):Ue))})}function a_(t){let e=t.children.map(n=>a_(n)).flat();return[t,...e]}function SA(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Xy(i)&&(o[go]=i.title),TA(o,t,e,r).pipe(V(s=>(t._resolvedData=s,t.data=Ya(t,t.parent,n).resolve,null)))}function TA(t,e,n,r){let i=Od(t);if(i.length===0)return N({});let o={};return ue(i).pipe(de(s=>AA(t[s],e,n,r).pipe(yt(),fe(a=>{if(a instanceof fo)throw Za(new io,a);o[s]=a}))),br(1),bl(o),Xt(s=>r_(s)?Ue:Er(s)))}function AA(t,e,n,r){let i=mo(e)??r,o=ni(t,i),s=o.resolve?o.resolve(e,n):jt(i,()=>o(e,n));return mn(s)}function Rd(t){return nt(e=>{let n=t(e);return n?ue(n).pipe(V(()=>e)):N(e)})}var c_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===R);return r}getResolvedTitleForRoute(n){return n.data[go]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(NA),providedIn:"root"})}}return t})(),NA=(()=>{class t extends c_{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(k(Ny))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lf=new S("",{providedIn:"root",factory:()=>({})}),MA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=cn({type:t,selectors:[["ng-component"]],standalone:!0,features:[pn],decls:1,vars:0,template:function(r,i){r&1&&$t(0,"router-outlet")},dependencies:[j0],encapsulation:2})}}return t})();function uf(t){let e=t.children&&t.children.map(uf),n=e?oe(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==R&&(n.component=MA),n}var df=new S(""),RA=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=y(hd)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return N(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=mn(n.loadComponent()).pipe(V(l_),fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),bi(()=>{this.componentLoaders.delete(n)})),i=new yr(r,()=>new Se).pipe(vr());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=xA(r,this.compiler,n,this.onLoadEndListener).pipe(bi(()=>{this.childrenLoaders.delete(r)})),s=new yr(o,()=>new Se).pipe(vr());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function xA(t,e,n,r){return mn(t.loadChildren()).pipe(V(l_),de(i=>i instanceof Vi||Array.isArray(i)?N(i):ue(e.compileModuleAsync(i))),V(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(df,[],{optional:!0,self:!0}).flat()),{routes:s.map(uf),injector:o}}))}function OA(t){return t&&typeof t=="object"&&"default"in t}function l_(t){return OA(t)?t.default:t}var ff=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(PA),providedIn:"root"})}}return t})(),PA=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kA=new S("");var LA=new S(""),FA=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Se,this.transitionAbortSubject=new Se,this.configLoader=y(RA),this.environmentInjector=y(ze),this.urlSerializer=y(sf),this.rootContexts=y(Ja),this.location=y(Yi),this.inputBindingEnabled=y(cf,{optional:!0})!==null,this.titleStrategy=y(c_),this.options=y(lf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=y(ff),this.createViewTransition=y(kA,{optional:!0}),this.navigationErrorHandler=y(LA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Bd(i)),r=i=>this.events.next(new Hd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(oe(I(I({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ie({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:no,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tt(o=>o.id!==0),V(o=>oe(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nt(o=>{let s=!1,a=!1;return N(o).pipe(nt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",$e.SupersededByNewNavigation),Ue;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?oe(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Kn(c.id,this.urlSerializer.serialize(c.rawUrl),d,Fd.IgnoredSameUrlNavigation)),c.resolve(!1),Ue}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return N(c).pipe(nt(d=>{let f=this.transitions?.getValue();return this.events.next(new ao(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Ue:Promise.resolve(d)}),DA(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),fe(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=oe(I({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new za(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:m}=c,_=new ao(d,this.urlSerializer.serialize(f),h,p);this.events.next(_);let D=Qy(this.rootComponentType).snapshot;return this.currentTransition=o=oe(I({},c),{targetSnapshot:D,urlAfterRedirects:f,extras:oe(I({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(o)}else{let d="";return this.events.next(new Kn(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Fd.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ue}}),fe(c=>{let l=new jd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),V(c=>(this.currentTransition=o=oe(I({},c),{guards:W0(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),tA(this.environmentInjector,c=>this.events.next(c)),fe(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Za(this.urlSerializer,c.guardsResult);let l=new Ud(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),tt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",$e.GuardRejected),!1)),Rd(c=>{if(c.guards.canActivateChecks.length)return N(c).pipe(fe(l=>{let u=new Vd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),nt(l=>{let u=!1;return N(l).pipe(bA(this.paramsInheritanceStrategy,this.environmentInjector),fe({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",$e.NoDataFromResolver)}}))}),fe(l=>{let u=new $d(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Rd(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(fe(f=>{u.component=f}),V(()=>{})));for(let f of u.children)d.push(...l(f));return d};return Ts(l(c.targetSnapshot.root)).pipe(en(null),Lt(1))}),Rd(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?ue(u).pipe(V(()=>o)):N(o)}),V(c=>{let l=U0(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=oe(I({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),fe(()=>{this.events.next(new lo)}),H0(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Lt(1),fe({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Nl(this.transitionAbortSubject.pipe(fe(c=>{throw c}))),bi(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",$e.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xt(c=>{if(a=!0,n_(c))this.events.next(new Bt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),B0(c)?this.events.next(new Xr(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new co(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let u=jt(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof fo){let{message:d,cancellationCode:f}=Za(this.urlSerializer,u);this.events.next(new Bt(o.id,this.urlSerializer.serialize(o.extractedUrl),d,f)),this.events.next(new Xr(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=n.errorHandler(c);o.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Ue}))}))}cancelNavigationTransition(n,r,i){let o=new Bt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function jA(t){return t!==no}var UA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(VA),providedIn:"root"})}}return t})(),of=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},VA=(()=>{class t extends of{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gu(t)))(i||t)}})()}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),u_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y($A),providedIn:"root"})}}return t})(),$A=(()=>{class t extends u_{constructor(){super(...arguments),this.location=y(Yi),this.urlSerializer=y(sf),this.options=y(lf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=y(ff),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ht,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Qy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ao)this.stateMemento=this.createStateMemento();else if(n instanceof Kn)this.rawUrlTree=r.initialUrl;else if(n instanceof za){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof lo?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Bt&&(n.code===$e.GuardRejected||n.code===$e.NoDataFromResolver)?this.restoreHistory(r):n instanceof co?this.restoreHistory(r,!0):n instanceof Yn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Ht?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=I(I({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=I(I({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gu(t)))(i||t)}})()}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),eo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(eo||{});function BA(t,e){t.events.pipe(tt(n=>n instanceof Yn||n instanceof Bt||n instanceof co||n instanceof Kn),V(n=>n instanceof Yn||n instanceof Kn?eo.COMPLETE:(n instanceof Bt?n.code===$e.Redirect||n.code===$e.SupersededByNewNavigation:!1)?eo.REDIRECTING:eo.FAILED),tt(n=>n!==eo.REDIRECTING),Lt(1)).subscribe(()=>{e()})}function HA(t){throw t}var WA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},d_=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=y(Ra),this.stateManager=y(u_),this.options=y(lf,{optional:!0})||{},this.pendingTasks=y(Hr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=y(FA),this.urlSerializer=y(sf),this.location=y(Yi),this.urlHandlingStrategy=y(ff),this._events=new Se,this.errorHandler=this.options.errorHandler||HA,this.navigated=!1,this.routeReuseStrategy=y(UA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=y(df,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!y(cf,{optional:!0}),this.eventsSubscription=new se,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bt&&r.code!==$e.Redirect&&r.code!==$e.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Yn)this.navigated=!0;else if(r instanceof Xr){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=I({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jA(i.source)},s);this.scheduleNavigation(a,no,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),no,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=I({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(uf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=qy(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return Yy(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=oo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,no,null,r)}navigate(n,r={skipLocationChange:!1}){return GA(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=I({},WA):r===!1?i=I({},zA):i=r,oo(n))return My(this.currentUrlTree,n,i);let o=this.parseUrl(n);return My(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return BA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function GA(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}function qA(t){return!(t instanceof lo)&&!(t instanceof Xr)}var YA=new S("");function f_(t,...e){return ln([{provide:df,multi:!0,useValue:t},[],{provide:ei,useFactory:KA,deps:[d_]},{provide:fd,multi:!0,useFactory:ZA},e.map(n=>n.\u0275providers)])}function KA(t){return t.routerState.root}function ZA(){let t=y(at);return e=>{let n=t.get(Hn);if(e!==n.components[0])return;let r=t.get(d_),i=t.get(QA);t.get(JA)===1&&r.initialNavigation(),t.get(XA,null,x.Optional)?.setUpPreloading(),t.get(YA,null,x.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QA=new S("",{factory:()=>new Se}),JA=new S("",{providedIn:"root",factory:()=>1});var XA=new S("");var h_=[];var pf={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw Zn(e)},Zn=function(t){return new Error("Firebase Database ("+pf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var g_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eN=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},tc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new gf;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},gf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vf=function(t){let e=g_(t);return tc.encodeByteArray(e,!0)},yo=function(t){return vf(t).replace(/\./g,"")},_o=function(t){try{return tc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m_(t){return v_(void 0,t)}function v_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!tN(n)||(t[n]=v_(t[n],e[n]));return t}function tN(t){return t!=="__proto__"}function nN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var rN=()=>nN().__FIREBASE_DEFAULTS__,iN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&_o(t[1]);return e&&JSON.parse(e)},yf=()=>{try{return rN()||iN()||oN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},y_=t=>{var e,n;return(n=(e=yf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},__=t=>{let e=y_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_f=()=>{var t;return(t=yf())===null||t===void 0?void 0:t.config},I_=t=>{var e;return(e=yf())===null||e===void 0?void 0:e[`_${t}`]};var vn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function w_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yo(JSON.stringify(n)),yo(JSON.stringify(s)),""].join(".")}function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Io(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function E_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C_(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tt(){return pf.NODE_CLIENT===!0||pf.NODE_ADMIN===!0}function D_(){try{return typeof indexedDB=="object"}catch{return!1}}function b_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var sN="FirebaseError",St=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sN,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}},Wt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?aN(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new St(i,a,r)}};function aN(t,e){return t.replace(cN,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var cN=/\{\$([^}]+)}/g;function ri(t){return JSON.parse(t)}function le(t){return JSON.stringify(t)}var S_=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=ri(_o(o[0])||""),n=ri(_o(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var T_=function(t){let e=S_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},A_=function(t){let e=S_(t).claims;return typeof e=="object"&&e.admin===!0};function At(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function rc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Eo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(p_(o)&&p_(s)){if(!Eo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function p_(t){return t!==null&&typeof t=="object"}function Co(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ec=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function N_(t,e){let n=new mf(t,e);return n.subscribe.bind(n)}var mf=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=hf),i.error===void 0&&(i.error=hf),i.complete===void 0&&(i.complete=hf);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lN(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hf(){}function ic(t,e){return`${t} failed: ${e} argument `}var M_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Do=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var B$=4*60*60*1e3;function Qe(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Jn="[DEFAULT]";var oc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new vn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dN(e))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Jn){return this.instances.has(e)}getOptions(e=Jn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jn){return this.component?this.component.multipleInstances?e:Jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uN(t){return t===Jn?void 0:t}function dN(t){return t.instantiationMode==="EAGER"}var bo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new oc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var fN=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),hN={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},pN=Z.INFO,gN={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},mN=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=gN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},yn=class{constructor(e){this.name=e,this._logLevel=pN,this._logHandler=mN,this._userLogHandler=null,fN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var vN=(t,e)=>e.some(n=>t instanceof n),R_,x_;function yN(){return R_||(R_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _N(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var O_=new WeakMap,wf=new WeakMap,P_=new WeakMap,If=new WeakMap,Cf=new WeakMap;function IN(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Nt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&O_.set(n,t)}).catch(()=>{}),Cf.set(e,t),e}function wN(t){if(wf.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});wf.set(t,e)}var Ef={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||P_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function k_(t){Ef=t(Ef)}function EN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(sc(this),e,...n);return P_.set(r,e.sort?e.sort():[e]),Nt(r)}:_N().includes(t)?function(...e){return t.apply(sc(this),e),Nt(O_.get(this))}:function(...e){return Nt(t.apply(sc(this),e))}}function CN(t){return typeof t=="function"?EN(t):(t instanceof IDBTransaction&&wN(t),vN(t,yN())?new Proxy(t,Ef):t)}function Nt(t){if(t instanceof IDBRequest)return IN(t);if(If.has(t))return If.get(t);let e=CN(t);return e!==t&&(If.set(t,e),Cf.set(e,t)),e}var sc=t=>Cf.get(t);function F_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Nt(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Nt(s.result),c.oldVersion,c.newVersion,Nt(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var DN=["get","getKey","getAll","getAllKeys","count"],bN=["put","add","delete","clear"],Df=new Map;function L_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Df.get(e))return Df.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=bN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DN.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return Df.set(e,o),o}k_(t=>oe(I({},t),{get:(e,n,r)=>L_(e,n)||t.get(e,n,r),has:(e,n)=>!!L_(e,n)||t.has(e,n)}));var Sf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function SN(t){let e=t.getComponent();return e?.type==="VERSION"}var Tf="@firebase/app",j_="0.10.13";var zt=new yn("@firebase/app"),TN="@firebase/app-compat",AN="@firebase/analytics-compat",NN="@firebase/analytics",MN="@firebase/app-check-compat",RN="@firebase/app-check",xN="@firebase/auth",ON="@firebase/auth-compat",PN="@firebase/database",kN="@firebase/data-connect",LN="@firebase/database-compat",FN="@firebase/functions",jN="@firebase/functions-compat",UN="@firebase/installations",VN="@firebase/installations-compat",$N="@firebase/messaging",BN="@firebase/messaging-compat",HN="@firebase/performance",WN="@firebase/performance-compat",zN="@firebase/remote-config",GN="@firebase/remote-config-compat",qN="@firebase/storage",YN="@firebase/storage-compat",KN="@firebase/firestore",ZN="@firebase/vertexai-preview",QN="@firebase/firestore-compat",JN="firebase",XN="10.14.1";var Af="[DEFAULT]",eM={[Tf]:"fire-core",[TN]:"fire-core-compat",[NN]:"fire-analytics",[AN]:"fire-analytics-compat",[RN]:"fire-app-check",[MN]:"fire-app-check-compat",[xN]:"fire-auth",[ON]:"fire-auth-compat",[PN]:"fire-rtdb",[kN]:"fire-data-connect",[LN]:"fire-rtdb-compat",[FN]:"fire-fn",[jN]:"fire-fn-compat",[UN]:"fire-iid",[VN]:"fire-iid-compat",[$N]:"fire-fcm",[BN]:"fire-fcm-compat",[HN]:"fire-perf",[WN]:"fire-perf-compat",[zN]:"fire-rc",[GN]:"fire-rc-compat",[qN]:"fire-gcs",[YN]:"fire-gcs-compat",[KN]:"fire-fst",[QN]:"fire-fst-compat",[ZN]:"fire-vertex","fire-js":"fire-js",[JN]:"fire-js-all"};var So=new Map,tM=new Map,Nf=new Map;function U_(t,e){try{t.container.addComponent(e)}catch(n){zt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function In(t){let e=t.name;if(Nf.has(e))return zt.debug(`There were multiple attempts to register component ${e}.`),!1;Nf.set(e,t);for(let n of So.values())U_(n,t);for(let n of tM.values())U_(n,t);return!0}function Of(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t.settings!==void 0}var nM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_n=new Wt("app","Firebase",nM);var Mf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}};var oi=XN;function Pf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Af,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _n.create("bad-app-name",{appName:String(i)});if(n||(n=_f()),!n)throw _n.create("no-options");let o=So.get(i);if(o){if(Eo(n,o.options)&&Eo(r,o.config))return o;throw _n.create("duplicate-app",{appName:i})}let s=new bo(i);for(let c of Nf.values())s.addComponent(c);let a=new Mf(n,r,s);return So.set(i,a),a}function Ao(t=Af){let e=So.get(t);if(!e&&t===Af&&_f())return Pf();if(!e)throw _n.create("no-app",{appName:t});return e}function ac(){return Array.from(So.values())}function ve(t,e,n){var r;let i=(r=eM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zt.warn(a.join(" "));return}In(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var rM="firebase-heartbeat-database",iM=1,To="firebase-heartbeat-store",bf=null;function H_(){return bf||(bf=F_(rM,iM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(t=>{throw _n.create("idb-open",{originalErrorMessage:t.message})})),bf}function oM(t){return v(this,null,function*(){try{let n=(yield H_()).transaction(To),r=yield n.objectStore(To).get(W_(t));return yield n.done,r}catch(e){if(e instanceof St)zt.warn(e.message);else{let n=_n.create("idb-get",{originalErrorMessage:e?.message});zt.warn(n.message)}}})}function V_(t,e){return v(this,null,function*(){try{let r=(yield H_()).transaction(To,"readwrite");yield r.objectStore(To).put(e,W_(t)),yield r.done}catch(n){if(n instanceof St)zt.warn(n.message);else{let r=_n.create("idb-set",{originalErrorMessage:n?.message});zt.warn(r.message)}}})}function W_(t){return`${t.name}!${t.options.appId}`}var sM=1024,aM=30*24*60*60*1e3,Rf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new xf(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=aM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zt.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=$_(),{heartbeatsToSend:r,unsentEntries:i}=cM(this._heartbeatsCache.heartbeats),o=yo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return zt.warn(n),""}})}};function $_(){return new Date().toISOString().substring(0,10)}function cM(t,e=sM){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),B_(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),B_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var xf=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return D_()?b_().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield oM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return V_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return V_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function B_(t){return yo(JSON.stringify({version:2,heartbeats:t})).length}function lM(t){In(new Je("platform-logger",e=>new Sf(e),"PRIVATE")),In(new Je("heartbeat",e=>new Rf(e),"PRIVATE")),ve(Tf,j_,t),ve(Tf,j_,"esm2017"),ve("fire-js","")}lM("");var uM="firebase",dM="10.14.1";ve(uM,dM,"app");var ai=new an("ANGULARFIRE2_VERSION");function Lf(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Mo=(t,e)=>{let n=e?[e]:ac(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},No=class{constructor(){return Mo(fM)}},fM="app-check";function si(){}var cc=class{zone;delegate;constructor(e,n=wl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},kf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si)),n.pipe(fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ro=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new cc(Zone.current)),this.insideAngular=n.run(()=>new cc(Zone.current,Il)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(k(te))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function hM(t){return lc().ngZone.runOutsideAngular(()=>t())}function Xn(t){return lc().ngZone.run(()=>t())}function pM(t){return gM(lc())(t)}function gM(t){return function(n){return n=n.lift(new kf(t.ngZone)),n.pipe(Jt(t.outsideAngular),Qt(t.insideAngular))}}var mM=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Xn(()=>t.apply(void 0,r))},wn=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Xn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si))),r[o]=mM(r[o],n));let i=hM(()=>t.apply(this,r));if(!e)if(i instanceof z){let o=lc();return i.pipe(Jt(o.outsideAngular),Qt(o.insideAngular))}else return Xn(()=>i);return i instanceof z?i.pipe(pM):i instanceof Promise?Xn(()=>new Promise((o,s)=>i.then(a=>Xn(()=>o(a)),a=>Xn(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Xn(()=>i)};var er=class{constructor(e){return e}},xo=class{constructor(){return ac()}};function vM(t){return t&&t.length===1?t[0]:new er(Ao())}var Ff=new S("angularfire2._apps"),yM={provide:er,useFactory:vM,deps:[[new ct,Ff]]},_M={provide:xo,deps:[[new ct,Ff]]};function IM(t){return(e,n)=>{let r=n.get(fn);ve("angularfire",ai.full,"core"),ve("angularfire",ai.full,"app"),ve("angular",Jv.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new er(i)}}function z_(t,...e){return ln([yM,_M,{provide:Ff,useFactory:IM(t),multi:!0,deps:[te,at,Ro,...e]}])}var G_=wn(Pf,!0);function eI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tI=eI,nI=new Wt("auth","Firebase",eI());var hc=new yn("@firebase/auth");function wM(t,...e){hc.logLevel<=Z.WARN&&hc.warn(`Auth (${oi}): ${t}`,...e)}function dc(t,...e){hc.logLevel<=Z.ERROR&&hc.error(`Auth (${oi}): ${t}`,...e)}function q_(t,...e){throw Kf(t,...e)}function Yf(t,...e){return Kf(t,...e)}function rI(t,e,n){let r=Object.assign(Object.assign({},tI()),{[e]:n});return new Wt("auth","Firebase",r).create(e,{appName:t.name})}function fc(t){return rI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kf(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nI.create(t,...e)}function q(t,e,...n){if(!t)throw Kf(e,...n)}function Oo(t){let e="INTERNAL ASSERTION FAILED: "+t;throw dc(e),new Error(e)}function pc(t,e){t||Oo(e)}function EM(){return Y_()==="http:"||Y_()==="https:"}function Y_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function CM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EM()||C_()||"connection"in navigator)?navigator.onLine:!0}function DM(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var nr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,pc(n>e,"Short delay should be less than long delay!"),this.isMobile=Io()||nc()}get(){return CM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function bM(t,e){pc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var gc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var SM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var TM=new nr(3e4,6e4);function iI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function _c(o,s,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return oI(t,i,()=>v(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Co(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);let h=Object.assign({method:e,headers:f},l);return E_()||(h.referrerPolicy="no-referrer"),gc.fetch()(sI(t,t.config.apiHost,n,d),h)}))})}function oI(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},SM),e);try{let i=new Vf(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw uc(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw uc(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw uc(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw rI(t,u,l);q_(t,u)}}catch(i){if(i instanceof St)throw i;q_(t,"network-request-failed",{message:String(i)})}})}function sI(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?bM(t.config,i):`${t.config.apiScheme}://${i}`}var Vf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yf(this.auth,"network-request-failed")),TM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function uc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Yf(t,e,r);return i.customData._tokenResponse=n,i}function AM(t,e){return v(this,null,function*(){return _c(t,"POST","/v1/accounts:delete",e)})}function aI(t,e){return v(this,null,function*(){return _c(t,"POST","/v1/accounts:lookup",e)})}function Po(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Zf(t,e=!1){return v(this,null,function*(){let n=Qe(t),r=yield n.getIdToken(e),i=cI(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Po(jf(i.auth_time)),issuedAtTime:Po(jf(i.iat)),expirationTime:Po(jf(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function jf(t){return Number(t)*1e3}function cI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{let i=_o(n);return i?JSON.parse(i):(dc("Failed to decode base64 JWT payload"),null)}catch(i){return dc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function K_(t){let e=cI(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $f(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof St&&NM(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function NM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Bf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Lo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Po(this.lastLoginAt),this.creationTime=Po(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function mc(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield $f(t,aI(n,{idToken:r}));q(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?lI(o.providerUserInfo):[],a=MM(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Lo(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Qf(t){return v(this,null,function*(){let e=Qe(t);yield mc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function MM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lI(t){return t.map(e=>{var{providerId:n}=e,r=El(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function RM(t,e){return v(this,null,function*(){let n=yield oI(t,{},()=>v(this,null,function*(){let r=Co({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=sI(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gc.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function xM(t,e){return v(this,null,function*(){return _c(t,"POST","/v2/accounts:revokeToken",iI(t,e))})}var ko=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=K_(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield RM(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Oo("not implemented")}};function En(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Fo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=El(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lo(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield $f(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Zf(this,e)}reload(){return Qf(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield mc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(ii(this.auth.app))return Promise.reject(fc(this.auth));let e=yield this.getIdToken();return yield $f(this,AM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,D=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:T,isAnonymous:ie,providerData:F,stsTokenManager:K}=n;q(w&&K,e,"internal-error");let pe=ko.fromJSON(this.name,K);q(typeof w=="string",e,"internal-error"),En(d,e.name),En(f,e.name),q(typeof T=="boolean",e,"internal-error"),q(typeof ie=="boolean",e,"internal-error"),En(h,e.name),En(p,e.name),En(m,e.name),En(_,e.name),En(D,e.name),En(B,e.name);let _e=new t({uid:w,auth:e,email:f,emailVerified:T,displayName:d,isAnonymous:ie,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:pe,createdAt:D,lastLoginAt:B});return F&&Array.isArray(F)&&(_e.providerData=F.map(Re=>Object.assign({},Re))),_&&(_e._redirectEventId=_),_e}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new ko;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield mc(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?lI(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ko;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Lo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var Z_=new Map;function tr(t){pc(t instanceof Function,"Expected a class definition");let e=Z_.get(t);return e?(pc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Z_.set(t,e),e)}var OM=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Hf=OM;function Uf(t,e,n){return`firebase:${t}:${e}:${n}`}var vc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Uf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Uf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Fo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(tr(Hf),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||tr(Hf),s=Uf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=Fo._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function Q_(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UM(e))return"Blackberry";if(VM(e))return"Webos";if(kM(e))return"Safari";if((e.includes("chrome/")||LM(e))&&!e.includes("edge/"))return"Chrome";if(jM(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function PM(t=ht()){return/firefox\//i.test(t)}function kM(t=ht()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LM(t=ht()){return/crios\//i.test(t)}function FM(t=ht()){return/iemobile/i.test(t)}function jM(t=ht()){return/android/i.test(t)}function UM(t=ht()){return/blackberry/i.test(t)}function VM(t=ht()){return/webos/i.test(t)}function uI(t,e=[]){let n;switch(t){case"Browser":n=Q_(ht());break;case"Worker":n=`${Q_(ht())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}var Wf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function $M(n){return v(this,arguments,function*(t,e={}){return _c(t,"GET","/v2/passwordPolicy",iI(t,e))})}var BM=6,zf=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:BM,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Gf=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yc(this),this.idTokenSubscription=new yc(this),this.beforeStateQueue=new Wf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield aI(this,{idToken:e}),r=yield Fo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(ii(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield mc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=DM()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(ii(this.app))return Promise.reject(fc(this));let n=e?Qe(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return ii(this.app)?Promise.reject(fc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ii(this.app)?Promise.reject(fc(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(tr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield $M(this),n=new zf(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield xM(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&tr(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=yield vc.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&wM(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function HM(t){return Qe(t)}var yc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=N_(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var WM={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zM(t){WM=t}function GM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function qM(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var UB=GM("rcb"),VB=new nr(3e4,6e4);var $B=new nr(2e3,1e4);var BB=10*60*1e3;var HB=new nr(3e4,6e4);var WB=new nr(5e3,15e3);var zB=encodeURIComponent("fac");var J_="@firebase/auth",X_="1.7.9";var qf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function YM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KM(t){In(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uI(t)},l=new Gf(r,i,o,c);return qM(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),In(new Je("auth-internal",e=>{let n=HM(e.getProvider("auth").getImmediate());return(r=>new qf(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ve(J_,X_,YM(t)),ve(J_,X_,"esm2017")}var ZM=5*60,GB=I_("authIdTokenMaxAge")||ZM;function QM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}zM({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Yf("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",QM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KM("Browser");var ZR="auth";var Ic=class{constructor(){return Mo(ZR)}};var dI="@firebase/database",fI="1.0.8";var ep="";function QR(t){ep=t}var oh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),le(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ri(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var sh=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return At(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var HI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new oh(e)}}catch{}return new sh},ir=HI("localStorage"),ah=HI("sessionStorage");var ui=new yn("@firebase/database"),JR=function(){let t=1;return function(){return t++}}(),WI=function(t){let e=M_(t),n=new ec;n.update(e);let r=n.digest();return tc.encodeByteArray(r)},es=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=es.apply(null,r):typeof r=="object"?e+=le(r):e+=r,e+=" "}return e},sr=null,hI=!0,XR=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ui.logLevel=Z.VERBOSE,sr=ui.log.bind(ui),e&&ah.set("logging_enabled",!0)):typeof t=="function"?sr=t:(sr=null,ah.remove("logging_enabled"))},be=function(...t){if(hI===!0&&(hI=!1,sr===null&&ah.get("logging_enabled")===!0&&XR(!0)),sr){let e=es.apply(null,t);sr(e)}},ts=function(t){return function(...e){be(t,...e)}},ch=function(...t){let e="FIREBASE INTERNAL ERROR: "+es(...t);ui.error(e)},Gt=function(...t){let e=`FIREBASE FATAL ERROR: ${es(...t)}`;throw ui.error(e),new Error(e)},ke=function(...t){let e="FIREBASE WARNING: "+es(...t);ui.warn(e)},ex=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ke("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},tx=function(t){if(Tt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},fi="[MIN_NAME]",ar="[MAX_NAME]",_i=function(t,e){if(t===e)return 0;if(t===fi||e===ar)return-1;if(e===fi||t===ar)return 1;{let n=pI(t),r=pI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},nx=function(t,e){return t===e?0:t<e?-1:1},jo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+le(e))},tp=function(t){if(typeof t!="object"||t===null)return le(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=le(e[r]),n+=":",n+=tp(t[e[r]]);return n+="}",n},GI=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Le(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var qI=function(t){g(!zI(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},rx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ix=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ox(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var sx=new RegExp("^-?(0*)\\d{1,10}$"),ax=-2147483648,cx=2147483647,pI=function(t){if(sx.test(t)){let e=Number(t);if(e>=ax&&e<=cx)return e}return null},Ii=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ke("Exception was thrown by user callback.",n),e},Math.floor(0))}},lx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ho=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var lh=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ke(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var uh=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ke(e)}},Wo=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Ec="5",YI="v",KI="s",ZI="r",QI="f",JI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XI="ls",ew="p",dh="ac",tw="websocket",nw="long_polling";var Cc=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ir.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ir.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function ux(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function rw(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===tw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===nw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ux(t)&&(n.ns=t.namespace);let i=[];return Le(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var fh=class{constructor(){this.counters_={}}incrementCounter(e,n=1){At(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return m_(this.counters_)}};var Jf={},Xf={};function np(t){let e=t.toString();return Jf[e]||(Jf[e]=new fh),Jf[e]}function dx(t,e){let n=t.toString();return Xf[n]||(Xf[n]=e()),Xf[n]}var hh=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ii(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var gI="start",fx="close",hx="pLPCommand",px="pRTLPCB",iw="id",ow="pw",sw="ser",gx="cb",mx="seg",vx="ts",yx="d",_x="dframe",aw=1870,cw=30,Ix=aw-cw,wx=25e3,Ex=3e4,ph=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ts(e),this.stats_=np(n),this.urlFn=c=>(this.appCheckToken&&(c[dh]=this.appCheckToken),rw(n,nw,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hh(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ex)),tx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gh((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===gI)this.id=a,this.password=c;else if(s===fx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[gI]="t",r[sw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[gx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[YI]=Ec,this.transportSessionId&&(r[KI]=this.transportSessionId),this.lastSessionId&&(r[XI]=this.lastSessionId),this.applicationId&&(r[ew]=this.applicationId),this.appCheckToken&&(r[dh]=this.appCheckToken),typeof location<"u"&&location.hostname&&JI.test(location.hostname)&&(r[ZI]=QI);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Tt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rx()&&!ix()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=vf(n),i=GI(r,Ix);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Tt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[_x]="t",r[iw]=e,r[ow]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=le(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},gh=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Tt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=JR(),window[hx+this.uniqueCallbackIdentifier]=e,window[px+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){be("frame writing exception"),a.stack&&be(a.stack),be(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||be("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[iw]=this.myID,e[ow]=this.myPW,e[sw]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+cw+r.length<=aw;){let s=this.pendingSegs.shift();r=r+"&"+mx+i+"="+s.seg+"&"+vx+i+"="+s.ts+"&"+yx+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(wx)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){Tt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{be("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Cx=16384,Dx=45e3,Dc=null;typeof MozWebSocket<"u"?Dc=MozWebSocket:typeof WebSocket<"u"&&(Dc=WebSocket);var Uo=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ts(this.connId),this.stats_=np(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[YI]=Ec,!Tt()&&typeof location<"u"&&location.hostname&&JI.test(location.hostname)&&(a[ZI]=QI),r&&(a[KI]=r),i&&(a[XI]=i),o&&(a[dh]=o),s&&(a[ew]=s),rw(n,tw,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ir.set("previous_websocket_failure",!0);try{let i;if(Tt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Ec}/${ep}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Dc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Dc!==null&&!t.forceDisallow_}static previouslyFailed(){return ir.isInMemoryStorage||ir.get("previous_websocket_failure")===!0}markConnectionHealthy(){ir.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ri(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=le(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=GI(r,Cx);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Dx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),bx=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[ph,Uo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Uo&&Uo.isAvailable(),i=r&&!Uo.previouslyFailed();if(n.webSocketOnly&&(r||ke("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Uo];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),Sx=6e4,Tx=5e3,Ax=10*1024,Nx=100*1024,eh="t",mI="d",Mx="s",vI="r",Rx="e",yI="o",_I="a",II="n",wI="p",xx="h",mh=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ts("c:"+this.id+":"),this.transportManager_=new bx(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ho(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Nx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Ax?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(eh in e){let n=e[eh];n===_I?this.upgradeIfSecondaryHealthy_():n===vI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===yI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=jo("t",e),r=jo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:wI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_I,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:II,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=jo("t",e),r=jo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=jo(eh,e);if(mI in e){let r=e[mI];if(n===xx){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===II){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Mx?this.onConnectionShutdown_(r):n===vI?this.onReset_(r):n===Rx?ch("Server Error: "+r):n===yI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ch("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ec!==r&&ke("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ho(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Sx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ho(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Tx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:wI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ir.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var bc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Sc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Tc=class t extends Sc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Io()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var EI=32,CI=768,Q=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function G(){return new Q("")}function j(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bn(t){return t.pieces_.length-t.pieceNum_}function ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Q(t.pieces_,e)}function lw(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ox(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function uw(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function dw(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Q(e,0)}function he(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Me(t,e){let n=j(t),r=j(e);if(n===null)return e;if(n===r)return Me(ne(t),ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function fw(t,e){if(bn(t)!==bn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(bn(t)>bn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var vh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=uw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Do(this.parts_[r]);hw(this)}};function Px(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Do(e),hw(t)}function kx(t){let e=t.parts_.pop();t.byteLength_-=Do(e),t.parts_.length>0&&(t.byteLength_-=1)}function hw(t){if(t.byteLength_>CI)throw new Error(t.errorPrefix_+"has a key path longer than "+CI+" bytes ("+t.byteLength_+").");if(t.parts_.length>EI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+EI+") or object contains a cycle "+rr(t))}function rr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var yh=class t extends Sc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var Vo=1e3,Lx=60*5*1e3,DI=30*1e3,Fx=1.3,jx=3e4,Ux="server_kill",bI=3,rp=(()=>{class t extends bc{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=ts("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vo,this.maxReconnectDelay_=Lx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Tt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yh.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Tc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(le(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new vn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&At(n,"w")){let i=Qn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();ke(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||A_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=DI)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=T_(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+le(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ch("Unrecognized action received from server: "+le(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jx&&(this.reconnectDelay_=Vo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Fx)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?be("getToken() completed but was canceled"):(be("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new mh(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{ke(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ux)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ke(f),l())}}})}interrupt(n){be("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){be("Resuming connection for reason: "+n),delete this.interruptReasons_[n],rc(this.interruptReasons_)&&(this.reconnectDelay_=Vo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>tp(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){be("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bI&&(this.reconnectDelay_=DI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){be("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Tt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+ep.replace(/\./g,"-")]=1,Io()?n["framework.cordova"]=1:nc()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Tc.getInstance().currentlyOnline();return rc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),P=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var hi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new P(fi,e),i=new P(fi,n);return this.compare(r,i)!==0}minPost(){return P.MIN}};var wc,Ac=class extends hi{static get __EMPTY_NODE(){return wc}static set __EMPTY_NODE(e){wc=e}compare(e,n){return _i(e.name,n.name)}isDefinedOn(e){throw Zn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return P.MIN}maxPost(){return new P(ar,wc)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new P(e,wc)}toString(){return".key"}},di=new Ac;var li=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},pt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Xe.EMPTY_NODE,this.right=s??Xe.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xe.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Xe.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),_h=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new pt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Xe=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,pt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,pt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new li(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new li(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new li(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new li(this.root_,null,this.comparator_,!0,e)}};Xe.EMPTY_NODE=new _h;function Vx(t,e){return _i(t.name,e.name)}function ip(t,e){return _i(t,e)}var Ih;function $x(t){Ih=t}var pw=function(t){return typeof t=="number"?"number:"+qI(t):"string:"+t},gw=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&At(e,".sv"),"Priority must be a string or number.")}else g(t===Ih||t.isEmpty(),"priority of unexpected type.");g(t===Ih||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var SI,pi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gw(this.priorityNode_)}static set __childrenNodeConstructor(n){SI=n}static get __childrenNodeConstructor(){return SI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:j(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=j(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||bn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ne(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+pw(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=qI(this.value_):n+=this.value_,this.lazyHash_=WI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),mw,vw;function Bx(t){mw=t}function Hx(t){vw=t}var wh=class extends hi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?_i(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return P.MIN}maxPost(){return new P(ar,new pi("[PRIORITY-POST]",vw))}makePost(e,n){let r=mw(e);return new P(n,new pi("[PRIORITY-POST]",r))}toString(){return".priority"}},ce=new wh;var Wx=Math.log(2),Eh=class{constructor(e){let n=o=>parseInt(Math.log(o)/Wx,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Nc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new pt(f,d.node,pt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),m=i(h+1,l);return d=t[h],f=n?n(d):d,new pt(f,d.node,pt.BLACK,p,m)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,m){let _=d-p,D=d;d-=p;let B=i(_+1,D),w=t[_],T=n?n(w):w;h(new pt(T,w.node,m,null,B))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let m=c.nextBitIsOne(),_=Math.pow(2,c.count-(p+1));m?f(_,pt.BLACK):(f(_,pt.BLACK),f(_,pt.RED))}return u},s=new Eh(t.length),a=o(s);return new Xe(r||e,a)};var th,ci={},gi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(ci&&ce,"ChildrenNode.ts has not been loaded"),th=th||new t({".priority":ci},{".priority":ce}),th}get(e){let n=Qn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xe?n:null}hasIndex(e){return At(this.indexSet_,e.toString())}addIndex(e,n){g(e!==di,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(P.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Nc(r,e.getCompare()):a=ci;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=wo(this.indexes_,(i,o)=>{let s=Qn(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===ci)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(P.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Nc(a,s.getCompare())}else return ci;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new P(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=wo(this.indexes_,i=>{if(i===ci)return i;{let o=n.get(e.name);return o?i.remove(new P(e.name,o)):i}});return new t(r,this.indexSet_)}};var $o,M=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gw(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $o||($o=new t(new Xe(ip),null,gi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$o}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?$o:r}}getChild(n){let r=j(n);return r===null?this:this.getImmediateChild(r).getChild(ne(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new P(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?$o:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=j(n);if(i===null)return r;{g(j(n)!==".priority"||bn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ne(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ce,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+pw(this.getPriority().val())+":"),this.forEachChild(ce,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":WI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new P(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new P(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new P(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,P.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,P.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ns?-1:0}withIndex(n){if(n===di||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===di||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ce),o=r.getIterator(ce),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===di?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Ch=class extends M{constructor(){super(new Xe(ip),M.EMPTY_NODE,gi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}},ns=new Ch;Object.defineProperties(P,{MIN:{value:new P(fi,M.EMPTY_NODE)},MAX:{value:new P(ar,ns)}});Ac.__EMPTY_NODE=M.EMPTY_NODE;pi.__childrenNodeConstructor=M;$x(ns);Hx(ns);var zx=!0;function ye(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new pi(n,ye(e))}if(!(t instanceof Array)&&zx){let n=[],r=!1;if(Le(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=ye(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new P(s,c)))}}),n.length===0)return M.EMPTY_NODE;let o=Nc(n,Vx,s=>s.name,ip);if(r){let s=Nc(n,ce.getCompare());return new M(o,ye(e),new gi({".priority":s},{".priority":ce}))}else return new M(o,ye(e),gi.Default)}else{let n=M.EMPTY_NODE;return Le(t,(r,i)=>{if(At(t,r)&&r.substring(0,1)!=="."){let o=ye(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ye(e))}}Bx(ye);var Dh=class extends hi{constructor(e){super(),this.indexPath_=e,g(!L(e)&&j(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?_i(e.name,n.name):o}makePost(e,n){let r=ye(e),i=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new P(n,i)}maxPost(){let e=M.EMPTY_NODE.updateChild(this.indexPath_,ns);return new P(ar,e)}toString(){return uw(this.indexPath_,0).join("/")}};var bh=class extends hi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?_i(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(e,n){let r=ye(e);return new P(n,r)}toString(){return".value"}},Gx=new bh;function yw(t){return{type:"value",snapshotNode:t}}function mi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ko(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function qx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Zo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Yo(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(mi(n,r)):s.trackChildChange(Ko(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ce,(i,o)=>{n.hasChild(i)||r.trackChildChange(Yo(i,o))}),n.isLeafNode()||n.forEachChild(ce,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ko(i,o,s))}else r.trackChildChange(mi(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?M.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Mc=class t{constructor(e){this.indexedFilter_=new Zo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new P(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(M.EMPTY_NODE);let o=this;return n.forEachChild(ce,(s,a)=>{o.matches(new P(s,a))||(i=i.updateImmediateChild(s,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Sh=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Mc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new P(n,r))||(r=M.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=M.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(M.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new P(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Ko(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Yo(n,d));let m=a.updateImmediateChild(n,M.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(mi(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Yo(l.name,l.node)),o.trackChildChange(mi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,M.EMPTY_NODE)):e}};var Th=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ce}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fi}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ar}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ce}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Yx(t){return t.loadsAllData()?new Zo(t.getIndex()):t.hasLimit()?new Sh(t):new Mc(t)}function TI(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ce?n="$priority":t.index_===Gx?n="$value":t.index_===di?n="$key":(g(t.index_ instanceof Dh,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=le(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=le(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+le(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=le(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+le(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function AI(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ce&&(e.i=t.index_.toString()),e}var Ah=class t extends bc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ts("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=TI(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Qn(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=TI(e._queryParams),r=e._path.toString(),i=new vn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Co(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ri(a.responseText)}catch{ke("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ke("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Nh=class{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Rc(){return{value:null,children:new Map}}function _w(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=j(e);t.children.has(r)||t.children.set(r,Rc());let i=t.children.get(r);e=ne(e),_w(i,e,n)}}function Mh(t,e,n){t.value!==null?n(e,t.value):Kx(t,(r,i)=>{let o=new Q(e.toString()+"/"+r);Mh(i,o,n)})}function Kx(t,e){t.children.forEach((n,r)=>{e(r,n)})}var Rh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Le(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var NI=10*1e3,Zx=30*1e3,Qx=5*60*1e3,xh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Rh(e);let r=NI+(Zx-NI)*Math.random();Ho(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Le(e,(i,o)=>{o>0&&At(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Ho(this.reportStats_.bind(this),Math.floor(Math.random()*2*Qx))}};var Mt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Mt||{});function Iw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function op(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sp(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Oh=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Mt.ACK_USER_WRITE,this.source=Iw()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(e));return new t(G(),n,this.revert)}}else return g(j(this.path)===e,"operationForChild called for unrelated child."),new t(ne(this.path),this.affectedTree,this.revert)}};var xc=class t{constructor(e,n){this.source=e,this.path=n,this.type=Mt.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new t(this.source,G()):new t(this.source,ne(this.path))}};var vi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Mt.OVERWRITE}operationForChild(e){return L(this.path)?new t(this.source,G(),this.snap.getImmediateChild(e)):new t(this.source,ne(this.path),this.snap)}};var Oc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Mt.MERGE}operationForChild(e){if(L(this.path)){let n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new vi(this.source,G(),n.value):new t(this.source,G(),n)}else return g(j(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Rt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;let n=j(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Ph=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Jx(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(qx(s.childName,s.snapshotNode))}),Bo(t,i,"child_removed",e,r,n),Bo(t,i,"child_added",e,r,n),Bo(t,i,"child_moved",o,r,n),Bo(t,i,"child_changed",e,r,n),Bo(t,i,"value",e,r,n),i}function Bo(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>eO(t,a,c)),s.forEach(a=>{let c=Xx(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Xx(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function eO(t,e,n){if(e.childName==null||n.childName==null)throw Zn("Should only compare child_ events.");let r=new P(e.childName,e.snapshotNode),i=new P(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Wc(t,e){return{eventCache:t,serverCache:e}}function zo(t,e,n,r){return Wc(new Rt(e,n,r),t.serverCache)}function ww(t,e,n,r){return Wc(t.eventCache,new Rt(e,n,r))}function Pc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function cr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var nh,tO=()=>(nh||(nh=new Xe(nx)),nh),Fe=class t{constructor(e,n=tO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Le(e,(r,i)=>{n=n.set(new Q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if(L(e))return null;{let r=j(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ne(e),n);return o!=null?{path:he(new Q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{let n=j(e),r=this.children.get(n);return r!==null?r.subtree(ne(e)):new t(null)}}set(e,n){if(L(e))return new t(n,this.children);{let r=j(e),o=(this.children.get(r)||new t(null)).set(ne(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(L(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=j(e),r=this.children.get(n);if(r){let i=r.remove(ne(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(L(e))return this.value;{let n=j(e),r=this.children.get(n);return r?r.get(ne(e)):null}}setTree(e,n){if(L(e))return n;{let r=j(e),o=(this.children.get(r)||new t(null)).setTree(ne(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(G(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(he(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(L(e))return null;{let o=j(e),s=this.children.get(o);return s?s.findOnPath_(ne(e),he(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,r){if(L(e))return this;{this.value&&r(n,this.value);let i=j(e),o=this.children.get(i);return o?o.foreachOnPath_(ne(e),he(n,i),r):new t(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(he(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var mt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Fe(null))}};function Go(t,e,n){if(L(e))return new mt(new Fe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Me(i,e);return o=o.updateChild(s,n),new mt(t.writeTree_.set(i,o))}else{let i=new Fe(n),o=t.writeTree_.setTree(e,i);return new mt(o)}}}function MI(t,e,n){let r=t;return Le(n,(i,o)=>{r=Go(r,he(e,i),o)}),r}function RI(t,e){if(L(e))return mt.empty();{let n=t.writeTree_.setTree(e,new Fe(null));return new mt(n)}}function kh(t,e){return lr(t,e)!=null}function lr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Me(n.path,e)):null}function xI(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ce,(r,i)=>{e.push(new P(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new P(r,i.value))}),e}function Cn(t,e){if(L(e))return t;{let n=lr(t,e);return n!=null?new mt(new Fe(n)):new mt(t.writeTree_.subtree(e))}}function Lh(t){return t.writeTree_.isEmpty()}function yi(t,e){return Ew(G(),t.writeTree_,e)}function Ew(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=Ew(he(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(he(t,".priority"),r)),n}}function zc(t,e){return Sw(e,t)}function nO(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Go(t.visibleWrites,e,n)),t.lastWriteId=r}function rO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function iO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&oO(a,r.path)?i=!1:gt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return sO(t),!0;if(r.snap)t.visibleWrites=RI(t.visibleWrites,r.path);else{let a=r.children;Le(a,c=>{t.visibleWrites=RI(t.visibleWrites,he(r.path,c))})}return!0}else return!1}function oO(t,e){if(t.snap)return gt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&gt(he(t.path,n),e))return!0;return!1}function sO(t){t.visibleWrites=Cw(t.allWrites,aO,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function aO(t){return t.visible}function Cw(t,e,n){let r=mt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)gt(n,s)?(a=Me(n,s),r=Go(r,a,o.snap)):gt(s,n)&&(a=Me(s,n),r=Go(r,G(),o.snap.getChild(a)));else if(o.children){if(gt(n,s))a=Me(n,s),r=MI(r,a,o.children);else if(gt(s,n))if(a=Me(s,n),L(a))r=MI(r,G(),o.children);else{let c=Qn(o.children,j(a));if(c){let l=c.getChild(ne(a));r=Go(r,G(),l)}}}else throw Zn("WriteRecord should have .snap or .children")}}return r}function Dw(t,e,n,r,i){if(!r&&!i){let o=lr(t.visibleWrites,e);if(o!=null)return o;{let s=Cn(t.visibleWrites,e);if(Lh(s))return n;if(n==null&&!kh(s,G()))return null;{let a=n||M.EMPTY_NODE;return yi(s,a)}}}else{let o=Cn(t.visibleWrites,e);if(!i&&Lh(o))return n;if(!i&&n==null&&!kh(o,G()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(gt(l.path,e)||gt(e,l.path))},a=Cw(t.allWrites,s,e),c=n||M.EMPTY_NODE;return yi(a,c)}}}function cO(t,e,n){let r=M.EMPTY_NODE,i=lr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ce,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Cn(t.visibleWrites,e);return n.forEachChild(ce,(s,a)=>{let c=yi(Cn(o,new Q(s)),a);r=r.updateImmediateChild(s,c)}),xI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Cn(t.visibleWrites,e);return xI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function lO(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=he(e,n);if(kh(t.visibleWrites,o))return null;{let s=Cn(t.visibleWrites,o);return Lh(s)?i.getChild(n):yi(s,i.getChild(n))}}function uO(t,e,n,r){let i=he(e,n),o=lr(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Cn(t.visibleWrites,i);return yi(s,r.getNode().getImmediateChild(n))}else return null}function dO(t,e){return lr(t.visibleWrites,e)}function fO(t,e,n,r,i,o,s){let a,c=Cn(t.visibleWrites,e),l=lr(c,G());if(l!=null)a=l;else if(n!=null)a=yi(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function hO(){return{visibleWrites:mt.empty(),allWrites:[],lastWriteId:-1}}function kc(t,e,n,r){return Dw(t.writeTree,t.treePath,e,n,r)}function ap(t,e){return cO(t.writeTree,t.treePath,e)}function OI(t,e,n,r){return lO(t.writeTree,t.treePath,e,n,r)}function Lc(t,e){return dO(t.writeTree,he(t.treePath,e))}function pO(t,e,n,r,i,o){return fO(t.writeTree,t.treePath,e,n,r,i,o)}function cp(t,e,n){return uO(t.writeTree,t.treePath,e,n)}function bw(t,e){return Sw(he(t.treePath,e),t.writeTree)}function Sw(t,e){return{treePath:t,writeTree:e}}var Fh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Ko(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Yo(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,mi(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ko(r,e.snapshotNode,i.oldSnap));else throw Zn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var jh=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Tw=new jh,Qo=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Rt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cp(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:cr(this.viewCache_),o=pO(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function gO(t){return{filter:t}}function mO(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function vO(t,e,n,r,i){let o=new Fh,s,a;if(n.type===Mt.OVERWRITE){let l=n;l.source.fromUser?s=Uh(t,e,l.path,l.snap,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!L(l.path),s=Fc(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Mt.MERGE){let l=n;l.source.fromUser?s=_O(t,e,l.path,l.children,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Vh(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Mt.ACK_USER_WRITE){let l=n;l.revert?s=EO(t,e,l.path,r,i,o):s=IO(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Mt.LISTEN_COMPLETE)s=wO(t,e,n.path,r,o);else throw Zn("Unknown operation type: "+n.type);let c=o.getChanges();return yO(e,s,c),{viewCache:s,changes:c}}function yO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Pc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(yw(Pc(e)))}}function Aw(t,e,n,r,i,o){let s=e.eventCache;if(Lc(r,n)!=null)return e;{let a,c;if(L(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=cr(e),u=l instanceof M?l:M.EMPTY_NODE,d=ap(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=kc(r,cr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=j(n);if(l===".priority"){g(bn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=OI(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ne(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=OI(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=cp(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return zo(e,a,s.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function Fc(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(L(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=j(n);if(!c.isCompleteForPath(n)&&bn(n)>1)return e;let p=ne(n),_=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),_):l=u.updateChild(c.getNode(),h,_,p,Tw,null)}let d=ww(e,l,c.isFullyInitialized()||L(n),u.filtersNodes()),f=new Qo(i,d,o);return Aw(t,d,n,i,f,a)}function Uh(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new Qo(i,e,o);if(L(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=zo(e,l,!0,t.filter.filtersNodes());else{let d=j(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=zo(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ne(n),h=a.getNode().getImmediateChild(d),p;if(L(f))p=r;else{let m=u.getCompleteChild(d);m!=null?lw(f)===".priority"&&m.getChild(dw(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=M.EMPTY_NODE}if(h.equals(p))c=e;else{let m=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=zo(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function PI(t,e){return t.eventCache.isCompleteForChild(e)}function _O(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=he(n,c);PI(e,j(u))&&(a=Uh(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=he(n,c);PI(e,j(u))||(a=Uh(t,a,u,l,i,o,s))}),a}function kI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Vh(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;L(n)?l=r:l=new Fe(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=kI(t,h,f);c=Fc(t,c,new Q(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),m=kI(t,p,f);c=Fc(t,c,new Q(d),m,i,o,s,a)}}),c}function IO(t,e,n,r,i,o,s){if(Lc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(L(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Fc(t,e,n,c.getNode().getChild(n),i,o,a,s);if(L(n)){let l=new Fe(null);return c.getNode().forEachChild(di,(u,d)=>{l=l.set(new Q(u),d)}),Vh(t,e,n,l,i,o,a,s)}else return e}else{let l=new Fe(null);return r.foreach((u,d)=>{let f=he(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Vh(t,e,n,l,i,o,a,s)}}function wO(t,e,n,r,i){let o=e.serverCache,s=ww(e,o.getNode(),o.isFullyInitialized()||L(n),o.isFiltered());return Aw(t,s,n,r,Tw,i)}function EO(t,e,n,r,i,o){let s;if(Lc(r,n)!=null)return e;{let a=new Qo(r,e,i),c=e.eventCache.getNode(),l;if(L(n)||j(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=kc(r,cr(e));else{let d=e.serverCache.getNode();g(d instanceof M,"serverChildren would be complete if leaf node"),u=ap(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=j(n),d=cp(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ne(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,M.EMPTY_NODE,ne(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=kc(r,cr(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Lc(r,G())!=null,zo(e,l,s,t.filter.filtersNodes())}}var $h=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Zo(r.getIndex()),o=Yx(r);this.processor_=gO(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(M.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(M.EMPTY_NODE,a.getNode(),null),u=new Rt(c,s.isFullyInitialized(),i.filtersNodes()),d=new Rt(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Wc(d,u),this.eventGenerator_=new Ph(this.query_)}get query(){return this.query_}};function CO(t){return t.viewCache_.serverCache.getNode()}function DO(t){return Pc(t.viewCache_)}function bO(t,e){let n=cr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(j(e)).isEmpty())?n.getChild(e):null}function LI(t){return t.eventRegistrations_.length===0}function SO(t,e){t.eventRegistrations_.push(e)}function FI(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function jI(t,e,n,r){e.type===Mt.MERGE&&e.source.queryId!==null&&(g(cr(t.viewCache_),"We should always have a full cache before handling merges"),g(Pc(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=vO(t.processor_,i,e,n,r);return mO(t.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Nw(t,o.changes,o.viewCache.eventCache.getNode(),null)}function TO(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ce,(o,s)=>{r.push(mi(o,s))}),n.isFullyInitialized()&&r.push(yw(n.getNode())),Nw(t,r,n.getNode(),e)}function Nw(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return Jx(t.eventGenerator_,e,n,i)}var jc,Uc=class{constructor(){this.views=new Map}};function AO(t){g(!jc,"__referenceConstructor has already been defined"),jc=t}function NO(){return g(jc,"Reference.ts has not been loaded"),jc}function MO(t){return t.views.size===0}function lp(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),jI(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(jI(s,e,n,r));return o}}function Mw(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=kc(n,i?r:null),c=!1;a?c=!0:r instanceof M?(a=ap(n,r),c=!1):(a=M.EMPTY_NODE,c=!1);let l=Wc(new Rt(a,c,!1),new Rt(r,i,!1));return new $h(e,l)}return s}function RO(t,e,n,r,i,o){let s=Mw(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),SO(s,n),TO(s,n)}function xO(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Sn(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(FI(l,n,r)),LI(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(FI(c,n,r)),LI(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Sn(t)&&o.push(new(NO())(e._repo,e._path)),{removed:o,events:s}}function Rw(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Dn(t,e){let n=null;for(let r of t.views.values())n=n||bO(r,e);return n}function xw(t,e){if(e._queryParams.loadsAllData())return Gc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Ow(t,e){return xw(t,e)!=null}function Sn(t){return Gc(t)!=null}function Gc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Vc;function OO(t){g(!Vc,"__referenceConstructor has already been defined"),Vc=t}function PO(){return g(Vc,"Reference.ts has not been loaded"),Vc}var kO=1,$c=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=hO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Pw(t,e,n,r,i){return nO(t.pendingWriteTree_,e,n,r,i),i?is(t,new vi(Iw(),e,n)):[]}function or(t,e,n=!1){let r=rO(t.pendingWriteTree_,e);if(iO(t.pendingWriteTree_,e)){let o=new Fe(null);return r.snap!=null?o=o.set(G(),!0):Le(r.children,s=>{o=o.set(new Q(s),!0)}),is(t,new Oh(r.path,o,n))}else return[]}function rs(t,e,n){return is(t,new vi(op(),e,n))}function LO(t,e,n){let r=Fe.fromObject(n);return is(t,new Oc(op(),e,r))}function FO(t,e){return is(t,new xc(op(),e))}function jO(t,e,n){let r=dp(t,n);if(r){let i=fp(r),o=i.path,s=i.queryId,a=Me(o,e),c=new xc(sp(s),a);return hp(t,o,c)}else return[]}function kw(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||Ow(s,e))){let c=xO(s,e,n,r);MO(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>Sn(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=BO(f);for(let p=0;p<h.length;++p){let m=h[p],_=m.query,D=Uw(t,m);t.listenProvider_.startListening(qo(_),Jo(t,_),D.hashFn,D.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(qo(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(qc(f));t.listenProvider_.stopListening(qo(f),h)}))}HO(t,l)}return a}function Lw(t,e,n,r){let i=dp(t,r);if(i!=null){let o=fp(i),s=o.path,a=o.queryId,c=Me(s,e),l=new vi(sp(a),c,n);return hp(t,s,l)}else return[]}function UO(t,e,n,r){let i=dp(t,r);if(i){let o=fp(i),s=o.path,a=o.queryId,c=Me(s,e),l=Fe.fromObject(n),u=new Oc(sp(a),c,l);return hp(t,s,u)}else return[]}function VO(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Me(f,i);o=o||Dn(h,p),s=s||Sn(h)});let a=t.syncPointTree_.get(i);a?(s=s||Sn(a),o=o||Dn(a,G())):(a=new Uc,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=M.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let m=Dn(p,G());m&&(o=o.updateImmediateChild(h,m))}));let l=Ow(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=qc(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=WO();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=zc(t.pendingWriteTree_,i),d=RO(a,e,n,u,o,c);if(!l&&!s&&!r){let f=xw(a,e);d=d.concat(zO(t,e,f))}return d}function up(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Me(s,e),l=Dn(a,c);if(l)return l});return Dw(i,e,o,n,!0)}function $O(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Me(l,n);r=r||Dn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||Dn(i,G()):(i=new Uc,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new Rt(r,!0,!1):null,a=zc(t.pendingWriteTree_,e._path),c=Mw(i,e,a,o?s.getNode():M.EMPTY_NODE,o);return DO(c)}function is(t,e){return Fw(e,t.syncPointTree_,null,zc(t.pendingWriteTree_,G()))}function Fw(t,e,n,r){if(L(t.path))return jw(t,e,n,r);{let i=e.get(G());n==null&&i!=null&&(n=Dn(i,G()));let o=[],s=j(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=bw(r,s);o=o.concat(Fw(a,c,l,u))}return i&&(o=o.concat(lp(i,t,r,n))),o}}function jw(t,e,n,r){let i=e.get(G());n==null&&i!=null&&(n=Dn(i,G()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=bw(r,s),u=t.operationForChild(s);u&&(o=o.concat(jw(u,a,c,l)))}),i&&(o=o.concat(lp(i,t,r,n))),o}function Uw(t,e){let n=e.query,r=Jo(t,n);return{hashFn:()=>(CO(e)||M.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?jO(t,n._path,r):FO(t,n._path);{let o=ox(i,n);return kw(t,n,null,o)}}}}function Jo(t,e){let n=qc(e);return t.queryToTagMap.get(n)}function qc(t){return t._path.toString()+"$"+t._queryIdentifier}function dp(t,e){return t.tagToQueryMap.get(e)}function fp(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}}function hp(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=zc(t.pendingWriteTree_,e);return lp(r,n,i,null)}function BO(t){return t.fold((e,n,r)=>{if(n&&Sn(n))return[Gc(n)];{let i=[];return n&&(i=Rw(n)),Le(r,(o,s)=>{i=i.concat(s)}),i}})}function qo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(PO())(t._repo,t._path):t}function HO(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=qc(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function WO(){return kO++}function zO(t,e,n){let r=e._path,i=Jo(t,e),o=Uw(t,n),s=t.listenProvider_.startListening(qo(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!Sn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!L(l)&&u&&Sn(u))return[Gc(u).query];{let f=[];return u&&(f=f.concat(Rw(u).map(h=>h.query))),Le(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(qo(u),Jo(t,u))}}return s}var Bh=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Hh=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=he(this.path_,e);return new t(this.syncTree_,n)}node(){return up(this.syncTree_,this.path_)}},GO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},UI=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return qO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return YO(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},qO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},YO=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},KO=function(t,e,n,r){return pp(e,new Hh(n,t),r)},Vw=function(t,e,n){return pp(t,new Bh(e),n)};function pp(t,e,n){let r=t.getPriority().val(),i=UI(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=UI(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new pi(a,ye(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new pi(i))),s.forEachChild(ce,(a,c)=>{let l=pp(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Xo=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function gp(t,e){let n=e instanceof Q?e:new Q(e),r=t,i=j(n);for(;i!==null;){let o=Qn(r.node.children,i)||{children:{},childCount:0};r=new Xo(i,r,o),n=ne(n),i=j(n)}return r}function wi(t){return t.node.value}function $w(t,e){t.node.value=e,Wh(t)}function Bw(t){return t.node.childCount>0}function ZO(t){return wi(t)===void 0&&!Bw(t)}function Yc(t,e){Le(t.node.children,(n,r)=>{e(new Xo(n,t,r))})}function Hw(t,e,n,r){n&&!r&&e(t),Yc(t,i=>{Hw(i,e,!0,r)}),n&&r&&e(t)}function QO(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function os(t){return new Q(t.parent===null?t.name:os(t.parent)+"/"+t.name)}function Wh(t){t.parent!==null&&JO(t.parent,t.name,t)}function JO(t,e,n){let r=ZO(n),i=At(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Wh(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Wh(t))}var XO=/[\[\].#$\/\u0000-\u001F\u007F]/,eP=/[\[\].#$\u0000-\u001F\u007F]/,rh=10*1024*1024,Ww=function(t){return typeof t=="string"&&t.length!==0&&!XO.test(t)},zw=function(t){return typeof t=="string"&&t.length!==0&&!eP.test(t)},tP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zw(t)};var nP=function(t,e,n,r){r&&e===void 0||mp(ic(t,"value"),e,n)},mp=function(t,e,n){let r=n instanceof Q?new vh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+rr(r));if(typeof e=="function")throw new Error(t+"contains a function "+rr(r)+" with contents = "+e.toString());if(zI(e))throw new Error(t+"contains "+e.toString()+" "+rr(r));if(typeof e=="string"&&e.length>rh/3&&Do(e)>rh)throw new Error(t+"contains a string greater than "+rh+" utf8 bytes "+rr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Le(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Ww(s)))throw new Error(t+" contains an invalid key ("+s+") "+rr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Px(r,s),mp(t,a,r),kx(r)}),i&&o)throw new Error(t+' contains ".value" child '+rr(r)+" in addition to actual children.")}};var Gw=function(t,e,n,r){if(!(r&&n===void 0)&&!zw(n))throw new Error(ic(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},rP=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gw(t,e,n,r)},iP=function(t,e){if(j(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},oP=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ww(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!tP(n))throw new Error(ic(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var zh=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function qw(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!fw(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function xt(t,e,n){qw(t,n),sP(t,r=>gt(r,e)||gt(e,r))}function sP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(aP(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function aP(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();sr&&be("event: "+n.toString()),Ii(r)}}}var cP="repo_interrupt",lP=25,Gh=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rc(),this.transactionQueueTree_=new Xo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function uP(t,e,n){if(t.stats_=np(t.repoInfo_),t.forceRestClient_||lx())t.server_=new Ah(t.repoInfo_,(r,i,o,s)=>{VI(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$I(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{le(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new rp(t.repoInfo_,e,(r,i,o,s)=>{VI(t,r,i,o,s)},r=>{$I(t,r)},r=>{fP(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=dx(t.repoInfo_,()=>new xh(t.stats_,t.server_)),t.infoData_=new Nh,t.infoSyncTree_=new $c({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=rs(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),yp(t,"connected",!1),t.serverSyncTree_=new $c({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);xt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function dP(t){let n=t.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function vp(t){return GO({timestamp:dP(t)})}function VI(t,e,n,r,i){t.dataUpdateCount++;let o=new Q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=wo(n,l=>ye(l));s=UO(t.serverSyncTree_,o,c,i)}else{let c=ye(n);s=Lw(t.serverSyncTree_,o,c,i)}else if(r){let c=wo(n,l=>ye(l));s=LO(t.serverSyncTree_,o,c)}else{let c=ye(n);s=rs(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Zc(t,o)),xt(t.eventQueue_,a,s)}function $I(t,e){yp(t,"connected",e),e===!1&&gP(t)}function fP(t,e){Le(e,(n,r)=>{yp(t,n,r)})}function yp(t,e,n){let r=new Q("/.info/"+e),i=ye(n);t.infoData_.updateSnapshot(r,i);let o=rs(t.infoSyncTree_,r,i);xt(t.eventQueue_,r,o)}function Yw(t){return t.nextWriteId_++}function hP(t,e,n){let r=$O(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=ye(i).withIndex(e._queryParams.getIndex());VO(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=rs(t.serverSyncTree_,e._path,o);else{let a=Jo(t.serverSyncTree_,e);s=Lw(t.serverSyncTree_,e._path,o,a)}return xt(t.eventQueue_,e._path,s),kw(t.serverSyncTree_,e,n,null,!0),o},i=>(Kc(t,"get for query "+le(e)+" failed: "+i),Promise.reject(new Error(i))))}function pP(t,e,n,r,i){Kc(t,"set",{path:e.toString(),value:n,priority:r});let o=vp(t),s=ye(n,r),a=up(t.serverSyncTree_,e),c=Vw(s,a,o),l=Yw(t),u=Pw(t.serverSyncTree_,e,c,l,!0);qw(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||ke("set at "+e+" failed: "+f);let m=or(t.serverSyncTree_,l,!p);xt(t.eventQueue_,e,m),vP(t,i,f,h)});let d=Xw(t,e);Zc(t,d),xt(t.eventQueue_,d,[])}function gP(t){Kc(t,"onDisconnectEvents");let e=vp(t),n=Rc();Mh(t.onDisconnect_,G(),(i,o)=>{let s=KO(i,o,t.serverSyncTree_,e);_w(n,i,s)});let r=[];Mh(n,G(),(i,o)=>{r=r.concat(rs(t.serverSyncTree_,i,o));let s=Xw(t,i);Zc(t,s)}),t.onDisconnect_=Rc(),xt(t.eventQueue_,G(),r)}function mP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(cP)}function Kc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),be(n,...e)}function vP(t,e,n,r){e&&Ii(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function Kw(t,e,n){return up(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function _p(t,e=t.transactionQueueTree_){if(e||Qc(t,e),wi(e)){let n=Qw(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&yP(t,os(e),n)}else Bw(e)&&Yc(e,n=>{_p(t,n)})}function yP(t,e,n){let r=n.map(l=>l.currentWriteId),i=Kw(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Me(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Kc(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(or(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Qc(t,gp(t.transactionQueueTree_,e)),_p(t,t.transactionQueueTree_),xt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ii(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ke("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Zc(t,e)}},s)}function Zc(t,e){let n=Zw(t,e),r=os(n),i=Qw(t,n);return _P(t,i,r),r}function _P(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Me(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(or(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=lP)u=!0,d="maxretry",i=i.concat(or(t.serverSyncTree_,c.currentWriteId,!0));else{let f=Kw(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){mp("transaction failed: Data returned ",h,c.path);let p=ye(h);typeof h=="object"&&h!=null&&At(h,".priority")||(p=p.updatePriority(f.getPriority()));let _=c.currentWriteId,D=vp(t),B=Vw(p,f,D);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=B,c.currentWriteId=Yw(t),s.splice(s.indexOf(_),1),i=i.concat(Pw(t.serverSyncTree_,c.path,B,c.currentWriteId,c.applyLocally)),i=i.concat(or(t.serverSyncTree_,_,!0))}else u=!0,d="nodata",i=i.concat(or(t.serverSyncTree_,c.currentWriteId,!0))}xt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Qc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ii(r[a]);_p(t,t.transactionQueueTree_)}function Zw(t,e){let n,r=t.transactionQueueTree_;for(n=j(e);n!==null&&wi(r)===void 0;)r=gp(r,n),e=ne(e),n=j(e);return r}function Qw(t,e){let n=[];return Jw(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Jw(t,e,n){let r=wi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Yc(e,i=>{Jw(t,i,n)})}function Qc(t,e){let n=wi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,$w(e,n.length>0?n:void 0)}Yc(e,r=>{Qc(t,r)})}function Xw(t,e){let n=os(Zw(t,e)),r=gp(t.transactionQueueTree_,e);return QO(r,i=>{ih(t,i)}),ih(t,r),Hw(r,i=>{ih(t,i)}),n}function ih(t,e){let n=wi(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(or(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?$w(e,void 0):n.length=o+1,xt(t.eventQueue_,os(e),i);for(let s=0;s<r.length;s++)Ii(r[s])}}function IP(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function wP(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ke(`Invalid query segment '${n}' in query '${t}'`)}return e}var BI=function(t,e){let n=EP(t),r=n.namespace;n.domain==="firebase.com"&&Gt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Gt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||ex();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Cc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Q(n.pathString)}},EP=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=IP(t.substring(u,d)));let f=wP(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var qh=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+le(this.snapshot.exportVal())}},Yh=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Kh=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Zh=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:lw(this._path)}get ref(){return new qt(this._repo,this._path)}get _queryIdentifier(){let e=AI(this._queryParams),n=tp(e);return n==="{}"?"default":n}get _queryObject(){return AI(this._queryParams)}isEqual(e){if(e=Qe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=fw(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ox(this._path)}};var qt=class t extends Zh{constructor(e,n){super(e,n,new Th,!1)}get parent(){let e=dw(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Bc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Q(e),r=Hc(this.ref,e);return new t(this._node.getChild(n),r,ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Hc(this.ref,r),ce)))}hasChild(e){let n=new Q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function eE(t,e){return t=Qe(t),t._checkNotDeleted("ref"),e!==void 0?Hc(t._root,e):t._root}function Hc(t,e){return t=Qe(t),j(t._path)===null?rP("child","path",e,!1):Gw("child","path",e,!1),new qt(t._repo,he(t._path,e))}function tE(t,e){t=Qe(t),iP("set",t._path),nP("set",e,t._path,!1);let n=new vn;return pP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function nE(t){t=Qe(t);let e=new Kh(()=>{}),n=new Qh(e);return hP(t._repo,t,n).then(r=>new Bc(r,new qt(t._repo,t._path),t._queryParams.getIndex()))}var Qh=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new qh("value",this,new Bc(e.snapshotNode,new qt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Yh(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};AO(qt);OO(qt);var CP="FIREBASE_DATABASE_EMULATOR_HOST",Jh={},DP=!1;function bP(t,e,n,r){t.repoInfo_=new Cc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function SP(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Gt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),be("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=BI(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[CP]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=BI(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Wo(Wo.OWNER):new uh(t.name,t.options,e);oP("Invalid Firebase Database URL",s),L(s.path)||Gt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=AP(a,t,u,new lh(t.name,n));return new Xh(d,t)}function TP(t,e){let n=Jh[e];(!n||n[t.key]!==t)&&Gt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),mP(t),delete n[t.key]}function AP(t,e,n,r){let i=Jh[e.name];i||(i={},Jh[e.name]=i);let o=i[t.toURLString()];return o&&Gt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Gh(t,DP,n,r),i[t.toURLString()]=o,o}var Xh=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(uP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qt(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&(TP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Gt("Cannot call "+e+" on a deleted database.")}};function rE(t=Ao(),e){let n=Of(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=__("database");r&&iE(n,...r)}return n}function iE(t,e,n,r={}){t=Qe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Gt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Wo(Wo.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:w_(r.mockUserToken,t.app.options.projectId);o=new Wo(s)}bP(i,e,n,o)}function NP(t){QR(oi),In(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return SP(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),ve(dI,fI,t),ve(dI,fI,"esm2017")}rp.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};rp.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};NP();var ur=class{constructor(e){return e}},oE="database",Ip=class{constructor(){return Mo(oE)}};var wp=new S("angularfire2.database-instances");function MP(t,e){let n=Lf(oE,t,e);return n&&new ur(n)}function RP(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ur(r)}}var xP={provide:Ip,deps:[[new ct,wp]]},OP={provide:ur,useFactory:MP,deps:[[new ct,wp],er]};function sE(t,...e){return ve("angularfire",ai.full,"rtdb"),ln([OP,xP,{provide:wp,useFactory:RP(t),multi:!0,deps:[te,at,Ro,xo,[new ct,Ic],[new ct,No],...e]}])}var Ep=wn(nE,!0),Jc=wn(rE,!0);var Cp=wn(eE,!0);var aE=wn(tE,!0);var cE={providers:[z_(()=>G_({projectId:"set-card-game-b7b55",appId:"1:314036741918:web:13991a7c172a1b2efecb0f",databaseURL:"https://set-card-game-b7b55-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"set-card-game-b7b55.firebasestorage.app",apiKey:"AIzaSyDZAx444-7oW19-zQFktsp_2Ef6D5lHD4A",authDomain:"set-card-game-b7b55.firebaseapp.com",messagingSenderId:"314036741918"})),sE(()=>Jc()),iy({eventCoalescing:!0}),f_(h_)]};var Tn=function(t){return t.Oval="oval",t.Diamond="diamond",t.Squigle="squiggle",t}(Tn||{}),An=function(t){return t.Red="red",t.Green="green",t.Blue="blue",t}(An||{}),Nn=function(t){return t.Solid="solid",t.Striped="striped",t.Open="open",t}(Nn||{});var ss=class{Cards=[];constructor(){this.newCards()}newCards(){var e=[Tn.Diamond,Tn.Oval,Tn.Squigle],n=[An.Red,An.Green,An.Blue],r=[Nn.Open,Nn.Solid,Nn.Striped],i=this.Cards,o=1;for(let s=1;s<=3;s++)e.forEach(a=>{n.forEach(c=>{r.forEach(l=>{var u={Color:c,Fill:l,Count:s,Shape:a,Id:o,Selected:!1,Blink:!1};i.push(u),o++})})})}findMissingSetCard(e,n){let r=e.Color===n.Color,i=e.Count===n.Count,o=e.Fill===n.Fill,s=e.Shape===n.Shape,a=r?e.Color:this.missingColor(e.Color,n.Color),c=i?e.Count:this.missingCount(e.Count,n.Count),l=o?e.Fill:this.missingFill(e.Fill,n.Fill),u=s?e.Shape:this.missingShape(e.Shape,n.Shape);return this.Cards.find(d=>d.Color===a&&d.Count===c&&d.Fill===l&&d.Shape===u)}missingColor(e,n){let r=[An.Red,An.Green,An.Blue];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}missingCount(e,n){let r=[1,2,3];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}missingShape(e,n){let r=[Tn.Diamond,Tn.Oval,Tn.Squigle];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}missingFill(e,n){let r=[Nn.Open,Nn.Solid,Nn.Striped];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}removeFrom(e,n){let r=e.indexOf(n);r>-1&&e.splice(r,1)}};var PP=(t,e)=>({card:!0,selected:t,blink:e});function kP(t,e){if(t&1&&$t(0,"img",2),t&2){let n=Ye();we("src",n.ImagePath(),Ia)}}function LP(t,e){if(t&1&&$t(0,"img",2),t&2){let n=Ye();we("src",n.ImagePath(),Ia)}}var lE=(()=>{class t{CardInfo;CardSelected=new me;CardUnSelected=new me;ImagePath(){var n=this.CardInfo;return`set_picts/${n.Shape}_${n.Fill}_${n.Color}.png`}clicked(){this.CardInfo.Selected=!this.CardInfo.Selected,this.CardInfo.Selected?this.CardSelected.emit(this.CardInfo):this.CardUnSelected.emit(this.CardInfo)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=cn({type:t,selectors:[["app-card"]],inputs:{CardInfo:"CardInfo"},outputs:{CardSelected:"CardSelected",CardUnSelected:"CardUnSelected"},standalone:!0,features:[pn],decls:5,vars:7,consts:[[3,"click","ngClass"],[1,"card-images"],[3,"src"],[3,"src",4,"ngIf"]],template:function(r,i){r&1&&(X(0,"div",0),Pe("click",function(){return i.clicked()}),X(1,"div",1),$t(2,"img",2),dt(3,kP,1,1,"img",3)(4,LP,1,1,"img",3),ee()()),r&2&&(we("ngClass",Qv(4,PP,i.CardInfo.Selected,i.CardInfo.Blink)),ae(2),we("src",i.ImagePath(),Ia),ae(),we("ngIf",i.CardInfo.Count>1),ae(),we("ngIf",i.CardInfo.Count>2))},dependencies:[zn,yy,ka],styles:[".card[_ngcontent-%COMP%]{background-color:#fff;width:13vw;padding:1vw;margin:0 auto;border-radius:.5vw}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinker .2s linear infinite}@keyframes _ngcontent-%COMP%_blinker{50%{background-color:#f2f297}}.selected[_ngcontent-%COMP%]{background-color:#d8d9ee!important}.card-images[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:2vw;padding-bottom:2vw}.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5vw;height:auto;display:block;transform:rotate(90deg);margin:-.3vw}"]})}return t})();function FP(t,e){if(t&1&&(X(0,"div",1)(1,"div",2),De(2),ee()()),t&2){let n=Ye();ae(2),hn(" ",n.Message," ")}}var uE=(()=>{class t{Message="";Visible=!1;static \u0275fac=function(r){return new(r||t)};static \u0275cmp=cn({type:t,selectors:[["app-dialog"]],inputs:{Message:"Message",Visible:"Visible"},standalone:!0,features:[pn],decls:1,vars:1,consts:[["class","center-screen",4,"ngIf"],[1,"center-screen"],[1,"dialog"]],template:function(r,i){r&1&&dt(0,FP,3,1,"div",0),r&2&&we("ngIf",i.Visible)},dependencies:[zn,ka]})}return t})();var Yt=class{static getToday(){var e=new Date().toISOString();return e.split("T")[0]}};var as=jE(TE());var AE=(()=>{class t{rng=(0,as.default)(Yt.getToday());constructor(){this.rng=(0,as.default)(Yt.getToday())}setSeed(){this.rng=(0,as.default)(Yt.getToday())}removeSeed(){this.rng=(0,as.default)()}getRandom(){return this.rng()}getRandomInt(n,r){return Math.floor(this.rng()*(r-n+1))+n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zP(t,e){if(t&1){let n=dd();X(0,"app-card",13),Pe("CardSelected",function(i){ga(n);let o=Ye();return ma(o.cardSelected(i))})("CardUnSelected",function(i){ga(n);let o=Ye();return ma(o.cardUnSelected(i))}),ee()}if(t&2){let n=e.$implicit;we("CardInfo",n)}}function GP(t,e){if(t&1&&$t(0,"app-card",18),t&2){let n=e.$implicit;we("CardInfo",n)}}function qP(t,e){if(t&1&&(X(0,"div",16),dt(1,GP,1,1,"app-card",17),ee()),t&2){let n=e.$implicit;ae(),we("ngForOf",n)}}function YP(t,e){if(t&1&&(X(0,"div",7)(1,"div",14),De(2),ee(),dt(3,qP,2,1,"div",15),ee()),t&2){let n=Ye();ae(2),hn("Found ",n.Found.length,""),ae(),we("ngForOf",n.Found)}}function KP(t,e){if(t&1&&(X(0,"tr")(1,"td"),De(2),ee(),X(3,"td",21),De(4),ee(),X(5,"td"),De(6),ee()()),t&2){let n=e.$implicit,r=e.$index,i=Ye(2);ae(2),hn("",r+1,"."),ae(2),Bn(n.user),ae(2),Bn(i.formatTime(n.time))}}function ZP(t,e){if(t&1){let n=dd();X(0,"div",19),Pe("click",function(){ga(n);let i=Ye();return ma(i.ShowToplist=!1)}),X(1,"div",20)(2,"table"),Kv(3,KP,7,3,"tr",null,Yv),ee()()()}if(t&2){let n=Ye();ae(3),Zv(n.Toplist)}}var NE=(()=>{class t{randomService;database=y(ur);GameType="daily";title="daily-set";Deck=new ss;SelectedCards=[];Tabel=[];Found=[];FoundIds=[];ExistingIds=[];SetCount=0;TotalSeconds=0;Time="00:00";Started=new Date().getTime();TimeHandle=null;showDialog=!1;dialogMessage="";Today=Yt.getToday();HintCount=0;UserName="Guest";Toplist=[];ShowToplist=!1;constructor(n){this.randomService=n,this.setUserName(),this.startDaily()}showToplist(){this.getTopList(this.Today).then(n=>{this.Toplist=n}),this.ShowToplist=!0}storeResult(n,r,i){if(this.GameType==="random")return;let o=`${r}/${n}`,s=Cp(this.database,o);Ep(s).then(a=>{if(a.exists()){console.log("Data already exists. Not saving.");return}aE(s,{time:i}).then(()=>{console.log("Data saved successfully!")}).catch(c=>{console.error("Error saving data:",c)})}).catch(a=>{console.error("Error checking existing data:",a)})}getTopList(n,r=10){return v(this,null,function*(){let i=Jc(),o=Cp(i,n);try{let s=yield Ep(o);if(!s.exists())return console.log("No results found for this gameId."),[];let a=[];return s.forEach(c=>{let l=c.key,u=c.val().time;a.push({user:l,time:u})}),a.sort((c,l)=>c.time-l.time).slice(0,r)}catch(s){return console.error("Error fetching top list:",s),[]}})}getCardPath(n){return`set_picts/${n.Shape}_${n.Fill}_${n.Color}.png`}startTime(){this.TimeHandle=setInterval(()=>{let r=new Date().getTime()-this.Started,i=Math.floor(r/1e3);i+=this.HintCount*60,this.TotalSeconds=i;let o=this.formatTime(i);this.Time=o},1e3)}formatTime(n){let r=Math.floor(n/60),i=n%60;return`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}cardUnSelected(n){let r=this.SelectedCards.indexOf(n);r>-1&&this.SelectedCards.splice(r,1)}cardSelected(n){let r=this.SelectedCards;if(r.push(n),r.length==3&&this.isSet(r[0],r[1],r[2])){r.forEach(o=>o.Selected=!1);let i=this.getId(this.SelectedCards);this.FoundIds.indexOf(i)==-1&&(this.FoundIds.push(i),this.Found.push(structuredClone(this.SelectedCards)),this.SelectedCards.forEach(o=>this.blink(o)),this.Found.length===this.SetCount&&(this.storeResult(this.UserName,this.Today,this.TotalSeconds),clearInterval(this.TimeHandle),this.dialogMessage="Good! Your time:"+this.Time,this.showDialog=!0)),this.SelectedCards=[]}}getId(n){return n.sort((i,o)=>i.Id-o.Id).map(i=>i.Id).join("_")}isSet(n,r,i){return!(!this.allAreSameOrAllDiffer(n.Color,r.Color,i.Color)||!this.allAreSameOrAllDiffer(n.Count,r.Count,i.Count)||!this.allAreSameOrAllDiffer(n.Shape,r.Shape,i.Shape)||!this.allAreSameOrAllDiffer(n.Fill,r.Fill,i.Fill))}allAreSameOrAllDiffer(n,r,i){return n===r&&r===i&&n===i||n!==r&&r!==i&&n!==i}setTable(){for(this.addRandomcard();this.Tabel.length<11&&(this.addRandomcard(),this.Tabel.length!==11);){var n=this.Tabel.length;let o=this.Tabel[n-1],s=this.Tabel[n-2];this.createSetOrAddRandom(o,s)}let r=this.Tabel[10],i=this.Tabel[0];this.createSetOrAddRandom(r,i),this.Tabel=this.shuffelArray(this.Tabel)}shuffelArray(n){let r=n.slice();for(let i=r.length-1;i>0;i--){let o=this.randomService.getRandomInt(0,i);[r[i],r[o]]=[r[o],r[i]]}return r}createSetOrAddRandom(n,r){let i=this.Deck.findMissingSetCard(n,r);i&&!this.Tabel.find(o=>o.Id==i.Id)?this.Tabel.push(i):this.addRandomcard()}addRandomcard(){let n=this.randomService.getRandomInt(0,80),r=this.Deck.Cards[n];this.Tabel.find(i=>i.Id===r.Id)?this.addRandomcard():this.Tabel.push(r)}countSets(){let n=[];for(let r=0;r<this.Tabel.length;r++)for(let i=r+1;i<this.Tabel.length;i++)for(let o=i+1;o<this.Tabel.length;o++)if(this.isSet(this.Tabel[r],this.Tabel[i],this.Tabel[o])){let s=this.getId([this.Tabel[r],this.Tabel[i],this.Tabel[o]]);n.indexOf(s)<0&&n.push(s)}this.SetCount=n.length,this.ExistingIds=n}giveHint(){for(let n=0;n<this.ExistingIds.length;n++){let r=this.ExistingIds[n];if(this.FoundIds.indexOf(r)==-1){let i=r.split("_"),o=this.HintCount%2==0?i[0]:i[1],s=this.Tabel.find(a=>a.Id==parseInt(o));s&&this.blink(s),this.HintCount++;return}}}blink(n){n.Blink=!0,setTimeout(()=>{n.Blink=!1},1e3)}shuffleTable(){this.Tabel=this.shuffelArray(this.Tabel)}changeUserName(){let n=prompt("What is your name?");n?localStorage.setItem("set-user-name",n):n="Guest",this.UserName=n}setUserName(){let n=localStorage.getItem("set-user-name");n||(n=prompt("What is your name?"),n?localStorage.setItem("set-user-name",n):n="Guest"),this.UserName=n}startRandom(){this.GameType="random",this.randomService.removeSeed(),this.startGame()}startDaily(){this.GameType="daily",this.randomService.setSeed(),this.startGame()}startGame(){this.SelectedCards=[],this.Tabel=[],this.Found=[],this.FoundIds=[],this.ExistingIds=[],this.SetCount=0,this.Time="00:00",this.TotalSeconds=0,this.HintCount=0,this.Started=new Date().getTime(),this.showDialog=!1,this.dialogMessage="",this.Today=Yt.getToday(),this.Deck=new ss,this.Deck.Cards=this.shuffelArray(this.Deck.Cards),this.setTable(),this.countSets(),this.startTime()}static \u0275fac=function(r){return new(r||t)(qe(AE))};static \u0275cmp=cn({type:t,selectors:[["app-root"]],standalone:!0,features:[pn],decls:28,vars:9,consts:[[1,"app-container"],[1,"buttons"],[3,"click"],[1,"tabel"],[1,"sub-header"],[1,"grid"],[3,"CardInfo","CardSelected","CardUnSelected",4,"ngFor","ngForOf"],[1,"founds-container"],[1,"usertime"],["href","#",1,"user",3,"click"],[1,"time"],[3,"click","Visible","Message"],[1,"center-screen"],[3,"CardSelected","CardUnSelected","CardInfo"],[1,"found-count"],["class","founds-row",4,"ngFor","ngForOf"],[1,"founds-row"],[3,"CardInfo",4,"ngFor","ngForOf"],[3,"CardInfo"],[1,"center-screen",3,"click"],[1,"toplist","dialog"],[1,"name"]],template:function(r,i){r&1&&(X(0,"div",0)(1,"div",1)(2,"button",2),Pe("click",function(){return i.startDaily()}),De(3,"Daily"),ee(),X(4,"button",2),Pe("click",function(){return i.startRandom()}),De(5,"Random"),ee(),X(6,"button",2),Pe("click",function(){return i.shuffleTable()}),De(7,"Shuffle"),ee(),X(8,"button",2),Pe("click",function(){return i.giveHint()}),De(9,"Hint"),ee(),X(10,"button",2),Pe("click",function(){return i.showToplist()}),De(11,"Toplist"),ee()(),X(12,"div",3)(13,"div",4)(14,"span"),De(15),ee(),X(16,"span"),De(17),ee()(),X(18,"div",5),dt(19,zP,1,1,"app-card",6),ee()(),dt(20,YP,4,2,"div",7),ee(),X(21,"div",8)(22,"a",9),Pe("click",function(){return i.changeUserName()}),De(23),ee(),X(24,"div",10),De(25),ee()(),X(26,"app-dialog",11),Pe("click",function(){return i.showDialog=!1}),ee(),dt(27,ZP,5,0,"div",12)),r&2&&(ae(15),hn("Find the ",i.SetCount," sets"),ae(2),Bn(i.Today),ae(2),we("ngForOf",i.Tabel),ae(),ud(i.Found.length>0?20:-1),ae(3),Bn(i.UserName),ae(2),Bn(i.Time),ae(),we("Visible",i.showDialog)("Message",i.dialogMessage),ae(),ud(i.ShowToplist?27:-1))},dependencies:[lE,zn,_y,uE],styles:[".buttons[_ngcontent-%COMP%]{display:flex;gap:2vw;padding-bottom:2vh}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:2em}.text[_ngcontent-%COMP%]{font-size:1.5em}.tabel[_ngcontent-%COMP%]{float:left}.founds-container[_ngcontent-%COMP%]{font-size:x-large;margin-top:1em;float:left;scale:.6;transform-origin:top left}.founds-container[_ngcontent-%COMP%]   .found-count[_ngcontent-%COMP%]{display:block;text-align:center}.founds-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:8px}.sub-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:.3vw;background-color:#ccc;padding:.3vw}.usertime[_ngcontent-%COMP%]{position:absolute;right:.1em;top:.1em}.time[_ngcontent-%COMP%]{font-size:1.5em}.toplist[_ngcontent-%COMP%]{font-size:.85rem;flex-direction:column}.toplist[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:.5rem}.toplist[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}"]})}return t})();Ay(NE,cE).catch(t=>console.error(t));
