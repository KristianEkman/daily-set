var Ob=Object.create;var hu=Object.defineProperty,kb=Object.defineProperties,Lb=Object.getOwnPropertyDescriptor,Fb=Object.getOwnPropertyDescriptors,jb=Object.getOwnPropertyNames,aa=Object.getOwnPropertySymbols,Ub=Object.getPrototypeOf,pu=Object.prototype.hasOwnProperty,Fm=Object.prototype.propertyIsEnumerable;var Lm=(n,e,t)=>e in n?hu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,D=(n,e)=>{for(var t in e||={})pu.call(e,t)&&Lm(n,t,e[t]);if(aa)for(var t of aa(e))Fm.call(e,t)&&Lm(n,t,e[t]);return n},fe=(n,e)=>kb(n,Fb(e));var jm=(n,e)=>{var t={};for(var r in n)pu.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&aa)for(var r of aa(n))e.indexOf(r)<0&&Fm.call(n,r)&&(t[r]=n[r]);return t};var on=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Vb=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jb(e))!pu.call(n,i)&&i!==t&&hu(n,i,{get:()=>e[i],enumerable:!(r=Lb(e,i))||r.enumerable});return n};var $b=(n,e,t)=>(t=n!=null?Ob(Ub(n)):{},Vb(e||!n||!n.__esModule?hu(t,"default",{value:n,enumerable:!0}):t,n));var _=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var $E=on((VE,$h)=>{"use strict";(function(n,e,t){function r(a){var c=this,l=o();c.next=function(){var u=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=u-(c.c=u|0)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(a),c.s0<0&&(c.s0+=1),c.s1-=l(a),c.s1<0&&(c.s1+=1),c.s2-=l(a),c.s2<0&&(c.s2+=1),l=null}function i(a,c){return c.c=a.c,c.s0=a.s0,c.s1=a.s1,c.s2=a.s2,c}function s(a,c){var l=new r(a),u=c&&c.state,d=l.next;return d.int32=function(){return l.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}function o(){var a=4022871197,c=function(l){l=String(l);for(var u=0;u<l.length;u++){a+=l.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return c}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.alea=s})(VE,typeof $h=="object"&&$h,typeof define=="function"&&define)});var HE=on((BE,Bh)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},o===(o|0)?a.x=o:c+=o;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,a.next()}function i(o,a){return a.x=o.x,a.y=o.y,a.z=o.z,a.w=o.w,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xor128=s})(BE,typeof Bh=="object"&&Bh,typeof define=="function"&&define)});var WE=on((zE,Hh)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,o===(o|0)?a.x=o:c+=o;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,l==c.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function i(o,a){return a.x=o.x,a.y=o.y,a.z=o.z,a.w=o.w,a.v=o.v,a.d=o.d,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xorwow=s})(zE,typeof Hh=="object"&&Hh,typeof define=="function"&&define)});var GE=on((qE,zh)=>{"use strict";(function(n,e,t){function r(o){var a=this;a.next=function(){var l=a.x,u=a.i,d,f,h;return d=l[u],d^=d>>>7,f=d^d<<24,d=l[u+1&7],f^=d^d>>>10,d=l[u+3&7],f^=d^d>>>3,d=l[u+4&7],f^=d^d<<7,d=l[u+7&7],d=d^d<<13,f^=d^d<<9,l[u]=f,a.i=u+1&7,f};function c(l,u){var d,f,h=[];if(u===(u|0))f=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?f=h[7]=-1:f=h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}c(a,o)}function i(o,a){return a.x=o.x.slice(),a.i=o.i,a}function s(o,a){o==null&&(o=+new Date);var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.x&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xorshift7=s})(qE,typeof zh=="object"&&zh,typeof define=="function"&&define)});var YE=on((KE,Wh)=>{"use strict";(function(n,e,t){function r(o){var a=this;a.next=function(){var l=a.w,u=a.X,d=a.i,f,h;return a.w=l=l+1640531527|0,h=u[d+34&127],f=u[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=u[d]=h^f,a.i=d,h+(l^l>>>16)|0};function c(l,u){var d,f,h,p,g,m=[],I=128;for(u===(u|0)?(f=u,u=null):(u=u+"\0",f=0,I=Math.max(I,u.length)),h=0,p=-32;p<I;++p)u&&(f^=u.charCodeAt((p+32)%u.length)),p===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(g=g+1640531527|0,d=m[p&127]^=f+g,h=d==0?h+1:0);for(h>=128&&(m[(u&&u.length||0)&127]=-1),h=127,p=4*128;p>0;--p)f=m[h+34&127],d=m[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,m[h]=f^d;l.w=g,l.X=m,l.i=h}c(a,o)}function i(o,a){return a.i=o.i,a.w=o.w,a.X=o.X.slice(),a}function s(o,a){o==null&&(o=+new Date);var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.X&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xor4096=s})(KE,typeof Wh=="object"&&Wh,typeof define=="function"&&define)});var ZE=on((QE,qh)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.next=function(){var u=a.b,d=a.c,f=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-f|0,a.d=f<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,o===Math.floor(o)?(a.a=o/4294967296|0,a.b=o|0):c+=o;for(var l=0;l<c.length+20;l++)a.b^=c.charCodeAt(l)|0,a.next()}function i(o,a){return a.a=o.a,a.b=o.b,a.c=o.c,a.d=o.d,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.tychei=s})(QE,typeof qh=="object"&&qh,typeof define=="function"&&define)});var JE=on(()=>{"use strict"});var eI=on((XE,Qc)=>{"use strict";(function(n,e,t){var r=256,i=6,s=52,o="random",a=t.pow(r,i),c=t.pow(2,s),l=c*2,u=r-1,d;function f(E,C,$){var M=[];C=C==!0?{entropy:!0}:C||{};var b=m(g(C.entropy?[E,T(e)]:E??I(),3),M),Z=new h(M),de=function(){for(var ye=Z.g(i),lt=a,be=0;ye<c;)ye=(ye+be)*r,lt*=r,be=Z.g(1);for(;ye>=l;)ye/=2,lt/=2,be>>>=1;return(ye+be)/lt};return de.int32=function(){return Z.g(4)|0},de.quick=function(){return Z.g(4)/4294967296},de.double=de,m(T(Z.S),e),(C.pass||$||function(ye,lt,be,ut){return ut&&(ut.S&&p(ut,Z),ye.state=function(){return p(Z,{})}),be?(t[o]=ye,lt):ye})(de,b,"global"in C?C.global:this==t,C.state)}function h(E){var C,$=E.length,M=this,b=0,Z=M.i=M.j=0,de=M.S=[];for($||(E=[$++]);b<r;)de[b]=b++;for(b=0;b<r;b++)de[b]=de[Z=u&Z+E[b%$]+(C=de[b])],de[Z]=C;(M.g=function(ye){for(var lt,be=0,ut=M.i,sr=M.j,En=M.S;ye--;)lt=En[ut=u&ut+1],be=be*r+En[u&(En[ut]=En[sr=u&sr+lt])+(En[sr]=lt)];return M.i=ut,M.j=sr,be})(r)}function p(E,C){return C.i=E.i,C.j=E.j,C.S=E.S.slice(),C}function g(E,C){var $=[],M=typeof E,b;if(C&&M=="object")for(b in E)try{$.push(g(E[b],C-1))}catch{}return $.length?$:M=="string"?E:E+"\0"}function m(E,C){for(var $=E+"",M,b=0;b<$.length;)C[u&b]=u&(M^=C[u&b]*19)+$.charCodeAt(b++);return T(C)}function I(){try{var E;return d&&(E=d.randomBytes)?E=E(r):(E=new Uint8Array(r),(n.crypto||n.msCrypto).getRandomValues(E)),T(E)}catch{var C=n.navigator,$=C&&C.plugins;return[+new Date,n,$,n.screen,T(e)]}}function T(E){return String.fromCharCode.apply(0,E)}if(m(t.random(),e),typeof Qc=="object"&&Qc.exports){Qc.exports=f;try{d=JE()}catch{}}else typeof define=="function"&&define.amd?define(function(){return f}):t["seed"+o]=f})(typeof self<"u"?self:XE,[],Math)});var nI=on((WW,tI)=>{"use strict";var Ex=$E(),Ix=HE(),Cx=WE(),Dx=GE(),bx=YE(),Sx=ZE(),Pr=eI();Pr.alea=Ex;Pr.xor128=Ix;Pr.xorwow=Cx;Pr.xorshift7=Dx;Pr.xor4096=bx;Pr.tychei=Sx;tI.exports=Pr});var mu=null;var gu=1,Um=Symbol("SIGNAL");function G(n){let e=mu;return mu=n,e}function Vm(){return mu}var yu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bb(n){if(!(Iu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===gu)){if(!n.producerMustRecompute(n)&&!_u(n)){n.dirty=!1,n.lastCleanEpoch=gu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=gu}}function vu(n){return n&&(n.nextProducerIndex=0),G(n)}function $m(n,e){if(G(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Iu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Eu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function _u(n){Cu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Bb(t),r!==t.version))return!0}return!1}function wu(n){if(Cu(n),Iu(n))for(let e=0;e<n.producerNode.length;e++)Eu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Eu(n,e){if(Hb(n),n.liveConsumerNode.length===1&&zb(n))for(let r=0;r<n.producerNode.length;r++)Eu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Cu(i),i.producerIndexOfThis[r]=e}}function Iu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Cu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Hb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function zb(n){return n.producerNode!==void 0}function Wb(){throw new Error}var qb=Wb;function Bm(n){qb=n}function k(n){return typeof n=="function"}function ei(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ca=ei(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ar(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(k(r))try{r()}catch(s){e=s instanceof ca?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Hm(s)}catch(o){e=e??[],o instanceof ca?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ca(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hm(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ar(t,e)}remove(e){let{_finalizers:t}=this;t&&ar(t,e),e instanceof n&&e._removeParent(this)}};pe.EMPTY=(()=>{let n=new pe;return n.closed=!0,n})();var Du=pe.EMPTY;function la(n){return n instanceof pe||n&&"closed"in n&&k(n.remove)&&k(n.add)&&k(n.unsubscribe)}function Hm(n){k(n)?n():n.unsubscribe()}var St={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ti={setTimeout(n,e,...t){let{delegate:r}=ti;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ti;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ua(n){ti.setTimeout(()=>{let{onUnhandledError:e}=St;if(e)e(n);else throw n})}function gs(){}var zm=bu("C",void 0,void 0);function Wm(n){return bu("E",void 0,n)}function qm(n){return bu("N",n,void 0)}function bu(n,e,t){return{kind:n,value:e,error:t}}var cr=null;function ni(n){if(St.useDeprecatedSynchronousErrorHandling){let e=!cr;if(e&&(cr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=cr;if(cr=null,t)throw r}}else n()}function Gm(n){St.useDeprecatedSynchronousErrorHandling&&cr&&(cr.errorThrown=!0,cr.error=n)}var lr=class extends pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,la(e)&&e.add(this)):this.destination=Yb}static create(e,t,r){return new ri(e,t,r)}next(e){this.isStopped?Tu(qm(e),this):this._next(e)}error(e){this.isStopped?Tu(Wm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Tu(zm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Gb=Function.prototype.bind;function Su(n,e){return Gb.call(n,e)}var Au=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){da(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){da(r)}else da(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){da(t)}}},ri=class extends lr{constructor(e,t,r){super();let i;if(k(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&St.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Su(e.next,s),error:e.error&&Su(e.error,s),complete:e.complete&&Su(e.complete,s)}):i=e}this.destination=new Au(i)}};function da(n){St.useDeprecatedSynchronousErrorHandling?Gm(n):ua(n)}function Kb(n){throw n}function Tu(n,e){let{onStoppedNotification:t}=St;t&&ti.setTimeout(()=>t(n,e))}var Yb={closed:!0,next:gs,error:Kb,complete:gs};var ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function et(n){return n}function Nu(...n){return Mu(n)}function Mu(n){return n.length===0?et:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ee=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Zb(t)?t:new ri(t,r,i);return ni(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Km(r),new r((i,s)=>{let o=new ri({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ii](){return this}pipe(...t){return Mu(t)(this)}toPromise(t){return t=Km(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Km(n){var e;return(e=n??St.Promise)!==null&&e!==void 0?e:Promise}function Qb(n){return n&&k(n.next)&&k(n.error)&&k(n.complete)}function Zb(n){return n&&n instanceof lr||Qb(n)&&la(n)}function Ru(n){return k(n?.lift)}function Y(n){return e=>{if(Ru(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(n,e,t,r,i){return new xu(n,e,t,r,i)}var xu=class extends lr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function si(){return Y((n,e)=>{let t=null;n._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var oi=class extends ee{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ru(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pe;let t=this.getSubject();e.add(this.source.subscribe(Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pe.EMPTY)}return e}refCount(){return si()(this)}};var Ym=ei(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class n extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new fa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ym}next(t){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Du:(this.currentObservers=null,s.push(t),new pe(()=>{this.currentObservers=null,ar(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ee;return t.source=this,t}}return n.create=(e,t)=>new fa(e,t),n})(),fa=class extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Du}};var Re=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Pu={now(){return(Pu.delegate||Date).now()},delegate:void 0};var ha=class extends pe{constructor(e,t){super()}schedule(e,t=0){return this}};var ms={setInterval(n,e,...t){let{delegate:r}=ms;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ms;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ai=class extends ha{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ms.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ms.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ar(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ci=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ci.now=Pu.now;var li=class extends ci{constructor(e,t=ci.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ou=new li(ai);var pa=class extends ai{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ga=class extends li{};var ku=new ga(pa);var tt=new ee(n=>n.complete());function Qm(n){return n&&k(n.schedule)}function Zm(n){return n[n.length-1]}function Jm(n){return k(Zm(n))?n.pop():void 0}function Cn(n){return Qm(Zm(n))?n.pop():void 0}function Lu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ey(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Xm(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ur(n){return this instanceof ur?(this.v=n,this):new ur(n)}function ty(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(m,I){s.push([h,g,m,I])>1||c(h,g)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(g){f(s[0][3],g)}}function l(h){h.value instanceof ur?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ny(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Xm=="function"?Xm(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ma=n=>n&&typeof n.length=="number"&&typeof n!="function";function ya(n){return k(n?.then)}function va(n){return k(n[ii])}function _a(n){return Symbol.asyncIterator&&k(n?.[Symbol.asyncIterator])}function wa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Jb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ea=Jb();function Ia(n){return k(n?.[Ea])}function Ca(n){return ty(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ur(t.read());if(i)return yield ur(void 0);yield yield ur(r)}}finally{t.releaseLock()}})}function Da(n){return k(n?.getReader)}function Te(n){if(n instanceof ee)return n;if(n!=null){if(va(n))return Xb(n);if(ma(n))return eS(n);if(ya(n))return tS(n);if(_a(n))return ry(n);if(Ia(n))return nS(n);if(Da(n))return rS(n)}throw wa(n)}function Xb(n){return new ee(e=>{let t=n[ii]();if(k(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eS(n){return new ee(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function tS(n){return new ee(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ua)})}function nS(n){return new ee(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ry(n){return new ee(e=>{iS(n,e).catch(t=>e.error(t))})}function rS(n){return ry(Ca(n))}function iS(n,e){var t,r,i,s;return ey(this,void 0,void 0,function*(){try{for(t=ny(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function We(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Dn(n,e=0){return Y((t,r)=>{t.subscribe(Q(r,i=>We(r,n,()=>r.next(i),e),()=>We(r,n,()=>r.complete(),e),i=>We(r,n,()=>r.error(i),e)))})}function bn(n,e=0){return Y((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function iy(n,e){return Te(n).pipe(bn(e),Dn(e))}function sy(n,e){return Te(n).pipe(bn(e),Dn(e))}function oy(n,e){return new ee(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ay(n,e){return new ee(t=>{let r;return We(t,e,()=>{r=n[Ea](),We(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}function ba(n,e){if(!n)throw new Error("Iterable cannot be null");return new ee(t=>{We(t,e,()=>{let r=n[Symbol.asyncIterator]();We(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function cy(n,e){return ba(Ca(n),e)}function ly(n,e){if(n!=null){if(va(n))return iy(n,e);if(ma(n))return oy(n,e);if(ya(n))return sy(n,e);if(_a(n))return ba(n,e);if(Ia(n))return ay(n,e);if(Da(n))return cy(n,e)}throw wa(n)}function we(n,e){return e?ly(n,e):Te(n)}function F(...n){let e=Cn(n);return we(n,e)}function ui(n,e){let t=k(n)?n:()=>n,r=i=>i.error(t());return new ee(e?i=>e.schedule(r,0,i):r)}function Fu(n){return!!n&&(n instanceof ee||k(n.lift)&&k(n.subscribe))}var an=ei(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function K(n,e){return Y((t,r)=>{let i=0;t.subscribe(Q(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:sS}=Array;function oS(n,e){return sS(e)?n(...e):n(e)}function uy(n){return K(e=>oS(n,e))}var{isArray:aS}=Array,{getPrototypeOf:cS,prototype:lS,keys:uS}=Object;function dy(n){if(n.length===1){let e=n[0];if(aS(e))return{args:e,keys:null};if(dS(e)){let t=uS(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function dS(n){return n&&typeof n=="object"&&cS(n)===lS}function fy(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Sa(...n){let e=Cn(n),t=Jm(n),{args:r,keys:i}=dy(n);if(r.length===0)return we([],e);let s=new ee(fS(r,e,i?o=>fy(i,o):et));return t?s.pipe(uy(t)):s}function fS(n,e,t=et){return r=>{hy(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)hy(e,()=>{let l=we(n[c],e),u=!1;l.subscribe(Q(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function hy(n,e,t){n?We(t,n,e):e()}function py(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=g=>l<r?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;Te(t(g,u++)).subscribe(Q(e,I=>{i?.(I),s?h(I):e.next(I)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){let I=c.shift();o?We(e,o,()=>p(I)):p(I)}f()}catch(I){e.error(I)}}))};return n.subscribe(Q(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Ee(n,e,t=1/0){return k(e)?Ee((r,i)=>K((s,o)=>e(r,s,i,o))(Te(n(r,i))),t):(typeof e=="number"&&(t=e),Y((r,i)=>py(r,i,n,t)))}function ju(n=1/0){return Ee(et,n)}function gy(){return ju(1)}function di(...n){return gy()(we(n,Cn(n)))}function Ta(n){return new ee(e=>{Te(n()).subscribe(e)})}function Tt(n,e){return Y((t,r)=>{let i=0;t.subscribe(Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Sn(n){return Y((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Q(t,void 0,void 0,o=>{s=Te(n(o,Sn(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function my(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Q(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function fi(n,e){return k(e)?Ee(n,e,1):Ee(n,1)}function Tn(n){return Y((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function cn(n){return n<=0?()=>tt:Y((e,t)=>{let r=0;e.subscribe(Q(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Uu(n){return K(()=>n)}function Aa(n=hS){return Y((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hS(){return new an}function ys(n){return Y((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,s)=>n(i,s,r)):et,cn(1),t?Tn(e):Aa(()=>new an))}function hi(n){return n<=0?()=>tt:Y((e,t)=>{let r=[];e.subscribe(Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vu(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,s)=>n(i,s,r)):et,hi(1),t?Tn(e):Aa(()=>new an))}function $u(n,e){return Y(my(n,e,arguments.length>=2,!0))}function Bu(...n){let e=Cn(n);return Y((t,r)=>{(e?di(n,t,e):di(n,t)).subscribe(r)})}function At(n,e){return Y((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Q(r,c=>{i?.unsubscribe();let l=0,u=s++;Te(n(c,u)).subscribe(i=Q(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Hu(n){return Y((e,t)=>{Te(n).subscribe(Q(t,()=>t.complete(),gs)),!t.closed&&e.subscribe(t)})}function Ie(n,e,t){let r=k(n)||e||t?{next:n,error:e,complete:t}:n;return r?Y((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Q(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):et}var ev="https://g.co/ng/security#xss",v=class extends Error{constructor(e,t){super(Yd(e,t)),this.code=e}};function Yd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ns(n){return{toString:n}.toString()}var Na="__parameters__";function pS(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function tv(n,e,t){return Ns(()=>{let r=pS(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Na)?c[Na]:Object.defineProperty(c,Na,{value:[]})[Na];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function le(n){for(let e in n)if(n[e]===le)return e;throw Error("Could not find renamed property on target object.")}function qe(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(qe).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function yy(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var gS=le({__forward_ref__:le});function nv(n){return n.__forward_ref__=nv,n.toString=function(){return qe(this())},n}function ht(n){return rv(n)?n():n}function rv(n){return typeof n=="function"&&n.hasOwnProperty(gS)&&n.__forward_ref__===nv}function A(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ms(n){return{providers:n.providers||[],imports:n.imports||[]}}function sc(n){return vy(n,sv)||vy(n,ov)}function iv(n){return sc(n)!==null}function vy(n,e){return n.hasOwnProperty(e)?n[e]:null}function mS(n){let e=n&&(n[sv]||n[ov]);return e||null}function _y(n){return n&&(n.hasOwnProperty(wy)||n.hasOwnProperty(yS))?n[wy]:null}var sv=le({\u0275prov:le}),wy=le({\u0275inj:le}),ov=le({ngInjectableDef:le}),yS=le({ngInjectorDef:le}),P=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=A({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function av(n){return n&&!!n.\u0275providers}var vS=le({\u0275cmp:le}),_S=le({\u0275dir:le}),wS=le({\u0275pipe:le}),ES=le({\u0275mod:le}),Fa=le({\u0275fac:le}),ws=le({__NG_ELEMENT_ID__:le}),Ey=le({__NG_ENV_ID__:le});function oc(n){return typeof n=="string"?n:n==null?"":String(n)}function IS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():oc(n)}function CS(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new v(-200,n)}function Qd(n,e){throw new v(-201,!1)}var B=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(B||{}),Xu;function cv(){return Xu}function ft(n){let e=Xu;return Xu=n,e}function lv(n,e,t){let r=sc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&B.Optional)return null;if(e!==void 0)return e;Qd(n,"Injector")}var DS={},Es=DS,ed="__NG_DI_FLAG__",ja="ngTempTokenPath",bS="ngTokenPath",SS=/\n/gm,TS="\u0275",Iy="__source",yi;function AS(){return yi}function An(n){let e=yi;return yi=n,e}function NS(n,e=B.Default){if(yi===void 0)throw new v(-203,!1);return yi===null?lv(n,void 0,e):yi.get(n,e&B.Optional?null:void 0,e)}function U(n,e=B.Default){return(cv()||NS)(ht(n),e)}function w(n,e=B.Default){return U(n,ac(e))}function ac(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function td(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new v(900,!1);let i,s=B.Default;for(let o=0;o<r.length;o++){let a=r[o],c=MS(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(U(i,s))}else e.push(U(r))}return e}function uv(n,e){return n[ed]=e,n.prototype[ed]=e,n}function MS(n){return n[ed]}function RS(n,e,t,r){let i=n[ja];throw e[Iy]&&i.unshift(e[Iy]),n.message=xS(`
`+n.message,i,t,r),n[bS]=i,n[ja]=null,n}function xS(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==TS?n.slice(2):n;let i=qe(e);if(Array.isArray(e))i=e.map(qe).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):qe(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(SS,`
  `)}`}var xt=uv(tv("Optional"),8);var dv=uv(tv("SkipSelf"),4);function _i(n,e){let t=n.hasOwnProperty(Fa);return t?n[Fa]:null}function PS(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function OS(n){return n.flat(Number.POSITIVE_INFINITY)}function Zd(n,e){n.forEach(t=>Array.isArray(t)?Zd(t,e):e(t))}function fv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ua(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function kS(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}var Is={},$t=[],wi=new P(""),hv=new P("",-1),pv=new P(""),Va=class{get(e,t=Es){if(t===Es){let r=new Error(`NullInjectorError: No provider for ${qe(e)}!`);throw r.name="NullInjectorError",r}return t}},gv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gv||{}),zt=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(zt||{}),Rn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Rn||{});function LS(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function nd(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];jS(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function FS(n){return n===3||n===4||n===6}function jS(n){return n.charCodeAt(0)===64}function Jd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Cy(n,t,i,null,e[++r]):Cy(n,t,i,null,null))}}return n}function Cy(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var mv="ng-template";function US(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LS(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Xd(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Xd(n){return n.type===4&&n.value!==mv}function VS(n,e,t){let r=n.type===4&&!t?mv:n.value;return e===r}function $S(n,e,t){let r=4,i=n.attrs,s=i!==null?zS(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Nt(r)&&!Nt(c))return!1;if(o&&Nt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!VS(n,c,t)||c===""&&e.length===1){if(Nt(r))return!1;o=!0}}else if(r&8){if(i===null||!US(n,i,c,t)){if(Nt(r))return!1;o=!0}}else{let l=e[++a],u=BS(c,i,Xd(n),t);if(u===-1){if(Nt(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Nt(r))return!1;o=!0}}}}return Nt(r)||o}function Nt(n){return(n&1)===0}function BS(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return WS(e,n)}function yv(n,e,t=!1){for(let r=0;r<e.length;r++)if($S(n,e[r],t))return!0;return!1}function HS(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function zS(n){for(let e=0;e<n.length;e++){let t=n[e];if(FS(t))return e}return n.length}function WS(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function qS(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Dy(n,e){return n?":not("+e.trim()+")":e}function GS(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Nt(o)&&(e+=Dy(s,i),i=""),r=o,s=s||!Nt(r);t++}return i!==""&&(e+=Dy(s,i)),e}function KS(n){return n.map(GS).join(",")}function YS(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Nt(i))break;i=s}r++}return{attrs:e,classes:t}}function mt(n){return Ns(()=>{let e=Iv(n),t=fe(D({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||zt.Emulated,styles:n.styles||$t,_:null,schemas:n.schemas||null,tView:null,id:""});Cv(t);let r=n.dependencies;return t.directiveDefs=Sy(r,!1),t.pipeDefs=Sy(r,!0),t.id=JS(t),t})}function QS(n){return fr(n)||vv(n)}function ZS(n){return n!==null}function Rs(n){return Ns(()=>({type:n.type,bootstrap:n.bootstrap||$t,declarations:n.declarations||$t,imports:n.imports||$t,exports:n.exports||$t,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function by(n,e){if(n==null)return Is;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Rn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Rn.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Mi(n){return Ns(()=>{let e=Iv(n);return Cv(e),e})}function fr(n){return n[vS]||null}function vv(n){return n[_S]||null}function _v(n){return n[wS]||null}function wv(n){let e=fr(n)||vv(n)||_v(n);return e!==null?e.standalone:!1}function Ev(n,e){let t=n[ES]||null;if(!t&&e===!0)throw new Error(`Type ${qe(n)} does not have '\u0275mod' property.`);return t}function Iv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Is,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||$t,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:by(n.inputs,e),outputs:by(n.outputs),debugInfo:null}}function Cv(n){n.features?.forEach(e=>e(n))}function Sy(n,e){if(!n)return null;let t=e?_v:QS;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(ZS)}function JS(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ln(n){return{\u0275providers:n}}function XS(...n){return{\u0275providers:Dv(!0,n),\u0275fromNgModule:!0}}function Dv(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Zd(e,o=>{let a=o;rd(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&bv(i,s),t}function bv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ef(i,s=>{e(s,r)})}}function rd(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,s=_y(n),o=!s&&fr(n);if(!s&&!o){let c=n.ngModule;if(s=_y(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)rd(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Zd(s.imports,u=>{rd(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&bv(l,e)}if(!a){let l=_i(i)||(()=>new i);e({provide:i,useFactory:l,deps:$t},i),e({provide:pv,useValue:i,multi:!0},i),e({provide:wi,useValue:()=>U(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;ef(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function ef(n,e){for(let t of n)av(t)&&(t=t.\u0275providers),Array.isArray(t)?ef(t,e):e(t)}var eT=le({provide:String,useValue:le});function Sv(n){return n!==null&&typeof n=="object"&&eT in n}function tT(n){return!!(n&&n.useExisting)}function nT(n){return!!(n&&n.useFactory)}function id(n){return typeof n=="function"}var cc=new P(""),Ra={},rT={},zu;function tf(){return zu===void 0&&(zu=new Va),zu}var gt=class{},Cs=class extends gt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,od(e,o=>this.processProvider(o)),this.records.set(hv,pi(void 0,this)),i.has("environment")&&this.records.set(gt,pi(void 0,this));let s=this.records.get(cc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(pv,$t,B.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=An(this),r=ft(void 0),i;try{return e()}finally{An(t),ft(r)}}get(e,t=Es,r=B.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ey))return e[Ey](this);r=ac(r);let i,s=An(this),o=ft(void 0);try{if(!(r&B.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=lT(e)&&sc(e);l&&this.injectableDefInScope(l)?c=pi(sd(e),Ra):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&B.Self?tf():this.parent;return t=r&B.Optional&&t===Es?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ja]=a[ja]||[]).unshift(qe(e)),s)throw a;return RS(a,e,"R3InjectorError",this.source)}else throw a}finally{ft(o),An(s)}}resolveInjectorInitializers(){let e=G(null),t=An(this),r=ft(void 0),i;try{let s=this.get(wi,$t,B.Self);for(let o of s)o()}finally{An(t),ft(r),G(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new v(205,!1)}processProvider(e){e=ht(e);let t=id(e)?e:ht(e&&e.provide),r=sT(e);if(!id(e)&&e.multi===!0){let i=this.records.get(t);i||(i=pi(void 0,Ra,!0),i.factory=()=>td(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=G(null);try{return t.value===Ra&&(t.value=rT,t.value=t.factory()),typeof t.value=="object"&&t.value&&cT(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function sd(n){let e=sc(n),t=e!==null?e.factory:_i(n);if(t!==null)return t;if(n instanceof P)throw new v(204,!1);if(n instanceof Function)return iT(n);throw new v(204,!1)}function iT(n){if(n.length>0)throw new v(204,!1);let t=mS(n);return t!==null?()=>t.factory(n):()=>new n}function sT(n){if(Sv(n))return pi(void 0,n.useValue);{let e=oT(n);return pi(e,Ra)}}function oT(n,e,t){let r;if(id(n)){let i=ht(n);return _i(i)||sd(i)}else if(Sv(n))r=()=>ht(n.useValue);else if(nT(n))r=()=>n.useFactory(...td(n.deps||[]));else if(tT(n))r=()=>U(ht(n.useExisting));else{let i=ht(n&&(n.useClass||n.provide));if(aT(n))r=()=>new i(...td(n.deps));else return _i(i)||sd(i)}return r}function pi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function aT(n){return!!n.deps}function cT(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lT(n){return typeof n=="function"||typeof n=="object"&&n instanceof P}function od(n,e){for(let t of n)Array.isArray(t)?od(t,e):t&&av(t)?od(t.\u0275providers,e):e(t)}function dn(n,e){n instanceof Cs&&n.assertNotDestroyed();let t,r=An(n),i=ft(void 0);try{return e()}finally{An(r),ft(i)}}function uT(){return cv()!==void 0||AS()!=null}function dT(n){return typeof n=="function"}var Gt=0,L=1,x=2,Fe=3,Mt=4,Ge=5,Ei=6,$a=7,ke=8,Ii=9,Wt=10,Ae=11,Ds=12,Ty=13,Ri=14,nt=15,hr=16,gi=17,ln=18,lc=19,Tv=20,Nn=21,Wu=22,pt=23,rt=25,nf=1;var pr=7,Ba=8,Ci=9,Le=10,Ha=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ha||{});function Mn(n){return Array.isArray(n)&&typeof n[nf]=="object"}function fn(n){return Array.isArray(n)&&n[nf]===!0}function Av(n){return(n.flags&4)!==0}function uc(n){return n.componentOffset>-1}function rf(n){return(n.flags&1)===1}function xi(n){return!!n.template}function ad(n){return(n[x]&512)!==0}var cd=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Nv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function dc(){return Mv}function Mv(n){return n.type.prototype.ngOnChanges&&(n.setInput=hT),fT}dc.ngInherit=!0;function fT(){let n=xv(this),e=n?.current;if(e){let t=n.previous;if(t===Is)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function hT(n,e,t,r,i){let s=this.declaredInputs[r],o=xv(n)||pT(n,{previous:Is,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new cd(l&&l.currentValue,t,c===Is),Nv(n,e,i,t)}var Rv="__ngSimpleChanges__";function xv(n){return n[Rv]||null}function pT(n,e){return n[Rv]=e}var Ay=null;var Bt=function(n,e,t){Ay?.(n,e,t)},gT="svg",mT="math";function qt(n){for(;Array.isArray(n);)n=n[Gt];return n}function yT(n){for(;Array.isArray(n);){if(typeof n[nf]=="object")return n;n=n[Gt]}return null}function vT(n,e){return qt(e[n])}function yt(n,e){return qt(e[n.index])}function sf(n,e){return n.data[e]}function Fn(n,e){let t=e[n];return Mn(t)?t:t[Gt]}function _T(n){return(n[x]&4)===4}function of(n){return(n[x]&128)===128}function wT(n){return fn(n[Fe])}function Di(n,e){return e==null?null:n[e]}function Pv(n){n[gi]=0}function Ov(n){n[x]&1024||(n[x]|=1024,of(n)&&hc(n))}function ET(n,e){for(;n>0;)e=e[Ri],n--;return e}function fc(n){return!!(n[x]&9216||n[pt]?.dirty)}function ld(n){n[Wt].changeDetectionScheduler?.notify(8),n[x]&64&&(n[x]|=1024),fc(n)&&hc(n)}function hc(n){n[Wt].changeDetectionScheduler?.notify(0);let e=gr(n);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!of(e)));)e=gr(e)}function kv(n,e){if((n[x]&256)===256)throw new v(911,!1);n[Nn]===null&&(n[Nn]=[]),n[Nn].push(e)}function IT(n,e){if(n[Nn]===null)return;let t=n[Nn].indexOf(e);t!==-1&&n[Nn].splice(t,1)}function gr(n){let e=n[Fe];return fn(e)?e[Fe]:e}var z={lFrame:Gv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lv=!1;function CT(){return z.lFrame.elementDepthCount}function DT(){z.lFrame.elementDepthCount++}function bT(){z.lFrame.elementDepthCount--}function Fv(){return z.bindingsEnabled}function jv(){return z.skipHydrationRootTNode!==null}function ST(n){return z.skipHydrationRootTNode===n}function TT(){z.skipHydrationRootTNode=null}function X(){return z.lFrame.lView}function it(){return z.lFrame.tView}function Pi(n){return z.lFrame.contextLView=n,n[ke]}function Oi(n){return z.lFrame.contextLView=null,n}function vt(){let n=Uv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Uv(){return z.lFrame.currentTNode}function AT(){let n=z.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xs(n,e){let t=z.lFrame;t.currentTNode=n,t.isParent=e}function Vv(){return z.lFrame.isParent}function $v(){z.lFrame.isParent=!1}function Bv(){return Lv}function Ny(n){Lv=n}function Hv(){let n=z.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function NT(n){return z.lFrame.bindingIndex=n}function ki(){return z.lFrame.bindingIndex++}function MT(){return z.lFrame.inI18n}function RT(n,e){let t=z.lFrame;t.bindingIndex=t.bindingRootIndex=n,ud(e)}function xT(){return z.lFrame.currentDirectiveIndex}function ud(n){z.lFrame.currentDirectiveIndex=n}function PT(n){let e=z.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function zv(){return z.lFrame.currentQueryIndex}function af(n){z.lFrame.currentQueryIndex=n}function OT(n){let e=n[L];return e.type===2?e.declTNode:e.type===1?n[Ge]:null}function Wv(n,e,t){if(t&B.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&B.Host);)if(i=OT(s),i===null||(s=s[Ri],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=z.lFrame=qv();return r.currentTNode=e,r.lView=n,!0}function cf(n){let e=qv(),t=n[L];z.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qv(){let n=z.lFrame,e=n===null?null:n.child;return e===null?Gv(n):e}function Gv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Kv(){let n=z.lFrame;return z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Yv=Kv;function lf(){let n=Kv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function kT(n){return(z.lFrame.contextLView=ET(n,z.lFrame.contextLView))[ke]}function pc(){return z.lFrame.selectedIndex}function mr(n){z.lFrame.selectedIndex=n}function uf(){let n=z.lFrame;return sf(n.tView,n.selectedIndex)}function LT(){return z.lFrame.currentNamespace}var Qv=!0;function df(){return Qv}function ff(n){Qv=n}function FT(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Mv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function hf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function xa(n,e,t){Zv(n,e,3,t)}function Pa(n,e,t,r){(n[x]&3)===t&&Zv(n,e,t,r)}function qu(n,e){let t=n[x];(t&3)===e&&(t&=16383,t+=1,n[x]=t)}function Zv(n,e,t,r){let i=r!==void 0?n[gi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[gi]+=65536),(a<s||s==-1)&&(jT(n,t,e,c),n[gi]=(n[gi]&4294901760)+c+2),c++}function My(n,e){Bt(4,n,e);let t=G(null);try{e.call(n)}finally{G(t),Bt(5,n,e)}}function jT(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[x]>>14<n[gi]>>16&&(n[x]&3)===e&&(n[x]+=16384,My(a,s)):My(a,s)}var vi=-1,bs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function UT(n){return n instanceof bs}function VT(n){return(n.flags&8)!==0}function $T(n){return(n.flags&16)!==0}var Gu={},dd=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ac(r);let i=this.injector.get(e,Gu,r);return i!==Gu||t===Gu?i:this.parentInjector.get(e,t,r)}};function Jv(n){return n!==vi}function za(n){return n&32767}function BT(n){return n>>16}function Wa(n,e){let t=BT(n),r=e;for(;t>0;)r=r[Ri],t--;return r}var fd=!0;function Ry(n){let e=fd;return fd=n,e}var HT=256,Xv=HT-1,e_=5,zT=0,Ht={};function WT(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ws)&&(r=t[ws]),r==null&&(r=t[ws]=zT++);let i=r&Xv,s=1<<i;e.data[n+(i>>e_)]|=s}function t_(n,e){let t=n_(n,e);if(t!==-1)return t;let r=e[L];r.firstCreatePass&&(n.injectorIndex=e.length,Ku(r.data,n),Ku(e,null),Ku(r.blueprint,null));let i=pf(n,e),s=n.injectorIndex;if(Jv(i)){let o=za(i),a=Wa(i,e),c=a[L].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Ku(n,e){n.push(0,0,0,0,0,0,0,0,e)}function n_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function pf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=a_(i),r===null)return vi;if(t++,i=i[Ri],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return vi}function qT(n,e,t){WT(n,e,t)}function r_(n,e,t){if(t&B.Optional||n!==void 0)return n;Qd(e,"NodeInjector")}function i_(n,e,t,r){if(t&B.Optional&&r===void 0&&(r=null),!(t&(B.Self|B.Host))){let i=n[Ii],s=ft(void 0);try{return i?i.get(e,r,t&B.Optional):lv(e,r,t&B.Optional)}finally{ft(s)}}return r_(r,e,t)}function s_(n,e,t,r=B.Default,i){if(n!==null){if(e[x]&2048&&!(r&B.Self)){let o=QT(n,e,t,r,Ht);if(o!==Ht)return o}let s=o_(n,e,t,r,Ht);if(s!==Ht)return s}return i_(e,t,r,i)}function o_(n,e,t,r,i){let s=KT(t);if(typeof s=="function"){if(!Wv(e,n,r))return r&B.Host?r_(i,t,r):i_(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&B.Optional))Qd(t);else return o}finally{Yv()}}else if(typeof s=="number"){let o=null,a=n_(n,e),c=vi,l=r&B.Host?e[nt][Ge]:null;for((a===-1||r&B.SkipSelf)&&(c=a===-1?pf(n,e):e[a+8],c===vi||!Py(r,!1)?a=-1:(o=e[L],a=za(c),e=Wa(c,e)));a!==-1;){let u=e[L];if(xy(s,a,u.data)){let d=GT(a,e,t,o,r,l);if(d!==Ht)return d}c=e[a+8],c!==vi&&Py(r,e[L].data[a+8]===l)&&xy(s,a,e)?(o=u,a=za(c),e=Wa(c,e)):a=-1}}return i}function GT(n,e,t,r,i,s){let o=e[L],a=o.data[n+8],c=r==null?uc(a)&&fd:r!=o&&(a.type&3)!==0,l=i&B.Host&&s===a,u=Oa(a,o,t,c,l);return u!==null?bi(e,o,u,a):Ht}function Oa(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=o[h];if(h<c&&t===p||h>=c&&p.type===t)return h}if(i){let h=o[c];if(h&&xi(h)&&h.type===t)return c}return null}function bi(n,e,t,r){let i=n[t],s=e.data;if(UT(i)){let o=i;o.resolving&&CS(IS(s[t]));let a=Ry(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?ft(o.injectImpl):null,u=Wv(n,r,B.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&FT(t,s[t],e)}finally{l!==null&&ft(l),Ry(a),o.resolving=!1,Yv()}}return i}function KT(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ws)?n[ws]:void 0;return typeof e=="number"?e>=0?e&Xv:YT:e}function xy(n,e,t){let r=1<<n;return!!(t[e+(n>>e_)]&r)}function Py(n,e){return!(n&B.Self)&&!(n&B.Host&&e)}var dr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return s_(this._tNode,this._lView,e,ac(r),t)}};function YT(){return new dr(vt(),X())}function gf(n){return Ns(()=>{let e=n.prototype.constructor,t=e[Fa]||hd(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Fa]||hd(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function hd(n){return rv(n)?()=>{let e=hd(ht(n));return e&&e()}:_i(n)}function QT(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[x]&2048&&!(o[x]&512);){let a=o_(s,o,t,r|B.Self,Ht);if(a!==Ht)return a;let c=s.parent;if(!c){let l=o[Tv];if(l){let u=l.get(t,Ht,r);if(u!==Ht)return u}c=a_(o),o=o[Ri]}s=c}return i}function a_(n){let e=n[L],t=e.type;return t===2?e.declTNode:t===1?n[Ge]:null}function Oy(n,e=null,t=null,r){let i=c_(n,e,t,r);return i.resolveInjectorInitializers(),i}function c_(n,e=null,t=null,r,i=new Set){let s=[t||$t,XS(n)];return r=r||(typeof n=="object"?void 0:qe(n)),new Cs(s,e||tf(),r||null,i)}var Rt=class n{static{this.THROW_IF_NOT_FOUND=Es}static{this.NULL=new Va}static create(e,t){if(Array.isArray(e))return Oy({name:""},t,e,"");{let r=e.name??"";return Oy({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=A({token:n,providedIn:"any",factory:()=>U(hv)})}static{this.__NG_ELEMENT_ID__=-1}};var ZT=new P("");ZT.__NG_ELEMENT_ID__=n=>{let e=vt();if(e===null)throw new v(204,!1);if(e.type&2)return e.value;if(n&B.Optional)return null;throw new v(204,!1)};var JT="ngOriginalError";function Yu(n){return n[JT]}var l_=!0,u_=(()=>{class n{static{this.__NG_ELEMENT_ID__=XT}static{this.__NG_ENV_ID__=t=>t}}return n})(),pd=class extends u_{constructor(e){super(),this._lView=e}onDestroy(e){return kv(this._lView,e),()=>IT(this._lView,e)}};function XT(){return new pd(X())}var Li=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Re(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=A({token:n,providedIn:"root",factory:()=>new n})}}return n})();var gd=class extends Ve{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,uT()&&(this.destroyRef=w(u_,{optional:!0})??void 0,this.pendingTasks=w(Li,{optional:!0})??void 0)}emit(e){let t=G(null);try{super.next(e)}finally{G(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof pe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},ge=gd;function qa(...n){}function d_(n){let e,t;function r(){n=qa;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ky(n){return queueMicrotask(()=>n()),()=>{n=qa}}var mf="isAngularZone",Ga=mf+"_ID",e0=0,ce=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ge(!1),this.onMicrotaskEmpty=new ge(!1),this.onStable=new ge(!1),this.onError=new ge(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=l_}=e;if(typeof Zone>"u")throw new v(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,r0(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(mf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new v(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new v(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,t0,qa,qa);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},t0={};function yf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function n0(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){d_(()=>{n.callbackScheduled=!1,md(n),n.isCheckStableRunning=!0,yf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),md(n)}function r0(n){let e=()=>{n0(n)},t=e0++;n._inner=n._inner.fork({name:"angular",properties:{[mf]:!0,[Ga]:t,[Ga+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(i0(c))return r.invokeTask(s,o,a,c);try{return Ly(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Fy(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return Ly(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!s0(c)&&e(),Fy(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,md(n),yf(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function md(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Ly(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Fy(n){n._nesting--,yf(n)}var yd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ge,this.onMicrotaskEmpty=new ge,this.onStable=new ge,this.onError=new ge}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function i0(n){return f_(n,"__ignore_ng_zone__")}function s0(n){return f_(n,"__scheduler_tick__")}function f_(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var un=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Yu(e);for(;t&&Yu(t);)t=Yu(t);return t||null}},o0=new P("",{providedIn:"root",factory:()=>{let n=w(ce),e=w(un);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function a0(){return Fi(vt(),X())}function Fi(n,e){return new Kt(yt(n,e))}var Kt=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=a0}}return n})();function c0(n){return n instanceof Kt?n.nativeElement:n}function l0(){return this._results[Symbol.iterator]()}var vd=class n{get changes(){return this._changes??=new ge}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=l0)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=OS(e);(this._changesDetected=!PS(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function h_(n){return(n.flags&128)===128}var p_=new Map,u0=0;function d0(){return u0++}function f0(n){p_.set(n[lc],n)}function _d(n){p_.delete(n[lc])}var jy="__ngContext__";function yr(n,e){Mn(e)?(n[jy]=e[lc],f0(e)):n[jy]=e}function g_(n){return y_(n[Ds])}function m_(n){return y_(n[Mt])}function y_(n){for(;n!==null&&!fn(n);)n=n[Mt];return n}var wd;function v_(n){wd=n}function h0(){if(wd!==void 0)return wd;if(typeof document<"u")return document;throw new v(210,!1)}var vf=new P("",{providedIn:"root",factory:()=>p0}),p0="ng",_f=new P(""),jn=new P("",{providedIn:"platform",factory:()=>"unknown"});var wf=new P(""),Ef=new P("",{providedIn:"root",factory:()=>h0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var g0="h",m0="b";var y0=()=>null;function If(n,e,t=!1){return y0(n,e,t)}var __=!1,v0=new P("",{providedIn:"root",factory:()=>__});var Ka=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ev})`}};function Cf(n){return n instanceof Ka?n.changingThisBreaksApplicationSecurity:n}function w_(n,e){let t=_0(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ev})`)}return t===e}function _0(n){return n instanceof Ka&&n.getTypeName()||null}var w0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function E_(n){return n=String(n),n.match(w0)?n:"unsafe:"+n}var Df=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Df||{});function I_(n){let e=E0();return e?e.sanitize(Df.URL,n)||"":w_(n,"URL")?Cf(n):E_(oc(n))}function E0(){let n=X();return n&&n[Wt].sanitizer}function C_(n){return n instanceof Function?n():n}var wr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(wr||{}),I0;function bf(n,e){return I0(n,e)}function mi(n,e,t,r,i){if(r!=null){let s,o=!1;fn(r)?s=r:Mn(r)&&(o=!0,r=r[Gt]);let a=qt(r);n===0&&t!==null?i==null?A_(e,t,a):Ya(e,t,a,i||null,!0):n===1&&t!==null?Ya(e,t,a,i||null,!0):n===2?k0(e,a,o):n===3&&e.destroyNode(a),s!=null&&F0(e,n,s,t,i)}}function C0(n,e){return n.createText(e)}function D0(n,e,t){n.setValue(e,t)}function D_(n,e,t){return n.createElement(e,t)}function b0(n,e){b_(n,e),e[Gt]=null,e[Ge]=null}function S0(n,e,t,r,i,s){r[Gt]=i,r[Ge]=e,mc(n,r,t,1,i,s)}function b_(n,e){e[Wt].changeDetectionScheduler?.notify(9),mc(n,e,e[Ae],2,null,null)}function T0(n){let e=n[Ds];if(!e)return Qu(n[L],n);for(;e;){let t=null;if(Mn(e))t=e[Ds];else{let r=e[Le];r&&(t=r)}if(!t){for(;e&&!e[Mt]&&e!==n;)Mn(e)&&Qu(e[L],e),e=e[Fe];e===null&&(e=n),Mn(e)&&Qu(e[L],e),t=e&&e[Mt]}e=t}}function A0(n,e,t,r){let i=Le+r,s=t.length;r>0&&(t[i-1][Mt]=e),r<s-Le?(e[Mt]=t[i],fv(t,Le+r,e)):(t.push(e),e[Mt]=null),e[Fe]=t;let o=e[hr];o!==null&&t!==o&&S_(o,e);let a=e[ln];a!==null&&a.insertView(n),ld(e),e[x]|=128}function S_(n,e){let t=n[Ci],r=e[Fe];if(Mn(r))n[x]|=Ha.HasTransplantedViews;else{let i=r[Fe][nt];e[nt]!==i&&(n[x]|=Ha.HasTransplantedViews)}t===null?n[Ci]=[e]:t.push(e)}function Sf(n,e){let t=n[Ci],r=t.indexOf(e);t.splice(r,1)}function Ss(n,e){if(n.length<=Le)return;let t=Le+e,r=n[t];if(r){let i=r[hr];i!==null&&i!==n&&Sf(i,r),e>0&&(n[t-1][Mt]=r[Mt]);let s=Ua(n,Le+e);b0(r[L],r);let o=s[ln];o!==null&&o.detachView(s[L]),r[Fe]=null,r[Mt]=null,r[x]&=-129}return r}function gc(n,e){if(!(e[x]&256)){let t=e[Ae];t.destroyNode&&mc(n,e,t,3,null,null),T0(e)}}function Qu(n,e){if(e[x]&256)return;let t=G(null);try{e[x]&=-129,e[x]|=256,e[pt]&&wu(e[pt]),M0(n,e),N0(n,e),e[L].type===1&&e[Ae].destroy();let r=e[hr];if(r!==null&&fn(e[Fe])){r!==e[Fe]&&Sf(r,e);let i=e[ln];i!==null&&i.detachView(n)}_d(e)}finally{G(t)}}function N0(n,e){let t=n.cleanup,r=e[$a];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[$a]=null);let i=e[Nn];if(i!==null){e[Nn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function M0(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof bs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Bt(4,a,c);try{c.call(a)}finally{Bt(5,a,c)}}else{Bt(4,i,s);try{s.call(i)}finally{Bt(5,i,s)}}}}}function T_(n,e,t){return R0(n,e.parent,t)}function R0(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Gt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===zt.None||s===zt.Emulated)return null}return yt(r,t)}}function Ya(n,e,t,r,i){n.insertBefore(e,t,r,i)}function A_(n,e,t){n.appendChild(e,t)}function Uy(n,e,t,r,i){r!==null?Ya(n,e,t,r,i):A_(n,e,t)}function N_(n,e){return n.parentNode(e)}function x0(n,e){return n.nextSibling(e)}function M_(n,e,t){return O0(n,e,t)}function P0(n,e,t){return n.type&40?yt(n,t):null}var O0=P0,Vy;function Tf(n,e,t,r){let i=T_(n,r,e),s=e[Ae],o=r.parent||e[Ge],a=M_(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Uy(s,i,t[c],a,!1);else Uy(s,i,t,a,!1);Vy!==void 0&&Vy(s,r,e,t,i)}function vs(n,e){if(e!==null){let t=e.type;if(t&3)return yt(e,n);if(t&4)return Ed(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return vs(n,r);{let i=n[e.index];return fn(i)?Ed(-1,i):qt(i)}}else{if(t&128)return vs(n,e.next);if(t&32)return bf(e,n)()||qt(n[e.index]);{let r=R_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gr(n[nt]);return vs(i,r)}else return vs(n,e.next)}}}return null}function R_(n,e){if(e!==null){let r=n[nt][Ge],i=e.projection;return r.projection[i]}return null}function Ed(n,e){let t=Le+n+1;if(t<e.length){let r=e[t],i=r[L].firstChild;if(i!==null)return vs(r,i)}return e[pr]}function k0(n,e,t){n.removeChild(null,e,t)}function Af(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&yr(qt(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Af(n,e,t.child,r,i,s,!1),mi(e,n,i,a,s);else if(c&32){let l=bf(t,r),u;for(;u=l();)mi(e,n,i,u,s);mi(e,n,i,a,s)}else c&16?x_(n,e,r,t,i,s):mi(e,n,i,a,s);t=o?t.projectionNext:t.next}}function mc(n,e,t,r,i,s){Af(t,r,n.firstChild,e,i,s,!1)}function L0(n,e,t){let r=e[Ae],i=T_(n,t,e),s=t.parent||e[Ge],o=M_(s,t,e);x_(r,0,e,t,i,o)}function x_(n,e,t,r,i,s){let o=t[nt],c=o[Ge].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];mi(e,n,i,u,s)}else{let l=c,u=o[Fe];h_(r)&&(l.flags|=128),Af(n,e,l,u,i,s,!0)}}function F0(n,e,t,r,i){let s=t[pr],o=qt(t);s!==o&&mi(e,n,r,s,i);for(let a=Le;a<t.length;a++){let c=t[a];mc(c[L],c,n,e,r,s)}}function j0(n,e,t){n.setAttribute(e,"style",t)}function P_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function O_(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&nd(n,e,r),i!==null&&P_(n,e,i),s!==null&&j0(n,e,s)}var Er={};function ve(n=1){k_(it(),X(),pc()+n,!1)}function k_(n,e,t,r){if(!r)if((e[x]&3)===3){let s=n.preOrderCheckHooks;s!==null&&xa(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Pa(e,s,0,t)}mr(t)}function Ce(n,e=B.Default){let t=X();if(t===null)return U(n,e);let r=vt();return s_(r,t,ht(n),e)}function L_(n,e,t,r,i,s){let o=G(null);try{let a=null;i&Rn.SignalBased&&(a=e[r][Um]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Rn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):Nv(e,a,r,s)}finally{G(o)}}function U0(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mr(~i);else{let s=i,o=t[++r],a=t[++r];RT(o,s);let c=e[s];a(2,c)}}}finally{mr(-1)}}function yc(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Gt]=i,d[x]=r|4|128|8|64,(l!==null||n&&n[x]&2048)&&(d[x]|=2048),Pv(d),d[Fe]=d[Ri]=n,d[ke]=t,d[Wt]=o||n&&n[Wt],d[Ae]=a||n&&n[Ae],d[Ii]=c||n&&n[Ii]||null,d[Ge]=s,d[lc]=d0(),d[Ei]=u,d[Tv]=l,d[nt]=e.type==2?n[nt]:d,d}function Ps(n,e,t,r,i){let s=n.data[e];if(s===null)s=V0(n,e,t,r,i),MT()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=AT();s.injectorIndex=o===null?-1:o.injectorIndex}return xs(s,!0),s}function V0(n,e,t,r,i){let s=Uv(),o=Vv(),a=o?s:s&&s.parent,c=n.data[e]=q0(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function F_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function j_(n,e,t,r,i){let s=pc(),o=r&2;try{mr(-1),o&&e.length>rt&&k_(n,e,rt,!1),Bt(o?2:0,i),t(r,i)}finally{mr(s),Bt(o?3:1,i)}}function U_(n,e,t){if(Av(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{G(r)}}}function V_(n,e,t){Fv()&&(J0(n,e,t,yt(t,e)),(t.flags&64)===64&&q_(n,e,t))}function $_(n,e,t=yt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function B_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Nf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Nf(n,e,t,r,i,s,o,a,c,l,u){let d=rt+r,f=d+i,h=$0(d,f),p=typeof l=="function"?l():l;return h[L]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function $0(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Er);return t}function B0(n,e,t,r){let s=r.get(v0,__)||t===zt.ShadowDom,o=n.selectRootElement(e,s);return H0(o),o}function H0(n){z0(n)}var z0=()=>null;function W0(n,e,t,r){let i=Y_(e);i.push(t),n.firstCreatePass&&Q_(n).push(r,i.length-1)}function q0(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return jv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $y(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Rn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?By(r,t,l,a,c):By(r,t,l,a)}return r}function By(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function G0(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=t?t.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=$y(0,d.inputs,u,c,h),l=$y(1,d.outputs,u,l,p);let g=c!==null&&o!==null&&!Xd(e)?lA(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function K0(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function H_(n,e,t,r,i,s,o,a){let c=yt(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Mf(n,t,u,r,i),uc(e)&&Y0(t,e.index)):e.type&3?(r=K0(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Y0(n,e){let t=Fn(e,n);t[x]&16||(t[x]|=64)}function z_(n,e,t,r){if(Fv()){let i=r===null?null:{"":-1},s=eA(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&W_(n,e,t,o,i,a),i&&tA(t,r,i)}t.mergedAttrs=Jd(t.mergedAttrs,t.attrs)}function W_(n,e,t,r,i,s){for(let l=0;l<r.length;l++)qT(t_(t,e),n,r[l].type);rA(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=F_(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=Jd(t.mergedAttrs,u.hostAttrs),iA(n,t,e,c,u),nA(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}G0(n,t,s)}function Q0(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;Z0(o)!=a&&o.push(a),o.push(t,r,s)}}function Z0(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function J0(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;uc(t)&&sA(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||t_(t,e),yr(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=bi(e,n,a,t);if(yr(l,e),o!==null&&cA(e,a-i,l,c,t,o),xi(c)){let u=Fn(t.index,e);u[ke]=bi(e,n,a,t)}}}function q_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=xT();try{mr(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];ud(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&X0(c,l)}}finally{mr(-1),ud(o)}}function X0(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function eA(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(yv(e,o.selectors,!1))if(r||(r=[]),xi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Id(n,e,c)}else r.unshift(o),Id(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Id(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function tA(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new v(-301,!1);r.push(e[i],s)}}}function nA(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xi(e)&&(t[""]=n)}}function rA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function iA(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=_i(i.type,!0)),o=new bs(s,xi(i),Ce);n.blueprint[r]=o,t[r]=o,Q0(n,e,r,F_(n,t,i.hostVars,Er),i)}function sA(n,e,t){let r=yt(e,n),i=B_(t),s=n[Wt].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=vc(n,yc(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function oA(n,e,t,r,i,s){let o=yt(n,e);aA(e[Ae],o,s,n.value,t,r,i)}function aA(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?oc(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function cA(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];L_(r,t,c,l,u,d)}}function lA(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function G_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function K_(n,e){let t=n.contentQueries;if(t!==null){let r=G(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];af(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function vc(n,e){return n[Ds]?n[Ty][Mt]=e:n[Ds]=e,n[Ty]=e,e}function Cd(n,e,t){af(0);let r=G(null);try{e(n,t)}finally{G(r)}}function Y_(n){return n[$a]??=[]}function Q_(n){return n.cleanup??=[]}function uA(n,e,t){return(n===null||xi(n))&&(t=yT(t[e.index])),t[Ae]}function Z_(n,e){let t=n[Ii],r=t?t.get(un,null):null;r&&r.handleError(e)}function Mf(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];L_(u,l,r,a,c,i)}}function dA(n,e,t){let r=vT(e,n);D0(n[Ae],r,t)}function fA(n,e){let t=Fn(e,n),r=t[L];hA(r,t);let i=t[Gt];i!==null&&t[Ei]===null&&(t[Ei]=If(i,t[Ii])),Rf(r,t,t[ke])}function hA(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Rf(n,e,t){cf(e);try{let r=n.viewQuery;r!==null&&Cd(1,r,t);let i=n.template;i!==null&&j_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ln]?.finishViewCreation(n),n.staticContentQueries&&K_(n,e),n.staticViewQueries&&Cd(2,n.viewQuery,t);let s=n.components;s!==null&&pA(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[x]&=-5,lf()}}function pA(n,e){for(let t=0;t<e.length;t++)fA(n,e[t])}function Os(n,e,t,r){let i=G(null);try{let s=e.tView,a=n[x]&4096?4096:16,c=yc(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[hr]=l;let u=n[ln];return u!==null&&(c[ln]=u.createEmbeddedView(s)),Rf(s,c,t),c}finally{G(i)}}function J_(n,e){let t=Le+e;if(t<n.length)return n[t]}function Si(n,e){return!e||e.firstChild===null||h_(n)}function ks(n,e,t,r=!0){let i=e[L];if(A0(i,e,n,t),r){let o=Ed(t,n),a=e[Ae],c=N_(a,n[pr]);c!==null&&S0(i,n[Ge],a,e,c,o)}let s=e[Ei];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function X_(n,e){let t=Ss(n,e);return t!==void 0&&gc(t[L],t),t}function Qa(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(qt(s)),fn(s)&&gA(s,r);let o=t.type;if(o&8)Qa(n,e,t.child,r);else if(o&32){let a=bf(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=R_(e,t);if(Array.isArray(a))r.push(...a);else{let c=gr(e[nt]);Qa(c[L],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function gA(n,e){for(let t=Le;t<n.length;t++){let r=n[t],i=r[L].firstChild;i!==null&&Qa(r[L],r,i,e)}n[pr]!==n[Gt]&&e.push(n[pr])}var ew=[];function mA(n){return n[pt]??yA(n)}function yA(n){let e=ew.pop()??Object.create(_A);return e.lView=n,e}function vA(n){n.lView[pt]!==n&&(n.lView=null,ew.push(n))}var _A=fe(D({},yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{hc(n.lView)},consumerOnSignalRead(){this.lView[pt]=this}});function wA(n){let e=n[pt]??Object.create(EA);return e.lView=n,e}var EA=fe(D({},yu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=gr(n.lView);for(;e&&!tw(e[L]);)e=gr(e);e&&Ov(e)},consumerOnSignalRead(){this.lView[pt]=this}});function tw(n){return n.type!==2}var IA=100;function nw(n,e=!0,t=0){let r=n[Wt],i=r.rendererFactory,s=!1;s||i.begin?.();try{CA(n,t)}catch(o){throw e&&Z_(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function CA(n,e){let t=Bv();try{Ny(!0),Dd(n,e);let r=0;for(;fc(n);){if(r===IA)throw new v(103,!1);r++,Dd(n,1)}}finally{Ny(t)}}function DA(n,e,t,r){let i=e[x];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Wt].inlineEffectRunner?.flush(),cf(e);let a=!0,c=null,l=null;s||(tw(n)?(l=mA(e),c=vu(l)):Vm()===null?(a=!1,l=wA(e),c=vu(l)):e[pt]&&(wu(e[pt]),e[pt]=null));try{Pv(e),NT(n.bindingStartIndex),t!==null&&j_(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let h=n.preOrderCheckHooks;h!==null&&xa(e,h,null)}else{let h=n.preOrderHooks;h!==null&&Pa(e,h,0,null),qu(e,0)}if(o||bA(e),rw(e,0),n.contentQueries!==null&&K_(n,e),!s)if(u){let h=n.contentCheckHooks;h!==null&&xa(e,h)}else{let h=n.contentHooks;h!==null&&Pa(e,h,1),qu(e,1)}U0(n,e);let d=n.components;d!==null&&sw(e,d,0);let f=n.viewQuery;if(f!==null&&Cd(2,f,r),!s)if(u){let h=n.viewCheckHooks;h!==null&&xa(e,h)}else{let h=n.viewHooks;h!==null&&Pa(e,h,2),qu(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wu]){for(let h of e[Wu])h();e[Wu]=null}s||(e[x]&=-73)}catch(u){throw s||hc(e),u}finally{l!==null&&($m(l,c),a&&vA(l)),lf()}}function rw(n,e){for(let t=g_(n);t!==null;t=m_(t))for(let r=Le;r<t.length;r++){let i=t[r];iw(i,e)}}function bA(n){for(let e=g_(n);e!==null;e=m_(e)){if(!(e[x]&Ha.HasTransplantedViews))continue;let t=e[Ci];for(let r=0;r<t.length;r++){let i=t[r];Ov(i)}}}function SA(n,e,t){let r=Fn(e,n);iw(r,t)}function iw(n,e){of(n)&&Dd(n,e)}function Dd(n,e){let r=n[L],i=n[x],s=n[pt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&_u(s)),o||=!1,s&&(s.dirty=!1),n[x]&=-9217,o)DA(r,n,r.template,n[ke]);else if(i&8192){rw(n,1);let a=r.components;a!==null&&sw(n,a,1)}}function sw(n,e,t){for(let r=0;r<e.length;r++)SA(n,e[r],t)}function xf(n,e){let t=Bv()?64:1088;for(n[Wt].changeDetectionScheduler?.notify(e);n;){n[x]|=t;let r=gr(n);if(ad(n)&&!r)return n;n=r}return null}var vr=class{get rootNodes(){let e=this._lView,t=e[L];return Qa(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if(fn(e)){let t=e[Ba],r=t?t.indexOf(this):-1;r>-1&&(Ss(e,r),Ua(t,r))}this._attachedToViewContainer=!1}gc(this._lView[L],this._lView)}onDestroy(e){kv(this._lView,e)}markForCheck(){xf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[x]&=-129}reattach(){ld(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,nw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new v(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ad(this._lView),t=this._lView[hr];t!==null&&!e&&Sf(t,this._lView),b_(this._lView[L],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new v(902,!1);this._appRef=e;let t=ad(this._lView),r=this._lView[hr];r!==null&&!t&&S_(r,this._lView),ld(this._lView)}},_r=(()=>{class n{static{this.__NG_ELEMENT_ID__=NA}}return n})(),TA=_r,AA=class extends TA{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Os(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vr(i)}};function NA(){return Pf(vt(),X())}function Pf(n,e){return n.type&4?new AA(e,n,Fi(n,e)):null}var nz=new RegExp(`^(\\d+)*(${m0}|${g0})*(.*)`);var MA=()=>null;function Ti(n,e){return MA(n,e)}var Ai=class{},_c=new P("",{providedIn:"root",factory:()=>!1});var ow=new P(""),aw=new P(""),bd=class{},Za=class{};function RA(n){let e=Error(`No component factory found for ${qe(n)}.`);return e[xA]=n,e}var xA="ngComponent";var Sd=class{resolveComponentFactory(e){throw RA(e)}},Ni=class{static{this.NULL=new Sd}},xn=class{},wc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>PA()}}return n})();function PA(){let n=X(),e=vt(),t=Fn(e.index,n);return(Mn(t)?t:n)[Ae]}var OA=(()=>{class n{static{this.\u0275prov=A({token:n,providedIn:"root",factory:()=>null})}}return n})();function Td(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=yy(i,a);else if(s==2){let c=a,l=e[++o];r=yy(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ja=class extends Ni{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=fr(e);return new Ts(t,this.ngModule)}};function Hy(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Rn.None;e?t.push({propName:o,templateName:r,isSignal:(a&Rn.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function kA(n){let e=n.toLowerCase();return e==="svg"?gT:e==="math"?mT:null}var Ts=class extends Za{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Hy(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Hy(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=KS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=G(null);try{i=i||this.ngModule;let o=i instanceof gt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new dd(e,o):e,c=a.get(xn,null);if(c===null)throw new v(407,!1);let l=a.get(OA,null),u=a.get(Ai,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?B0(f,r,this.componentDef.encapsulation,a):D_(f,h,kA(h)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let m=null;p!==null&&(m=If(p,a,!0));let I=Nf(0,null,null,1,0,null,null,null,null,null,null),T=yc(null,I,null,g,null,null,d,f,a,null,m);cf(T);let E,C,$=null;try{let M=this.componentDef,b,Z=null;M.findHostDirectiveDefs?(b=[],Z=new Map,M.findHostDirectiveDefs(M,b,Z),b.push(M)):b=[M];let de=LA(T,p);$=FA(de,p,M,b,T,d,f),C=sf(I,rt),p&&VA(f,M,p,r),t!==void 0&&$A(C,this.ngContentSelectors,t),E=UA($,M,b,Z,T,[BA]),Rf(I,T,null)}catch(M){throw $!==null&&_d($),_d(T),M}finally{lf()}return new Ad(this.componentType,E,Fi(C,T),T,C)}finally{G(s)}}},Ad=class extends bd{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Mf(s[L],s,i,e,t),this.previousInputValues.set(e,t);let o=Fn(this._tNode.index,s);xf(o,1)}}get injector(){return new dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function LA(n,e){let t=n[L],r=rt;return n[r]=e,Ps(t,r,2,"#host",null)}function FA(n,e,t,r,i,s,o){let a=i[L];jA(r,n,e,o);let c=null;e!==null&&(c=If(e,i[Ii]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=yc(i,B_(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Id(a,n,r.length-1),vc(i,d),i[n.index]=d}function jA(n,e,t,r){for(let i of n)e.mergedAttrs=Jd(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Td(e,e.mergedAttrs,!0),t!==null&&O_(r,t,e))}function UA(n,e,t,r,i,s){let o=vt(),a=i[L],c=yt(o,i);W_(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,f=bi(i,a,d,o);yr(f,i)}q_(a,i,o),c&&yr(c,i);let l=bi(i,a,o.directiveStart+o.componentOffset,o);if(n[ke]=i[ke]=l,s!==null)for(let u of s)u(l,e);return U_(a,o,i),l}function VA(n,e,t,r){if(r)nd(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=YS(e.selectors[0]);i&&nd(n,t,i),s&&s.length>0&&P_(n,t,s.join(" "))}}function $A(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function BA(){let n=vt();hf(X()[L],n)}var Un=(()=>{class n{static{this.__NG_ELEMENT_ID__=HA}}return n})();function HA(){let n=vt();return lw(n,X())}var zA=Un,cw=class extends zA{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fi(this._hostTNode,this._hostLView)}get injector(){return new dr(this._hostTNode,this._hostLView)}get parentInjector(){let e=pf(this._hostTNode,this._hostLView);if(Jv(e)){let t=Wa(e,this._hostLView),r=za(e),i=t[L].data[r+8];return new dr(i,t)}else return new dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=zy(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Ti(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Si(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!dT(e),a;if(o)a=t;else{let p=t||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Ts(fr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(gt,null);g&&(s=g)}let u=fr(c.componentType??{}),d=Ti(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,Si(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(wT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Fe],l=new cw(c,c[Ge],c[Fe]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return ks(o,i,s,r),e.attachToViewContainerRef(),fv(Zu(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=zy(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ss(this._lContainer,t);r&&(Ua(Zu(this._lContainer),t),gc(r[L],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ss(this._lContainer,t);return r&&Ua(Zu(this._lContainer),t)!=null?new vr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function zy(n){return n[Ba]}function Zu(n){return n[Ba]||(n[Ba]=[])}function lw(n,e){let t,r=e[n.index];return fn(r)?t=r:(t=G_(r,e,null,n),e[n.index]=t,vc(e,t)),qA(t,e,n,r),new cw(t,n,e)}function WA(n,e){let t=n[Ae],r=t.createComment(""),i=yt(e,n),s=N_(t,i);return Ya(t,s,r,x0(t,i),!1),r}var qA=YA,GA=()=>!1;function KA(n,e,t){return GA(n,e,t)}function YA(n,e,t,r){if(n[pr])return;let i;t.type&8?i=qt(r):i=WA(e,t),n[pr]=i}var Nd=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Md=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Of(e,t).matches!==null&&this.queries[t].setDirty()}},Rd=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=rN(e):this.predicate=e}},xd=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Pd=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,QA(t,s)),this.matchTNodeWithReadOption(e,t,Oa(t,e,s,!1,!1))}else r===_r?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Oa(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Kt||i===Un||i===_r&&t.type&4)this.addMatch(t.index,-2);else{let s=Oa(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function QA(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function ZA(n,e){return n.type&11?Fi(n,e):n.type&4?Pf(n,e):null}function JA(n,e,t,r){return t===-1?ZA(e,n):t===-2?XA(n,e,r):bi(n,n[L],t,e)}function XA(n,e,t){if(t===Kt)return Fi(e,n);if(t===_r)return Pf(e,n);if(t===Un)return lw(e,n)}function uw(n,e,t,r){let i=e[ln].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(JA(e,u,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Od(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=uw(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Le;d<u.length;d++){let f=u[d];f[hr]===f[Fe]&&Od(f[L],f,l,r)}if(u[Ci]!==null){let d=u[Ci];for(let f=0;f<d.length;f++){let h=d[f];Od(h[L],h,l,r)}}}}}return r}function eN(n,e){return n[ln].queries[e].queryList}function tN(n,e,t){let r=new vd((t&4)===4);return W0(n,e,r,r.destroy),(e[ln]??=new Md).queries.push(new Nd(r))-1}function nN(n,e,t){let r=it();return r.firstCreatePass&&(iN(r,new Rd(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),tN(r,X(),e)}function rN(n){return n.split(",").map(e=>e.trim())}function iN(n,e,t){n.queries===null&&(n.queries=new xd),n.queries.track(new Pd(e,t))}function Of(n,e){return n.queries.getByIndex(e)}function sN(n,e){let t=n[L],r=Of(t,e);return r.crossesNgTemplate?Od(t,n,e,[]):uw(t,n,r,e)}var Wy=new Set;function Ir(n){Wy.has(n)||(Wy.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Pn=class{},As=class{};var kd=class extends Pn{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ja(this);let s=Ev(e);this._bootstrapComponents=C_(s.bootstrap),this._r3Injector=c_(e,t,[{provide:Pn,useValue:this},{provide:Ni,useValue:this.componentFactoryResolver},...r],qe(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ld=class extends As{constructor(e){super(),this.moduleType=e}create(e){return new kd(this.moduleType,e,[])}};var Xa=class extends Pn{constructor(e){super(),this.componentFactoryResolver=new Ja(this),this.instance=null;let t=new Cs([...e.providers,{provide:Pn,useValue:this},{provide:Ni,useValue:this.componentFactoryResolver}],e.parent||tf(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function kf(n,e,t=null){return new Xa({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function dw(n){return aN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function oN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function aN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function fw(n,e,t){return n[e]=t}function cN(n,e){return n[e]}function On(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function lN(n,e,t,r){let i=On(n,e,t);return On(n,e+1,r)||i}function uN(n){return(n.flags&32)===32}function dN(n,e,t,r,i,s,o,a,c){let l=e.consts,u=Ps(e,n,4,o||null,a||null);z_(e,t,u,Di(l,c)),hf(e,u);let d=u.tView=Nf(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ec(n,e,t,r,i,s,o,a,c,l){let u=t+rt,d=e.firstCreatePass?dN(u,e,n,r,i,s,o,a,c):e.data[u];xs(d,!1);let f=fN(e,n,d,t);df()&&Tf(e,n,f,d),yr(f,n);let h=G_(f,n,f,d);return n[u]=h,vc(n,h),KA(h,d,n),rf(d)&&V_(e,n,d),c!=null&&$_(n,d,l),d}function Vn(n,e,t,r,i,s,o,a){let c=X(),l=it(),u=Di(l.consts,s);return ec(c,l,n,e,t,r,i,u,o,a),Vn}var fN=hN;function hN(n,e,t,r){return ff(!0),e[Ae].createComment("")}var _s=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(_s||{}),pN=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=A({token:n,providedIn:"root",factory:()=>new n})}}return n})(),qy=class n{constructor(){this.ngZone=w(ce),this.scheduler=w(Ai),this.errorHandler=w(un,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[_s.EarlyRead,_s.Write,_s.MixedReadWrite,_s.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=A({token:n,providedIn:"root",factory:()=>new n})}};function Ec(n,e,t,r){let i=X(),s=ki();if(On(i,s,e)){let o=it(),a=uf();oA(a,i,n,e,t,r)}return Ec}function gN(n,e,t,r){return On(n,ki(),t)?e+oc(t)+r:Er}function $e(n,e,t){let r=X(),i=ki();if(On(r,i,e)){let s=it(),o=uf();H_(s,o,r,n,e,r[Ae],t,!1)}return $e}function Gy(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Mf(n,t,s[o],o,r)}var Fd=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Ju(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function mN(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=n.at(s),u=e[s],d=Ju(s,l,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let f=n.at(o),h=e[c],p=Ju(o,f,c,h,t);if(p!==0){p<0&&n.updateValue(o,h),o--,c--;continue}let g=t(s,l),m=t(o,f),I=t(s,u);if(Object.is(I,m)){let T=t(c,h);Object.is(T,g)?(n.swap(s,o),n.updateValue(o,h),c--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new tc,i??=Yy(n,s,o,t),jd(n,r,s,I))n.updateValue(s,u),s++,o++;else if(i.has(I))r.set(g,n.detach(s)),o--;else{let T=n.create(s,e[s]);n.attach(s,T),s++,o++}}for(;s<=c;)Ky(n,r,t,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let u=n.at(s),d=l.value,f=Ju(s,u,s,d,t);if(f!==0)f<0&&n.updateValue(s,d),s++,l=c.next();else{r??=new tc,i??=Yy(n,s,o,t);let h=t(s,d);if(jd(n,r,s,h))n.updateValue(s,d),s++,o++,l=c.next();else if(!i.has(h))n.attach(s,n.create(s,d)),s++,o++,l=c.next();else{let p=t(s,u);r.set(p,n.detach(s)),o--}}}for(;!l.done;)Ky(n,r,t,n.length,l.value),l=c.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(c=>{n.destroy(c)})}function jd(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Ky(n,e,t,r,i){if(jd(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function Yy(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var tc=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Lf(n,e){Ir("NgControlFlow");let t=X(),r=ki(),i=t[r]!==Er?t[r]:-1,s=i!==-1?nc(t,rt+i):void 0,o=0;if(On(t,r,n)){let a=G(null);try{if(s!==void 0&&X_(s,o),n!==-1){let c=rt+n,l=nc(t,c),u=Bd(t[L],c),d=Ti(l,u.tView.ssrId),f=Os(t,u,e,{dehydratedView:d});ks(l,f,o,Si(u,d))}}finally{G(a)}}else if(s!==void 0){let a=J_(s,o);a!==void 0&&(a[ke]=e)}}var Ud=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Le}};function hw(n){return n}var Vd=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Ic(n,e,t,r,i,s,o,a,c,l,u,d,f){Ir("NgControlFlow");let h=X(),p=it(),g=c!==void 0,m=X(),I=a?o.bind(m[nt][ke]):o,T=new Vd(g,I);m[rt+n]=T,ec(h,p,n+1,e,t,r,i,Di(p.consts,s)),g&&ec(h,p,n+2,c,l,u,d,Di(p.consts,f))}var $d=class extends Fd{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Le}at(e){return this.getLView(e)[ke].$implicit}attach(e,t){let r=t[Ei];this.needsIndexUpdate||=e!==this.length,ks(this.lContainer,t,e,Si(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,yN(this.lContainer,e)}create(e,t){let r=Ti(this.lContainer,this.templateTNode.tView.ssrId),i=Os(this.hostLView,this.templateTNode,new Ud(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){gc(e[L],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ke].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return vN(this.lContainer,e)}};function Cc(n){let e=G(null),t=pc();try{let r=X(),i=r[L],s=r[t],o=t+1,a=nc(r,o);if(s.liveCollection===void 0){let l=Bd(i,o);s.liveCollection=new $d(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(mN(c,n,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=ki(),u=c.length===0;if(On(r,l,u)){let d=t+2,f=nc(r,d);if(u){let h=Bd(i,d),p=Ti(f,h.tView.ssrId),g=Os(r,h,void 0,{dehydratedView:p});ks(f,g,0,Si(h,p))}else X_(f,0)}}}finally{G(e)}}function nc(n,e){return n[e]}function yN(n,e){return Ss(n,e)}function vN(n,e){return J_(n,e)}function Bd(n,e){return sf(n,e)}function _N(n,e,t,r,i,s){let o=e.consts,a=Di(o,i),c=Ps(e,n,2,r,a);return z_(e,t,c,Di(o,s)),c.attrs!==null&&Td(c,c.attrs,!1),c.mergedAttrs!==null&&Td(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ie(n,e,t,r){let i=X(),s=it(),o=rt+n,a=i[Ae],c=s.firstCreatePass?_N(o,s,i,e,t,r):s.data[o],l=wN(s,i,c,a,e,n);i[o]=l;let u=rf(c);return xs(c,!0),O_(a,l,c),!uN(c)&&df()&&Tf(s,i,l,c),CT()===0&&yr(l,i),DT(),u&&(V_(s,i,c),U_(s,c,i)),r!==null&&$_(i,c),ie}function se(){let n=vt();Vv()?$v():(n=n.parent,xs(n,!1));let e=n;ST(e)&&TT(),bT();let t=it();return t.firstCreatePass&&(hf(t,n),Av(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&VT(e)&&Gy(t,e,X(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&$T(e)&&Gy(t,e,X(),e.stylesWithoutHost,!1),se}function Be(n,e,t,r){return ie(n,e,t,r),se(),Be}var wN=(n,e,t,r,i,s)=>(ff(!0),D_(r,i,LT()));function Dc(){return X()}function Ff(n,e,t){let r=X(),i=ki();if(On(r,i,e)){let s=it(),o=uf(),a=PT(s.data),c=uA(a,o,r);H_(s,o,r,n,e,c,t,!0)}return Ff}var rc="en-US";var EN=rc;function IN(n){typeof n=="string"&&(EN=n.toLowerCase().replace(/_/g,"-"))}var CN=(n,e,t)=>{};function je(n,e,t,r){let i=X(),s=it(),o=vt();return bN(s,i,i[Ae],o,n,e,r),je}function DN(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[$a],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function bN(n,e,t,r,i,s,o){let a=rf(r),l=n.firstCreatePass&&Q_(n),u=e[ke],d=Y_(e),f=!0;if(r.type&3||o){let g=yt(r,e),m=o?o(g):g,I=d.length,T=o?C=>o(qt(C[r.index])):r.index,E=null;if(!o&&a&&(E=DN(n,e,i,r.index)),E!==null){let C=E.__ngLastListenerFn__||E;C.__ngNextListenerFn__=s,E.__ngLastListenerFn__=s,f=!1}else{s=Zy(r,e,u,s),CN(g,i,s);let C=t.listen(m,i,s);d.push(s,C),l&&l.push(i,T,I,I+1)}}else s=Zy(r,e,u,s);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let I=p[m],T=p[m+1],$=e[I][T].subscribe(s),M=d.length;d.push(s,$),l&&l.push(i,r.index,M,-(M+1))}}}function Qy(n,e,t,r){let i=G(null);try{return Bt(6,e,t),t(r)!==!1}catch(s){return Z_(n,s),!1}finally{Bt(7,e,t),G(i)}}function Zy(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Fn(n.index,e):e;xf(o,5);let a=Qy(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=Qy(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function _t(n=1){return kT(n)}function SN(n,e){let t=null,r=HS(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?yv(n,s,!0):qS(r,s))return i}return t}function pw(n){let e=X()[nt][Ge];if(!e.projection){let t=n?n.length:1,r=e.projection=kS(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?SN(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function gw(n,e=0,t,r,i,s){let o=X(),a=it(),c=r?n+1:null;c!==null&&ec(o,a,c,r,i,s,null,t);let l=Ps(a,rt+n,16,null,t||null);l.projection===null&&(l.projection=e),$v();let d=!o[Ei]||jv();o[nt][Ge].projection[l.projection]===null&&c!==null?TN(o,a,c):d&&(l.flags&32)!==32&&L0(a,o,l)}function TN(n,e,t){let r=rt+t,i=e.data[r],s=n[r],o=Ti(s,i.tView.ssrId),a=Os(n,i,void 0,{dehydratedView:o});ks(s,a,0,Si(i,o))}function mw(n,e,t){nN(n,e,t)}function jf(n){let e=X(),t=it(),r=zv();af(r+1);let i=Of(t,r);if(n.dirty&&_T(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=sN(e,r);n.reset(s,c0),n.notifyOnChanges()}return!0}return!1}function Uf(){return eN(X(),zv())}function xe(n,e=""){let t=X(),r=it(),i=n+rt,s=r.firstCreatePass?Ps(r,i,1,e,null):r.data[i],o=AN(r,t,s,e,n);t[i]=o,df()&&Tf(r,t,o,s),xs(s,!1)}var AN=(n,e,t,r,i)=>(ff(!0),C0(e[Ae],r));function Cr(n){return $n("",n,""),Cr}function $n(n,e,t){let r=X(),i=gN(r,n,e,t);return i!==Er&&dA(r,pc(),i),$n}var NN=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Dv(!1,t.type),i=r.length>0?kf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=A({token:n,providedIn:"environment",factory:()=>new n(U(gt))})}}return n})();function wt(n){Ir("NgStandalone"),n.getStandaloneInjector=e=>e.get(NN).getOrCreateStandaloneInjector(n)}function yw(n,e,t){let r=Hv()+n,i=X();return i[r]===Er?fw(i,r,t?e.call(t):e()):cN(i,r)}function vw(n,e,t,r,i){return RN(X(),Hv(),n,e,t,r,i)}function MN(n,e){let t=n[e];return t===Er?void 0:t}function RN(n,e,t,r,i,s,o){let a=e+t;return lN(n,a,i,s)?fw(n,a+2,o?r.call(o,i,s):r(i,s)):MN(n,a+2)}var kn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},_w=new kn("18.2.13");var bc=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ww=new P("");function Ls(n){return!!n&&typeof n.then=="function"}function Ew(n){return!!n&&typeof n.subscribe=="function"}var Iw=new P(""),Cw=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=w(Iw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Ls(s))t.push(s);else if(Ew(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vf=new P("");function xN(){Bm(()=>{throw new v(600,!1)})}function PN(n){return n.isBoundToModule}var ON=10;function kN(n,e,t){try{let r=t();return Ls(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Dr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=w(o0),this.afterRenderManager=w(pN),this.zonelessEnabled=w(_c),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ve,this.afterTick=new Ve,this.componentTypes=[],this.components=[],this.isStable=w(Li).hasPendingTasks.pipe(K(t=>!t)),this._injector=w(gt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Za;if(!this._injector.get(Cw).done){let f=!i&&wv(t),h=!1;throw new v(405,h)}let o;i?o=t:o=this._injector.get(Ni).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=PN(o)?void 0:this._injector.get(Pn),c=r||o.selector,l=o.create(Rt.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(ww,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),ka(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new v(101,!1);let t=G(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,G(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(xn,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<ON;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)LN(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>fc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ka(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Vf,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ka(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new v(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ka(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function LN(n,e,t,r){if(!t&&!fc(n))return;nw(n,e,t&&!r?0:1)}var Hd=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},$f=(()=>{class n{compileModuleSync(t){return new Ld(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Ev(t),s=C_(i.declarations).reduce((o,a)=>{let c=fr(a);return c&&o.push(new Ts(c)),o},[]);return new Hd(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var FN=(()=>{class n{constructor(){this.zone=w(ce),this.changeDetectionScheduler=w(Ai),this.applicationRef=w(Dr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jN=new P("",{factory:()=>!1});function Dw({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ce(fe(D({},Sw()),{scheduleInRootZone:t})),[{provide:ce,useFactory:n},{provide:wi,multi:!0,useFactory:()=>{let r=w(FN,{optional:!0});return()=>r.initialize()}},{provide:wi,multi:!0,useFactory:()=>{let r=w(UN);return()=>{r.initialize()}}},e===!0?{provide:ow,useValue:!0}:[],{provide:aw,useValue:t??l_}]}function bw(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Dw({ngZoneFactory:()=>{let i=Sw(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ir("NgZone_CoalesceEvent"),new ce(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Ln([{provide:jN,useValue:!0},{provide:_c,useValue:!1},r])}function Sw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var UN=(()=>{class n{constructor(){this.subscription=new pe,this.initialized=!1,this.zone=w(ce),this.pendingTasks=w(Li)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var VN=(()=>{class n{constructor(){this.appRef=w(Dr),this.taskService=w(Li),this.ngZone=w(ce),this.zonelessEnabled=w(_c),this.disableScheduling=w(ow,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new pe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ga):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(w(aw,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ky:d_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ga+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ky(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function $N(){return typeof $localize<"u"&&$localize.locale||rc}var Bf=new P("",{providedIn:"root",factory:()=>w(Bf,B.Optional|B.SkipSelf)||$N()});var zd=new P("");function Ma(n){return!n.moduleRef}function BN(n){let e=Ma(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ce);return t.run(()=>{Ma(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(un,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Ma(n)){let s=()=>e.destroy(),o=n.platformInjector.get(zd);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(zd);o.add(s),n.moduleRef.onDestroy(()=>{ka(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return kN(r,t,()=>{let s=e.get(Cw);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Bf,rc);if(IN(o||rc),Ma(n)){let a=e.get(Dr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return HN(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function HN(n,e){let t=n.injector.get(Dr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new v(-403,!1);e.push(n)}var La=null;function zN(n=[],e){return Rt.create({name:e,providers:[{provide:cc,useValue:"platform"},{provide:zd,useValue:new Set([()=>La=null])},...n]})}function WN(n=[]){if(La)return La;let e=zN(n);return La=e,xN(),qN(e),e}function qN(n){n.get(_f,null)?.forEach(t=>t())}var br=(()=>{class n{static{this.__NG_ELEMENT_ID__=GN}}return n})();function GN(n){return KN(vt(),X(),(n&16)===16)}function KN(n,e,t){if(uc(n)&&!t){let r=Fn(n.index,e);return new vr(r,r)}else if(n.type&175){let r=e[nt];return new vr(r,e)}return null}var Wd=class{constructor(){}supports(e){return dw(e)}create(e){return new qd(e)}},YN=(n,e)=>e,qd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||YN}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<Jy(r,i,s)?t:r,a=Jy(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<l&&(s[f]=h+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!dw(e))throw new v(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,oN(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Gd(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ic),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ic),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gd=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Kd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ic=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Kd,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Jy(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Xy(){return new Hf([new Wd])}var Hf=(()=>{class n{static{this.\u0275prov=A({token:n,providedIn:"root",factory:Xy})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Xy()),deps:[[n,new dv,new xt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new v(901,!1)}}return n})();function Tw(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=WN(r),s=[Dw({}),{provide:Ai,useExisting:VN},...t||[]],o=new Xa({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return BN({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var Pw=null;function ji(){return Pw}function Ow(n){Pw??=n}var Sc=class{};var Ye=new P(""),kw=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>w(XN),providedIn:"platform"})}}return n})();var XN=(()=>{class n extends kw{constructor(){super(),this._doc=w(Ye),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ji().getBaseHref(this._doc)}onPopState(t){let r=ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ji().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Lw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Aw(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Sr(n){return n&&n[0]!=="?"?"?"+n:n}var Ac=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>w(Fw),providedIn:"root"})}}return n})(),eM=new P(""),Fw=(()=>{class n extends Ac{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??w(Ye).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Lw(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Sr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Sr(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Sr(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(U(kw),U(eM,8))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Fs=(()=>{class n{constructor(t){this._subject=new ge,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=rM(Aw(Nw(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Sr(r))}normalize(t){return n.stripTrailingSlash(nM(this._basePath,Nw(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Sr}static{this.joinWithSlash=Lw}static{this.stripTrailingSlash=Aw}static{this.\u0275fac=function(r){return new(r||n)(U(Ac))}}static{this.\u0275prov=A({token:n,factory:()=>tM(),providedIn:"root"})}}return n})();function tM(){return new Fs(U(Ac))}function nM(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Nw(n){return n.replace(/\/index.html$/,"")}function rM(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function jw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var zf=/\s+/,Mw=[],Uw=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=Mw,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(zf):Mw}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(zf):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(zf).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Ce(Kt),Ce(wc))}}static{this.\u0275dir=Mi({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Wf=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Vw=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wf(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Rw(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Rw(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ce(Un),Ce(_r),Ce(Hf))}}static{this.\u0275dir=Mi({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Rw(n,e){n.context.$implicit=e.item}var $w=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new qf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xw("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xw("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ce(Un),Ce(_r))}}static{this.\u0275dir=Mi({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),qf=class{constructor(){this.$implicit=null,this.ngIf=null}};function xw(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${qe(e)}'.`)}var Tr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Rs({type:n})}static{this.\u0275inj=Ms({})}}return n})(),Bw="browser",iM="server";function Gf(n){return n===iM}var Tc=class{};var Qf=class extends Sc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Zf=class n extends Qf{static makeCurrent(){Ow(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=sM();return t==null?null:oM(t)}resetBaseElement(){js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jw(document.cookie,e)}},js=null;function sM(){return js=js||document.querySelector("base"),js?js.getAttribute("href"):null}function oM(n){return new URL(n,document.baseURI).pathname}var aM=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})(),Jf=new P(""),qw=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new v(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(U(Jf),U(ce))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})(),Nc=class{constructor(e){this._doc=e}},Kf="ng-app-id",Gw=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gf(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Kf}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Kf),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Kf,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(U(Ye),U(vf),U(Ef,8),U(jn))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})(),Yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},eh=/%COMP%/g,Kw="%COMP%",cM=`_nghost-${Kw}`,lM=`_ngcontent-${Kw}`,uM=!0,dM=new P("",{providedIn:"root",factory:()=>uM});function fM(n){return lM.replace(eh,n)}function hM(n){return cM.replace(eh,n)}function Yw(n,e){return e.map(t=>t.replace(eh,n))}var Mc=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Gf(a),this.defaultRenderer=new Us(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zt.ShadowDom&&(r=fe(D({},r),{encapsulation:zt.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Rc?i.applyToHost(t):i instanceof Vs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case zt.Emulated:s=new Rc(c,l,r,this.appId,u,o,a,d);break;case zt.ShadowDom:return new Xf(c,l,t,r,o,a,this.nonce,d);default:s=new Vs(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(U(qw),U(Gw),U(vf),U(dM),U(Ye),U(jn),U(ce),U(Ef))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})(),Us=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Yf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(zw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new v(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Yf[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Yf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(wr.DashCase|wr.Important)?e.style.setProperty(t,r,i&wr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&wr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ji().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function zw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xf=class extends Us{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Yw(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vs=class extends Us{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?Yw(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rc=class extends Vs{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=fM(l),this.hostAttr=hM(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},pM=(()=>{class n extends Nc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(U(Ye))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})(),Ww=["alt","control","meta","shift"],gM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mM={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},yM=(()=>{class n extends Nc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ji().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Ww.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=gM[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ww.forEach(o=>{if(o!==i){let a=mM[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(U(Ye))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})();function Qw(n,e){return Tw(D({rootComponent:n},vM(e)))}function vM(n){return{appProviders:[...CM,...n?.providers??[]],platformProviders:IM}}function _M(){Zf.makeCurrent()}function wM(){return new un}function EM(){return v_(document),document}var IM=[{provide:jn,useValue:Bw},{provide:_f,useValue:_M,multi:!0},{provide:Ye,useFactory:EM,deps:[]}];var CM=[{provide:cc,useValue:"root"},{provide:un,useFactory:wM,deps:[]},{provide:Jf,useClass:pM,multi:!0,deps:[Ye,ce,jn]},{provide:Jf,useClass:yM,multi:!0,deps:[Ye]},Mc,Gw,qw,{provide:xn,useExisting:Mc},{provide:Tc,useClass:aM,deps:[]},[]];var Zw=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(U(Ye))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var V="primary",ro=Symbol("RouteTitle"),sh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zi(n){return new sh(n)}function bM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function SM(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yt(n[t],e[t]))return!1;return!0}function Yt(n,e){let t=n?oh(n):void 0,r=e?oh(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!sE(n[i],e[i]))return!1;return!0}function oh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function oE(n){return n.length>0?n[n.length-1]:null}function Hn(n){return Fu(n)?n:Ls(n)?we(Promise.resolve(n)):F(n)}var TM={exact:cE,subset:lE},aE={exact:AM,subset:NM,ignored:()=>!0};function Jw(n,e,t){return TM[t.paths](n.root,e.root,t.matrixParams)&&aE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function AM(n,e){return Yt(n,e)}function cE(n,e,t){if(!Nr(n.segments,e.segments)||!Oc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!cE(n.children[r],e.children[r],t))return!1;return!0}function NM(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sE(n[t],e[t]))}function lE(n,e,t){return uE(n,e,e.segments,t)}function uE(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Nr(i,t)||e.hasChildren()||!Oc(i,t,r))}else if(n.segments.length===t.length){if(!Nr(n.segments,t)||!Oc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!lE(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Nr(n.segments,i)||!Oc(n.segments,i,r)||!n.children[V]?!1:uE(n.children[V],e,s,r)}}function Oc(n,e,t){return e.every((r,i)=>aE[t](n[i].parameters,r.parameters))}var pn=class{constructor(e=new re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){return xM.serialize(this)}},re=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kc(this)}},Ar=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zi(this.parameters),this._parameterMap}toString(){return fE(this)}};function MM(n,e){return Nr(n,e)&&n.every((t,r)=>Yt(t.parameters,e[r].parameters))}function Nr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function RM(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===V&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==V&&(t=t.concat(e(i,r)))}),t}var xh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>new Gs,providedIn:"root"})}}return n})(),Gs=class{parse(e){let t=new ch(e);return new pn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${$s(e.root,!0)}`,r=kM(e.queryParams),i=typeof e.fragment=="string"?`#${PM(e.fragment)}`:"";return`${t}${r}${i}`}},xM=new Gs;function kc(n){return n.segments.map(e=>fE(e)).join("/")}function $s(n,e){if(!n.hasChildren())return kc(n);if(e){let t=n.children[V]?$s(n.children[V],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==V&&r.push(`${i}:${$s(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=RM(n,(r,i)=>i===V?[$s(n.children[V],!1)]:[`${i}:${$s(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[V]!=null?`${kc(n)}/${t[0]}`:`${kc(n)}/(${t.join("//")})`}}function dE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xc(n){return dE(n).replace(/%3B/gi,";")}function PM(n){return encodeURI(n)}function ah(n){return dE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lc(n){return decodeURIComponent(n)}function Xw(n){return Lc(n.replace(/\+/g,"%20"))}function fE(n){return`${ah(n.path)}${OM(n.parameters)}`}function OM(n){return Object.entries(n).map(([e,t])=>`;${ah(e)}=${ah(t)}`).join("")}function kM(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${xc(t)}=${xc(i)}`).join("&"):`${xc(t)}=${xc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var LM=/^[^\/()?;#]+/;function th(n){let e=n.match(LM);return e?e[0]:""}var FM=/^[^\/()?;=#]+/;function jM(n){let e=n.match(FM);return e?e[0]:""}var UM=/^[^=?&#]+/;function VM(n){let e=n.match(UM);return e?e[0]:""}var $M=/^[^&#]+/;function BM(n){let e=n.match($M);return e?e[0]:""}var ch=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new re([],{}):new re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[V]=new re(e,t)),r}parseSegment(){let e=th(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new v(4009,!1);return this.capture(e),new Ar(Lc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=jM(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=th(this.remaining);i&&(r=i,this.capture(r))}e[Lc(t)]=Lc(r)}parseQueryParam(e){let t=VM(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=BM(this.remaining);o&&(r=o,this.capture(r))}let i=Xw(t),s=Xw(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=th(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new v(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=V);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[V]:new re([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new v(4011,!1)}};function hE(n){return n.segments.length>0?new re([],{[V]:n}):n}function pE(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=pE(i);if(r===V&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new re(n.segments,e);return HM(t)}function HM(n){if(n.numberOfChildren===1&&n.children[V]){let e=n.children[V];return new re(n.segments.concat(e.segments),e.children)}return n}function Ks(n){return n instanceof pn}function zM(n,e,t=null,r=null){let i=gE(n);return mE(i,e,t,r)}function gE(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new re(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=hE(r);return e??i}function mE(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return nh(i,i,i,t,r);let s=WM(e);if(s.toRoot())return nh(i,i,new re([],{}),t,r);let o=qM(s,i,n),a=o.processChildren?zs(o.segmentGroup,o.index,s.commands):vE(o.segmentGroup,o.index,s.commands);return nh(i,o.segmentGroup,a,t,r)}function Fc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ys(n){return typeof n=="object"&&n!=null&&n.outlets}function nh(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=yE(n,e,t);let a=hE(pE(o));return new pn(a,s,i)}function yE(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=yE(s,e,t)}),new re(n.segments,r)}var jc=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fc(r[0]))throw new v(4003,!1);let i=r.find(Ys);if(i&&i!==oE(r))throw new v(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WM(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new jc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new jc(t,e,r)}var $i=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function qM(n,e,t){if(n.isAbsolute)return new $i(e,!0,0);if(!t)return new $i(e,!1,NaN);if(t.parent===null)return new $i(t,!0,0);let r=Fc(n.commands[0])?0:1,i=t.segments.length-1+r;return GM(t,i,n.numberOfDoubleDots)}function GM(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new v(4005,!1);i=r.segments.length}return new $i(r,!1,i-s)}function KM(n){return Ys(n[0])?n[0].outlets:{[V]:n}}function vE(n,e,t){if(n??=new re([],{}),n.segments.length===0&&n.hasChildren())return zs(n,e,t);let r=YM(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new re(n.segments.slice(0,r.pathIndex),{});return s.children[V]=new re(n.segments.slice(r.pathIndex),n.children),zs(s,0,i)}else return r.match&&i.length===0?new re(n.segments,{}):r.match&&!n.hasChildren()?lh(n,e,t):r.match?zs(n,0,i):lh(n,e,t)}function zs(n,e,t){if(t.length===0)return new re(n.segments,{});{let r=KM(t),i={};if(Object.keys(r).some(s=>s!==V)&&n.children[V]&&n.numberOfChildren===1&&n.children[V].segments.length===0){let s=zs(n.children[V],e,t);return new re(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=vE(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new re(n.segments,i)}}function YM(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Ys(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!tE(c,l,o))return s;r+=2}else{if(!tE(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function lh(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Ys(s)){let c=QM(s.outlets);return new re(r,c)}if(i===0&&Fc(t[0])){let c=n.segments[e];r.push(new Ar(c.path,eE(t[0]))),i++;continue}let o=Ys(s)?s.outlets[V]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Fc(a)?(r.push(new Ar(o,eE(a))),i+=2):(r.push(new Ar(o,{})),i++)}return new re(r,{})}function QM(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=lh(new re([],{}),0,r))}),e}function eE(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tE(n,e,t){return n==t.path&&Yt(e,t.parameters)}var Ws="imperative",Pe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Pe||{}),Et=class{constructor(e,t){this.id=e,this.url=t}},Qs=class extends Et{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Pe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mr=class extends Et{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Pe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ot=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ot||{}),uh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(uh||{}),hn=class extends Et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Pe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rr=class extends Et{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Pe.NavigationSkipped}},Zs=class extends Et{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Pe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uc=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dh=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fh=class extends Et{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Pe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hh=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ph=class extends Et{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gh=class{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mh=class{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yh=class{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vh=class{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_h=class{constructor(e){this.snapshot=e,this.type=Pe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wh=class{constructor(e){this.snapshot=e,this.type=Pe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Js=class{},Wi=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ZM(n,e){return n.providers&&!n._injector&&(n._injector=kf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Pt(n){return n.outlet||V}function JM(n,e){let t=n.filter(r=>Pt(r)===e);return t.push(...n.filter(r=>Pt(r)!==e)),t}function io(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Eh=class{get injector(){return io(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new qc(this.rootInjector),this.attachRef=null}},qc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Eh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(U(gt))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Vc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Ih(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Ih(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Ch(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ch(e,this._root).map(t=>t.value)}};function Ih(n,e){if(n===e.value)return e;for(let t of e.children){let r=Ih(n,t);if(r)return r}return null}function Ch(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Ch(n,t);if(r.length)return r.unshift(e),r}return[]}var st=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Vi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var $c=class extends Vc{constructor(e,t){super(e),this.snapshot=t,Ph(this,e)}toString(){return this.snapshot.toString()}};function _E(n){let e=XM(n),t=new Re([new Ar("",{})]),r=new Re({}),i=new Re({}),s=new Re({}),o=new Re(""),a=new Bn(t,r,s,o,i,V,n,e.root);return a.snapshot=e.root,new $c(new st(a,[]),e)}function XM(n){let e={},t={},r={},i="",s=new Bi([],e,r,i,t,V,n,null,{});return new Hc("",new st(s,[]))}var Bn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[ro]))??F(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>zi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>zi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:D(D({},e.params),n.params),data:D(D({},e.data),n.data),resolve:D(D(D(D({},n.data),e.data),i?.data),n._resolvedData)}:r={params:D({},n.params),data:D({},n.data),resolve:D(D({},n.data),n._resolvedData??{})},i&&EE(i)&&(r.resolve[ro]=i.title),r}var Bi=class{get title(){return this.data?.[ro]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Hc=class extends Vc{constructor(e,t){super(t),this.url=e,Ph(this,t)}toString(){return wE(this._root)}};function Ph(n,e){e.value._routerState=n,e.children.forEach(t=>Ph(n,t))}function wE(n){let e=n.children.length>0?` { ${n.children.map(wE).join(", ")} } `:"";return`${n.value}${e}`}function rh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Yt(e.params,t.params)||n.paramsSubject.next(t.params),SM(e.url,t.url)||n.urlSubject.next(t.url),Yt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Dh(n,e){let t=Yt(n.params,e.params)&&MM(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Dh(n.parent,e.parent))}function EE(n){return typeof n.title=="string"||n.title===null}var Oh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=V,this.activateEvents=new ge,this.deactivateEvents=new ge,this.attachEvents=new ge,this.detachEvents=new ge,this.parentContexts=w(qc),this.location=w(Un),this.changeDetector=w(br),this.inputBinder=w(kh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new v(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new bh(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Mi({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[dc]})}}return n})(),bh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Bn?this.route:e===qc?this.childContexts:this.parent.get(e,t)}},kh=new P("");function eR(n,e,t){let r=Xs(n,e._root,t?t._root:void 0);return new $c(r,e)}function Xs(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=tR(n,e,t);return new st(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Xs(n,a)),o}}let r=nR(e.value),i=e.children.map(s=>Xs(n,s));return new st(r,i)}}function tR(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xs(n,r,i);return Xs(n,r)})}function nR(n){return new Bn(new Re(n.url),new Re(n.params),new Re(n.queryParams),new Re(n.fragment),new Re(n.data),n.outlet,n.component,n)}var eo=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},IE="ngNavigationCancelingError";function zc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ks(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CE(!1,ot.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function CE(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[IE]=!0,t.cancellationCode=e,t}function rR(n){return DE(n)&&Ks(n.url)}function DE(n){return!!n&&n[IE]}var iR=(n,e,t,r)=>K(i=>(new Sh(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Sh=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Vi(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Vi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Vi(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new wh(s.value.snapshot))}),e.children.length&&this.forwardEvent(new vh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(rh(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rh(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Wc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hi=class{constructor(e,t){this.component=e,this.route=t}};function sR(n,e,t){let r=n._root,i=e?e._root:null;return Bs(r,i,t,[r.value])}function oR(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Gi(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!iv(n)?n:e.get(n):r}function Bs(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Vi(e);return n.children.forEach(o=>{aR(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>qs(a,t.getContext(o),i)),i}function aR(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=cR(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Wc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Bs(n,e,a?a.children:null,r,i):Bs(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hi(a.outlet.component,o))}else o&&qs(e,a,i),i.canActivateChecks.push(new Wc(r)),s.component?Bs(n,null,a?a.children:null,r,i):Bs(n,null,t,r,i);return i}function cR(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Nr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nr(n.url,e.url)||!Yt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dh(n,e)||!Yt(n.queryParams,e.queryParams);case"paramsChange":default:return!Dh(n,e)}}function qs(n,e,t){let r=Vi(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?qs(o,e.children.getContext(s),t):qs(o,null,t):qs(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Hi(e.outlet.component,i)):t.canDeactivateChecks.push(new Hi(null,i)):t.canDeactivateChecks.push(new Hi(null,i))}function so(n){return typeof n=="function"}function lR(n){return typeof n=="boolean"}function uR(n){return n&&so(n.canLoad)}function dR(n){return n&&so(n.canActivate)}function fR(n){return n&&so(n.canActivateChild)}function hR(n){return n&&so(n.canDeactivate)}function pR(n){return n&&so(n.canMatch)}function bE(n){return n instanceof an||n?.name==="EmptyError"}var Pc=Symbol("INITIAL_VALUE");function qi(){return At(n=>Sa(n.map(e=>e.pipe(cn(1),Bu(Pc)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===Pc)return Pc;if(t===!1||gR(t))return t}return!0}),Tt(e=>e!==Pc),cn(1)))}function gR(n){return Ks(n)||n instanceof eo}function mR(n,e){return Ee(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?F(fe(D({},t),{guardsResult:!0})):yR(o,r,i,n).pipe(Ee(a=>a&&lR(a)?vR(r,s,n,e):F(a)),K(a=>fe(D({},t),{guardsResult:a})))})}function yR(n,e,t,r){return we(n).pipe(Ee(i=>CR(i.component,i.route,t,e,r)),Vt(i=>i!==!0,!0))}function vR(n,e,t,r){return we(e).pipe(fi(i=>di(wR(i.route.parent,r),_R(i.route,r),IR(n,i.path,t),ER(n,i.route,t))),Vt(i=>i!==!0,!0))}function _R(n,e){return n!==null&&e&&e(new _h(n)),F(!0)}function wR(n,e){return n!==null&&e&&e(new yh(n)),F(!0)}function ER(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(s=>Ta(()=>{let o=io(e)??t,a=Gi(s,o),c=dR(a)?a.canActivate(e,n):dn(o,()=>a(e,n));return Hn(c).pipe(Vt())}));return F(i).pipe(qi())}function IR(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>oR(o)).filter(o=>o!==null).map(o=>Ta(()=>{let a=o.guards.map(c=>{let l=io(o.node)??t,u=Gi(c,l),d=fR(u)?u.canActivateChild(r,n):dn(l,()=>u(r,n));return Hn(d).pipe(Vt())});return F(a).pipe(qi())}));return F(s).pipe(qi())}function CR(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(a=>{let c=io(e)??i,l=Gi(a,c),u=hR(l)?l.canDeactivate(n,e,t,r):dn(c,()=>l(n,e,t,r));return Hn(u).pipe(Vt())});return F(o).pipe(qi())}function DR(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(o=>{let a=Gi(o,n),c=uR(a)?a.canLoad(e,t):dn(n,()=>a(e,t));return Hn(c)});return F(s).pipe(qi(),SE(r))}function SE(n){return Nu(Ie(e=>{if(typeof e!="boolean")throw zc(n,e)}),K(e=>e===!0))}function bR(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(o=>{let a=Gi(o,n),c=pR(a)?a.canMatch(e,t):dn(n,()=>a(e,t));return Hn(c)});return F(s).pipe(qi(),SE(r))}var to=class{constructor(e){this.segmentGroup=e||null}},no=class extends Error{constructor(e){super(),this.urlTree=e}};function Ui(n){return ui(new to(n))}function SR(n){return ui(new v(4e3,!1))}function TR(n){return ui(CE(!1,ot.GuardRejected))}var Th=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[V])return SR(`${e.redirectTo}`);i=i.children[V]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:g}=i,m=dn(s,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:g}));if(m instanceof pn)throw new no(m);t=m}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new no(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new pn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new re(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new v(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ah={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AR(n,e,t,r,i){let s=TE(n,e,t);return s.matched?(r=ZM(e,r),bR(r,e,t,i).pipe(K(o=>o===!0?s:D({},Ah)))):F(s)}function TE(n,e,t){if(e.path==="**")return NR(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?D({},Ah):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bM)(t,n,e);if(!i)return D({},Ah);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?D(D({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function NR(n){return{matched:!0,parameters:n.length>0?oE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function nE(n,e,t,r){return t.length>0&&xR(n,t,r)?{segmentGroup:new re(e,RR(r,new re(t,n.children))),slicedSegments:[]}:t.length===0&&PR(n,t,r)?{segmentGroup:new re(n.segments,MR(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new re(n.segments,n.children),slicedSegments:t}}function MR(n,e,t,r){let i={};for(let s of t)if(Gc(n,e,s)&&!r[Pt(s)]){let o=new re([],{});i[Pt(s)]=o}return D(D({},r),i)}function RR(n,e){let t={};t[V]=e;for(let r of n)if(r.path===""&&Pt(r)!==V){let i=new re([],{});t[Pt(r)]=i}return t}function xR(n,e,t){return t.some(r=>Gc(n,e,r)&&Pt(r)!==V)}function PR(n,e,t){return t.some(r=>Gc(n,e,r))}function Gc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function OR(n,e,t){return e.length===0&&!n.children[t]}var Nh=class{};function kR(n,e,t,r,i,s,o="emptyOnly"){return new Mh(n,e,t,r,i,o,s).recognize()}var LR=31,Mh=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Th(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new v(4002,`'${e.segmentGroup}'`)}recognize(){let e=nE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new st(r,t),s=new Hc("",i),o=zM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Bi([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),V,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,V,t).pipe(K(r=>({children:r,rootSnapshot:t})),Sn(r=>{if(r instanceof no)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof to?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(K(o=>o instanceof st?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return we(s).pipe(fi(o=>{let a=r.children[o],c=JM(t,o);return this.processSegmentGroup(e,c,a,o,i)}),$u((o,a)=>(o.push(...a),o)),Tn(null),Vu(),Ee(o=>{if(o===null)return Ui(r);let a=AE(o);return FR(a),F(a)}))}processSegment(e,t,r,i,s,o,a){return we(t).pipe(fi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Sn(l=>{if(l instanceof to)return F(null);throw l}))),Vt(c=>!!c),Sn(c=>{if(bE(c))return OR(r,i,s)?F(new Nh):Ui(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Pt(r)!==o&&(o===V||!Gc(i,s,r))?Ui(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Ui(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=TE(t,i,s);if(!c)return Ui(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>LR&&(this.allowRedirects=!1));let h=new Bi(s,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,rE(i),Pt(i),i.component??i._loadedComponent??null,i,iE(i)),p=Bc(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,g).pipe(Ee(m=>this.processSegment(e,r,t,m.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=AR(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(At(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(At(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Bi(f,d,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,rE(r),Pt(r),r.component??r._loadedComponent??null,r,iE(r)),g=Bc(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:m,slicedSegments:I}=nE(t,f,h,l);if(I.length===0&&m.hasChildren())return this.processChildren(u,l,m,p).pipe(K(E=>new st(p,E)));if(l.length===0&&I.length===0)return F(new st(p,[]));let T=Pt(r)===s;return this.processSegment(u,l,m,I,T?V:s,!0,p).pipe(K(E=>new st(p,E instanceof st?[E]:[])))}))):Ui(t)))}getChildConfig(e,t,r){return t.children?F({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?F({routes:t._loadedRoutes,injector:t._loadedInjector}):DR(e,t,r,this.urlSerializer).pipe(Ee(i=>i?this.configLoader.loadChildren(e,t).pipe(Ie(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):TR(t))):F({routes:[],injector:e})}};function FR(n){n.sort((e,t)=>e.value.outlet===V?-1:t.value.outlet===V?1:e.value.outlet.localeCompare(t.value.outlet))}function jR(n){let e=n.value.routeConfig;return e&&e.path===""}function AE(n){let e=[],t=new Set;for(let r of n){if(!jR(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=AE(r.children);e.push(new st(r.value,i))}return e.filter(r=>!t.has(r))}function rE(n){return n.data||{}}function iE(n){return n.resolve||{}}function UR(n,e,t,r,i,s){return Ee(o=>kR(n,e,t,r,o.extractedUrl,i,s).pipe(K(({state:a,tree:c})=>fe(D({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function VR(n,e){return Ee(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return F(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of NE(c))o.add(l);let a=0;return we(o).pipe(fi(c=>s.has(c)?$R(c,r,n,e):(c.data=Bc(c,c.parent,n).resolve,F(void 0))),Ie(()=>a++),hi(1),Ee(c=>a===o.size?F(t):tt))})}function NE(n){let e=n.children.map(t=>NE(t)).flat();return[n,...e]}function $R(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!EE(i)&&(s[ro]=i.title),BR(s,n,e,r).pipe(K(o=>(n._resolvedData=o,n.data=Bc(n,n.parent,t).resolve,null)))}function BR(n,e,t,r){let i=oh(n);if(i.length===0)return F({});let s={};return we(i).pipe(Ee(o=>HR(n[o],e,t,r).pipe(Vt(),Ie(a=>{if(a instanceof eo)throw zc(new Gs,a);s[o]=a}))),hi(1),Uu(s),Sn(o=>bE(o)?tt:ui(o)))}function HR(n,e,t,r){let i=io(e)??r,s=Gi(n,i),o=s.resolve?s.resolve(e,t):dn(i,()=>s(e,t));return Hn(o)}function ih(n){return At(e=>{let t=n(e);return t?we(t).pipe(K(()=>e)):F(e)})}var ME=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===V);return r}getResolvedTitleForRoute(t){return t.data[ro]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>w(zR),providedIn:"root"})}}return n})(),zR=(()=>{class n extends ME{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(U(Zw))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lh=new P("",{providedIn:"root",factory:()=>({})}),WR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=mt({type:n,selectors:[["ng-component"]],standalone:!0,features:[wt],decls:1,vars:0,template:function(r,i){r&1&&Be(0,"router-outlet")},dependencies:[Oh],encapsulation:2})}}return n})();function Fh(n){let e=n.children&&n.children.map(Fh),t=e?fe(D({},n),{children:e}):D({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==V&&(t.component=WR),t}var jh=new P(""),qR=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=w($f)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Hn(t.loadComponent()).pipe(K(RE),Ie(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ys(()=>{this.componentLoaders.delete(t)})),i=new oi(r,()=>new Ve).pipe(si());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=GR(r,this.compiler,t,this.onLoadEndListener).pipe(ys(()=>{this.childrenLoaders.delete(r)})),o=new oi(s,()=>new Ve).pipe(si());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GR(n,e,t,r){return Hn(n.loadChildren()).pipe(K(RE),Ee(i=>i instanceof As||Array.isArray(i)?F(i):we(e.compileModuleAsync(i))),K(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(jh,[],{optional:!0,self:!0}).flat()),{routes:o.map(Fh),injector:s}}))}function KR(n){return n&&typeof n=="object"&&"default"in n}function RE(n){return KR(n)?n.default:n}var Uh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>w(YR),providedIn:"root"})}}return n})(),YR=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QR=new P("");var ZR=new P(""),JR=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ve,this.transitionAbortSubject=new Ve,this.configLoader=w(qR),this.environmentInjector=w(gt),this.urlSerializer=w(xh),this.rootContexts=w(qc),this.location=w(Fs),this.inputBindingEnabled=w(kh,{optional:!0})!==null,this.titleStrategy=w(ME),this.options=w(Lh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=w(Uh),this.createViewTransition=w(QR,{optional:!0}),this.navigationErrorHandler=w(ZR,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let t=i=>this.events.next(new gh(i)),r=i=>this.events.next(new mh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(D(D({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Re({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ws,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tt(s=>s.id!==0),K(s=>fe(D({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),At(s=>{let o=!1,a=!1;return F(s).pipe(At(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ot.SupersededByNewNavigation),tt;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Rr(c.id,this.urlSerializer.serialize(c.rawUrl),d,uh.IgnoredSameUrlNavigation)),c.resolve(!1),tt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(At(d=>{let f=this.transitions?.getValue();return this.events.next(new Qs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?tt:Promise.resolve(d)}),UR(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ie(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=fe(D({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new Uc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:g}=c,m=new Qs(d,this.urlSerializer.serialize(f),h,p);this.events.next(m);let I=_E(this.rootComponentType).snapshot;return this.currentTransition=s=fe(D({},c),{targetSnapshot:I,urlAfterRedirects:f,extras:fe(D({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let d="";return this.events.next(new Rr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,uh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),tt}}),Ie(c=>{let l=new dh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=s=fe(D({},c),{guards:sR(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),mR(this.environmentInjector,c=>this.events.next(c)),Ie(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw zc(this.urlSerializer,c.guardsResult);let l=new fh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Tt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ot.GuardRejected),!1)),ih(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Ie(l=>{let u=new hh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),At(l=>{let u=!1;return F(l).pipe(VR(this.paramsInheritanceStrategy,this.environmentInjector),Ie({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",ot.NoDataFromResolver)}}))}),Ie(l=>{let u=new ph(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),ih(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ie(f=>{u.component=f}),K(()=>{})));for(let f of u.children)d.push(...l(f));return d};return Sa(l(c.targetSnapshot.root)).pipe(Tn(null),cn(1))}),ih(()=>this.afterPreactivation()),At(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?we(u).pipe(K(()=>s)):F(s)}),K(c=>{let l=eR(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=fe(D({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ie(()=>{this.events.next(new Js)}),iR(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),cn(1),Ie({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Hu(this.transitionAbortSubject.pipe(Ie(c=>{throw c}))),ys(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",ot.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sn(c=>{if(a=!0,DE(c))this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),rR(c)?this.events.next(new Wi(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Zs(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=dn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof eo){let{message:d,cancellationCode:f}=zc(this.urlSerializer,u);this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),d,f)),this.events.next(new Wi(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return tt}))}))}cancelNavigationTransition(t,r,i){let s=new hn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XR(n){return n!==Ws}var ex=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>w(tx),providedIn:"root"})}}return n})(),Rh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},tx=(()=>{class n extends Rh{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=gf(n)))(i||n)}})()}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xE=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:()=>w(nx),providedIn:"root"})}}return n})(),nx=(()=>{class n extends xE{constructor(){super(...arguments),this.location=w(Fs),this.urlSerializer=w(xh),this.options=w(Lh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=w(Uh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=_E(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Qs)this.stateMemento=this.createStateMemento();else if(t instanceof Rr)this.rawUrlTree=r.initialUrl;else if(t instanceof Uc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Js?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof hn&&(t.code===ot.GuardRejected||t.code===ot.NoDataFromResolver)?this.restoreHistory(r):t instanceof Zs?this.restoreHistory(r,!0):t instanceof Mr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof pn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=D(D({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=D(D({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=gf(n)))(i||n)}})()}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Hs||{});function rx(n,e){n.events.pipe(Tt(t=>t instanceof Mr||t instanceof hn||t instanceof Zs||t instanceof Rr),K(t=>t instanceof Mr||t instanceof Rr?Hs.COMPLETE:(t instanceof hn?t.code===ot.Redirect||t.code===ot.SupersededByNewNavigation:!1)?Hs.REDIRECTING:Hs.FAILED),Tt(t=>t!==Hs.REDIRECTING),cn(1)).subscribe(()=>{e()})}function ix(n){throw n}var sx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ox={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Kc=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=w(bc),this.stateManager=w(xE),this.options=w(Lh,{optional:!0})||{},this.pendingTasks=w(Li),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=w(JR),this.urlSerializer=w(xh),this.location=w(Fs),this.urlHandlingStrategy=w(Uh),this._events=new Ve,this.errorHandler=this.options.errorHandler||ix,this.navigated=!1,this.routeReuseStrategy=w(ex),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=w(jh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!w(kh,{optional:!0}),this.eventsSubscription=new pe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof hn&&r.code!==ot.Redirect&&r.code!==ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mr)this.navigated=!0;else if(r instanceof Wi){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=D({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||XR(i.source)},o);this.scheduleNavigation(a,Ws,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cx(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ws,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=D({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Fh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=gE(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return mE(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ks(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ws,null,r)}navigate(t,r={skipLocationChange:!1}){return ax(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=D({},sx):r===!1?i=D({},ox):i=r,Ks(t))return Jw(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Jw(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return rx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ax(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new v(4008,!1)}function cx(n){return!(n instanceof Js)&&!(n instanceof Wi)}var lx=new P("");function PE(n,...e){return Ln([{provide:jh,multi:!0,useValue:n},[],{provide:Bn,useFactory:ux,deps:[Kc]},{provide:Vf,multi:!0,useFactory:dx},e.map(t=>t.\u0275providers)])}function ux(n){return n.routerState.root}function dx(){let n=w(Rt);return e=>{let t=n.get(Dr);if(e!==t.components[0])return;let r=n.get(Kc),i=n.get(fx);n.get(hx)===1&&r.initialNavigation(),n.get(px,null,B.Optional)?.setUpPreloading(),n.get(lx,null,B.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var fx=new P("",{factory:()=>new Ve}),hx=new P("",{providedIn:"root",factory:()=>1});var px=new P("");var zn=function(n){return n.Oval="oval",n.Diamond="diamond",n.Squigle="squiggle",n}(zn||{}),Wn=function(n){return n.Red="red",n.Green="green",n.Blue="blue",n}(Wn||{}),qn=function(n){return n.Solid="solid",n.Striped="striped",n.Open="open",n}(qn||{});var oo=class{Cards=[];constructor(){this.newCards()}newCards(){var e=[zn.Diamond,zn.Oval,zn.Squigle],t=[Wn.Red,Wn.Green,Wn.Blue],r=[qn.Open,qn.Solid,qn.Striped],i=this.Cards,s=1;for(let o=1;o<=3;o++)e.forEach(a=>{t.forEach(c=>{r.forEach(l=>{var u={Color:c,Fill:l,Count:o,Shape:a,Id:s,Selected:!1,Blink:!1,Shake:!1};i.push(u),s++})})})}findMissingSetCard(e,t){let r=e.Color===t.Color,i=e.Count===t.Count,s=e.Fill===t.Fill,o=e.Shape===t.Shape,a=r?e.Color:this.missingColor(e.Color,t.Color),c=i?e.Count:this.missingCount(e.Count,t.Count),l=s?e.Fill:this.missingFill(e.Fill,t.Fill),u=o?e.Shape:this.missingShape(e.Shape,t.Shape);return this.Cards.find(d=>d.Color===a&&d.Count===c&&d.Fill===l&&d.Shape===u)}missingColor(e,t){let r=[Wn.Red,Wn.Green,Wn.Blue];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingCount(e,t){let r=[1,2,3];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingShape(e,t){let r=[zn.Diamond,zn.Oval,zn.Squigle];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingFill(e,t){let r=[qn.Open,qn.Solid,qn.Striped];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}removeFrom(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}};var mx=["*"];function yx(n,e){if(n&1&&(ie(0,"div",1)(1,"div",2),xe(2),gw(3),se()()),n&2){let t=_t();ve(2),$n(" ",t.Message," ")}}var OE=(()=>{class n{Message="";Visible=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mt({type:n,selectors:[["app-dialog"]],inputs:{Message:"Message",Visible:"Visible"},standalone:!0,features:[wt],ngContentSelectors:mx,decls:1,vars:1,consts:[["class","dialog-backdrop",4,"ngIf"],[1,"dialog-backdrop"],[1,"dialog"]],template:function(r,i){r&1&&(pw(),Vn(0,yx,4,1,"div",0)),r&2&&$e("ngIf",i.Visible)},dependencies:[Tr,$w],styles:[".dialog-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:999}.dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;background:linear-gradient(160deg,#145c32,#0f3d22);border:2px solid #e6c85c;border-radius:18px;padding:1.5em 2em;max-width:420px;width:90%;color:#f5f5f5;text-align:center;box-shadow:0 8px 28px #000000b3,inset 0 2px 10px #ffffff0d,0 0 18px #ffd70040}"]})}return n})();var gn=class{static getToday(){var e=new Date().toISOString();return e.split("T")[0]}};var O=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(O||{}),Qt="*";function co(n,e){return{type:O.Trigger,name:n,definitions:e,options:{}}}function xr(n,e=null){return{type:O.Animate,styles:e,timings:n}}function kE(n,e=null){return{type:O.Sequence,steps:n,options:e}}function He(n){return{type:O.Style,styles:n,offset:null}}function Vh(n,e,t){return{type:O.State,name:n,styles:e,options:t}}function LE(n){return{type:O.Keyframes,steps:n}}function lo(n,e,t=null){return{type:O.Transition,expr:n,animation:e,options:t}}function FE(n,e,t=null){return{type:O.Query,selector:n,animation:e,options:t}}function jE(n,e){return{type:O.Stagger,timings:n,animation:e}}var Gn=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ao=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Yc="!";var vx=(n,e)=>({card:!0,selected:n,blink:e}),_x=()=>[];function wx(n,e){if(n&1&&Be(0,"img",3),n&2){let t=_t();$e("src",t.ImagePath(),I_)("alt","")}}var UE=(()=>{class n{CardInfo;CardSelected=new ge;CardUnSelected=new ge;Found=!1;dealIn=!0;get shake(){return this.CardInfo?.Shake?"on":"off"}ImagePath(){var t=this.CardInfo;return`set_picts/${t.Shape}_${t.Fill}_${t.Color}.png`}clicked(){this.Found||(this.CardInfo.Selected=!this.CardInfo.Selected,this.CardInfo.Selected?this.CardSelected.emit(this.CardInfo):this.CardUnSelected.emit(this.CardInfo))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mt({type:n,selectors:[["app-card"]],hostVars:2,hostBindings:function(r,i){r&2&&Ff("@dealIn",i.dealIn)("@shake",i.shake)},inputs:{CardInfo:"CardInfo",Found:"Found"},outputs:{CardSelected:"CardSelected",CardUnSelected:"CardUnSelected"},standalone:!0,features:[wt],decls:3,vars:6,consts:[[3,"click","ngClass"],[1,"card-images"],["draggable","false",3,"src","alt",4,"ngFor","ngForOf"],["draggable","false",3,"src","alt"]],template:function(r,i){r&1&&(ie(0,"div",0),je("click",function(){return i.clicked()}),ie(1,"div",1),Vn(2,wx,1,2,"img",2),se()()),r&2&&($e("ngClass",vw(2,vx,i.CardInfo.Selected,i.CardInfo.Blink)),ve(2),$e("ngForOf",yw(5,_x).constructor(i.CardInfo.Count)))},dependencies:[Tr,Uw,Vw],styles:[".card[_ngcontent-%COMP%]{display:block;background-color:#f6f6f6;border-radius:5px}@media (hover: hover) and (pointer: fine){.card[_ngcontent-%COMP%]{transition:transform .14s ease,box-shadow .14s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.01);box-shadow:0 6px 18px #00000080}}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinker .3s linear infinite}@keyframes _ngcontent-%COMP%_blinker{50%{background-color:#ffb700}}.selected[_ngcontent-%COMP%]{background-color:#babdee!important;transform:translateY(-2px) scale(1.01);box-shadow:0 6px 18px #00000080}.card-images[_ngcontent-%COMP%]{display:flex;gap:14px;justify-content:center;align-items:center;padding:14px}.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;transform-origin:center center}@media (orientation: landscape){.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.5vw}}@media (orientation: portrait){.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4vw}}"],data:{animation:[co("dealIn",[lo(":enter",[He({opacity:0,transform:"translateY(12px) scale(0.96)"}),xr("220ms cubic-bezier(.2,.8,.2,1)",He({opacity:1,transform:"translateY(0) scale(1)"}))])]),co("shake",[Vh("off",He({})),Vh("on",He({})),lo("off => on",[xr("180ms ease-out",He({transform:"translateX(-6px)"})),xr("140ms ease-out",He({transform:"translateX(6px)"})),xr("120ms ease-out",He({transform:"translateX(0)"}))])])]}})}return n})();var uo=$b(nI());var Zc=(()=>{class n{rng=(0,uo.default)(gn.getToday());constructor(){this.rng=(0,uo.default)(gn.getToday())}setTodaySeed(){this.rng=(0,uo.default)(gn.getToday())}setSeed(t){this.rng=(0,uo.default)(t)}getRandom(){return this.rng()}getRandomInt(t,r){return Math.floor(this.rng()*(r-t+1))+t}shuffelArray(t){let r=t.slice();for(let i=r.length-1;i>0;i--){let s=this.getRandomInt(0,i);[r[i],r[s]]=[r[s],r[i]]}return r}static \u0275fac=function(r){return new(r||n)};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Tx=(n,e)=>e.Id;function Ax(n,e){if(n&1){let t=Dc();ie(0,"app-card",2),je("CardSelected",function(){let i=Pi(t).$implicit,s=_t();return Oi(s.cardSelected(i))})("CardUnSelected",function(){let i=Pi(t).$implicit,s=_t();return Oi(s.cardUnSelected(i))}),se()}if(n&2){let t=e.$implicit;$e("CardInfo",t),Ec("id",t.Id)}}var Gh=(()=>{class n{elementRef;cdr;randomService;Cards=[];UnSelected=new ge;Selected=new ge;constructor(t,r,i){this.elementRef=t,this.cdr=r,this.randomService=i}cardUnSelected(t){this.UnSelected.emit(t)}cardSelected(t){this.Selected.emit(t)}shuffleCardsTable(){let t=this.elementRef.nativeElement.querySelector(".grid");if(!t)return;let r=Array.from(t.querySelectorAll("app-card")),i=new Map;r.forEach(s=>i.set(s,s.getBoundingClientRect())),this.Cards=this.randomService.shuffelArray(this.Cards),this.cdr.detectChanges(),requestAnimationFrame(()=>{Array.from(t.querySelectorAll("app-card")).forEach(o=>{let a=i.get(o);if(!a)return;let c=o.getBoundingClientRect(),l=a.left-c.left,u=a.top-c.top;o.style.willChange="transform",o.style.transform=`translate(${l}px, ${u}px)`,requestAnimationFrame(()=>{o.style.transition="transform 1000ms cubic-bezier(.2,.8,.2,1)",o.style.transform="";let d=()=>{o.style.transition="",o.style.willChange="",o.removeEventListener("transitionend",d)};o.addEventListener("transitionend",d)})})})}static \u0275fac=function(r){return new(r||n)(Ce(Kt),Ce(br),Ce(Zc))};static \u0275cmp=mt({type:n,selectors:[["app-cards-grid"]],inputs:{Cards:"Cards"},outputs:{UnSelected:"UnSelected",Selected:"Selected"},standalone:!0,features:[wt],decls:3,vars:1,consts:[[1,"grid"],[3,"CardInfo"],[3,"CardSelected","CardUnSelected","CardInfo"]],template:function(r,i){r&1&&(ie(0,"div",0),Ic(1,Ax,1,2,"app-card",1,Tx),se()),r&2&&($e("@list",void 0),ve(),Cc(i.Cards))},dependencies:[UE],styles:[".grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,auto-fit,minmax(100));gap:3px}"],data:{animation:[co("list",[lo(":enter",[FE("app-card",[He({opacity:0,transformOrigin:"0% 100%"}),jE(100,[xr("250ms linear",LE([He({opacity:.5,transform:"translate3d(var(--deal-x, -60vw), var(--deal-y, 60vh), 0) scale(.9) rotate(-20deg)",offset:0}),He({opacity:1,transform:"translate3d(0, 0, 0) scale(1) rotate(0)",offset:1})]))])],{optional:!0})])])]}})}return n})();var Yh={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(n,e){if(!n)throw Or(e)},Or=function(n){return new Error("Firebase Database ("+Yh.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var sI=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Nx=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,o||(f=64)),r.push(t[u],t[d],t[f],t[h])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Nx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new Qh;let f=s<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Qh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Jh=function(n){let e=sI(n);return Xc.encodeByteArray(e,!0)},fo=function(n){return Jh(n).replace(/\./g,"")},ho=function(n){try{return Xc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oI(n){return aI(void 0,n)}function aI(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!Mx(t)||(n[t]=aI(n[t],e[t]));return n}function Mx(n){return n!=="__proto__"}function Rx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var xx=()=>Rx().__FIREBASE_DEFAULTS__,Px=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ox=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ho(n[1]);return e&&JSON.parse(e)},Xh=()=>{try{return xx()||Px()||Ox()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cI=n=>{var e,t;return(t=(e=Xh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},lI=n=>{let e=cI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ep=()=>{var n;return(n=Xh())===null||n===void 0?void 0:n.config},uI=n=>{var e;return(e=Xh())===null||e===void 0?void 0:e[`_${n}`]};var Kn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function dI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[fo(JSON.stringify(t)),fo(JSON.stringify(o)),""].join(".")}function Ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function po(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function fI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hI(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function el(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jt(){return Yh.NODE_CLIENT===!0||Yh.NODE_ADMIN===!0}function pI(){try{return typeof indexedDB=="object"}catch{return!1}}function gI(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var kx="FirebaseError",Zt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=kx,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}},mn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Lx(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zt(i,a,r)}};function Lx(n,e){return n.replace(Fx,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Fx=/\{\$([^}]+)}/g;function Ki(n){return JSON.parse(n)}function _e(n){return JSON.stringify(n)}var mI=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Ki(ho(s[0])||""),t=Ki(ho(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var yI=function(n){let e=mI(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},vI=function(n){let e=mI(n).claims;return typeof e=="object"&&e.admin===!0};function Xt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function kr(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function tl(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function go(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function mo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(iI(s)&&iI(o)){if(!mo(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function iI(n){return n!==null&&typeof n=="object"}function yo(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Jc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function _I(n,e){let t=new Zh(n,e);return t.subscribe.bind(t)}var Zh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jx(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Kh),i.error===void 0&&(i.error=Kh),i.complete===void 0&&(i.complete=Kh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jx(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kh(){}function nl(n,e){return`${n} failed: ${e} argument `}var wI=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,y(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vo=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var eq=4*60*60*1e3;function It(n){return n&&n._delegate?n._delegate:n}var Ct=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lr="[DEFAULT]";var rl=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Kn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Vx(e))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Lr){return this.instances.has(e)}getOptions(e=Lr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ux(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lr){return this.component?this.component.multipleInstances?e:Lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ux(n){return n===Lr?void 0:n}function Vx(n){return n.instantiationMode==="EAGER"}var _o=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new rl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $x=[],oe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(oe||{}),Bx={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},Hx=oe.INFO,zx={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},Wx=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=zx[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yn=class{constructor(e){this.name=e,this._logLevel=Hx,this._logHandler=Wx,this._userLogHandler=null,$x.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var qx=(n,e)=>e.some(t=>n instanceof t),EI,II;function Gx(){return EI||(EI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kx(){return II||(II=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var CI=new WeakMap,np=new WeakMap,DI=new WeakMap,tp=new WeakMap,ip=new WeakMap;function Yx(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(en(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&CI.set(t,n)}).catch(()=>{}),ip.set(e,n),e}function Qx(n){if(np.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});np.set(n,e)}var rp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return np.get(n);if(e==="objectStoreNames")return n.objectStoreNames||DI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return en(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bI(n){rp=n(rp)}function Zx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(il(this),e,...t);return DI.set(r,e.sort?e.sort():[e]),en(r)}:Kx().includes(n)?function(...e){return n.apply(il(this),e),en(CI.get(this))}:function(...e){return en(n.apply(il(this),e))}}function Jx(n){return typeof n=="function"?Zx(n):(n instanceof IDBTransaction&&Qx(n),qx(n,Gx())?new Proxy(n,rp):n)}function en(n){if(n instanceof IDBRequest)return Yx(n);if(tp.has(n))return tp.get(n);let e=Jx(n);return e!==n&&(tp.set(n,e),ip.set(e,n)),e}var il=n=>ip.get(n);function TI(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=en(o);return r&&o.addEventListener("upgradeneeded",c=>{r(en(o.result),c.oldVersion,c.newVersion,en(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Xx=["get","getKey","getAll","getAllKeys","count"],eP=["put","add","delete","clear"],sp=new Map;function SI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sp.get(e))return sp.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=eP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Xx.includes(t)))return;let s=function(o,...a){return _(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return sp.set(e,s),s}bI(n=>fe(D({},n),{get:(e,t,r)=>SI(e,t)||n.get(e,t,r),has:(e,t)=>!!SI(e,t)||n.has(e,t)}));var ap=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tP(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function tP(n){let e=n.getComponent();return e?.type==="VERSION"}var cp="@firebase/app",AI="0.10.13";var yn=new Yn("@firebase/app"),nP="@firebase/app-compat",rP="@firebase/analytics-compat",iP="@firebase/analytics",sP="@firebase/app-check-compat",oP="@firebase/app-check",aP="@firebase/auth",cP="@firebase/auth-compat",lP="@firebase/database",uP="@firebase/data-connect",dP="@firebase/database-compat",fP="@firebase/functions",hP="@firebase/functions-compat",pP="@firebase/installations",gP="@firebase/installations-compat",mP="@firebase/messaging",yP="@firebase/messaging-compat",vP="@firebase/performance",_P="@firebase/performance-compat",wP="@firebase/remote-config",EP="@firebase/remote-config-compat",IP="@firebase/storage",CP="@firebase/storage-compat",DP="@firebase/firestore",bP="@firebase/vertexai-preview",SP="@firebase/firestore-compat",TP="firebase",AP="10.14.1";var lp="[DEFAULT]",NP={[cp]:"fire-core",[nP]:"fire-core-compat",[iP]:"fire-analytics",[rP]:"fire-analytics-compat",[oP]:"fire-app-check",[sP]:"fire-app-check-compat",[aP]:"fire-auth",[cP]:"fire-auth-compat",[lP]:"fire-rtdb",[uP]:"fire-data-connect",[dP]:"fire-rtdb-compat",[fP]:"fire-fn",[hP]:"fire-fn-compat",[pP]:"fire-iid",[gP]:"fire-iid-compat",[mP]:"fire-fcm",[yP]:"fire-fcm-compat",[vP]:"fire-perf",[_P]:"fire-perf-compat",[wP]:"fire-rc",[EP]:"fire-rc-compat",[IP]:"fire-gcs",[CP]:"fire-gcs-compat",[DP]:"fire-fst",[SP]:"fire-fst-compat",[bP]:"fire-vertex","fire-js":"fire-js",[TP]:"fire-js-all"};var wo=new Map,MP=new Map,up=new Map;function NI(n,e){try{n.container.addComponent(e)}catch(t){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zn(n){let e=n.name;if(up.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;up.set(e,n);for(let t of wo.values())NI(t,n);for(let t of MP.values())NI(t,n);return!0}function pp(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yi(n){return n.settings!==void 0}var RP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new mn("app","Firebase",RP);var dp=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ct("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}};var Qi=AP;function gp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:lp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(t||(t=ep()),!t)throw Qn.create("no-options");let s=wo.get(i);if(s){if(mo(t,s.options)&&mo(r,s.config))return s;throw Qn.create("duplicate-app",{appName:i})}let o=new _o(i);for(let c of up.values())o.addComponent(c);let a=new dp(t,r,o);return wo.set(i,a),a}function Io(n=lp){let e=wo.get(n);if(!e&&n===lp&&ep())return gp();if(!e)throw Qn.create("no-app",{appName:n});return e}function sl(){return Array.from(wo.values())}function Ne(n,e,t){var r;let i=(r=NP[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(a.join(" "));return}Zn(new Ct(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var xP="firebase-heartbeat-database",PP=1,Eo="firebase-heartbeat-store",op=null;function PI(){return op||(op=TI(xP,PP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Eo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qn.create("idb-open",{originalErrorMessage:n.message})})),op}function OP(n){return _(this,null,function*(){try{let t=(yield PI()).transaction(Eo),r=yield t.objectStore(Eo).get(OI(n));return yield t.done,r}catch(e){if(e instanceof Zt)yn.warn(e.message);else{let t=Qn.create("idb-get",{originalErrorMessage:e?.message});yn.warn(t.message)}}})}function MI(n,e){return _(this,null,function*(){try{let r=(yield PI()).transaction(Eo,"readwrite");yield r.objectStore(Eo).put(e,OI(n)),yield r.done}catch(t){if(t instanceof Zt)yn.warn(t.message);else{let r=Qn.create("idb-set",{originalErrorMessage:t?.message});yn.warn(r.message)}}})}function OI(n){return`${n.name}!${n.options.appId}`}var kP=1024,LP=30*24*60*60*1e3,fp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hp(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=RI();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=LP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=RI(),{heartbeatsToSend:r,unsentEntries:i}=FP(this._heartbeatsCache.heartbeats),s=fo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return yn.warn(t),""}})}};function RI(){return new Date().toISOString().substring(0,10)}function FP(n,e=kP){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xI(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),xI(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var hp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return pI()?gI().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield OP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return MI(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function xI(n){return fo(JSON.stringify({version:2,heartbeats:n})).length}function jP(n){Zn(new Ct("platform-logger",e=>new ap(e),"PRIVATE")),Zn(new Ct("heartbeat",e=>new fp(e),"PRIVATE")),Ne(cp,AI,n),Ne(cp,AI,"esm2017"),Ne("fire-js","")}jP("");var UP="firebase",VP="10.14.1";Ne(UP,VP,"app");var Ji=new kn("ANGULARFIRE2_VERSION");function yp(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Do=(n,e)=>{let t=e?[e]:sl(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Co=class{constructor(){return Do($P)}},$P="app-check";function Zi(){}var ol=class{zone;delegate;constructor(e,t=ku){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},mp=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zi,{},Zi,Zi)),t.pipe(Ie({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ol(Zone.current)),this.insideAngular=t.run(()=>new ol(Zone.current,Ou)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(U(ce))};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function al(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function BP(n){return al().ngZone.runOutsideAngular(()=>n())}function Fr(n){return al().ngZone.run(()=>n())}function HP(n){return zP(al())(n)}function zP(n){return function(t){return t=t.lift(new mp(n.ngZone)),t.pipe(bn(n.outsideAngular),Dn(n.insideAngular))}}var WP=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Fr(()=>n.apply(void 0,r))},Jn=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Fr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zi,{},Zi,Zi))),r[s]=WP(r[s],t));let i=BP(()=>n.apply(this,r));if(!e)if(i instanceof ee){let s=al();return i.pipe(bn(s.outsideAngular),Dn(s.insideAngular))}else return Fr(()=>i);return i instanceof ee?i.pipe(HP):i instanceof Promise?Fr(()=>new Promise((s,o)=>i.then(a=>Fr(()=>s(a)),a=>Fr(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Fr(()=>i)};var jr=class{constructor(e){return e}},So=class{constructor(){return sl()}};function qP(n){return n&&n.length===1?n[0]:new jr(Io())}var vp=new P("angularfire2._apps"),GP={provide:jr,useFactory:qP,deps:[[new xt,vp]]},KP={provide:So,deps:[[new xt,vp]]};function YP(n){return(e,t)=>{let r=t.get(jn);Ne("angularfire",Ji.full,"core"),Ne("angularfire",Ji.full,"app"),Ne("angular",_w.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new jr(i)}}function kI(n,...e){return Ln([GP,KP,{provide:vp,useFactory:YP(n),multi:!0,deps:[ce,Rt,bo,...e]}])}var LI=Jn(gp,!0);function zI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var WI=zI,qI=new mn("auth","Firebase",zI());var dl=new Yn("@firebase/auth");function QP(n,...e){dl.logLevel<=oe.WARN&&dl.warn(`Auth (${Qi}): ${n}`,...e)}function ll(n,...e){dl.logLevel<=oe.ERROR&&dl.error(`Auth (${Qi}): ${n}`,...e)}function FI(n,...e){throw Mp(n,...e)}function Np(n,...e){return Mp(n,...e)}function GI(n,e,t){let r=Object.assign(Object.assign({},WI()),{[e]:t});return new mn("auth","Firebase",r).create(e,{appName:n.name})}function ul(n){return GI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mp(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qI.create(n,...e)}function ne(n,e,...t){if(!n)throw Mp(e,...t)}function To(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ll(e),new Error(e)}function fl(n,e){n||To(e)}function ZP(){return jI()==="http:"||jI()==="https:"}function jI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function JP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZP()||hI()||"connection"in navigator)?navigator.onLine:!0}function XP(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Vr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,fl(t>e,"Short delay should be less than long delay!"),this.isMobile=po()||el()}get(){return JP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function eO(n,e){fl(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var hl=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var tO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nO=new Vr(3e4,6e4);function KI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function yl(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return YI(n,i,()=>_(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=yo(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let h=Object.assign({method:e,headers:f},l);return fI()||(h.referrerPolicy="no-referrer"),hl.fetch()(QI(n,n.config.apiHost,t,d),h)}))})}function YI(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},tO),e);try{let i=new Ep(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw cl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw cl(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw cl(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw cl(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw GI(n,u,l);FI(n,u)}}catch(i){if(i instanceof Zt)throw i;FI(n,"network-request-failed",{message:String(i)})}})}function QI(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?eO(n.config,i):`${n.config.apiScheme}://${i}`}var Ep=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Np(this.auth,"network-request-failed")),nO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function cl(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Np(n,e,r);return i.customData._tokenResponse=t,i}function rO(n,e){return _(this,null,function*(){return yl(n,"POST","/v1/accounts:delete",e)})}function ZI(n,e){return _(this,null,function*(){return yl(n,"POST","/v1/accounts:lookup",e)})}function Ao(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Rp(n,e=!1){return _(this,null,function*(){let t=It(n),r=yield t.getIdToken(e),i=JI(r);ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ao(_p(i.auth_time)),issuedAtTime:Ao(_p(i.iat)),expirationTime:Ao(_p(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function _p(n){return Number(n)*1e3}function JI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ll("JWT malformed, contained fewer than 3 sections"),null;try{let i=ho(t);return i?JSON.parse(i):(ll("Failed to decode base64 JWT payload"),null)}catch(i){return ll("Caught error parsing JWT payload as JSON",i?.toString()),null}}function UI(n){let e=JI(n);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ip(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Zt&&iO(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function iO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Mo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ao(this.lastLoginAt),this.creationTime=Ao(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pl(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ip(n,ZI(t,{idToken:r}));ne(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?XI(s.providerUserInfo):[],a=sO(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mo(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function xp(n){return _(this,null,function*(){let e=It(n);yield pl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XI(n){return n.map(e=>{var{providerId:t}=e,r=Lu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function oO(n,e){return _(this,null,function*(){let t=yield YI(n,{},()=>_(this,null,function*(){let r=yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=QI(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hl.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function aO(n,e){return _(this,null,function*(){return yl(n,"POST","/v2/accounts:revokeToken",KI(n,e))})}var No=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ne(e.length!==0,"internal-error");let t=UI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield oO(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ne(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return To("not implemented")}};function Xn(n,e){ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ro=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Lu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Mo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Ip(this,this.stsTokenManager.getToken(this.auth,e));return ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Rp(this,e)}reload(){return xp(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield pl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Yi(this.auth.app))return Promise.reject(ul(this.auth));let e=yield this.getIdToken();return yield Ip(this,rO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,h=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=t.photoURL)!==null&&o!==void 0?o:void 0,g=(a=t.tenantId)!==null&&a!==void 0?a:void 0,m=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,I=(l=t.createdAt)!==null&&l!==void 0?l:void 0,T=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:C,isAnonymous:$,providerData:M,stsTokenManager:b}=t;ne(E&&b,e,"internal-error");let Z=No.fromJSON(this.name,b);ne(typeof E=="string",e,"internal-error"),Xn(d,e.name),Xn(f,e.name),ne(typeof C=="boolean",e,"internal-error"),ne(typeof $=="boolean",e,"internal-error"),Xn(h,e.name),Xn(p,e.name),Xn(g,e.name),Xn(m,e.name),Xn(I,e.name),Xn(T,e.name);let de=new n({uid:E,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:$,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:Z,createdAt:I,lastLoginAt:T});return M&&Array.isArray(M)&&(de.providerData=M.map(ye=>Object.assign({},ye))),m&&(de._redirectEventId=m),de}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new No;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pl(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];ne(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?XI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new No;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Mo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var VI=new Map;function Ur(n){fl(n instanceof Function,"Expected a class definition");let e=VI.get(n);return e?(fl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,VI.set(n,e),e)}var cO=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Dp=cO;function wp(n,e,t){return`firebase:${n}:${e}:${t}`}var gl=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=wp(this.userKey,i.apiKey,s),this.fullPersistenceKey=wp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ro._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(Ur(Dp),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Ur(Dp),o=wp(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Ro._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function $I(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pO(e))return"Blackberry";if(gO(e))return"Webos";if(uO(e))return"Safari";if((e.includes("chrome/")||dO(e))&&!e.includes("edge/"))return"Chrome";if(hO(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function lO(n=Ot()){return/firefox\//i.test(n)}function uO(n=Ot()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dO(n=Ot()){return/crios\//i.test(n)}function fO(n=Ot()){return/iemobile/i.test(n)}function hO(n=Ot()){return/android/i.test(n)}function pO(n=Ot()){return/blackberry/i.test(n)}function gO(n=Ot()){return/webos/i.test(n)}function eC(n,e=[]){let t;switch(n){case"Browser":t=$I(Ot());break;case"Worker":t=`${$I(Ot())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qi}/${r}`}var bp=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mO(t){return _(this,arguments,function*(n,e={}){return yl(n,"GET","/v2/passwordPolicy",KI(n,e))})}var yO=6,Sp=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:yO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Tp=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ml(this),this.idTokenSubscription=new ml(this),this.beforeStateQueue=new bp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ur(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield gl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield ZI(this,{idToken:e}),r=yield Ro._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Yi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield pl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=XP()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Yi(this.app))return Promise.reject(ul(this));let t=e?It(e):null;return t&&ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Yi(this.app)?Promise.reject(ul(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Yi(this.app)?Promise.reject(ul(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Ur(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield mO(this),t=new Sp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield aO(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ur(e)||this._popupRedirectResolver;ne(t,this,"argument-error"),this.redirectPersistenceManager=yield gl.create(this,[Ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&QP(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function vO(n){return It(n)}var ml=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_I(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _O={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wO(n){_O=n}function EO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function IO(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ur);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var Zq=EO("rcb"),Jq=new Vr(3e4,6e4);var Xq=new Vr(2e3,1e4);var e3=10*60*1e3;var t3=new Vr(3e4,6e4);var n3=new Vr(5e3,15e3);var r3=encodeURIComponent("fac");var BI="@firebase/auth",HI="1.7.9";var Ap=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function CO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DO(n){Zn(new Ct("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eC(n)},l=new Tp(r,i,s,c);return IO(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zn(new Ct("auth-internal",e=>{let t=vO(e.getProvider("auth").getImmediate());return(r=>new Ap(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(BI,HI,CO(n)),Ne(BI,HI,"esm2017")}var bO=5*60,i3=uI("authIdTokenMaxAge")||bO;function SO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wO({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Np("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",SO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DO("Browser");var bk="auth";var vl=class{constructor(){return Do(bk)}};var tC="@firebase/database",nC="1.0.8";var kg="";function Sk(n){kg=n}var Vp=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_e(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ki(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var $p=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Xt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var PC=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Vp(e)}}catch{}return new $p},Br=PC("localStorage"),Bp=PC("sessionStorage");var ts=new Yn("@firebase/database"),Tk=function(){let n=1;return function(){return n++}}(),OC=function(n){let e=wI(n),t=new Jc;t.update(e);let r=t.digest();return Xc.encodeByteArray(r)},Ko=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ko.apply(null,r):typeof r=="object"?e+=_e(r):e+=r,e+=" "}return e},zr=null,rC=!0,Ak=function(n,e){y(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(ts.logLevel=oe.VERBOSE,zr=ts.log.bind(ts),e&&Bp.set("logging_enabled",!0)):typeof n=="function"?zr=n:(zr=null,Bp.remove("logging_enabled"))},Ue=function(...n){if(rC===!0&&(rC=!1,zr===null&&Bp.get("logging_enabled")===!0&&Ak(!0)),zr){let e=Ko.apply(null,n);zr(e)}},Yo=function(n){return function(...e){Ue(n,...e)}},Hp=function(...n){let e="FIREBASE INTERNAL ERROR: "+Ko(...n);ts.error(e)},vn=function(...n){let e=`FIREBASE FATAL ERROR: ${Ko(...n)}`;throw ts.error(e),new Error(e)},Qe=function(...n){let e="FIREBASE WARNING: "+Ko(...n);ts.warn(e)},Nk=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kC=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Mk=function(n){if(Jt()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},rs="[MIN_NAME]",Wr="[MAX_NAME]",us=function(n,e){if(n===e)return 0;if(n===rs||e===Wr)return-1;if(e===rs||n===Wr)return 1;{let t=iC(n),r=iC(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},Rk=function(n,e){return n===e?0:n<e?-1:1},xo=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+_e(e))},Lg=function(n){if(typeof n!="object"||n===null)return _e(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=_e(e[r]),t+=":",t+=Lg(n[e[r]]);return t+="}",t},LC=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Ze(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var FC=function(n){y(!kC(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},xk=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Pk=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ok(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var kk=new RegExp("^-?(0*)\\d{1,10}$"),Lk=-2147483648,Fk=2147483647,iC=function(n){if(kk.test(n)){let e=Number(n);if(e>=Lk&&e<=Fk)return e}return null},ds=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Qe("Exception was thrown by user callback.",t),e},Math.floor(0))}},jk=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fo=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var zp=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Wp=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Ue("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qe(e)}},jo=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),wl="5",jC="v",UC="s",VC="r",$C="f",BC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,HC="ls",zC="p",qp="ac",WC="websocket",qC="long_polling";var El=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Br.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Br.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Uk(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function GC(n,e,t){y(typeof e=="string","typeof type must == string"),y(typeof t=="object","typeof params must == object");let r;if(e===WC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===qC)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Uk(n)&&(t.ns=n.namespace);let i=[];return Ze(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Gp=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Xt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return oI(this.counters_)}};var Pp={},Op={};function Fg(n){let e=n.toString();return Pp[e]||(Pp[e]=new Gp),Pp[e]}function Vk(n,e){let t=n.toString();return Op[t]||(Op[t]=e()),Op[t]}var Kp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ds(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var sC="start",$k="close",Bk="pLPCommand",Hk="pRTLPCB",KC="id",YC="pw",QC="ser",zk="cb",Wk="seg",qk="ts",Gk="d",Kk="dframe",ZC=1870,JC=30,Yk=ZC-JC,Qk=25e3,Zk=3e4,Yp=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yo(e),this.stats_=Fg(t),this.urlFn=c=>(this.appCheckToken&&(c[qp]=this.appCheckToken),GC(t,qC,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Kp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Zk)),Mk(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qp((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===sC)this.id=a,this.password=c;else if(o===$k)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[sC]="t",r[QC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[zk]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jC]=wl,this.transportSessionId&&(r[UC]=this.transportSessionId),this.lastSessionId&&(r[HC]=this.lastSessionId),this.applicationId&&(r[zC]=this.applicationId),this.appCheckToken&&(r[qp]=this.appCheckToken),typeof location<"u"&&location.hostname&&BC.test(location.hostname)&&(r[VC]=$C);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Jt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xk()&&!Pk()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=_e(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Jh(t),i=LC(r,Yk);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Jt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Kk]="t",r[KC]=e,r[YC]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=_e(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Qp=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Jt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Tk(),window[Bk+this.uniqueCallbackIdentifier]=e,window[Hk+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ue("frame writing exception"),a.stack&&Ue(a.stack),Ue(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ue("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[KC]=this.myID,e[YC]=this.myPW,e[QC]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+JC+r.length<=ZC;){let o=this.pendingSegs.shift();r=r+"&"+Wk+i+"="+o.seg+"&"+qk+i+"="+o.ts+"&"+Gk+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(Qk)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Jt()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ue("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Jk=16384,Xk=45e3,Il=null;typeof MozWebSocket<"u"?Il=MozWebSocket:typeof WebSocket<"u"&&(Il=WebSocket);var Po=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yo(this.connId),this.stats_=Fg(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[jC]=wl,!Jt()&&typeof location<"u"&&location.hostname&&BC.test(location.hostname)&&(a[VC]=$C),r&&(a[UC]=r),i&&(a[HC]=i),s&&(a[qp]=s),o&&(a[zC]=o),GC(t,WC,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Br.set("previous_websocket_failure",!0);try{let i;if(Jt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${wl}/${kg}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Il(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Il!==null&&!n.forceDisallow_}static previouslyFailed(){return Br.isInMemoryStorage||Br.get("previous_websocket_failure")===!0}markConnectionHealthy(){Br.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ki(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(y(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=_e(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=LC(r,Jk);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Xk))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),eL=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Yp,Po]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Po&&Po.isAvailable(),i=r&&!Po.previouslyFailed();if(t.webSocketOnly&&(r||Qe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Po];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),tL=6e4,nL=5e3,rL=10*1024,iL=100*1024,kp="t",oC="d",sL="s",aC="r",oL="e",cC="o",lC="a",uC="n",dC="p",aL="h",Zp=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yo("c:"+this.id+":"),this.transportManager_=new eL(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Fo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>iL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(kp in e){let t=e[kp];t===lC?this.upgradeIfSecondaryHealthy_():t===aC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===cC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=xo("t",e),r=xo("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:dC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=xo("t",e),r=xo("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=xo(kp,e);if(oC in e){let r=e[oC];if(t===aL){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===uC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===sL?this.onConnectionShutdown_(r):t===aC?this.onReset_(r):t===oL?Hp("Server Error: "+r):t===cC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hp("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),wl!==r&&Qe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Fo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:dC,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Br.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Cl=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Dl=class{constructor(e){this.allowedEvents_=e,this.listeners_={},y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){y(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var bl=class n extends Dl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!po()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var fC=32,hC=768,ae=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function te(){return new ae("")}function q(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function nr(n){return n.pieces_.length-n.pieceNum_}function ue(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ae(n.pieces_,e)}function XC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function cL(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function eD(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function tD(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ae(e,0)}function De(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ae(t,0)}function W(n){return n.pieceNum_>=n.pieces_.length}function ze(n,e){let t=q(n),r=q(e);if(t===null)return e;if(t===r)return ze(ue(n),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function nD(n,e){if(nr(n)!==nr(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Lt(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(nr(n)>nr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Jp=class{constructor(e,t){this.errorPrefix_=t,this.parts_=eD(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=vo(this.parts_[r]);rD(this)}};function lL(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=vo(e),rD(n)}function uL(n){let e=n.parts_.pop();n.byteLength_-=vo(e),n.parts_.length>0&&(n.byteLength_-=1)}function rD(n){if(n.byteLength_>hC)throw new Error(n.errorPrefix_+"has a key path longer than "+hC+" bytes ("+n.byteLength_+").");if(n.parts_.length>fC)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fC+") or object contains a cycle "+$r(n))}function $r(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Xp=class n extends Dl{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return y(e==="visible","Unknown event type: "+e),[this.visible_]}};var Oo=1e3,dL=60*5*1e3,pC=30*1e3,fL=1.3,hL=3e4,pL="server_kill",gC=3,jg=(()=>{class n extends Cl{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Yo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oo,this.maxReconnectDelay_=dL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Jt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Xp.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&bl.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(_e(o)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Kn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Xt(t,"w")){let i=kr(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Qe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||vI(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pC)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=yI(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+_e(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Hp("Unrecognized action received from server: "+_e(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Oo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Oo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hL&&(this.reconnectDelay_=Oo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fL)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ue("getToken() completed but was canceled"):(Ue("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Zp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,p=>{Qe(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(pL)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Qe(f),l())}}})}interrupt(t){Ue("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ue("Resuming connection for reason: "+t),delete this.interruptReasons_[t],tl(this.interruptReasons_)&&(this.reconnectDelay_=Oo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>Lg(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new ae(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ue("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gC&&(this.reconnectDelay_=pC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ue("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Jt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+kg.replace(/\./g,"-")]=1,po()?t["framework.cordova"]=1:el()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=bl.getInstance().currentlyOnline();return tl(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),H=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var is=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new H(rs,e),i=new H(rs,t);return this.compare(r,i)!==0}minPost(){return H.MIN}};var _l,Sl=class extends is{static get __EMPTY_NODE(){return _l}static set __EMPTY_NODE(e){_l=e}compare(e,t){return us(e.name,t.name)}isDefinedOn(e){throw Or("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return H.MIN}maxPost(){return new H(Wr,_l)}makePost(e,t){return y(typeof e=="string","KeyIndex indexValue must always be a string."),new H(e,_l)}toString(){return".key"}},ns=new Sl;var es=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},kt=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Dt.EMPTY_NODE,this.right=o??Dt.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Dt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Dt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),eg=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new kt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Dt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,kt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,kt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new es(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new es(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new es(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new es(this.root_,null,this.comparator_,!0,e)}};Dt.EMPTY_NODE=new eg;function gL(n,e){return us(n.name,e.name)}function Ug(n,e){return us(n,e)}var tg;function mL(n){tg=n}var iD=function(n){return typeof n=="number"?"number:"+FC(n):"string:"+n},sD=function(n){if(n.isLeafNode()){let e=n.val();y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Xt(e,".sv"),"Priority must be a string or number.")}else y(n===tg||n.isEmpty(),"priority of unexpected type.");y(n===tg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var mC,ss=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),sD(this.priorityNode_)}static set __childrenNodeConstructor(t){mC=t}static get __childrenNodeConstructor(){return mC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return W(t)?this:q(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=q(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||nr(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+iD(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=FC(this.value_):t+=this.value_,this.lazyHash_=OC(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(y(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return y(s>=0,"Unknown leaf type: "+r),y(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),oD,aD;function yL(n){oD=n}function vL(n){aD=n}var ng=class extends is{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?us(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return H.MIN}maxPost(){return new H(Wr,new ss("[PRIORITY-POST]",aD))}makePost(e,t){let r=oD(e);return new H(t,new ss("[PRIORITY-POST]",r))}toString(){return".priority"}},me=new ng;var _L=Math.log(2),rg=class{constructor(e){let t=s=>parseInt(Math.log(s)/_L,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Tl=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=n[c],f=t?t(d):d,new kt(f,d.node,kt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),g=i(h+1,l);return d=n[h],f=t?t(d):d,new kt(f,d.node,kt.BLACK,p,g)}},s=function(c){let l=null,u=null,d=n.length,f=function(p,g){let m=d-p,I=d;d-=p;let T=i(m+1,I),E=n[m],C=t?t(E):E;h(new kt(C,E.node,g,null,T))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?f(m,kt.BLACK):(f(m,kt.BLACK),f(m,kt.RED))}return u},o=new rg(n.length),a=s(o);return new Dt(r||e,a)};var Lp,Xi={},os=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return y(Xi&&me,"ChildrenNode.ts has not been loaded"),Lp=Lp||new n({".priority":Xi},{".priority":me}),Lp}get(e){let t=kr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Dt?t:null}hasIndex(e){return Xt(this.indexSet_,e.toString())}addIndex(e,t){y(e!==ns,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(H.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Tl(r,e.getCompare()):a=Xi;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=go(this.indexes_,(i,s)=>{let o=kr(this.indexSet_,s);if(y(o,"Missing index implementation for "+s),i===Xi)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(H.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Tl(a,o.getCompare())}else return Xi;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new H(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=go(this.indexes_,i=>{if(i===Xi)return i;{let s=t.get(e.name);return s?i.remove(new H(e.name,s)):i}});return new n(r,this.indexSet_)}};var ko,j=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&sD(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ko||(ko=new n(new Dt(Ug),null,os.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ko}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?ko:r}}getChild(t){let r=q(t);return r===null?this:this.getImmediateChild(r).getChild(ue(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(y(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new H(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?ko:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=q(t);if(i===null)return r;{y(q(t)!==".priority"||nr(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ue(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(me,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+iD(this.getPriority().val())+":"),this.forEachChild(me,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":OC(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new H(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new H(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new H(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,H.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,H.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qo?-1:0}withIndex(t){if(t===ns||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ns||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(me),s=r.getIterator(me),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ns?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),ig=class extends j{constructor(){super(new Dt(Ug),j.EMPTY_NODE,os.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return j.EMPTY_NODE}isEmpty(){return!1}},Qo=new ig;Object.defineProperties(H,{MIN:{value:new H(rs,j.EMPTY_NODE)},MAX:{value:new H(Wr,Qo)}});Sl.__EMPTY_NODE=j.EMPTY_NODE;ss.__childrenNodeConstructor=j;mL(Qo);vL(Qo);var wL=!0;function Me(n,e=null){if(n===null)return j.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new ss(t,Me(e))}if(!(n instanceof Array)&&wL){let t=[],r=!1;if(Ze(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Me(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new H(o,c)))}}),t.length===0)return j.EMPTY_NODE;let s=Tl(t,gL,o=>o.name,Ug);if(r){let o=Tl(t,me.getCompare());return new j(s,Me(e),new os({".priority":o},{".priority":me}))}else return new j(s,Me(e),os.Default)}else{let t=j.EMPTY_NODE;return Ze(n,(r,i)=>{if(Xt(n,r)&&r.substring(0,1)!=="."){let s=Me(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Me(e))}}yL(Me);var sg=class extends is{constructor(e){super(),this.indexPath_=e,y(!W(e)&&q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?us(e.name,t.name):s}makePost(e,t){let r=Me(e),i=j.EMPTY_NODE.updateChild(this.indexPath_,r);return new H(t,i)}maxPost(){let e=j.EMPTY_NODE.updateChild(this.indexPath_,Qo);return new H(Wr,e)}toString(){return eD(this.indexPath_,0).join("/")}};var og=class extends is{compare(e,t){let r=e.node.compareTo(t.node);return r===0?us(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return H.MIN}maxPost(){return H.MAX}makePost(e,t){let r=Me(e);return new H(t,r)}toString(){return".value"}},EL=new og;function cD(n){return{type:"value",snapshotNode:n}}function as(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Bo(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ho(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function IL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var zo=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Bo(t,a)):y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(as(t,r)):o.trackChildChange(Ho(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(me,(i,s)=>{t.hasChild(i)||r.trackChildChange(Bo(i,s))}),t.isLeafNode()||t.forEachChild(me,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ho(i,s,o))}else r.trackChildChange(as(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?j.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Al=class n{constructor(e){this.indexedFilter_=new zo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new H(t,r))||(r=j.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=j.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(j.EMPTY_NODE);let s=this;return t.forEachChild(me,(o,a)=>{s.matches(new H(o,a))||(i=i.updateImmediateChild(o,j.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var ag=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Al(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new H(t,r))||(r=j.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=j.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=j.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(j.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,j.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;y(a.numChildren()===this.limit_,"");let c=new H(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,c);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(Ho(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(Bo(t,d));let g=a.updateImmediateChild(t,j.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(as(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Bo(l.name,l.node)),s.trackChildChange(as(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,j.EMPTY_NODE)):e}};var cg=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rs}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===me}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function CL(n){return n.loadsAllData()?new zo(n.getIndex()):n.hasLimit()?new ag(n):new Al(n)}function yC(n){let e={};if(n.isDefault())return e;let t;if(n.index_===me?t="$priority":n.index_===EL?t="$value":n.index_===ns?t="$key":(y(n.index_ instanceof sg,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=_e(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=_e(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+_e(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=_e(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+_e(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function vC(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==me&&(e.i=n.index_.toString()),e}var lg=class n extends Cl{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Yo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=yC(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),kr(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=yC(e._queryParams),r=e._path.toString(),i=new Kn;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+yo(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ki(a.responseText)}catch{Qe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Qe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var ug=class{constructor(){this.rootNode_=j.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Nl(){return{value:null,children:new Map}}function lD(n,e,t){if(W(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=q(e);n.children.has(r)||n.children.set(r,Nl());let i=n.children.get(r);e=ue(e),lD(i,e,t)}}function dg(n,e,t){n.value!==null?t(e,n.value):DL(n,(r,i)=>{let s=new ae(e.toString()+"/"+r);dg(i,s,t)})}function DL(n,e){n.children.forEach((t,r)=>{e(r,t)})}var fg=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ze(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var _C=10*1e3,bL=30*1e3,SL=5*60*1e3,hg=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fg(e);let r=_C+(bL-_C)*Math.random();Fo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Ze(e,(i,s)=>{s>0&&Xt(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Fo(this.reportStats_.bind(this),Math.floor(Math.random()*2*SL))}};var tn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(tn||{});function uD(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Vg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function $g(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var pg=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=tn.ACK_USER_WRITE,this.source=uD()}operationForChild(e){if(W(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ae(e));return new n(te(),t,this.revert)}}else return y(q(this.path)===e,"operationForChild called for unrelated child."),new n(ue(this.path),this.affectedTree,this.revert)}};var Ml=class n{constructor(e,t){this.source=e,this.path=t,this.type=tn.LISTEN_COMPLETE}operationForChild(e){return W(this.path)?new n(this.source,te()):new n(this.source,ue(this.path))}};var cs=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=tn.OVERWRITE}operationForChild(e){return W(this.path)?new n(this.source,te(),this.snap.getImmediateChild(e)):new n(this.source,ue(this.path),this.snap)}};var Rl=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=tn.MERGE}operationForChild(e){if(W(this.path)){let t=this.children.subtree(new ae(e));return t.isEmpty()?null:t.value?new cs(this.source,te(),t.value):new n(this.source,te(),t)}else return y(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var nn=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W(e))return this.isFullyInitialized()&&!this.filtered_;let t=q(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var gg=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function TL(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(IL(o.childName,o.snapshotNode))}),Lo(n,i,"child_removed",e,r,t),Lo(n,i,"child_added",e,r,t),Lo(n,i,"child_moved",s,r,t),Lo(n,i,"child_changed",e,r,t),Lo(n,i,"value",e,r,t),i}function Lo(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>NL(n,a,c)),o.forEach(a=>{let c=AL(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function AL(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function NL(n,e,t){if(e.childName==null||t.childName==null)throw Or("Should only compare child_ events.");let r=new H(e.childName,e.snapshotNode),i=new H(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Bl(n,e){return{eventCache:n,serverCache:e}}function Uo(n,e,t,r){return Bl(new nn(e,t,r),n.serverCache)}function dD(n,e,t,r){return Bl(n.eventCache,new nn(e,t,r))}function xl(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qr(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Fp,ML=()=>(Fp||(Fp=new Dt(Rk)),Fp),Je=class n{constructor(e,t=ML()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Ze(e,(r,i)=>{t=t.set(new ae(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:te(),value:this.value};if(W(e))return null;{let r=q(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ue(e),t);return s!=null?{path:De(new ae(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(W(e))return this;{let t=q(e),r=this.children.get(t);return r!==null?r.subtree(ue(e)):new n(null)}}set(e,t){if(W(e))return new n(t,this.children);{let r=q(e),s=(this.children.get(r)||new n(null)).set(ue(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(W(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=q(e),r=this.children.get(t);if(r){let i=r.remove(ue(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(W(e))return this.value;{let t=q(e),r=this.children.get(t);return r?r.get(ue(e)):null}}setTree(e,t){if(W(e))return t;{let r=q(e),s=(this.children.get(r)||new n(null)).setTree(ue(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(te(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(De(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,te(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(W(e))return null;{let s=q(e),o=this.children.get(s);return o?o.findOnPath_(ue(e),De(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,te(),t)}foreachOnPath_(e,t,r){if(W(e))return this;{this.value&&r(t,this.value);let i=q(e),s=this.children.get(i);return s?s.foreachOnPath_(ue(e),De(t,i),r):new n(null)}}foreach(e){this.foreach_(te(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(De(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Ft=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Je(null))}};function Vo(n,e,t){if(W(e))return new Ft(new Je(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=ze(i,e);return s=s.updateChild(o,t),new Ft(n.writeTree_.set(i,s))}else{let i=new Je(t),s=n.writeTree_.setTree(e,i);return new Ft(s)}}}function wC(n,e,t){let r=n;return Ze(t,(i,s)=>{r=Vo(r,De(e,i),s)}),r}function EC(n,e){if(W(e))return Ft.empty();{let t=n.writeTree_.setTree(e,new Je(null));return new Ft(t)}}function mg(n,e){return Gr(n,e)!=null}function Gr(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ze(t.path,e)):null}function IC(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(me,(r,i)=>{e.push(new H(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new H(r,i.value))}),e}function er(n,e){if(W(e))return n;{let t=Gr(n,e);return t!=null?new Ft(new Je(t)):new Ft(n.writeTree_.subtree(e))}}function yg(n){return n.writeTree_.isEmpty()}function ls(n,e){return fD(te(),n.writeTree_,e)}function fD(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(y(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=fD(De(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(De(n,".priority"),r)),t}}function Hl(n,e){return mD(e,n)}function RL(n,e,t,r,i){y(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Vo(n.visibleWrites,e,t)),n.lastWriteId=r}function xL(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function PL(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);y(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&OL(a,r.path)?i=!1:Lt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return kL(n),!0;if(r.snap)n.visibleWrites=EC(n.visibleWrites,r.path);else{let a=r.children;Ze(a,c=>{n.visibleWrites=EC(n.visibleWrites,De(r.path,c))})}return!0}else return!1}function OL(n,e){if(n.snap)return Lt(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Lt(De(n.path,t),e))return!0;return!1}function kL(n){n.visibleWrites=hD(n.allWrites,LL,te()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function LL(n){return n.visible}function hD(n,e,t){let r=Ft.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Lt(t,o)?(a=ze(t,o),r=Vo(r,a,s.snap)):Lt(o,t)&&(a=ze(o,t),r=Vo(r,te(),s.snap.getChild(a)));else if(s.children){if(Lt(t,o))a=ze(t,o),r=wC(r,a,s.children);else if(Lt(o,t))if(a=ze(o,t),W(a))r=wC(r,te(),s.children);else{let c=kr(s.children,q(a));if(c){let l=c.getChild(ue(a));r=Vo(r,te(),l)}}}else throw Or("WriteRecord should have .snap or .children")}}return r}function pD(n,e,t,r,i){if(!r&&!i){let s=Gr(n.visibleWrites,e);if(s!=null)return s;{let o=er(n.visibleWrites,e);if(yg(o))return t;if(t==null&&!mg(o,te()))return null;{let a=t||j.EMPTY_NODE;return ls(o,a)}}}else{let s=er(n.visibleWrites,e);if(!i&&yg(s))return t;if(!i&&t==null&&!mg(s,te()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Lt(l.path,e)||Lt(e,l.path))},a=hD(n.allWrites,o,e),c=t||j.EMPTY_NODE;return ls(a,c)}}}function FL(n,e,t){let r=j.EMPTY_NODE,i=Gr(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(me,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=er(n.visibleWrites,e);return t.forEachChild(me,(o,a)=>{let c=ls(er(s,new ae(o)),a);r=r.updateImmediateChild(o,c)}),IC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=er(n.visibleWrites,e);return IC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function jL(n,e,t,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=De(e,t);if(mg(n.visibleWrites,s))return null;{let o=er(n.visibleWrites,s);return yg(o)?i.getChild(t):ls(o,i.getChild(t))}}function UL(n,e,t,r){let i=De(e,t),s=Gr(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=er(n.visibleWrites,i);return ls(o,r.getNode().getImmediateChild(t))}else return null}function VL(n,e){return Gr(n.visibleWrites,e)}function $L(n,e,t,r,i,s,o){let a,c=er(n.visibleWrites,e),l=Gr(c,te());if(l!=null)a=l;else if(t!=null)a=ls(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function BL(){return{visibleWrites:Ft.empty(),allWrites:[],lastWriteId:-1}}function Pl(n,e,t,r){return pD(n.writeTree,n.treePath,e,t,r)}function Bg(n,e){return FL(n.writeTree,n.treePath,e)}function CC(n,e,t,r){return jL(n.writeTree,n.treePath,e,t,r)}function Ol(n,e){return VL(n.writeTree,De(n.treePath,e))}function HL(n,e,t,r,i,s){return $L(n.writeTree,n.treePath,e,t,r,i,s)}function Hg(n,e,t){return UL(n.writeTree,n.treePath,e,t)}function gD(n,e){return mD(De(n.treePath,e),n.writeTree)}function mD(n,e){return{treePath:n,writeTree:e}}var vg=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;y(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Ho(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,Bo(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,as(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ho(r,e.snapshotNode,i.oldSnap));else throw Or("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var _g=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},yD=new _g,Wo=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new nn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hg(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qr(this.viewCache_),s=HL(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function zL(n){return{filter:n}}function WL(n,e){y(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),y(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function qL(n,e,t,r,i){let s=new vg,o,a;if(t.type===tn.OVERWRITE){let l=t;l.source.fromUser?o=wg(n,e,l.path,l.snap,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!W(l.path),o=kl(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===tn.MERGE){let l=t;l.source.fromUser?o=KL(n,e,l.path,l.children,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Eg(n,e,l.path,l.children,r,i,a,s))}else if(t.type===tn.ACK_USER_WRITE){let l=t;l.revert?o=ZL(n,e,l.path,r,i,s):o=YL(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===tn.LISTEN_COMPLETE)o=QL(n,e,t.path,r,s);else throw Or("Unknown operation type: "+t.type);let c=s.getChanges();return GL(e,o,c),{viewCache:o,changes:c}}function GL(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=xl(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(cD(xl(e)))}}function vD(n,e,t,r,i,s){let o=e.eventCache;if(Ol(r,t)!=null)return e;{let a,c;if(W(t))if(y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=qr(e),u=l instanceof j?l:j.EMPTY_NODE,d=Bg(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Pl(r,qr(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=q(t);if(l===".priority"){y(nr(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=CC(r,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=ue(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=CC(r,t,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=Hg(r,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Uo(e,a,o.isFullyInitialized()||W(t),n.filter.filtersNodes())}}function kl(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(W(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=q(t);if(!c.isCompleteForPath(t)&&nr(t)>1)return e;let p=ue(t),m=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),m):l=u.updateChild(c.getNode(),h,m,p,yD,null)}let d=dD(e,l,c.isFullyInitialized()||W(t),u.filtersNodes()),f=new Wo(i,d,s);return vD(n,d,t,i,f,a)}function wg(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new Wo(i,e,s);if(W(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Uo(e,l,!0,n.filter.filtersNodes());else{let d=q(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Uo(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ue(t),h=a.getNode().getImmediateChild(d),p;if(W(f))p=r;else{let g=u.getCompleteChild(d);g!=null?XC(f)===".priority"&&g.getChild(tD(f)).isEmpty()?p=g:p=g.updateChild(f,r):p=j.EMPTY_NODE}if(h.equals(p))c=e;else{let g=n.filter.updateChild(a.getNode(),d,p,f,u,o);c=Uo(e,g,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function DC(n,e){return n.eventCache.isCompleteForChild(e)}function KL(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=De(t,c);DC(e,q(u))&&(a=wg(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=De(t,c);DC(e,q(u))||(a=wg(n,a,u,l,i,s,o))}),a}function bC(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Eg(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;W(t)?l=r:l=new Je(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=bC(n,h,f);c=kl(n,c,new ae(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),g=bC(n,p,f);c=kl(n,c,new ae(d),g,i,s,o,a)}}),c}function YL(n,e,t,r,i,s,o){if(Ol(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(W(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return kl(n,e,t,c.getNode().getChild(t),i,s,a,o);if(W(t)){let l=new Je(null);return c.getNode().forEachChild(ns,(u,d)=>{l=l.set(new ae(u),d)}),Eg(n,e,t,l,i,s,a,o)}else return e}else{let l=new Je(null);return r.foreach((u,d)=>{let f=De(t,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Eg(n,e,t,l,i,s,a,o)}}function QL(n,e,t,r,i){let s=e.serverCache,o=dD(e,s.getNode(),s.isFullyInitialized()||W(t),s.isFiltered());return vD(n,o,t,r,yD,i)}function ZL(n,e,t,r,i,s){let o;if(Ol(r,t)!=null)return e;{let a=new Wo(r,e,i),c=e.eventCache.getNode(),l;if(W(t)||q(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Pl(r,qr(e));else{let d=e.serverCache.getNode();y(d instanceof j,"serverChildren would be complete if leaf node"),u=Bg(r,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=q(t),d=Hg(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,ue(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,j.EMPTY_NODE,ue(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Pl(r,qr(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Ol(r,te())!=null,Uo(e,l,o,n.filter.filtersNodes())}}var Ig=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new zo(r.getIndex()),s=CL(r);this.processor_=zL(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(j.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(j.EMPTY_NODE,a.getNode(),null),u=new nn(c,o.isFullyInitialized(),i.filtersNodes()),d=new nn(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Bl(d,u),this.eventGenerator_=new gg(this.query_)}get query(){return this.query_}};function JL(n){return n.viewCache_.serverCache.getNode()}function XL(n){return xl(n.viewCache_)}function eF(n,e){let t=qr(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!W(e)&&!t.getImmediateChild(q(e)).isEmpty())?t.getChild(e):null}function SC(n){return n.eventRegistrations_.length===0}function tF(n,e){n.eventRegistrations_.push(e)}function TC(n,e,t){let r=[];if(t){y(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function AC(n,e,t,r){e.type===tn.MERGE&&e.source.queryId!==null&&(y(qr(n.viewCache_),"We should always have a full cache before handling merges"),y(xl(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=qL(n.processor_,i,e,t,r);return WL(n.processor_,s.viewCache),y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,_D(n,s.changes,s.viewCache.eventCache.getNode(),null)}function nF(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(me,(s,o)=>{r.push(as(s,o))}),t.isFullyInitialized()&&r.push(cD(t.getNode())),_D(n,r,t.getNode(),e)}function _D(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return TL(n.eventGenerator_,e,t,i)}var Ll,Fl=class{constructor(){this.views=new Map}};function rF(n){y(!Ll,"__referenceConstructor has already been defined"),Ll=n}function iF(){return y(Ll,"Reference.ts has not been loaded"),Ll}function sF(n){return n.views.size===0}function zg(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return y(s!=null,"SyncTree gave us an op for an invalid query."),AC(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(AC(o,e,t,r));return s}}function wD(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Pl(t,i?r:null),c=!1;a?c=!0:r instanceof j?(a=Bg(t,r),c=!1):(a=j.EMPTY_NODE,c=!1);let l=Bl(new nn(a,c,!1),new nn(r,i,!1));return new Ig(e,l)}return o}function oF(n,e,t,r,i,s){let o=wD(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),tF(o,t),nF(o,t)}function aF(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=rr(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat(TC(l,t,r)),SC(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat(TC(c,t,r)),SC(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!rr(n)&&s.push(new(iF())(e._repo,e._path)),{removed:s,events:o}}function ED(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function tr(n,e){let t=null;for(let r of n.views.values())t=t||eF(r,e);return t}function ID(n,e){if(e._queryParams.loadsAllData())return zl(n);{let r=e._queryIdentifier;return n.views.get(r)}}function CD(n,e){return ID(n,e)!=null}function rr(n){return zl(n)!=null}function zl(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var jl;function cF(n){y(!jl,"__referenceConstructor has already been defined"),jl=n}function lF(){return y(jl,"Reference.ts has not been loaded"),jl}var uF=1,Ul=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Je(null),this.pendingWriteTree_=BL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function DD(n,e,t,r,i){return RL(n.pendingWriteTree_,e,t,r,i),i?Jo(n,new cs(uD(),e,t)):[]}function Hr(n,e,t=!1){let r=xL(n.pendingWriteTree_,e);if(PL(n.pendingWriteTree_,e)){let s=new Je(null);return r.snap!=null?s=s.set(te(),!0):Ze(r.children,o=>{s=s.set(new ae(o),!0)}),Jo(n,new pg(r.path,s,t))}else return[]}function Zo(n,e,t){return Jo(n,new cs(Vg(),e,t))}function dF(n,e,t){let r=Je.fromObject(t);return Jo(n,new Rl(Vg(),e,r))}function fF(n,e){return Jo(n,new Ml(Vg(),e))}function hF(n,e,t){let r=qg(n,t);if(r){let i=Gg(r),s=i.path,o=i.queryId,a=ze(s,e),c=new Ml($g(o),a);return Kg(n,s,c)}else return[]}function bD(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||CD(o,e))){let c=aF(o,e,t,r);sF(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(f,h)=>rr(h));if(u&&!d){let f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=yF(f);for(let p=0;p<h.length;++p){let g=h[p],m=g.query,I=ND(n,g);n.listenProvider_.startListening($o(m),qo(n,m),I.hashFn,I.onComplete)}}}!d&&l.length>0&&!r&&(u?n.listenProvider_.stopListening($o(e),null):l.forEach(f=>{let h=n.queryToTagMap.get(Wl(f));n.listenProvider_.stopListening($o(f),h)}))}vF(n,l)}return a}function SD(n,e,t,r){let i=qg(n,r);if(i!=null){let s=Gg(i),o=s.path,a=s.queryId,c=ze(o,e),l=new cs($g(a),c,t);return Kg(n,o,l)}else return[]}function pF(n,e,t,r){let i=qg(n,r);if(i){let s=Gg(i),o=s.path,a=s.queryId,c=ze(o,e),l=Je.fromObject(t),u=new Rl($g(a),c,l);return Kg(n,o,u)}else return[]}function gF(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=ze(f,i);s=s||tr(h,p),o=o||rr(h)});let a=n.syncPointTree_.get(i);a?(o=o||rr(a),s=s||tr(a,te())):(a=new Fl,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=j.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((h,p)=>{let g=tr(p,te());g&&(s=s.updateImmediateChild(h,g))}));let l=CD(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Wl(e);y(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=_F();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}let u=Hl(n.pendingWriteTree_,i),d=oF(a,e,t,u,s,c);if(!l&&!o&&!r){let f=ID(a,e);d=d.concat(wF(n,e,f))}return d}function Wg(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=ze(o,e),l=tr(a,c);if(l)return l});return pD(i,e,s,t,!0)}function mF(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{let d=ze(l,t);r=r||tr(u,d)});let i=n.syncPointTree_.get(t);i?r=r||tr(i,te()):(i=new Fl,n.syncPointTree_=n.syncPointTree_.set(t,i));let s=r!=null,o=s?new nn(r,!0,!1):null,a=Hl(n.pendingWriteTree_,e._path),c=wD(i,e,a,s?o.getNode():j.EMPTY_NODE,s);return XL(c)}function Jo(n,e){return TD(e,n.syncPointTree_,null,Hl(n.pendingWriteTree_,te()))}function TD(n,e,t,r){if(W(n.path))return AD(n,e,t,r);{let i=e.get(te());t==null&&i!=null&&(t=tr(i,te()));let s=[],o=q(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=gD(r,o);s=s.concat(TD(a,c,l,u))}return i&&(s=s.concat(zg(i,n,r,t))),s}}function AD(n,e,t,r){let i=e.get(te());t==null&&i!=null&&(t=tr(i,te()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=gD(r,o),u=n.operationForChild(o);u&&(s=s.concat(AD(u,a,c,l)))}),i&&(s=s.concat(zg(i,n,r,t))),s}function ND(n,e){let t=e.query,r=qo(n,t);return{hashFn:()=>(JL(e)||j.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?hF(n,t._path,r):fF(n,t._path);{let s=Ok(i,t);return bD(n,t,null,s)}}}}function qo(n,e){let t=Wl(e);return n.queryToTagMap.get(t)}function Wl(n){return n._path.toString()+"$"+n._queryIdentifier}function qg(n,e){return n.tagToQueryMap.get(e)}function Gg(n){let e=n.indexOf("$");return y(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ae(n.substr(0,e))}}function Kg(n,e,t){let r=n.syncPointTree_.get(e);y(r,"Missing sync point for query tag that we're tracking");let i=Hl(n.pendingWriteTree_,e);return zg(r,t,i,null)}function yF(n){return n.fold((e,t,r)=>{if(t&&rr(t))return[zl(t)];{let i=[];return t&&(i=ED(t)),Ze(r,(s,o)=>{i=i.concat(o)}),i}})}function $o(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(lF())(n._repo,n._path):n}function vF(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Wl(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function _F(){return uF++}function wF(n,e,t){let r=e._path,i=qo(n,e),s=ND(n,t),o=n.listenProvider_.startListening($o(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)y(!rr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!W(l)&&u&&rr(u))return[zl(u).query];{let f=[];return u&&(f=f.concat(ED(u).map(h=>h.query))),Ze(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening($o(u),qo(n,u))}}return o}var Cg=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Dg=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=De(this.path_,e);return new n(this.syncTree_,t)}node(){return Wg(this.syncTree_,this.path_)}},EF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},NC=function(n,e,t){if(!n||typeof n!="object")return n;if(y(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return IF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return CF(n[".sv"],e);y(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},IF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:y(!1,"Unexpected server value: "+n)}},CF=function(n,e,t){n.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=e.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},DF=function(n,e,t,r){return Yg(e,new Dg(t,n),r)},MD=function(n,e,t){return Yg(n,new Cg(e),t)};function Yg(n,e,t){let r=n.getPriority().val(),i=NC(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=NC(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new ss(a,Me(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ss(i))),o.forEachChild(me,(a,c)=>{let l=Yg(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Go=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function Qg(n,e){let t=e instanceof ae?e:new ae(e),r=n,i=q(t);for(;i!==null;){let s=kr(r.node.children,i)||{children:{},childCount:0};r=new Go(i,r,s),t=ue(t),i=q(t)}return r}function fs(n){return n.node.value}function RD(n,e){n.node.value=e,bg(n)}function xD(n){return n.node.childCount>0}function bF(n){return fs(n)===void 0&&!xD(n)}function ql(n,e){Ze(n.node.children,(t,r)=>{e(new Go(t,n,r))})}function PD(n,e,t,r){t&&!r&&e(n),ql(n,i=>{PD(i,e,!0,r)}),t&&r&&e(n)}function SF(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Xo(n){return new ae(n.parent===null?n.name:Xo(n.parent)+"/"+n.name)}function bg(n){n.parent!==null&&TF(n.parent,n.name,n)}function TF(n,e,t){let r=bF(t),i=Xt(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,bg(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,bg(n))}var AF=/[\[\].#$\/\u0000-\u001F\u007F]/,NF=/[\[\].#$\u0000-\u001F\u007F]/,jp=10*1024*1024,OD=function(n){return typeof n=="string"&&n.length!==0&&!AF.test(n)},kD=function(n){return typeof n=="string"&&n.length!==0&&!NF.test(n)},MF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kD(n)};var RF=function(n,e,t,r){r&&e===void 0||Zg(nl(n,"value"),e,t)},Zg=function(n,e,t){let r=t instanceof ae?new Jp(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+$r(r));if(typeof e=="function")throw new Error(n+"contains a function "+$r(r)+" with contents = "+e.toString());if(kC(e))throw new Error(n+"contains "+e.toString()+" "+$r(r));if(typeof e=="string"&&e.length>jp/3&&vo(e)>jp)throw new Error(n+"contains a string greater than "+jp+" utf8 bytes "+$r(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ze(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!OD(o)))throw new Error(n+" contains an invalid key ("+o+") "+$r(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);lL(r,o),Zg(n,a,r),uL(r)}),i&&s)throw new Error(n+' contains ".value" child '+$r(r)+" in addition to actual children.")}};var LD=function(n,e,t,r){if(!(r&&t===void 0)&&!kD(t))throw new Error(nl(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xF=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),LD(n,e,t,r)},PF=function(n,e){if(q(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},OF=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!OD(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!MF(t))throw new Error(nl(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Sg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function FD(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!nD(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function rn(n,e,t){FD(n,t),kF(n,r=>Lt(r,e)||Lt(e,r))}function kF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(LF(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function LF(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();zr&&Ue("event: "+t.toString()),ds(r)}}}var FF="repo_interrupt",jF=25,Tg=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Nl(),this.transactionQueueTree_=new Go,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function UF(n,e,t){if(n.stats_=Fg(n.repoInfo_),n.forceRestClient_||jk())n.server_=new lg(n.repoInfo_,(r,i,s,o)=>{MC(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>RC(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_e(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new jg(n.repoInfo_,e,(r,i,s,o)=>{MC(n,r,i,s,o)},r=>{RC(n,r)},r=>{$F(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Vk(n.repoInfo_,()=>new hg(n.stats_,n.server_)),n.infoData_=new ug,n.infoSyncTree_=new Ul({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Zo(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Xg(n,"connected",!1),n.serverSyncTree_=new Ul({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);rn(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function VF(n){let t=n.infoData_.getNode(new ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Jg(n){return EF({timestamp:VF(n)})}function MC(n,e,t,r,i){n.dataUpdateCount++;let s=new ae(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=go(t,l=>Me(l));o=pF(n.serverSyncTree_,s,c,i)}else{let c=Me(t);o=SD(n.serverSyncTree_,s,c,i)}else if(r){let c=go(t,l=>Me(l));o=dF(n.serverSyncTree_,s,c)}else{let c=Me(t);o=Zo(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Kl(n,s)),rn(n.eventQueue_,a,o)}function RC(n,e){Xg(n,"connected",e),e===!1&&zF(n)}function $F(n,e){Ze(e,(t,r)=>{Xg(n,t,r)})}function Xg(n,e,t){let r=new ae("/.info/"+e),i=Me(t);n.infoData_.updateSnapshot(r,i);let s=Zo(n.infoSyncTree_,r,i);rn(n.eventQueue_,r,s)}function jD(n){return n.nextWriteId_++}function BF(n,e,t){let r=mF(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let s=Me(i).withIndex(e._queryParams.getIndex());gF(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=Zo(n.serverSyncTree_,e._path,s);else{let a=qo(n.serverSyncTree_,e);o=SD(n.serverSyncTree_,e._path,s,a)}return rn(n.eventQueue_,e._path,o),bD(n.serverSyncTree_,e,t,null,!0),s},i=>(Gl(n,"get for query "+_e(e)+" failed: "+i),Promise.reject(new Error(i))))}function HF(n,e,t,r,i){Gl(n,"set",{path:e.toString(),value:t,priority:r});let s=Jg(n),o=Me(t,r),a=Wg(n.serverSyncTree_,e),c=MD(o,a,s),l=jD(n),u=DD(n.serverSyncTree_,e,c,l,!0);FD(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,h)=>{let p=f==="ok";p||Qe("set at "+e+" failed: "+f);let g=Hr(n.serverSyncTree_,l,!p);rn(n.eventQueue_,e,g),qF(n,i,f,h)});let d=HD(n,e);Kl(n,d),rn(n.eventQueue_,d,[])}function zF(n){Gl(n,"onDisconnectEvents");let e=Jg(n),t=Nl();dg(n.onDisconnect_,te(),(i,s)=>{let o=DF(i,s,n.serverSyncTree_,e);lD(t,i,o)});let r=[];dg(t,te(),(i,s)=>{r=r.concat(Zo(n.serverSyncTree_,i,s));let o=HD(n,i);Kl(n,o)}),n.onDisconnect_=Nl(),rn(n.eventQueue_,te(),r)}function WF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(FF)}function Gl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ue(t,...e)}function qF(n,e,t,r){e&&ds(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function UD(n,e,t){return Wg(n.serverSyncTree_,e,t)||j.EMPTY_NODE}function em(n,e=n.transactionQueueTree_){if(e||Yl(n,e),fs(e)){let t=$D(n,e);y(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&GF(n,Xo(e),t)}else xD(e)&&ql(e,t=>{em(n,t)})}function GF(n,e,t){let r=t.map(l=>l.currentWriteId),i=UD(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=ze(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Gl(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(Hr(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Yl(n,Qg(n.transactionQueueTree_,e)),em(n,n.transactionQueueTree_),rn(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)ds(d[f])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Qe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}Kl(n,e)}},o)}function Kl(n,e){let t=VD(n,e),r=Xo(t),i=$D(n,t);return KF(n,i,r),r}function KF(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=ze(t,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Hr(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=jF)u=!0,d="maxretry",i=i.concat(Hr(n.serverSyncTree_,c.currentWriteId,!0));else{let f=UD(n,c.path,o);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Zg("transaction failed: Data returned ",h,c.path);let p=Me(h);typeof h=="object"&&h!=null&&Xt(h,".priority")||(p=p.updatePriority(f.getPriority()));let m=c.currentWriteId,I=Jg(n),T=MD(p,f,I);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=T,c.currentWriteId=jD(n),o.splice(o.indexOf(m),1),i=i.concat(DD(n.serverSyncTree_,c.path,T,c.currentWriteId,c.applyLocally)),i=i.concat(Hr(n.serverSyncTree_,m,!0))}else u=!0,d="nodata",i=i.concat(Hr(n.serverSyncTree_,c.currentWriteId,!0))}rn(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Yl(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)ds(r[a]);em(n,n.transactionQueueTree_)}function VD(n,e){let t,r=n.transactionQueueTree_;for(t=q(e);t!==null&&fs(r)===void 0;)r=Qg(r,t),e=ue(e),t=q(e);return r}function $D(n,e){let t=[];return BD(n,e,t),t.sort((r,i)=>r.order-i.order),t}function BD(n,e,t){let r=fs(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ql(e,i=>{BD(n,i,t)})}function Yl(n,e){let t=fs(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,RD(e,t.length>0?t:void 0)}ql(e,r=>{Yl(n,r)})}function HD(n,e){let t=Xo(VD(n,e)),r=Qg(n.transactionQueueTree_,e);return SF(r,i=>{Up(n,i)}),Up(n,r),PD(r,i=>{Up(n,i)}),t}function Up(n,e){let t=fs(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(y(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(y(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Hr(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?RD(e,void 0):t.length=s+1,rn(n.eventQueue_,Xo(e),i);for(let o=0;o<r.length;o++)ds(r[o])}}function YF(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function QF(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qe(`Invalid query segment '${t}' in query '${n}'`)}return e}var xC=function(n,e){let t=ZF(n),r=t.namespace;t.domain==="firebase.com"&&vn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Nk();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new El(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ae(t.pathString)}},ZF=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=YF(n.substring(u,d)));let f=QF(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Ag=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_e(this.snapshot.exportVal())}},Ng=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Mg=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Rg=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return W(this._path)?null:XC(this._path)}get ref(){return new _n(this._repo,this._path)}get _queryIdentifier(){let e=vC(this._queryParams),t=Lg(e);return t==="{}"?"default":t}get _queryObject(){return vC(this._queryParams)}isEqual(e){if(e=It(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=nD(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+cL(this._path)}};var _n=class n extends Rg{constructor(e,t){super(e,t,new cg,!1)}get parent(){let e=tD(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Vl=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new ae(e),r=$l(this.ref,e);return new n(this._node.getChild(t),r,me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,$l(this.ref,r),me)))}hasChild(e){let t=new ae(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function zD(n,e){return n=It(n),n._checkNotDeleted("ref"),e!==void 0?$l(n._root,e):n._root}function $l(n,e){return n=It(n),q(n._path)===null?xF("child","path",e,!1):LD("child","path",e,!1),new _n(n._repo,De(n._path,e))}function WD(n,e){n=It(n),PF("set",n._path),RF("set",e,n._path,!1);let t=new Kn;return HF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function qD(n){n=It(n);let e=new Mg(()=>{}),t=new xg(e);return BF(n._repo,n,t).then(r=>new Vl(r,new _n(n._repo,n._path),n._queryParams.getIndex()))}var xg=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new Ag("value",this,new Vl(e.snapshotNode,new _n(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ng(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};rF(_n);cF(_n);var JF="FIREBASE_DATABASE_EMULATOR_HOST",Pg={},XF=!1;function e1(n,e,t,r){n.repoInfo_=new El(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function t1(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ue("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=xC(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[JF]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=xC(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new jo(jo.OWNER):new Wp(n.name,n.options,e);OF("Invalid Firebase Database URL",o),W(o.path)||vn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=r1(a,n,u,new zp(n.name,t));return new Og(d,n)}function n1(n,e){let t=Pg[e];(!t||t[n.key]!==n)&&vn(`Database ${e}(${n.repoInfo_}) has already been deleted.`),WF(n),delete t[n.key]}function r1(n,e,t,r){let i=Pg[e.name];i||(i={},Pg[e.name]=i);let s=i[n.toURLString()];return s&&vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Tg(n,XF,t,r),i[n.toURLString()]=s,s}var Og=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(UF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _n(this._repo,te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(n1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vn("Cannot call "+e+" on a deleted database.")}};function GD(n=Io(),e){let t=pp(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=lI("database");r&&KD(t,...r)}return t}function KD(n,e,t,r={}){n=It(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&vn("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new jo(jo.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:dI(r.mockUserToken,n.app.options.projectId);s=new jo(o)}e1(i,e,t,s)}function i1(n){Sk(Qi),Zn(new Ct("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return t1(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Ne(tC,nC,n),Ne(tC,nC,"esm2017")}jg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};jg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};i1();var Kr=class{constructor(e){return e}},YD="database",tm=class{constructor(){return Do(YD)}};var nm=new P("angularfire2.database-instances");function s1(n,e){let t=yp(YD,n,e);return t&&new Kr(t)}function o1(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Kr(r)}}var a1={provide:tm,deps:[[new xt,nm]]},c1={provide:Kr,useFactory:s1,deps:[[new xt,nm],jr]};function QD(n,...e){return Ne("angularfire",Ji.full,"rtdb"),Ln([c1,a1,{provide:nm,useFactory:o1(n),multi:!0,deps:[ce,Rt,bo,So,[new xt,vl],[new xt,Co],...e]}])}var rm=Jn(qD,!0),ZD=Jn(GD,!0);var im=Jn(zD,!0);var JD=Jn(WD,!0);var XD=(()=>{class n{db=w(Kr);storeResult(t,r,i){return _(this,null,function*(){let s=`${r}/${t}`,o=im(this.db,s);(yield rm(o)).exists()||(yield JD(o,{time:i}))})}getTopList(t,r=10){return _(this,null,function*(){let i=im(this.db,t),s=yield rm(i);if(!s.exists())return[];let o=[];return s.forEach(a=>{let c=a.key,l=a.val().time;o.push({user:c,time:l})}),o.sort((a,c)=>a.time-c.time).slice(0,r)})}getUserName(){return localStorage.getItem("set-user-name")}setUserName(t){localStorage.setItem("set-user-name",t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eb=(()=>{class n{fire(t=3e3){let r=document.getElementById("confetti-canvas");if(!r)return;let i=r.getContext("2d");if(!i)return;let s=r.width=window.innerWidth,o=r.height=window.innerHeight,a=180,c=s/2,l=o*.9,u=500,d=200,f=700,h=55,p=C=>C*Math.PI/180,g=Array.from({length:a}).map(()=>{let C=-90+(Math.random()*2-1)*h,$=d+Math.random()*(f-d);return{x:c,y:l,vx:Math.cos(p(C))*$,vy:Math.sin(p(C))*$,r:2+Math.random()*4,rot:Math.random()*Math.PI,vr:(-.2+Math.random()*.4)*4,hue:Math.random()*360}}),m=performance.now(),I=m,T=1,E=C=>{let $=Math.min(32,C-I)/1e3;I=C;for(let b of g)b.vy+=u*$,b.x+=b.vx*$,b.y+=b.vy*$,b.rot+=b.vr*$;let M=C-m;T=Math.max(0,1-M/t),i.clearRect(0,0,s,o);for(let b of g)i.save(),i.translate(b.x,b.y),i.rotate(b.rot),i.fillStyle=`hsla(${b.hue}, 90%, 60%, ${T})`,i.fillRect(-b.r,-b.r,b.r*2,b.r*2),i.restore();M<t?requestAnimationFrame(E):i.clearRect(0,0,s,o)};requestAnimationFrame(E)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=A({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function u1(n,e){if(n&1){let t=Dc();ie(0,"app-cards-grid",20),je("Selected",function(i){Pi(t);let s=_t();return Oi(s.cardSelected(i))})("UnSelected",function(i){Pi(t);let s=_t();return Oi(s.cardUnSelected(i))}),se()}if(n&2){let t=_t();$e("Cards",t.Tabel)}}function d1(n,e){n&1&&(ie(0,"td"),xe(1,"No results today yet."),se())}function f1(n,e){if(n&1&&(ie(0,"tr")(1,"td"),xe(2),se(),ie(3,"td",21),xe(4),se(),ie(5,"td"),xe(6),se()()),n&2){let t=e.$implicit,r=e.$index,i=_t();ve(2),$n("",r+1,"."),ve(2),Cr(t.user),ve(2),Cr(i.formatTime(t.time))}}var sm=(()=>{class n{randomService;route;router;confetti;GameType="daily";title="daily-set";Deck=new oo;SelectedCards=[];Tabel=[];Found=[];FoundIds=[];ExistingIds=[];SetCount=0;TotalSeconds=0;Time="00:00";Started=new Date().getTime();TimeHandle=null;showDialog=!1;dialogMessage="";Today=gn.getToday();HintCount=0;UserName="Guest";Toplist=[];ShowToplist=!1;GameId="";RenderGrid=!0;data=w(XD);constructor(t,r,i,s){this.randomService=t,this.route=r,this.router=i,this.confetti=s,this.setUserName(),this.route.params.subscribe(o=>{let a=o.id;a?this.startRandom(a):this.startDaily()})}cardsGrid;showToplist(){this.data.getTopList(this.Today).then(t=>{this.Toplist=t,this.ShowToplist=!0})}shuffleCardsTable(){this.cardsGrid.shuffleCardsTable()}getCardPath(t){return`set_picts/${t.Shape}_${t.Fill}_${t.Color}.png`}startTime(){this.TimeHandle=setInterval(()=>{let r=new Date().getTime()-this.Started,i=Math.floor(r/1e3);i+=this.HintCount*60,this.TotalSeconds=i;let s=this.formatTime(i);this.Time=s},1e3)}formatTime(t){let r=Math.floor(t/60),i=t%60;return`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}cardUnSelected(t){let r=this.SelectedCards.indexOf(t);r>-1&&this.SelectedCards.splice(r,1)}shake(t){t.forEach(r=>r.Shake=!0),setTimeout(()=>t.forEach(r=>r.Shake=!1),450)}cardSelected(t){let r=this.SelectedCards;if(r.push(t),r.length==3)if(this.isSet(r[0],r[1],r[2])){r.forEach(s=>s.Selected=!1);let i=this.getId(this.SelectedCards);this.FoundIds.indexOf(i)==-1?(this.FoundIds.push(i),this.Found.push(structuredClone(this.SelectedCards)),this.SelectedCards.forEach(s=>this.blink(s)),this.Found.length===this.SetCount&&(this.data.storeResult(this.UserName,this.Today,this.TotalSeconds),clearInterval(this.TimeHandle),this.dialogMessage="Your time is "+this.Time,this.showDialog=!0,this.confetti.fire(1200))):this.Found.forEach(s=>{let o=this.getId(s);i===o&&s.forEach(a=>this.blink(a))}),this.SelectedCards=[]}else this.shake(r),setTimeout(()=>{this.SelectedCards.forEach(i=>i.Selected=!1),this.SelectedCards=[]},500)}getId(t){return t.sort((i,s)=>i.Id-s.Id).map(i=>i.Id).join("_")}isSet(t,r,i){return!(!this.allAreSameOrAllDiffer(t.Color,r.Color,i.Color)||!this.allAreSameOrAllDiffer(t.Count,r.Count,i.Count)||!this.allAreSameOrAllDiffer(t.Shape,r.Shape,i.Shape)||!this.allAreSameOrAllDiffer(t.Fill,r.Fill,i.Fill))}allAreSameOrAllDiffer(t,r,i){return t===r&&r===i&&t===i||t!==r&&r!==i&&t!==i}setTable(){for(this.addRandomcard();this.Tabel.length<11&&(this.addRandomcard(),this.Tabel.length!==11);){var t=this.Tabel.length;let s=this.Tabel[t-1],o=this.Tabel[t-2];this.createSetOrAddRandom(s,o)}let r=this.Tabel[10],i=this.Tabel[0];this.createSetOrAddRandom(r,i),this.Tabel=this.randomService.shuffelArray(this.Tabel)}createSetOrAddRandom(t,r){let i=this.Deck.findMissingSetCard(t,r);i&&!this.Tabel.find(s=>s.Id==i.Id)?this.Tabel.push(i):this.addRandomcard()}addRandomcard(){let t=this.randomService.getRandomInt(0,80),r=this.Deck.Cards[t];this.Tabel.find(i=>i.Id===r.Id)?this.addRandomcard():this.Tabel.push(r)}countSets(){let t=[];for(let r=0;r<this.Tabel.length;r++)for(let i=r+1;i<this.Tabel.length;i++)for(let s=i+1;s<this.Tabel.length;s++)if(this.isSet(this.Tabel[r],this.Tabel[i],this.Tabel[s])){let o=this.getId([this.Tabel[r],this.Tabel[i],this.Tabel[s]]);t.indexOf(o)<0&&t.push(o)}this.SetCount=t.length,this.ExistingIds=t}giveHint(){for(let t=0;t<this.ExistingIds.length;t++){let r=this.ExistingIds[t];if(this.FoundIds.indexOf(r)==-1){let i=r.split("_"),s=this.HintCount%2==0?i[0]:i[1],o=this.Tabel.find(a=>a.Id==parseInt(s));o&&this.blink(o),this.HintCount++;return}}}blink(t){t.Blink=!0,setTimeout(()=>{t.Blink=!1},500)}changeUserName(){let t=prompt("What is your name?");t?localStorage.setItem("set-user-name",t):t="Guest",this.UserName=t}setUserName(){let t=localStorage.getItem("set-user-name");t||(t=prompt("What is your name?"),t?localStorage.setItem("set-user-name",t):t="Guest"),this.UserName=t}navigateToRandom(){let t=Math.floor(Math.random()*1e3).toString();this.router.navigateByUrl(`game/${t}`)}navigateToDaily(){this.router.navigateByUrl("/")}startRandom(t){this.GameType="random",this.GameId=t,this.randomService.setSeed(t),this.startGame()}startDaily(){this.GameType="daily",this.randomService.setTodaySeed(),this.startGame()}startGame(){this.RenderGrid=!1,setTimeout(()=>{this.SelectedCards=[],this.Tabel=[],this.Found=[],this.FoundIds=[],this.ExistingIds=[],this.SetCount=0,this.Time="00:00",this.TotalSeconds=0,this.HintCount=0,this.Started=new Date().getTime(),this.showDialog=!1,this.dialogMessage="",this.Today=gn.getToday(),this.Deck=new oo,this.Deck.Cards=this.randomService.shuffelArray(this.Deck.Cards),this.setTable(),this.countSets(),this.startTime(),this.RenderGrid=!0})}static \u0275fac=function(r){return new(r||n)(Ce(Zc),Ce(Bn),Ce(Kc),Ce(eb))};static \u0275cmp=mt({type:n,selectors:[["app-root"]],viewQuery:function(r,i){if(r&1&&mw(Gh,5),r&2){let s;jf(s=Uf())&&(i.cardsGrid=s.first)}},standalone:!0,features:[wt],decls:41,vars:12,consts:[[1,"app-container"],[1,"buttons"],[1,"poker-btn",3,"click"],["src","icons/new-daily.svg","alt","",1,"icon"],["src","icons/random.svg","alt","",1,"icon"],["src","icons/shuffle.svg","alt","","height","20px",1,"icon"],["src","icons/hint.svg","alt","","height","20px",1,"icon"],["src","icons/toplist.svg","alt","",1,"icon"],[1,"card-container"],[1,"tabel"],[1,"sub-header"],["id","cards-grid",3,"Cards"],[1,"founds-container"],[1,"found-count"],[3,"Cards"],[1,"usertime"],["href","#",1,"user",3,"click"],[1,"time"],[3,"click","Visible","Message"],["id","confetti-canvas",1,"confetti"],["id","cards-grid",3,"Selected","UnSelected","Cards"],[1,"name"]],template:function(r,i){r&1&&(ie(0,"div",0)(1,"div",1)(2,"button",2),je("click",function(){return i.navigateToDaily()}),xe(3," Daily "),Be(4,"img",3),se(),ie(5,"button",2),je("click",function(){return i.navigateToRandom()}),xe(6," Random "),Be(7,"img",4),se(),ie(8,"button",2),je("click",function(){return i.shuffleCardsTable()}),xe(9," Shuffle "),Be(10,"img",5),se(),ie(11,"button",2),je("click",function(){return i.giveHint()}),xe(12," Hint "),Be(13,"img",6),se(),ie(14,"button",2),je("click",function(){return i.showToplist()}),xe(15," Toplist "),Be(16,"img",7),se()(),ie(17,"div",8)(18,"div",9)(19,"div",10)(20,"span"),xe(21),se(),ie(22,"span"),xe(23),se()(),Vn(24,u1,1,1,"app-cards-grid",11),se(),ie(25,"div",12)(26,"div",13),xe(27),se(),Be(28,"app-cards-grid",14),se()(),ie(29,"div",15)(30,"a",16),je("click",function(){return i.changeUserName()}),xe(31),se(),ie(32,"div",17),xe(33),se()()(),ie(34,"app-dialog",18),je("click",function(){return i.showDialog=!1}),se(),ie(35,"app-dialog",18),je("click",function(){return i.ShowToplist=!1}),ie(36,"table"),Vn(37,d1,2,0,"td"),Ic(38,f1,7,3,"tr",null,hw),se()(),Be(40,"canvas",19)),r&2&&(ve(21),$n("Find the ",i.SetCount," sets"),ve(2),Cr(i.GameType=="random"?"Id: "+i.GameId:i.Today),ve(),Lf(i.RenderGrid?24:-1),ve(3),$n("Found ",i.Found.length,""),ve(),$e("Cards",i.Found.flat()),ve(3),Cr(i.UserName),ve(2),Cr(i.Time),ve(),$e("Visible",i.showDialog)("Message",i.dialogMessage),ve(),$e("Visible",i.ShowToplist)("Message",""),ve(2),Lf(i.Toplist.length==0?37:-1),ve(),Cc(i.Toplist))},dependencies:[Tr,OE,Gh],styles:[".app-container[_ngcontent-%COMP%]{padding:1em}.card-container[_ngcontent-%COMP%]{display:flex}@media (orientation: landscape){.card-container[_ngcontent-%COMP%]{flex-direction:row}}@media (orientation: portrait){.card-container[_ngcontent-%COMP%]{flex-direction:column}}@media (orientation: landscape){.table[_ngcontent-%COMP%]{max-width:50vw}}.buttons[_ngcontent-%COMP%]{display:inline-flex;gap:1vw;padding-bottom:2vh;overflow:scroll;max-width:100%}.founds-container[_ngcontent-%COMP%]{font-size:x-large;margin-left:1em;scale:.6;transform-origin:top left}@media (orientation: portrait){.founds-container[_ngcontent-%COMP%]{margin-top:10px;margin-left:0}}.founds-container[_ngcontent-%COMP%]   .found-count[_ngcontent-%COMP%]{display:block;text-align:left}.founds-container[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin-right:5px}.founds-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:8px}.sub-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.confetti[_ngcontent-%COMP%]{position:fixed;pointer-events:none;inset:0}.usertime[_ngcontent-%COMP%]{position:absolute;bottom:1em;right:1em}.time[_ngcontent-%COMP%]{font-size:1.5em}.toplist[_ngcontent-%COMP%]{font-size:.85rem;flex-direction:column}.toplist[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:.5rem}.toplist[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}"]})}return n})();var tb=[{path:"game/:id",component:sm},{path:"**",component:sm}];function nb(n){return new v(3e3,!1)}function h1(){return new v(3100,!1)}function p1(){return new v(3101,!1)}function g1(n){return new v(3001,!1)}function m1(n){return new v(3003,!1)}function y1(n){return new v(3004,!1)}function v1(n,e){return new v(3005,!1)}function _1(){return new v(3006,!1)}function w1(){return new v(3007,!1)}function E1(n,e){return new v(3008,!1)}function I1(n){return new v(3002,!1)}function C1(n,e,t,r,i){return new v(3010,!1)}function D1(){return new v(3011,!1)}function b1(){return new v(3012,!1)}function S1(){return new v(3200,!1)}function T1(){return new v(3202,!1)}function A1(){return new v(3013,!1)}function N1(n){return new v(3014,!1)}function M1(n){return new v(3015,!1)}function R1(n){return new v(3016,!1)}function x1(n,e){return new v(3404,!1)}function P1(n){return new v(3502,!1)}function O1(n){return new v(3503,!1)}function k1(){return new v(3300,!1)}function L1(n){return new v(3504,!1)}function F1(n){return new v(3301,!1)}function j1(n,e){return new v(3302,!1)}function U1(n){return new v(3303,!1)}function V1(n,e){return new v(3400,!1)}function $1(n){return new v(3401,!1)}function B1(n){return new v(3402,!1)}function H1(n,e){return new v(3505,!1)}function ir(n){switch(n.length){case 0:return new Gn;case 1:return n[0];default:return new ao(n)}}function mb(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((f,h)=>{let p=h,g=f;if(h!=="offset")switch(p=n.normalizePropertyName(p,i),g){case Yc:g=t.get(h);break;case Qt:g=r.get(h);break;default:g=n.normalizeStyleValue(h,p,g,i);break}d.set(p,g)}),u||s.push(d),a=d,o=l}),i.length)throw P1(i);return s}function Am(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&om(t,"start",n)));break;case"done":n.onDone(()=>r(t&&om(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&om(t,"destroy",n)));break}}function om(n,e,t){let r=t.totalTime,i=!!t.disabled,s=Nm(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function Nm(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ct(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function rb(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var z1=typeof document>"u"?null:document.documentElement;function Mm(n){let e=n.parentNode||n.host||null;return e===z1?null:e}function W1(n){return n.substring(1,6)=="ebkit"}var Yr=null,ib=!1;function q1(n){Yr||(Yr=G1()||{},ib=Yr.style?"WebkitAppearance"in Yr.style:!1);let e=!0;return Yr.style&&!W1(n)&&(e=n in Yr.style,!e&&ib&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Yr.style)),e}function G1(){return typeof document<"u"?document.body:null}function yb(n,e){for(;e;){if(e===n)return!0;e=Mm(e)}return!1}function vb(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var Rm=(()=>{class n{validateStyleProperty(t){return q1(t)}containsElement(t,r){return yb(t,r)}getParentElement(t){return Mm(t)}query(t,r,i){return vb(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Gn(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})(),Jr=class{static{this.NOOP=new Rm}},Xr=class{};var K1=1e3,_b="{{",Y1="}}",wb="ng-enter",fm="ng-leave",Ql="ng-trigger",tu=".ng-trigger",sb="ng-animating",hm=".ng-animating";function wn(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:pm(parseFloat(e[1]),e[2])}function pm(n,e){switch(e){case"s":return n*K1;default:return n}}function nu(n,e,t){return n.hasOwnProperty("duration")?n:Q1(n,e,t)}function Q1(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(nb(n)),{duration:0,delay:0,easing:""};i=pm(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=pm(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(h1()),a=!0),s<0&&(e.push(p1()),a=!0),a&&e.splice(c,0,nb(n))}return{duration:i,delay:s,easing:o}}function Z1(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function sn(n,e,t){e.forEach((r,i)=>{let s=xm(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Zr(n,e){e.forEach((t,r)=>{let i=xm(r);n.style[i]=""})}function ea(n){return Array.isArray(n)?n.length==1?n[0]:kE(n):n}function J1(n,e,t){let r=e.params||{},i=Eb(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(g1(s))})}var gm=new RegExp(`${_b}\\s*(.+?)\\s*${Y1}`,"g");function Eb(n){let e=[];if(typeof n=="string"){let t;for(;t=gm.exec(n);)e.push(t[1]);gm.lastIndex=0}return e}function na(n,e,t){let r=`${n}`,i=r.replace(gm,(s,o)=>{let a=e[o];return a==null&&(t.push(m1(o)),a=""),a.toString()});return i==r?n:i}var X1=/-+([a-z0-9])/g;function xm(n){return n.replace(X1,(...e)=>e[1].toUpperCase())}function ej(n,e){return n===0||e===0}function tj(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Pm(n,a)))}}return e}function at(n,e,t){switch(e.type){case O.Trigger:return n.visitTrigger(e,t);case O.State:return n.visitState(e,t);case O.Transition:return n.visitTransition(e,t);case O.Sequence:return n.visitSequence(e,t);case O.Group:return n.visitGroup(e,t);case O.Animate:return n.visitAnimate(e,t);case O.Keyframes:return n.visitKeyframes(e,t);case O.Style:return n.visitStyle(e,t);case O.Reference:return n.visitReference(e,t);case O.AnimateChild:return n.visitAnimateChild(e,t);case O.AnimateRef:return n.visitAnimateRef(e,t);case O.Query:return n.visitQuery(e,t);case O.Stagger:return n.visitStagger(e,t);default:throw y1(e.type)}}function Pm(n,e){return window.getComputedStyle(n)[e]}var nj=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),ru=class extends Xr{normalizePropertyName(e,t){return xm(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(nj.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(v1(e,r))}return o+s}};var iu="*";function rj(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>ij(r,t,e)):t.push(n),t}function ij(n,e,t){if(n[0]==":"){let c=sj(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(M1(n)),e;let i=r[1],s=r[2],o=r[3];e.push(ob(i,o));let a=i==iu&&o==iu;s[0]=="<"&&!a&&e.push(ob(o,i))}function sj(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(R1(n)),"* => *"}}var Zl=new Set(["true","1"]),Jl=new Set(["false","0"]);function ob(n,e){let t=Zl.has(n)||Jl.has(n),r=Zl.has(e)||Jl.has(e);return(i,s)=>{let o=n==iu||n==i,a=e==iu||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Zl.has(n):Jl.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Zl.has(e):Jl.has(e)),o&&a}}var Ib=":self",oj=new RegExp(`s*${Ib}s*,?`,"g");function Cb(n,e,t,r){return new mm(n).build(e,t,r)}var ab="",mm=class{constructor(e){this._driver=e}build(e,t,r){let i=new ym(t);return this._resetContextStyleTimingState(i),at(this,ea(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=ab,e.collectedStyles=new Map,e.collectedStyles.set(ab,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(_1()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==O.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==O.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(w1())}),{type:O.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{Eb(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(E1(e.name,[...s.values()]))}return{type:O.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=at(this,ea(e.animation),t),i=rj(e.expr,t.errors);return{type:O.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Qr(e.options)}}visitSequence(e,t){return{type:O.Sequence,steps:e.steps.map(r=>at(this,r,t)),options:Qr(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=at(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:O.Group,steps:s,options:Qr(e.options)}}visitAnimate(e,t){let r=uj(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:He({});if(s.type==O.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=He(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:O.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Qt?r.push(a):t.errors.push(I1(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(_b)>=0){s=!0;break}}}),{type:O.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(C1(c,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:i}),t.options&&J1(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:O.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(D1()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(I=>{let T=this._makeStyleAst(I,t),E=T.offset!=null?T.offset:lj(T.styles),C=0;return E!=null&&(s++,C=T.offset=E),c=c||C<0||C>1,a=a||C<l,l=C,o.push(C),T});c&&t.errors.push(b1()),a&&t.errors.push(S1());let d=e.steps.length,f=0;s>0&&s<d?t.errors.push(T1()):s==0&&(f=i/(d-1));let h=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((I,T)=>{let E=f>0?T==h?1:f*T:o[T],C=E*m;t.currentTime=p+g.delay+C,g.duration=C,this._validateStyleAst(I,t),I.offset=E,r.styles.push(I)}),r}visitReference(e,t){return{type:O.Reference,animation:at(this,ea(e.animation),t),options:Qr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:O.AnimateChild,options:Qr(e.options)}}visitAnimateRef(e,t){return{type:O.AnimateRef,animation:this.visitReference(e.animation,t),options:Qr(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=aj(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ct(t.collectedStyles,t.currentQuerySelector,new Map);let a=at(this,ea(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:O.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Qr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(A1());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:nu(e.timings,t.errors,!0);return{type:O.Stagger,animation:at(this,ea(e.animation),t),timings:r,options:null}}};function aj(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Ib);return e&&(n=n.replace(oj,"")),n=n.replace(/@\*/g,tu).replace(/@\w+/g,t=>tu+"-"+t.slice(1)).replace(/:animating/g,hm),[n,e]}function cj(n){return n?D({},n):null}var ym=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function lj(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function uj(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=nu(n,e).duration;return am(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=am(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=nu(t,e);return am(i.duration,i.delay,i.easing)}function Qr(n){return n?(n=D({},n),n.params&&(n.params=cj(n.params))):n={},n}function am(n,e,t){return{duration:n,delay:e,easing:t}}function Om(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var ra=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},dj=1,fj=":enter",hj=new RegExp(fj,"g"),pj=":leave",gj=new RegExp(pj,"g");function Db(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new vm().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var vm=class{buildKeyframes(e,t,r,i,s,o,a,c,l,u=[]){l=l||new ra;let d=new _m(e,t,l,i,s,u,[]);d.options=c;let f=c.delay?wn(c.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,c),at(this,r,d);let h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){let m=h[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return h.length?h.map(p=>p.buildKeyframes()):[Om(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:wn(na(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?wn(r.duration):null,a=r.delay!=null?wn(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),at(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==O.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=su);let o=wn(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>at(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?wn(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),at(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?na(r,t.params,t.errors):r;return nu(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==O.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?wn(i.delay):0;s&&(t.previousNode.type===O.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=su);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),at(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;o=Math.max(o,f)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;at(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},su={},_m=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=su,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new ou(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=wn(r.duration)),r.delay!=null&&(i.delay=wn(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=na(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=su,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new wm(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(hj,"."+this._enterClassName),e=e.replace(gj,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(N1(t)),a}},ou=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=dj,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Qt),this._currentKeyframe.set(t,Qt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=mj(e,this._globalTimelineStyles);for(let[a,c]of o){let l=na(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Qt),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===Yc?e.add(d):u===Qt&&t.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return Om(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},wm=class extends ou{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",cb(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let f=new Map(e[d]),h=f.get("offset"),p=t+h*r;f.set("offset",cb(p/o)),s.push(f)}r=o,t=0,i="",e=s}return Om(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function cb(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function mj(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Qt)}else for(let[s,o]of i)t.set(s,o)}),t}function lb(n,e,t,r,i,s,o,a,c,l,u,d,f){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:f}}var cm={},au=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return yj(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,u){let d=[],f=this.ast.options&&this.ast.options.params||cm,h=a&&a.params||cm,p=this.buildStyles(r,h,d),g=c&&c.params||cm,m=this.buildStyles(i,g,d),I=new Set,T=new Map,E=new Map,C=i==="void",$={params:bb(g,f),delay:this.ast.options?.delay},M=u?[]:Db(e,t,this.ast.animation,s,o,p,m,$,l,d),b=0;return M.forEach(Z=>{b=Math.max(Z.duration+Z.delay,b)}),d.length?lb(t,this._triggerName,r,i,C,p,m,[],[],T,E,b,d):(M.forEach(Z=>{let de=Z.element,ye=ct(T,de,new Set);Z.preStyleProps.forEach(be=>ye.add(be));let lt=ct(E,de,new Set);Z.postStyleProps.forEach(be=>lt.add(be)),de!==t&&I.add(de)}),lb(t,this._triggerName,r,i,C,p,m,M,[...I.values()],T,E,b))}};function yj(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function bb(n,e){let t=D({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var Em=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=bb(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=na(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function vj(n,e,t){return new Im(n,e,t)}var Im=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new Em(i.style,s,r))}),ub(this.states,"true","1"),ub(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new au(e,i,this.states))}),this.fallbackTransition=_j(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function _j(n,e,t){let r=[(o,a)=>!0],i={type:O.Sequence,steps:[],options:null},s={type:O.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new au(n,s,e)}function ub(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var wj=new ra,Cm=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=Cb(this._driver,t,r,i);if(r.length)throw O1(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=mb(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=Db(this._driver,t,s,wb,fm,new Map,new Map,r,wj,i),o.forEach(u=>{let d=ct(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(k1()),o=[]),i.length)throw L1(i);a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Qt))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=ir(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw F1(e);return t}listen(e,t,r,i){let s=Nm(t,"","","");return Am(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},db="ng-animate-queued",Ej=".ng-animate-queued",lm="ng-animate-disabled",Ij=".ng-animate-disabled",Cj="ng-star-inserted",Dj=".ng-star-inserted",bj=[],Sb={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Sj={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},jt="__ng_removed",ia=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=Aj(i),r){let s=e,{value:o}=s,a=jm(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},ta="void",um=new ia(ta),Dm=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,bt(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw j1(r,t);if(r==null||r.length==0)throw U1(t);if(!Nj(r))throw V1(r,t);let s=ct(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=ct(this._engine.statesByElement,e,new Map);return a.has(t)||(bt(e,Ql),bt(e,Ql+"-"+t),a.set(t,um)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw $1(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new sa(this.id,t,e),a=this._engine.statesByElement.get(e);a||(bt(e,Ql),bt(e,Ql+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new ia(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=um),!(l.value===ta)&&c.value===l.value){if(!xj(c.params,l.params)){let g=[],m=s.matchStyles(c.value,c.params,g),I=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Zr(e,m),sn(e,I)})}return}let f=ct(this._engine.playersByElement,e,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let h=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!h){if(!i)return;h=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(bt(e,db),o.onStart(()=>{hs(e,db)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let m=this._engine.playersByElement.get(e);if(m){let I=m.indexOf(o);I>=0&&m.splice(I,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,tu,!0);r.forEach(i=>{if(i[jt])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,ta,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&ir(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||um,u=new ia(ta),d=new sa(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[jt];(!s||s===Sb)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){bt(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=Nm(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Am(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},bm=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new Dm(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Xl(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Xl(t))return;let s=t[jt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),bt(e,lm)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),hs(e,lm))}removeNode(e,t,r){if(Xl(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[jt]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Xl(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,tu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,hm,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ir(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[jt];if(t&&t.setForRemoval){if(e[jt]=Sb,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(lm)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Ij,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];bt(i,Cj)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?ir(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw B1(e)}_flushAnimations(e,t){let r=new ra,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(S=>{u.add(S);let N=this.driver.query(S,Ej,!0);for(let R=0;R<N.length;R++)u.add(N[R])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=pb(f,this.collectedEnterElements),p=new Map,g=0;h.forEach((S,N)=>{let R=wb+g++;p.set(N,R),S.forEach(J=>bt(J,R))});let m=[],I=new Set,T=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){let N=this.collectedLeaveElements[S],R=N[jt];R&&R.setForRemoval&&(m.push(N),I.add(N),R.hasAnimation?this.driver.query(N,Dj,!0).forEach(J=>I.add(J)):T.add(N))}let E=new Map,C=pb(f,Array.from(I));C.forEach((S,N)=>{let R=fm+g++;E.set(N,R),S.forEach(J=>bt(J,R))}),e.push(()=>{h.forEach((S,N)=>{let R=p.get(N);S.forEach(J=>hs(J,R))}),C.forEach((S,N)=>{let R=E.get(N);S.forEach(J=>hs(J,R))}),m.forEach(S=>{this.processLeaveNode(S)})});let $=[],M=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(t).forEach(R=>{let J=R.player,Se=R.element;if($.push(J),this.collectedEnterElements.length){let Oe=Se[jt];if(Oe&&Oe.setForMove){if(Oe.previousTriggersValues&&Oe.previousTriggersValues.has(R.triggerName)){let or=Oe.previousTriggersValues.get(R.triggerName),dt=this.statesByElement.get(R.element);if(dt&&dt.has(R.triggerName)){let oa=dt.get(R.triggerName);oa.value=or,dt.set(R.triggerName,oa)}}J.destroy();return}}let Ut=!d||!this.driver.containsElement(d,Se),Xe=E.get(Se),In=p.get(Se),he=this._buildInstruction(R,r,In,Xe,Ut);if(he.errors&&he.errors.length){M.push(he);return}if(Ut){J.onStart(()=>Zr(Se,he.fromStyles)),J.onDestroy(()=>sn(Se,he.toStyles)),i.push(J);return}if(R.isFallbackTransition){J.onStart(()=>Zr(Se,he.fromStyles)),J.onDestroy(()=>sn(Se,he.toStyles)),i.push(J);return}let km=[];he.timelines.forEach(Oe=>{Oe.stretchStartingKeyframe=!0,this.disabledNodes.has(Oe.element)||km.push(Oe)}),he.timelines=km,r.append(Se,he.timelines);let Pb={instruction:he,player:J,element:Se};o.push(Pb),he.queriedElements.forEach(Oe=>ct(a,Oe,[]).push(J)),he.preStyleProps.forEach((Oe,or)=>{if(Oe.size){let dt=c.get(or);dt||c.set(or,dt=new Set),Oe.forEach((oa,fu)=>dt.add(fu))}}),he.postStyleProps.forEach((Oe,or)=>{let dt=l.get(or);dt||l.set(or,dt=new Set),Oe.forEach((oa,fu)=>dt.add(fu))})});if(M.length){let S=[];M.forEach(N=>{S.push(H1(N.triggerName,N.errors))}),$.forEach(N=>N.destroy()),this.reportError(S)}let b=new Map,Z=new Map;o.forEach(S=>{let N=S.element;r.has(N)&&(Z.set(N,N),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,b))}),i.forEach(S=>{let N=S.element;this._getPreviousPlayers(N,!1,S.namespaceId,S.triggerName,null).forEach(J=>{ct(b,N,[]).push(J),J.destroy()})});let de=m.filter(S=>gb(S,c,l)),ye=new Map;hb(ye,this.driver,T,l,Qt).forEach(S=>{gb(S,c,l)&&de.push(S)});let be=new Map;h.forEach((S,N)=>{hb(be,this.driver,new Set(S),c,Yc)}),de.forEach(S=>{let N=ye.get(S),R=be.get(S);ye.set(S,new Map([...N?.entries()??[],...R?.entries()??[]]))});let ut=[],sr=[],En={};o.forEach(S=>{let{element:N,player:R,instruction:J}=S;if(r.has(N)){if(u.has(N)){R.onDestroy(()=>sn(N,J.toStyles)),R.disabled=!0,R.overrideTotalTime(J.totalTime),i.push(R);return}let Se=En;if(Z.size>1){let Xe=N,In=[];for(;Xe=Xe.parentNode;){let he=Z.get(Xe);if(he){Se=he;break}In.push(Xe)}In.forEach(he=>Z.set(he,Se))}let Ut=this._buildAnimation(R.namespaceId,J,b,s,be,ye);if(R.setRealPlayer(Ut),Se===En)ut.push(R);else{let Xe=this.playersByElement.get(Se);Xe&&Xe.length&&(R.parentPlayer=ir(Xe)),i.push(R)}}else Zr(N,J.fromStyles),R.onDestroy(()=>sn(N,J.toStyles)),sr.push(R),u.has(N)&&i.push(R)}),sr.forEach(S=>{let N=s.get(S.element);if(N&&N.length){let R=ir(N);S.setRealPlayer(R)}}),i.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<m.length;S++){let N=m[S],R=N[jt];if(hs(N,fm),R&&R.hasAnimation)continue;let J=[];if(a.size){let Ut=a.get(N);Ut&&Ut.length&&J.push(...Ut);let Xe=this.driver.query(N,hm,!0);for(let In=0;In<Xe.length;In++){let he=a.get(Xe[In]);he&&he.length&&J.push(...he)}}let Se=J.filter(Ut=>!Ut.destroyed);Se.length?Mj(this,N,Se):this.processLeaveNode(N)}return m.length=0,ut.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();let N=this.players.indexOf(S);this.players.splice(N,1)}),S.play()}),ut}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==ta;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,u=l!==s,d=ct(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(h=>{let p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}Zr(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,f=t.timelines.map(p=>{let g=p.element;u.add(g);let m=g[jt];if(m&&m.removedBeforeQueried)return new Gn(p.duration,p.delay);let I=g!==c,T=Rj((r.get(g)||bj).map(b=>b.getRealPlayer())).filter(b=>{let Z=b;return Z.element?Z.element===g:!1}),E=s.get(g),C=o.get(g),$=mb(this._normalizer,p.keyframes,E,C),M=this._buildPlayer(p,$,T);if(p.subTimeline&&i&&d.add(g),I){let b=new sa(e,a,g);b.setRealPlayer(M),l.push(b)}return M});l.forEach(p=>{ct(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>Tj(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>bt(p,sb));let h=ir(f);return h.onDestroy(()=>{u.forEach(p=>hs(p,sb)),sn(c,t.toStyles)}),d.forEach(p=>{ct(i,p,[]).push(h)}),h}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Gn(e.duration,e.delay)}},sa=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Gn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Am(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ct(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Tj(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function Aj(n){return n??null}function Xl(n){return n&&n.nodeType===1}function Nj(n){return n=="start"||n=="done"}function fb(n,e){let t=n.style.display;return n.style.display=e??"none",t}function hb(n,e,t,r,i){let s=[];t.forEach(c=>s.push(fb(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let f=e.computeStyle(l,d,i);u.set(d,f),(!f||f.length==0)&&(l[jt]=Sj,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>fb(c,s[a++])),o}function pb(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function bt(n,e){n.classList?.add(e)}function hs(n,e){n.classList?.remove(e)}function Mj(n,e,t){ir(t).onDone(()=>n.processLeaveNode(e))}function Rj(n){let e=[];return Tb(n,e),e}function Tb(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof ao?Tb(r.players,e):e.push(r)}}function xj(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function gb(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var ps=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new bm(e.body,t,r),this._timelineEngine=new Cm(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=Cb(this._driver,s,c,l);if(c.length)throw x1(i,c);l.length&&void 0,a=vj(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=rb(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=rb(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Pj(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=dm(e[0]),e.length>1&&(r=dm(e[e.length-1]))):e instanceof Map&&(t=dm(e)),t||r?new Sm(n,t,r):null}var Sm=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&sn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(sn(this._element,this._initialStyles),this._endStyles&&(sn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zr(this._element,this._endStyles),this._endStyles=null),sn(this._element,this._initialStyles),this._state=3)}};function dm(n){let e=null;return n.forEach((t,r)=>{Oj(r)&&(e=e||new Map,e.set(r,t))}),e}function Oj(n){return n==="display"||n==="position"}var cu=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Pm(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},lu=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return yb(e,t)}getParentElement(e){return Mm(e)}query(e,t,r){return vb(e,t,r)}computeStyle(e,t,r){return Pm(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(h=>h instanceof cu);ej(r,i)&&u.forEach(h=>{h.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=Z1(t).map(h=>new Map(h));d=tj(e,d,l);let f=Pj(e,d);return new cu(e,d,c,f)}};var eu="@",Ab="@.disabled",uu=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==eu&&t==Ab?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Tm=class extends uu{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==eu?t.charAt(1)=="."&&t==Ab?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==eu){let i=kj(e),s=t.slice(1),o="";return s.charAt(0)!=eu&&([s,o]=Lj(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function kj(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Lj(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var du=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let d=()=>l.delete(i);u=new uu(r,i,this.engine,d),l.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new Tm(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var jj=(()=>{class n extends ps{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(U(Ye),U(Jr),U(Xr))}}static{this.\u0275prov=A({token:n,factory:n.\u0275fac})}}return n})();function Uj(){return new ru}function Vj(n,e,t){return new du(n,e,t)}var Nb=[{provide:Xr,useFactory:Uj},{provide:ps,useClass:jj},{provide:xn,useFactory:Vj,deps:[Mc,ps,ce]}],$j=[{provide:Jr,useFactory:()=>new lu},{provide:wf,useValue:"BrowserAnimations"},...Nb],_8=[{provide:Jr,useClass:Rm},{provide:wf,useValue:"NoopAnimations"},...Nb];function Mb(){return Ir("NgEagerAnimations"),[...$j]}var Rb={providers:[kI(()=>LI({projectId:"set-card-game-b7b55",appId:"1:314036741918:web:13991a7c172a1b2efecb0f",databaseURL:"https://set-card-game-b7b55-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"set-card-game-b7b55.firebasestorage.app",apiKey:"AIzaSyDZAx444-7oW19-zQFktsp_2Ef6D5lHD4A",authDomain:"set-card-game-b7b55.firebaseapp.com",messagingSenderId:"314036741918"})),QD(()=>ZD()),bw({eventCoalescing:!0}),PE(tb),Mb()]};var xb=(()=>{class n{title="testingrout";static \u0275fac=function(r){return new(r||n)};static \u0275cmp=mt({type:n,selectors:[["app-root"]],standalone:!0,features:[wt],decls:1,vars:0,template:function(r,i){r&1&&Be(0,"router-outlet")},dependencies:[Oh]})}return n})();Qw(xb,Rb).catch(n=>console.error(n));
