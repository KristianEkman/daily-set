var fb=Object.create;var lu=Object.defineProperty,hb=Object.defineProperties,pb=Object.getOwnPropertyDescriptor,gb=Object.getOwnPropertyDescriptors,mb=Object.getOwnPropertyNames,na=Object.getOwnPropertySymbols,yb=Object.getPrototypeOf,uu=Object.prototype.hasOwnProperty,Im=Object.prototype.propertyIsEnumerable;var wm=(n,e,t)=>e in n?lu(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,b=(n,e)=>{for(var t in e||={})uu.call(e,t)&&wm(n,t,e[t]);if(na)for(var t of na(e))Im.call(e,t)&&wm(n,t,e[t]);return n},fe=(n,e)=>hb(n,gb(e));var Cm=(n,e)=>{var t={};for(var r in n)uu.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&na)for(var r of na(n))e.indexOf(r)<0&&Im.call(n,r)&&(t[r]=n[r]);return t};var sn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var vb=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mb(e))!uu.call(n,i)&&i!==t&&lu(n,i,{get:()=>e[i],enumerable:!(r=pb(e,i))||r.enumerable});return n};var _b=(n,e,t)=>(t=n!=null?fb(yb(n)):{},vb(e||!n||!n.__esModule?lu(t,"default",{value:n,enumerable:!0}):t,n));var _=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var mD=sn((gD,jg)=>{"use strict";(function(n,e,t){function r(a){var c=this,l=o();c.next=function(){var u=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=u-(c.c=u|0)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(a),c.s0<0&&(c.s0+=1),c.s1-=l(a),c.s1<0&&(c.s1+=1),c.s2-=l(a),c.s2<0&&(c.s2+=1),l=null}function i(a,c){return c.c=a.c,c.s0=a.s0,c.s1=a.s1,c.s2=a.s2,c}function s(a,c){var l=new r(a),u=c&&c.state,d=l.next;return d.int32=function(){return l.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}function o(){var a=4022871197,c=function(l){l=String(l);for(var u=0;u<l.length;u++){a+=l.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return c}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.alea=s})(gD,typeof jg=="object"&&jg,typeof define=="function"&&define)});var vD=sn((yD,Ug)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},o===(o|0)?a.x=o:c+=o;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,a.next()}function i(o,a){return a.x=o.x,a.y=o.y,a.z=o.z,a.w=o.w,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xor128=s})(yD,typeof Ug=="object"&&Ug,typeof define=="function"&&define)});var ED=sn((_D,Vg)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,o===(o|0)?a.x=o:c+=o;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,l==c.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function i(o,a){return a.x=o.x,a.y=o.y,a.z=o.z,a.w=o.w,a.v=o.v,a.d=o.d,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xorwow=s})(_D,typeof Vg=="object"&&Vg,typeof define=="function"&&define)});var ID=sn((wD,$g)=>{"use strict";(function(n,e,t){function r(o){var a=this;a.next=function(){var l=a.x,u=a.i,d,f,h;return d=l[u],d^=d>>>7,f=d^d<<24,d=l[u+1&7],f^=d^d>>>10,d=l[u+3&7],f^=d^d>>>3,d=l[u+4&7],f^=d^d<<7,d=l[u+7&7],d=d^d<<13,f^=d^d<<9,l[u]=f,a.i=u+1&7,f};function c(l,u){var d,f,h=[];if(u===(u|0))f=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?f=h[7]=-1:f=h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}c(a,o)}function i(o,a){return a.x=o.x.slice(),a.i=o.i,a}function s(o,a){o==null&&(o=+new Date);var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.x&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xorshift7=s})(wD,typeof $g=="object"&&$g,typeof define=="function"&&define)});var DD=sn((CD,Bg)=>{"use strict";(function(n,e,t){function r(o){var a=this;a.next=function(){var l=a.w,u=a.X,d=a.i,f,h;return a.w=l=l+1640531527|0,h=u[d+34&127],f=u[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=u[d]=h^f,a.i=d,h+(l^l>>>16)|0};function c(l,u){var d,f,h,p,g,m=[],I=128;for(u===(u|0)?(f=u,u=null):(u=u+"\0",f=0,I=Math.max(I,u.length)),h=0,p=-32;p<I;++p)u&&(f^=u.charCodeAt((p+32)%u.length)),p===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(g=g+1640531527|0,d=m[p&127]^=f+g,h=d==0?h+1:0);for(h>=128&&(m[(u&&u.length||0)&127]=-1),h=127,p=4*128;p>0;--p)f=m[h+34&127],d=m[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,m[h]=f^d;l.w=g,l.X=m,l.i=h}c(a,o)}function i(o,a){return a.i=o.i,a.w=o.w,a.X=o.X.slice(),a}function s(o,a){o==null&&(o=+new Date);var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.X&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xor4096=s})(CD,typeof Bg=="object"&&Bg,typeof define=="function"&&define)});var SD=sn((bD,Hg)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.next=function(){var u=a.b,d=a.c,f=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-f|0,a.d=f<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,o===Math.floor(o)?(a.a=o/4294967296|0,a.b=o|0):c+=o;for(var l=0;l<c.length+20;l++)a.b^=c.charCodeAt(l)|0,a.next()}function i(o,a){return a.a=o.a,a.b=o.b,a.c=o.c,a.d=o.d,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.tychei=s})(bD,typeof Hg=="object"&&Hg,typeof define=="function"&&define)});var TD=sn(()=>{"use strict"});var ND=sn((AD,Wl)=>{"use strict";(function(n,e,t){var r=256,i=6,s=52,o="random",a=t.pow(r,i),c=t.pow(2,s),l=c*2,u=r-1,d;function f(w,C,H){var A=[];C=C==!0?{entropy:!0}:C||{};var D=m(g(C.entropy?[w,T(e)]:w??I(),3),A),Z=new h(A),de=function(){for(var me=Z.g(i),at=a,Ce=0;me<c;)me=(me+Ce)*r,at*=r,Ce=Z.g(1);for(;me>=l;)me/=2,at/=2,Ce>>>=1;return(me+Ce)/at};return de.int32=function(){return Z.g(4)|0},de.quick=function(){return Z.g(4)/4294967296},de.double=de,m(T(Z.S),e),(C.pass||H||function(me,at,Ce,ct){return ct&&(ct.S&&p(ct,Z),me.state=function(){return p(Z,{})}),Ce?(t[o]=me,at):me})(de,D,"global"in C?C.global:this==t,C.state)}function h(w){var C,H=w.length,A=this,D=0,Z=A.i=A.j=0,de=A.S=[];for(H||(w=[H++]);D<r;)de[D]=D++;for(D=0;D<r;D++)de[D]=de[Z=u&Z+w[D%H]+(C=de[D])],de[Z]=C;(A.g=function(me){for(var at,Ce=0,ct=A.i,nr=A.j,En=A.S;me--;)at=En[ct=u&ct+1],Ce=Ce*r+En[u&(En[ct]=En[nr=u&nr+at])+(En[nr]=at)];return A.i=ct,A.j=nr,Ce})(r)}function p(w,C){return C.i=w.i,C.j=w.j,C.S=w.S.slice(),C}function g(w,C){var H=[],A=typeof w,D;if(C&&A=="object")for(D in w)try{H.push(g(w[D],C-1))}catch{}return H.length?H:A=="string"?w:w+"\0"}function m(w,C){for(var H=w+"",A,D=0;D<H.length;)C[u&D]=u&(A^=C[u&D]*19)+H.charCodeAt(D++);return T(C)}function I(){try{var w;return d&&(w=d.randomBytes)?w=w(r):(w=new Uint8Array(r),(n.crypto||n.msCrypto).getRandomValues(w)),T(w)}catch{var C=n.navigator,H=C&&C.plugins;return[+new Date,n,H,n.screen,T(e)]}}function T(w){return String.fromCharCode.apply(0,w)}if(m(t.random(),e),typeof Wl=="object"&&Wl.exports){Wl.exports=f;try{d=TD()}catch{}}else typeof define=="function"&&define.amd?define(function(){return f}):t["seed"+o]=f})(typeof self<"u"?self:AD,[],Math)});var RD=sn((sG,MD)=>{"use strict";var IL=mD(),CL=vD(),DL=ED(),bL=ID(),SL=DD(),TL=SD(),zr=ND();zr.alea=IL;zr.xor128=CL;zr.xorwow=DL;zr.xorshift7=bL;zr.xor4096=SL;zr.tychei=TL;MD.exports=zr});var fu=null;var du=1,Dm=Symbol("SIGNAL");function G(n){let e=fu;return fu=n,e}function bm(){return fu}var hu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Eb(n){if(!(vu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===du)){if(!n.producerMustRecompute(n)&&!gu(n)){n.dirty=!1,n.lastCleanEpoch=du;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=du}}function pu(n){return n&&(n.nextProducerIndex=0),G(n)}function Sm(n,e){if(G(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(vu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gu(n){_u(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Eb(t),r!==t.version))return!0}return!1}function mu(n){if(_u(n),vu(n))for(let e=0;e<n.producerNode.length;e++)yu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function yu(n,e){if(wb(n),n.liveConsumerNode.length===1&&Ib(n))for(let r=0;r<n.producerNode.length;r++)yu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];_u(i),i.producerIndexOfThis[r]=e}}function vu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _u(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function wb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Ib(n){return n.producerNode!==void 0}function Cb(){throw new Error}var Db=Cb;function Tm(n){Db=n}function k(n){return typeof n=="function"}function Qr(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ra=Qr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ir(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(k(r))try{r()}catch(s){e=s instanceof ra?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Am(s)}catch(o){e=e??[],o instanceof ra?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ra(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Am(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ir(t,e)}remove(e){let{_finalizers:t}=this;t&&ir(t,e),e instanceof n&&e._removeParent(this)}};pe.EMPTY=(()=>{let n=new pe;return n.closed=!0,n})();var Eu=pe.EMPTY;function ia(n){return n instanceof pe||n&&"closed"in n&&k(n.remove)&&k(n.add)&&k(n.unsubscribe)}function Am(n){k(n)?n():n.unsubscribe()}var wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zr={setTimeout(n,e,...t){let{delegate:r}=Zr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Zr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function sa(n){Zr.setTimeout(()=>{let{onUnhandledError:e}=wt;if(e)e(n);else throw n})}function ls(){}var Nm=wu("C",void 0,void 0);function Mm(n){return wu("E",void 0,n)}function Rm(n){return wu("N",n,void 0)}function wu(n,e,t){return{kind:n,value:e,error:t}}var sr=null;function Jr(n){if(wt.useDeprecatedSynchronousErrorHandling){let e=!sr;if(e&&(sr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=sr;if(sr=null,t)throw r}}else n()}function xm(n){wt.useDeprecatedSynchronousErrorHandling&&sr&&(sr.errorThrown=!0,sr.error=n)}var or=class extends pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ia(e)&&e.add(this)):this.destination=Tb}static create(e,t,r){return new Xr(e,t,r)}next(e){this.isStopped?Cu(Rm(e),this):this._next(e)}error(e){this.isStopped?Cu(Mm(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cu(Nm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bb=Function.prototype.bind;function Iu(n,e){return bb.call(n,e)}var Du=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){oa(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){oa(r)}else oa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){oa(t)}}},Xr=class extends or{constructor(e,t,r){super();let i;if(k(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Iu(e.next,s),error:e.error&&Iu(e.error,s),complete:e.complete&&Iu(e.complete,s)}):i=e}this.destination=new Du(i)}};function oa(n){wt.useDeprecatedSynchronousErrorHandling?xm(n):sa(n)}function Sb(n){throw n}function Cu(n,e){let{onStoppedNotification:t}=wt;t&&Zr.setTimeout(()=>t(n,e))}var Tb={closed:!0,next:ls,error:Sb,complete:ls};var ei=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xe(n){return n}function bu(...n){return Su(n)}function Su(n){return n.length===0?Xe:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var X=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Nb(t)?t:new Xr(t,r,i);return Jr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Pm(r),new r((i,s)=>{let o=new Xr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ei](){return this}pipe(...t){return Su(t)(this)}toPromise(t){return t=Pm(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Pm(n){var e;return(e=n??wt.Promise)!==null&&e!==void 0?e:Promise}function Ab(n){return n&&k(n.next)&&k(n.error)&&k(n.complete)}function Nb(n){return n&&n instanceof or||Ab(n)&&ia(n)}function Tu(n){return k(n?.lift)}function Y(n){return e=>{if(Tu(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(n,e,t,r,i){return new Au(n,e,t,r,i)}var Au=class extends or{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ti(){return Y((n,e)=>{let t=null;n._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ni=class extends X{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Tu(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pe;let t=this.getSubject();e.add(this.source.subscribe(Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pe.EMPTY)}return e}refCount(){return ti()(this)}};var Om=Qr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class n extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new aa(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Om}next(t){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Eu:(this.currentObservers=null,s.push(t),new pe(()=>{this.currentObservers=null,ir(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new X;return t.source=this,t}}return n.create=(e,t)=>new aa(e,t),n})(),aa=class extends je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Eu}};var Me=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Nu={now(){return(Nu.delegate||Date).now()},delegate:void 0};var ca=class extends pe{constructor(e,t){super()}schedule(e,t=0){return this}};var us={setInterval(n,e,...t){let{delegate:r}=us;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=us;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ri=class extends ca{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return us.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&us.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ir(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ii=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ii.now=Nu.now;var si=class extends ii{constructor(e,t=ii.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Mu=new si(ri);var la=class extends ri{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ua=class extends si{};var Ru=new ua(la);var et=new X(n=>n.complete());function km(n){return n&&k(n.schedule)}function Fm(n){return n[n.length-1]}function Lm(n){return k(Fm(n))?n.pop():void 0}function In(n){return km(Fm(n))?n.pop():void 0}function xu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Um(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function jm(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ar(n){return this instanceof ar?(this.v=n,this):new ar(n)}function Vm(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(m,I){s.push([h,g,m,I])>1||c(h,g)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(g){f(s[0][3],g)}}function l(h){h.value instanceof ar?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function $m(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof jm=="function"?jm(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var da=n=>n&&typeof n.length=="number"&&typeof n!="function";function fa(n){return k(n?.then)}function ha(n){return k(n[ei])}function pa(n){return Symbol.asyncIterator&&k(n?.[Symbol.asyncIterator])}function ga(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Mb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ma=Mb();function ya(n){return k(n?.[ma])}function va(n){return Vm(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ar(t.read());if(i)return yield ar(void 0);yield yield ar(r)}}finally{t.releaseLock()}})}function _a(n){return k(n?.getReader)}function be(n){if(n instanceof X)return n;if(n!=null){if(ha(n))return Rb(n);if(da(n))return xb(n);if(fa(n))return Pb(n);if(pa(n))return Bm(n);if(ya(n))return Ob(n);if(_a(n))return kb(n)}throw ga(n)}function Rb(n){return new X(e=>{let t=n[ei]();if(k(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xb(n){return new X(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Pb(n){return new X(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,sa)})}function Ob(n){return new X(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Bm(n){return new X(e=>{Fb(n,e).catch(t=>e.error(t))})}function kb(n){return Bm(va(n))}function Fb(n,e){var t,r,i,s;return Um(this,void 0,void 0,function*(){try{for(t=$m(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function ze(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Cn(n,e=0){return Y((t,r)=>{t.subscribe(Q(r,i=>ze(r,n,()=>r.next(i),e),()=>ze(r,n,()=>r.complete(),e),i=>ze(r,n,()=>r.error(i),e)))})}function Dn(n,e=0){return Y((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Hm(n,e){return be(n).pipe(Dn(e),Cn(e))}function zm(n,e){return be(n).pipe(Dn(e),Cn(e))}function Wm(n,e){return new X(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function qm(n,e){return new X(t=>{let r;return ze(t,e,()=>{r=n[ma](),ze(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}function Ea(n,e){if(!n)throw new Error("Iterable cannot be null");return new X(t=>{ze(t,e,()=>{let r=n[Symbol.asyncIterator]();ze(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Gm(n,e){return Ea(va(n),e)}function Km(n,e){if(n!=null){if(ha(n))return Hm(n,e);if(da(n))return Wm(n,e);if(fa(n))return zm(n,e);if(pa(n))return Ea(n,e);if(ya(n))return qm(n,e);if(_a(n))return Gm(n,e)}throw ga(n)}function _e(n,e){return e?Km(n,e):be(n)}function F(...n){let e=In(n);return _e(n,e)}function oi(n,e){let t=k(n)?n:()=>n,r=i=>i.error(t());return new X(e?i=>e.schedule(r,0,i):r)}function Pu(n){return!!n&&(n instanceof X||k(n.lift)&&k(n.subscribe))}var on=Qr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function K(n,e){return Y((t,r)=>{let i=0;t.subscribe(Q(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Lb}=Array;function jb(n,e){return Lb(e)?n(...e):n(e)}function Ym(n){return K(e=>jb(n,e))}var{isArray:Ub}=Array,{getPrototypeOf:Vb,prototype:$b,keys:Bb}=Object;function Qm(n){if(n.length===1){let e=n[0];if(Ub(e))return{args:e,keys:null};if(Hb(e)){let t=Bb(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Hb(n){return n&&typeof n=="object"&&Vb(n)===$b}function Zm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function wa(...n){let e=In(n),t=Lm(n),{args:r,keys:i}=Qm(n);if(r.length===0)return _e([],e);let s=new X(zb(r,e,i?o=>Zm(i,o):Xe));return t?s.pipe(Ym(t)):s}function zb(n,e,t=Xe){return r=>{Jm(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Jm(e,()=>{let l=_e(n[c],e),u=!1;l.subscribe(Q(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Jm(n,e,t){n?ze(t,n,e):e()}function Xm(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=g=>l<r?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;be(t(g,u++)).subscribe(Q(e,I=>{i?.(I),s?h(I):e.next(I)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){let I=c.shift();o?ze(e,o,()=>p(I)):p(I)}f()}catch(I){e.error(I)}}))};return n.subscribe(Q(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Ee(n,e,t=1/0){return k(e)?Ee((r,i)=>K((s,o)=>e(r,s,i,o))(be(n(r,i))),t):(typeof e=="number"&&(t=e),Y((r,i)=>Xm(r,i,n,t)))}function Ou(n=1/0){return Ee(Xe,n)}function ey(){return Ou(1)}function ai(...n){return ey()(_e(n,In(n)))}function Ia(n){return new X(e=>{be(n()).subscribe(e)})}function It(n,e){return Y((t,r)=>{let i=0;t.subscribe(Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function bn(n){return Y((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Q(t,void 0,void 0,o=>{s=be(n(o,bn(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ty(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Q(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function ci(n,e){return k(e)?Ee(n,e,1):Ee(n,1)}function Sn(n){return Y((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function an(n){return n<=0?()=>et:Y((e,t)=>{let r=0;e.subscribe(Q(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ku(n){return K(()=>n)}function Ca(n=Wb){return Y((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Wb(){return new on}function ds(n){return Y((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function jt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?It((i,s)=>n(i,s,r)):Xe,an(1),t?Sn(e):Ca(()=>new on))}function li(n){return n<=0?()=>et:Y((e,t)=>{let r=[];e.subscribe(Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Fu(n,e){let t=arguments.length>=2;return r=>r.pipe(n?It((i,s)=>n(i,s,r)):Xe,li(1),t?Sn(e):Ca(()=>new on))}function Lu(n,e){return Y(ty(n,e,arguments.length>=2,!0))}function ju(...n){let e=In(n);return Y((t,r)=>{(e?ai(n,t,e):ai(n,t)).subscribe(r)})}function Ct(n,e){return Y((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Q(r,c=>{i?.unsubscribe();let l=0,u=s++;be(n(c,u)).subscribe(i=Q(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Uu(n){return Y((e,t)=>{be(n).subscribe(Q(t,()=>t.complete(),ls)),!t.closed&&e.subscribe(t)})}function we(n,e,t){let r=k(n)||e||t?{next:n,error:e,complete:t}:n;return r?Y((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Q(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Xe}var Uy="https://g.co/ng/security#xss",v=class extends Error{constructor(e,t){super(jd(e,t)),this.code=e}};function jd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ds(n){return{toString:n}.toString()}var Da="__parameters__";function qb(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Vy(n,e,t){return Ds(()=>{let r=qb(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Da)?c[Da]:Object.defineProperty(c,Da,{value:[]})[Da];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function le(n){for(let e in n)if(n[e]===le)return e;throw Error("Could not find renamed property on target object.")}function We(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(We).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function ny(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Gb=le({__forward_ref__:le});function $y(n){return n.__forward_ref__=$y,n.toString=function(){return We(this())},n}function dt(n){return By(n)?n():n}function By(n){return typeof n=="function"&&n.hasOwnProperty(Gb)&&n.__forward_ref__===$y}function M(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bs(n){return{providers:n.providers||[],imports:n.imports||[]}}function ec(n){return ry(n,zy)||ry(n,Wy)}function Hy(n){return ec(n)!==null}function ry(n,e){return n.hasOwnProperty(e)?n[e]:null}function Kb(n){let e=n&&(n[zy]||n[Wy]);return e||null}function iy(n){return n&&(n.hasOwnProperty(sy)||n.hasOwnProperty(Yb))?n[sy]:null}var zy=le({\u0275prov:le}),sy=le({\u0275inj:le}),Wy=le({ngInjectableDef:le}),Yb=le({ngInjectorDef:le}),P=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=M({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function qy(n){return n&&!!n.\u0275providers}var Qb=le({\u0275cmp:le}),Zb=le({\u0275dir:le}),Jb=le({\u0275pipe:le}),Xb=le({\u0275mod:le}),Ra=le({\u0275fac:le}),ps=le({__NG_ELEMENT_ID__:le}),oy=le({__NG_ENV_ID__:le});function tc(n){return typeof n=="string"?n:n==null?"":String(n)}function eS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():tc(n)}function tS(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new v(-200,n)}function Ud(n,e){throw new v(-201,!1)}var V=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(V||{}),Yu;function Gy(){return Yu}function ut(n){let e=Yu;return Yu=n,e}function Ky(n,e,t){let r=ec(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&V.Optional)return null;if(e!==void 0)return e;Ud(n,"Injector")}var nS={},gs=nS,Qu="__NG_DI_FLAG__",xa="ngTempTokenPath",rS="ngTokenPath",iS=/\n/gm,sS="\u0275",ay="__source",hi;function oS(){return hi}function Tn(n){let e=hi;return hi=n,e}function aS(n,e=V.Default){if(hi===void 0)throw new v(-203,!1);return hi===null?Ky(n,void 0,e):hi.get(n,e&V.Optional?null:void 0,e)}function j(n,e=V.Default){return(Gy()||aS)(dt(n),e)}function E(n,e=V.Default){return j(n,nc(e))}function nc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Zu(n){let e=[];for(let t=0;t<n.length;t++){let r=dt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new v(900,!1);let i,s=V.Default;for(let o=0;o<r.length;o++){let a=r[o],c=cS(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(j(i,s))}else e.push(j(r))}return e}function Yy(n,e){return n[Qu]=e,n.prototype[Qu]=e,n}function cS(n){return n[Qu]}function lS(n,e,t,r){let i=n[xa];throw e[ay]&&i.unshift(e[ay]),n.message=uS(`
`+n.message,i,t,r),n[rS]=i,n[xa]=null,n}function uS(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==sS?n.slice(2):n;let i=We(e);if(Array.isArray(e))i=e.map(We).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):We(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(iS,`
  `)}`}var Tt=Yy(Vy("Optional"),8);var Qy=Yy(Vy("SkipSelf"),4);function gi(n,e){let t=n.hasOwnProperty(Ra);return t?n[Ra]:null}function Vd(n,e){n.forEach(t=>Array.isArray(t)?Vd(t,e):e(t))}function Zy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function dS(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}var ms={},Ut=[],mi=new P(""),Jy=new P("",-1),Xy=new P(""),Oa=class{get(e,t=gs){if(t===gs){let r=new Error(`NullInjectorError: No provider for ${We(e)}!`);throw r.name="NullInjectorError",r}return t}},ev=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ev||{}),Bt=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Bt||{}),Mn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Mn||{});function fS(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Ju(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];pS(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function hS(n){return n===3||n===4||n===6}function pS(n){return n.charCodeAt(0)===64}function $d(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cy(n,t,i,null,e[++r]):cy(n,t,i,null,null))}}return n}function cy(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var tv="ng-template";function gS(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fS(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Bd(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Bd(n){return n.type===4&&n.value!==tv}function mS(n,e,t){let r=n.type===4&&!t?tv:n.value;return e===r}function yS(n,e,t){let r=4,i=n.attrs,s=i!==null?ES(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Dt(r)&&!Dt(c))return!1;if(o&&Dt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!mS(n,c,t)||c===""&&e.length===1){if(Dt(r))return!1;o=!0}}else if(r&8){if(i===null||!gS(n,i,c,t)){if(Dt(r))return!1;o=!0}}else{let l=e[++a],u=vS(c,i,Bd(n),t);if(u===-1){if(Dt(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Dt(r))return!1;o=!0}}}}return Dt(r)||o}function Dt(n){return(n&1)===0}function vS(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return wS(e,n)}function nv(n,e,t=!1){for(let r=0;r<e.length;r++)if(yS(n,e[r],t))return!0;return!1}function _S(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function ES(n){for(let e=0;e<n.length;e++){let t=n[e];if(hS(t))return e}return n.length}function wS(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function IS(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ly(n,e){return n?":not("+e.trim()+")":e}function CS(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Dt(o)&&(e+=ly(s,i),i=""),r=o,s=s||!Dt(r);t++}return i!==""&&(e+=ly(s,i)),e}function DS(n){return n.map(CS).join(",")}function bS(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Dt(i))break;i=s}r++}return{attrs:e,classes:t}}function Wt(n){return Ds(()=>{let e=av(n),t=fe(b({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ev.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Bt.Emulated,styles:n.styles||Ut,_:null,schemas:n.schemas||null,tView:null,id:""});cv(t);let r=n.dependencies;return t.directiveDefs=dy(r,!1),t.pipeDefs=dy(r,!0),t.id=AS(t),t})}function SS(n){return lr(n)||rv(n)}function TS(n){return n!==null}function Ss(n){return Ds(()=>({type:n.type,bootstrap:n.bootstrap||Ut,declarations:n.declarations||Ut,imports:n.imports||Ut,exports:n.exports||Ut,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uy(n,e){if(n==null)return ms;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Mn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Mn.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Si(n){return Ds(()=>{let e=av(n);return cv(e),e})}function lr(n){return n[Qb]||null}function rv(n){return n[Zb]||null}function iv(n){return n[Jb]||null}function sv(n){let e=lr(n)||rv(n)||iv(n);return e!==null?e.standalone:!1}function ov(n,e){let t=n[Xb]||null;if(!t&&e===!0)throw new Error(`Type ${We(n)} does not have '\u0275mod' property.`);return t}function av(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ms,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ut,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uy(n.inputs,e),outputs:uy(n.outputs),debugInfo:null}}function cv(n){n.features?.forEach(e=>e(n))}function dy(n,e){if(!n)return null;let t=e?iv:SS;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(TS)}function AS(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function kn(n){return{\u0275providers:n}}function NS(...n){return{\u0275providers:lv(!0,n),\u0275fromNgModule:!0}}function lv(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Vd(e,o=>{let a=o;Xu(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&uv(i,s),t}function uv(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Hd(i,s=>{e(s,r)})}}function Xu(n,e,t,r){if(n=dt(n),!n)return!1;let i=null,s=iy(n),o=!s&&lr(n);if(!s&&!o){let c=n.ngModule;if(s=iy(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Xu(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Vd(s.imports,u=>{Xu(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&uv(l,e)}if(!a){let l=gi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ut},i),e({provide:Xy,useValue:i,multi:!0},i),e({provide:mi,useValue:()=>j(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Hd(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Hd(n,e){for(let t of n)qy(t)&&(t=t.\u0275providers),Array.isArray(t)?Hd(t,e):e(t)}var MS=le({provide:String,useValue:le});function dv(n){return n!==null&&typeof n=="object"&&MS in n}function RS(n){return!!(n&&n.useExisting)}function xS(n){return!!(n&&n.useFactory)}function ed(n){return typeof n=="function"}var rc=new P(""),Sa={},PS={},Vu;function zd(){return Vu===void 0&&(Vu=new Oa),Vu}var ht=class{},ys=class extends ht{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nd(e,o=>this.processProvider(o)),this.records.set(Jy,ui(void 0,this)),i.has("environment")&&this.records.set(ht,ui(void 0,this));let s=this.records.get(rc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Xy,Ut,V.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Tn(this),r=ut(void 0),i;try{return e()}finally{Tn(t),ut(r)}}get(e,t=gs,r=V.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(oy))return e[oy](this);r=nc(r);let i,s=Tn(this),o=ut(void 0);try{if(!(r&V.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=US(e)&&ec(e);l&&this.injectableDefInScope(l)?c=ui(td(e),Sa):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&V.Self?zd():this.parent;return t=r&V.Optional&&t===gs?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[xa]=a[xa]||[]).unshift(We(e)),s)throw a;return lS(a,e,"R3InjectorError",this.source)}else throw a}finally{ut(o),Tn(s)}}resolveInjectorInitializers(){let e=G(null),t=Tn(this),r=ut(void 0),i;try{let s=this.get(mi,Ut,V.Self);for(let o of s)o()}finally{Tn(t),ut(r),G(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(We(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new v(205,!1)}processProvider(e){e=dt(e);let t=ed(e)?e:dt(e&&e.provide),r=kS(e);if(!ed(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ui(void 0,Sa,!0),i.factory=()=>Zu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=G(null);try{return t.value===Sa&&(t.value=PS,t.value=t.factory()),typeof t.value=="object"&&t.value&&jS(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=dt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function td(n){let e=ec(n),t=e!==null?e.factory:gi(n);if(t!==null)return t;if(n instanceof P)throw new v(204,!1);if(n instanceof Function)return OS(n);throw new v(204,!1)}function OS(n){if(n.length>0)throw new v(204,!1);let t=Kb(n);return t!==null?()=>t.factory(n):()=>new n}function kS(n){if(dv(n))return ui(void 0,n.useValue);{let e=FS(n);return ui(e,Sa)}}function FS(n,e,t){let r;if(ed(n)){let i=dt(n);return gi(i)||td(i)}else if(dv(n))r=()=>dt(n.useValue);else if(xS(n))r=()=>n.useFactory(...Zu(n.deps||[]));else if(RS(n))r=()=>j(dt(n.useExisting));else{let i=dt(n&&(n.useClass||n.provide));if(LS(n))r=()=>new i(...Zu(n.deps));else return gi(i)||td(i)}return r}function ui(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function LS(n){return!!n.deps}function jS(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function US(n){return typeof n=="function"||typeof n=="object"&&n instanceof P}function nd(n,e){for(let t of n)Array.isArray(t)?nd(t,e):t&&qy(t)?nd(t.\u0275providers,e):e(t)}function ln(n,e){n instanceof ys&&n.assertNotDestroyed();let t,r=Tn(n),i=ut(void 0);try{return e()}finally{Tn(r),ut(i)}}function VS(){return Gy()!==void 0||oS()!=null}function $S(n){return typeof n=="function"}var qt=0,$=1,x=2,Ve=3,bt=4,qe=5,yi=6,ka=7,ke=8,vi=9,Ht=10,Te=11,vs=12,fy=13,Ti=14,tt=15,_i=16,di=17,Ei=18,ic=19,fv=20,An=21,$u=22,ft=23,nt=25,Wd=1;var ur=7,Fa=8,La=9,Ue=10,ja=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ja||{});function Nn(n){return Array.isArray(n)&&typeof n[Wd]=="object"}function un(n){return Array.isArray(n)&&n[Wd]===!0}function hv(n){return(n.flags&4)!==0}function sc(n){return n.componentOffset>-1}function qd(n){return(n.flags&1)===1}function Ai(n){return!!n.template}function rd(n){return(n[x]&512)!==0}var id=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function pv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function oc(){return gv}function gv(n){return n.type.prototype.ngOnChanges&&(n.setInput=HS),BS}oc.ngInherit=!0;function BS(){let n=yv(this),e=n?.current;if(e){let t=n.previous;if(t===ms)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HS(n,e,t,r,i){let s=this.declaredInputs[r],o=yv(n)||zS(n,{previous:ms,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new id(l&&l.currentValue,t,c===ms),pv(n,e,i,t)}var mv="__ngSimpleChanges__";function yv(n){return n[mv]||null}function zS(n,e){return n[mv]=e}var hy=null;var Vt=function(n,e,t){hy?.(n,e,t)},WS="svg",qS="math";function zt(n){for(;Array.isArray(n);)n=n[qt];return n}function GS(n){for(;Array.isArray(n);){if(typeof n[Wd]=="object")return n;n=n[qt]}return null}function KS(n,e){return zt(e[n])}function pt(n,e){return zt(e[n.index])}function Gd(n,e){return n.data[e]}function Fn(n,e){let t=e[n];return Nn(t)?t:t[qt]}function Kd(n){return(n[x]&128)===128}function YS(n){return un(n[Ve])}function wi(n,e){return e==null?null:n[e]}function vv(n){n[di]=0}function _v(n){n[x]&1024||(n[x]|=1024,Kd(n)&&cc(n))}function QS(n,e){for(;n>0;)e=e[Ti],n--;return e}function ac(n){return!!(n[x]&9216||n[ft]?.dirty)}function sd(n){n[Ht].changeDetectionScheduler?.notify(8),n[x]&64&&(n[x]|=1024),ac(n)&&cc(n)}function cc(n){n[Ht].changeDetectionScheduler?.notify(0);let e=dr(n);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!Kd(e)));)e=dr(e)}function Ev(n,e){if((n[x]&256)===256)throw new v(911,!1);n[An]===null&&(n[An]=[]),n[An].push(e)}function ZS(n,e){if(n[An]===null)return;let t=n[An].indexOf(e);t!==-1&&n[An].splice(t,1)}function dr(n){let e=n[Ve];return un(e)?e[Ve]:e}var W={lFrame:xv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wv=!1;function JS(){return W.lFrame.elementDepthCount}function XS(){W.lFrame.elementDepthCount++}function eT(){W.lFrame.elementDepthCount--}function Iv(){return W.bindingsEnabled}function Cv(){return W.skipHydrationRootTNode!==null}function tT(n){return W.skipHydrationRootTNode===n}function nT(){W.skipHydrationRootTNode=null}function ne(){return W.lFrame.lView}function At(){return W.lFrame.tView}function Yd(n){return W.lFrame.contextLView=n,n[ke]}function Qd(n){return W.lFrame.contextLView=null,n}function gt(){let n=Dv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Dv(){return W.lFrame.currentTNode}function rT(){let n=W.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ts(n,e){let t=W.lFrame;t.currentTNode=n,t.isParent=e}function bv(){return W.lFrame.isParent}function Sv(){W.lFrame.isParent=!1}function Tv(){return wv}function py(n){wv=n}function Av(){let n=W.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function iT(n){return W.lFrame.bindingIndex=n}function Ni(){return W.lFrame.bindingIndex++}function sT(){return W.lFrame.inI18n}function oT(n,e){let t=W.lFrame;t.bindingIndex=t.bindingRootIndex=n,od(e)}function aT(){return W.lFrame.currentDirectiveIndex}function od(n){W.lFrame.currentDirectiveIndex=n}function cT(n){let e=W.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Nv(n){W.lFrame.currentQueryIndex=n}function lT(n){let e=n[$];return e.type===2?e.declTNode:e.type===1?n[qe]:null}function Mv(n,e,t){if(t&V.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&V.Host);)if(i=lT(s),i===null||(s=s[Ti],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=W.lFrame=Rv();return r.currentTNode=e,r.lView=n,!0}function Zd(n){let e=Rv(),t=n[$];W.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Rv(){let n=W.lFrame,e=n===null?null:n.child;return e===null?xv(n):e}function xv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Pv(){let n=W.lFrame;return W.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ov=Pv;function Jd(){let n=Pv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uT(n){return(W.lFrame.contextLView=QS(n,W.lFrame.contextLView))[ke]}function lc(){return W.lFrame.selectedIndex}function fr(n){W.lFrame.selectedIndex=n}function Xd(){let n=W.lFrame;return Gd(n.tView,n.selectedIndex)}function dT(){return W.lFrame.currentNamespace}var kv=!0;function ef(){return kv}function tf(n){kv=n}function fT(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=gv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function nf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Ta(n,e,t){Fv(n,e,3,t)}function Aa(n,e,t,r){(n[x]&3)===t&&Fv(n,e,t,r)}function Bu(n,e){let t=n[x];(t&3)===e&&(t&=16383,t+=1,n[x]=t)}function Fv(n,e,t,r){let i=r!==void 0?n[di]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[di]+=65536),(a<s||s==-1)&&(hT(n,t,e,c),n[di]=(n[di]&4294901760)+c+2),c++}function gy(n,e){Vt(4,n,e);let t=G(null);try{e.call(n)}finally{G(t),Vt(5,n,e)}}function hT(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[x]>>14<n[di]>>16&&(n[x]&3)===e&&(n[x]+=16384,gy(a,s)):gy(a,s)}var pi=-1,_s=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function pT(n){return n instanceof _s}function gT(n){return(n.flags&8)!==0}function mT(n){return(n.flags&16)!==0}var Hu={},ad=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=nc(r);let i=this.injector.get(e,Hu,r);return i!==Hu||t===Hu?i:this.parentInjector.get(e,t,r)}};function Lv(n){return n!==pi}function Ua(n){return n&32767}function yT(n){return n>>16}function Va(n,e){let t=yT(n),r=e;for(;t>0;)r=r[Ti],t--;return r}var cd=!0;function my(n){let e=cd;return cd=n,e}var vT=256,jv=vT-1,Uv=5,_T=0,$t={};function ET(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ps)&&(r=t[ps]),r==null&&(r=t[ps]=_T++);let i=r&jv,s=1<<i;e.data[n+(i>>Uv)]|=s}function Vv(n,e){let t=$v(n,e);if(t!==-1)return t;let r=e[$];r.firstCreatePass&&(n.injectorIndex=e.length,zu(r.data,n),zu(e,null),zu(r.blueprint,null));let i=rf(n,e),s=n.injectorIndex;if(Lv(i)){let o=Ua(i),a=Va(i,e),c=a[$].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function zu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $v(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function rf(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=qv(i),r===null)return pi;if(t++,i=i[Ti],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return pi}function wT(n,e,t){ET(n,e,t)}function Bv(n,e,t){if(t&V.Optional||n!==void 0)return n;Ud(e,"NodeInjector")}function Hv(n,e,t,r){if(t&V.Optional&&r===void 0&&(r=null),!(t&(V.Self|V.Host))){let i=n[vi],s=ut(void 0);try{return i?i.get(e,r,t&V.Optional):Ky(e,r,t&V.Optional)}finally{ut(s)}}return Bv(r,e,t)}function zv(n,e,t,r=V.Default,i){if(n!==null){if(e[x]&2048&&!(r&V.Self)){let o=ST(n,e,t,r,$t);if(o!==$t)return o}let s=Wv(n,e,t,r,$t);if(s!==$t)return s}return Hv(e,t,r,i)}function Wv(n,e,t,r,i){let s=DT(t);if(typeof s=="function"){if(!Mv(e,n,r))return r&V.Host?Bv(i,t,r):Hv(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&V.Optional))Ud(t);else return o}finally{Ov()}}else if(typeof s=="number"){let o=null,a=$v(n,e),c=pi,l=r&V.Host?e[tt][qe]:null;for((a===-1||r&V.SkipSelf)&&(c=a===-1?rf(n,e):e[a+8],c===pi||!vy(r,!1)?a=-1:(o=e[$],a=Ua(c),e=Va(c,e)));a!==-1;){let u=e[$];if(yy(s,a,u.data)){let d=IT(a,e,t,o,r,l);if(d!==$t)return d}c=e[a+8],c!==pi&&vy(r,e[$].data[a+8]===l)&&yy(s,a,e)?(o=u,a=Ua(c),e=Va(c,e)):a=-1}}return i}function IT(n,e,t,r,i,s){let o=e[$],a=o.data[n+8],c=r==null?sc(a)&&cd:r!=o&&(a.type&3)!==0,l=i&V.Host&&s===a,u=CT(a,o,t,c,l);return u!==null?Es(e,o,u,a):$t}function CT(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=o[h];if(h<c&&t===p||h>=c&&p.type===t)return h}if(i){let h=o[c];if(h&&Ai(h)&&h.type===t)return c}return null}function Es(n,e,t,r){let i=n[t],s=e.data;if(pT(i)){let o=i;o.resolving&&tS(eS(s[t]));let a=my(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?ut(o.injectImpl):null,u=Mv(n,r,V.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&fT(t,s[t],e)}finally{l!==null&&ut(l),my(a),o.resolving=!1,Ov()}}return i}function DT(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ps)?n[ps]:void 0;return typeof e=="number"?e>=0?e&jv:bT:e}function yy(n,e,t){let r=1<<n;return!!(t[e+(n>>Uv)]&r)}function vy(n,e){return!(n&V.Self)&&!(n&V.Host&&e)}var cr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return zv(this._tNode,this._lView,e,nc(r),t)}};function bT(){return new cr(gt(),ne())}function sf(n){return Ds(()=>{let e=n.prototype.constructor,t=e[Ra]||ld(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Ra]||ld(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ld(n){return By(n)?()=>{let e=ld(dt(n));return e&&e()}:gi(n)}function ST(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[x]&2048&&!(o[x]&512);){let a=Wv(s,o,t,r|V.Self,$t);if(a!==$t)return a;let c=s.parent;if(!c){let l=o[fv];if(l){let u=l.get(t,$t,r);if(u!==$t)return u}c=qv(o),o=o[Ti]}s=c}return i}function qv(n){let e=n[$],t=e.type;return t===2?e.declTNode:t===1?n[qe]:null}function _y(n,e=null,t=null,r){let i=Gv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Gv(n,e=null,t=null,r,i=new Set){let s=[t||Ut,NS(n)];return r=r||(typeof n=="object"?void 0:We(n)),new ys(s,e||zd(),r||null,i)}var St=class n{static{this.THROW_IF_NOT_FOUND=gs}static{this.NULL=new Oa}static create(e,t){if(Array.isArray(e))return _y({name:""},t,e,"");{let r=e.name??"";return _y({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=M({token:n,providedIn:"any",factory:()=>j(Jy)})}static{this.__NG_ELEMENT_ID__=-1}};var TT=new P("");TT.__NG_ELEMENT_ID__=n=>{let e=gt();if(e===null)throw new v(204,!1);if(e.type&2)return e.value;if(n&V.Optional)return null;throw new v(204,!1)};var AT="ngOriginalError";function Wu(n){return n[AT]}var Kv=!0,Yv=(()=>{class n{static{this.__NG_ELEMENT_ID__=NT}static{this.__NG_ENV_ID__=t=>t}}return n})(),ud=class extends Yv{constructor(e){super(),this._lView=e}onDestroy(e){return Ev(this._lView,e),()=>ZS(this._lView,e)}};function NT(){return new ud(ne())}var Mi=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Me(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}}return n})();var dd=class extends je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,VS()&&(this.destroyRef=E(Yv,{optional:!0})??void 0,this.pendingTasks=E(Mi,{optional:!0})??void 0)}emit(e){let t=G(null);try{super.next(e)}finally{G(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof pe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Se=dd;function $a(...n){}function Qv(n){let e,t;function r(){n=$a;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Ey(n){return queueMicrotask(()=>n()),()=>{n=$a}}var of="isAngularZone",Ba=of+"_ID",MT=0,oe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Se(!1),this.onMicrotaskEmpty=new Se(!1),this.onStable=new Se(!1),this.onError=new Se(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Kv}=e;if(typeof Zone>"u")throw new v(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,PT(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(of)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new v(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new v(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,RT,$a,$a);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},RT={};function af(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xT(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Qv(()=>{n.callbackScheduled=!1,fd(n),n.isCheckStableRunning=!0,af(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),fd(n)}function PT(n){let e=()=>{xT(n)},t=MT++;n._inner=n._inner.fork({name:"angular",properties:{[of]:!0,[Ba]:t,[Ba+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(OT(c))return r.invokeTask(s,o,a,c);try{return wy(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Iy(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return wy(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!kT(c)&&e(),Iy(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,fd(n),af(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function fd(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wy(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Iy(n){n._nesting--,af(n)}var hd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Se,this.onMicrotaskEmpty=new Se,this.onStable=new Se,this.onError=new Se}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function OT(n){return Zv(n,"__ignore_ng_zone__")}function kT(n){return Zv(n,"__scheduler_tick__")}function Zv(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var cn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Wu(e);for(;t&&Wu(t);)t=Wu(t);return t||null}},FT=new P("",{providedIn:"root",factory:()=>{let n=E(oe),e=E(cn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function LT(){return uc(gt(),ne())}function uc(n,e){return new gr(pt(n,e))}var gr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=LT}}return n})();function Jv(n){return(n.flags&128)===128}var Xv=new Map,jT=0;function UT(){return jT++}function VT(n){Xv.set(n[ic],n)}function pd(n){Xv.delete(n[ic])}var Cy="__ngContext__";function hr(n,e){Nn(e)?(n[Cy]=e[ic],VT(e)):n[Cy]=e}function e_(n){return n_(n[vs])}function t_(n){return n_(n[bt])}function n_(n){for(;n!==null&&!un(n);)n=n[bt];return n}var gd;function r_(n){gd=n}function $T(){if(gd!==void 0)return gd;if(typeof document<"u")return document;throw new v(210,!1)}var cf=new P("",{providedIn:"root",factory:()=>BT}),BT="ng",lf=new P(""),Ln=new P("",{providedIn:"platform",factory:()=>"unknown"});var uf=new P(""),df=new P("",{providedIn:"root",factory:()=>$T().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var HT="h",zT="b";var WT=()=>null;function ff(n,e,t=!1){return WT(n,e,t)}var i_=!1,qT=new P("",{providedIn:"root",factory:()=>i_});var Ha=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Uy})`}};function hf(n){return n instanceof Ha?n.changingThisBreaksApplicationSecurity:n}function s_(n,e){let t=GT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Uy})`)}return t===e}function GT(n){return n instanceof Ha&&n.getTypeName()||null}var KT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function o_(n){return n=String(n),n.match(KT)?n:"unsafe:"+n}var pf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(pf||{});function a_(n){let e=YT();return e?e.sanitize(pf.URL,n)||"":s_(n,"URL")?hf(n):o_(tc(n))}function YT(){let n=ne();return n&&n[Ht].sanitizer}function c_(n){return n instanceof Function?n():n}var mr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(mr||{}),QT;function gf(n,e){return QT(n,e)}function fi(n,e,t,r,i){if(r!=null){let s,o=!1;un(r)?s=r:Nn(r)&&(o=!0,r=r[qt]);let a=zt(r);n===0&&t!==null?i==null?h_(e,t,a):za(e,t,a,i||null,!0):n===1&&t!==null?za(e,t,a,i||null,!0):n===2?l0(e,a,o):n===3&&e.destroyNode(a),s!=null&&d0(e,n,s,t,i)}}function ZT(n,e){return n.createText(e)}function JT(n,e,t){n.setValue(e,t)}function l_(n,e,t){return n.createElement(e,t)}function XT(n,e){u_(n,e),e[qt]=null,e[qe]=null}function e0(n,e,t,r,i,s){r[qt]=i,r[qe]=e,fc(n,r,t,1,i,s)}function u_(n,e){e[Ht].changeDetectionScheduler?.notify(9),fc(n,e,e[Te],2,null,null)}function t0(n){let e=n[vs];if(!e)return qu(n[$],n);for(;e;){let t=null;if(Nn(e))t=e[vs];else{let r=e[Ue];r&&(t=r)}if(!t){for(;e&&!e[bt]&&e!==n;)Nn(e)&&qu(e[$],e),e=e[Ve];e===null&&(e=n),Nn(e)&&qu(e[$],e),t=e&&e[bt]}e=t}}function n0(n,e,t,r){let i=Ue+r,s=t.length;r>0&&(t[i-1][bt]=e),r<s-Ue?(e[bt]=t[i],Zy(t,Ue+r,e)):(t.push(e),e[bt]=null),e[Ve]=t;let o=e[_i];o!==null&&t!==o&&d_(o,e);let a=e[Ei];a!==null&&a.insertView(n),sd(e),e[x]|=128}function d_(n,e){let t=n[La],r=e[Ve];if(Nn(r))n[x]|=ja.HasTransplantedViews;else{let i=r[Ve][tt];e[tt]!==i&&(n[x]|=ja.HasTransplantedViews)}t===null?n[La]=[e]:t.push(e)}function mf(n,e){let t=n[La],r=t.indexOf(e);t.splice(r,1)}function ws(n,e){if(n.length<=Ue)return;let t=Ue+e,r=n[t];if(r){let i=r[_i];i!==null&&i!==n&&mf(i,r),e>0&&(n[t-1][bt]=r[bt]);let s=Pa(n,Ue+e);XT(r[$],r);let o=s[Ei];o!==null&&o.detachView(s[$]),r[Ve]=null,r[bt]=null,r[x]&=-129}return r}function dc(n,e){if(!(e[x]&256)){let t=e[Te];t.destroyNode&&fc(n,e,t,3,null,null),t0(e)}}function qu(n,e){if(e[x]&256)return;let t=G(null);try{e[x]&=-129,e[x]|=256,e[ft]&&mu(e[ft]),i0(n,e),r0(n,e),e[$].type===1&&e[Te].destroy();let r=e[_i];if(r!==null&&un(e[Ve])){r!==e[Ve]&&mf(r,e);let i=e[Ei];i!==null&&i.detachView(n)}pd(e)}finally{G(t)}}function r0(n,e){let t=n.cleanup,r=e[ka];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[ka]=null);let i=e[An];if(i!==null){e[An]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function i0(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof _s)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Vt(4,a,c);try{c.call(a)}finally{Vt(5,a,c)}}else{Vt(4,i,s);try{s.call(i)}finally{Vt(5,i,s)}}}}}function f_(n,e,t){return s0(n,e.parent,t)}function s0(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[qt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Bt.None||s===Bt.Emulated)return null}return pt(r,t)}}function za(n,e,t,r,i){n.insertBefore(e,t,r,i)}function h_(n,e,t){n.appendChild(e,t)}function Dy(n,e,t,r,i){r!==null?za(n,e,t,r,i):h_(n,e,t)}function p_(n,e){return n.parentNode(e)}function o0(n,e){return n.nextSibling(e)}function g_(n,e,t){return c0(n,e,t)}function a0(n,e,t){return n.type&40?pt(n,t):null}var c0=a0,by;function yf(n,e,t,r){let i=f_(n,r,e),s=e[Te],o=r.parent||e[qe],a=g_(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Dy(s,i,t[c],a,!1);else Dy(s,i,t,a,!1);by!==void 0&&by(s,r,e,t,i)}function fs(n,e){if(e!==null){let t=e.type;if(t&3)return pt(e,n);if(t&4)return md(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fs(n,r);{let i=n[e.index];return un(i)?md(-1,i):zt(i)}}else{if(t&128)return fs(n,e.next);if(t&32)return gf(e,n)()||zt(n[e.index]);{let r=m_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=dr(n[tt]);return fs(i,r)}else return fs(n,e.next)}}}return null}function m_(n,e){if(e!==null){let r=n[tt][qe],i=e.projection;return r.projection[i]}return null}function md(n,e){let t=Ue+n+1;if(t<e.length){let r=e[t],i=r[$].firstChild;if(i!==null)return fs(r,i)}return e[ur]}function l0(n,e,t){n.removeChild(null,e,t)}function vf(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&hr(zt(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)vf(n,e,t.child,r,i,s,!1),fi(e,n,i,a,s);else if(c&32){let l=gf(t,r),u;for(;u=l();)fi(e,n,i,u,s);fi(e,n,i,a,s)}else c&16?y_(n,e,r,t,i,s):fi(e,n,i,a,s);t=o?t.projectionNext:t.next}}function fc(n,e,t,r,i,s){vf(t,r,n.firstChild,e,i,s,!1)}function u0(n,e,t){let r=e[Te],i=f_(n,t,e),s=t.parent||e[qe],o=g_(s,t,e);y_(r,0,e,t,i,o)}function y_(n,e,t,r,i,s){let o=t[tt],c=o[qe].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];fi(e,n,i,u,s)}else{let l=c,u=o[Ve];Jv(r)&&(l.flags|=128),vf(n,e,l,u,i,s,!0)}}function d0(n,e,t,r,i){let s=t[ur],o=zt(t);s!==o&&fi(e,n,r,s,i);for(let a=Ue;a<t.length;a++){let c=t[a];fc(c[$],c,n,e,r,s)}}function f0(n,e,t){n.setAttribute(e,"style",t)}function v_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function __(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Ju(n,e,r),i!==null&&v_(n,e,i),s!==null&&f0(n,e,s)}var yr={};function ye(n=1){E_(At(),ne(),lc()+n,!1)}function E_(n,e,t,r){if(!r)if((e[x]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ta(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Aa(e,s,0,t)}fr(t)}function Fe(n,e=V.Default){let t=ne();if(t===null)return j(n,e);let r=gt();return zv(r,t,dt(n),e)}function w_(n,e,t,r,i,s){let o=G(null);try{let a=null;i&Mn.SignalBased&&(a=e[r][Dm]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Mn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):pv(e,a,r,s)}finally{G(o)}}function h0(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)fr(~i);else{let s=i,o=t[++r],a=t[++r];oT(o,s);let c=e[s];a(2,c)}}}finally{fr(-1)}}function hc(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[qt]=i,d[x]=r|4|128|8|64,(l!==null||n&&n[x]&2048)&&(d[x]|=2048),vv(d),d[Ve]=d[Ti]=n,d[ke]=t,d[Ht]=o||n&&n[Ht],d[Te]=a||n&&n[Te],d[vi]=c||n&&n[vi]||null,d[qe]=s,d[ic]=UT(),d[yi]=u,d[fv]=l,d[tt]=e.type==2?n[tt]:d,d}function As(n,e,t,r,i){let s=n.data[e];if(s===null)s=p0(n,e,t,r,i),sT()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=rT();s.injectorIndex=o===null?-1:o.injectorIndex}return Ts(s,!0),s}function p0(n,e,t,r,i){let s=Dv(),o=bv(),a=o?s:s&&s.parent,c=n.data[e]=_0(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function I_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function C_(n,e,t,r,i){let s=lc(),o=r&2;try{fr(-1),o&&e.length>nt&&E_(n,e,nt,!1),Vt(o?2:0,i),t(r,i)}finally{fr(s),Vt(o?3:1,i)}}function D_(n,e,t){if(hv(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{G(r)}}}function b_(n,e,t){Iv()&&(b0(n,e,t,pt(t,e)),(t.flags&64)===64&&R_(n,e,t))}function S_(n,e,t=pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function T_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=_f(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function _f(n,e,t,r,i,s,o,a,c,l,u){let d=nt+r,f=d+i,h=g0(d,f),p=typeof l=="function"?l():l;return h[$]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function g0(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:yr);return t}function m0(n,e,t,r){let s=r.get(qT,i_)||t===Bt.ShadowDom,o=n.selectRootElement(e,s);return y0(o),o}function y0(n){v0(n)}var v0=()=>null;function _0(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Cv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Sy(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Mn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?Ty(r,t,l,a,c):Ty(r,t,l,a)}return r}function Ty(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function E0(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=t?t.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=Sy(0,d.inputs,u,c,h),l=Sy(1,d.outputs,u,l,p);let g=c!==null&&o!==null&&!Bd(e)?F0(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function w0(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function A_(n,e,t,r,i,s,o,a){let c=pt(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Ef(n,t,u,r,i),sc(e)&&I0(t,e.index)):e.type&3?(r=w0(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function I0(n,e){let t=Fn(e,n);t[x]&16||(t[x]|=64)}function N_(n,e,t,r){if(Iv()){let i=r===null?null:{"":-1},s=T0(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&M_(n,e,t,o,i,a),i&&A0(t,r,i)}t.mergedAttrs=$d(t.mergedAttrs,t.attrs)}function M_(n,e,t,r,i,s){for(let l=0;l<r.length;l++)wT(Vv(t,e),n,r[l].type);M0(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=I_(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=$d(t.mergedAttrs,u.hostAttrs),R0(n,t,e,c,u),N0(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}E0(n,t,s)}function C0(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;D0(o)!=a&&o.push(a),o.push(t,r,s)}}function D0(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function b0(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;sc(t)&&x0(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Vv(t,e),hr(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Es(e,n,a,t);if(hr(l,e),o!==null&&k0(e,a-i,l,c,t,o),Ai(c)){let u=Fn(t.index,e);u[ke]=Es(e,n,a,t)}}}function R_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=aT();try{fr(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];od(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&S0(c,l)}}finally{fr(-1),od(o)}}function S0(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function T0(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(nv(e,o.selectors,!1))if(r||(r=[]),Ai(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;yd(n,e,c)}else r.unshift(o),yd(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function yd(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function A0(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new v(-301,!1);r.push(e[i],s)}}}function N0(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ai(e)&&(t[""]=n)}}function M0(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function R0(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=gi(i.type,!0)),o=new _s(s,Ai(i),Fe);n.blueprint[r]=o,t[r]=o,C0(n,e,r,I_(n,t,i.hostVars,yr),i)}function x0(n,e,t){let r=pt(e,n),i=T_(t),s=n[Ht].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=pc(n,hc(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function P0(n,e,t,r,i,s){let o=pt(n,e);O0(e[Te],o,s,n.value,t,r,i)}function O0(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?tc(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function k0(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];w_(r,t,c,l,u,d)}}function F0(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function x_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function P_(n,e){let t=n.contentQueries;if(t!==null){let r=G(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Nv(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function pc(n,e){return n[vs]?n[fy][bt]=e:n[vs]=e,n[fy]=e,e}function vd(n,e,t){Nv(0);let r=G(null);try{e(n,t)}finally{G(r)}}function L0(n){return n[ka]??=[]}function j0(n){return n.cleanup??=[]}function U0(n,e,t){return(n===null||Ai(n))&&(t=GS(t[e.index])),t[Te]}function O_(n,e){let t=n[vi],r=t?t.get(cn,null):null;r&&r.handleError(e)}function Ef(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];w_(u,l,r,a,c,i)}}function V0(n,e,t){let r=KS(e,n);JT(n[Te],r,t)}function $0(n,e){let t=Fn(e,n),r=t[$];B0(r,t);let i=t[qt];i!==null&&t[yi]===null&&(t[yi]=ff(i,t[vi])),wf(r,t,t[ke])}function B0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function wf(n,e,t){Zd(e);try{let r=n.viewQuery;r!==null&&vd(1,r,t);let i=n.template;i!==null&&C_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ei]?.finishViewCreation(n),n.staticContentQueries&&P_(n,e),n.staticViewQueries&&vd(2,n.viewQuery,t);let s=n.components;s!==null&&H0(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[x]&=-5,Jd()}}function H0(n,e){for(let t=0;t<e.length;t++)$0(n,e[t])}function Ns(n,e,t,r){let i=G(null);try{let s=e.tView,a=n[x]&4096?4096:16,c=hc(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[_i]=l;let u=n[Ei];return u!==null&&(c[Ei]=u.createEmbeddedView(s)),wf(s,c,t),c}finally{G(i)}}function k_(n,e){let t=Ue+e;if(t<n.length)return n[t]}function Ii(n,e){return!e||e.firstChild===null||Jv(n)}function Ms(n,e,t,r=!0){let i=e[$];if(n0(i,e,n,t),r){let o=md(t,n),a=e[Te],c=p_(a,n[ur]);c!==null&&e0(i,n[qe],a,e,c,o)}let s=e[yi];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function F_(n,e){let t=ws(n,e);return t!==void 0&&dc(t[$],t),t}function Wa(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(zt(s)),un(s)&&z0(s,r);let o=t.type;if(o&8)Wa(n,e,t.child,r);else if(o&32){let a=gf(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=m_(e,t);if(Array.isArray(a))r.push(...a);else{let c=dr(e[tt]);Wa(c[$],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function z0(n,e){for(let t=Ue;t<n.length;t++){let r=n[t],i=r[$].firstChild;i!==null&&Wa(r[$],r,i,e)}n[ur]!==n[qt]&&e.push(n[ur])}var L_=[];function W0(n){return n[ft]??q0(n)}function q0(n){let e=L_.pop()??Object.create(K0);return e.lView=n,e}function G0(n){n.lView[ft]!==n&&(n.lView=null,L_.push(n))}var K0=fe(b({},hu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{cc(n.lView)},consumerOnSignalRead(){this.lView[ft]=this}});function Y0(n){let e=n[ft]??Object.create(Q0);return e.lView=n,e}var Q0=fe(b({},hu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=dr(n.lView);for(;e&&!j_(e[$]);)e=dr(e);e&&_v(e)},consumerOnSignalRead(){this.lView[ft]=this}});function j_(n){return n.type!==2}var Z0=100;function U_(n,e=!0,t=0){let r=n[Ht],i=r.rendererFactory,s=!1;s||i.begin?.();try{J0(n,t)}catch(o){throw e&&O_(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function J0(n,e){let t=Tv();try{py(!0),_d(n,e);let r=0;for(;ac(n);){if(r===Z0)throw new v(103,!1);r++,_d(n,1)}}finally{py(t)}}function X0(n,e,t,r){let i=e[x];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Ht].inlineEffectRunner?.flush(),Zd(e);let a=!0,c=null,l=null;s||(j_(n)?(l=W0(e),c=pu(l)):bm()===null?(a=!1,l=Y0(e),c=pu(l)):e[ft]&&(mu(e[ft]),e[ft]=null));try{vv(e),iT(n.bindingStartIndex),t!==null&&C_(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let h=n.preOrderCheckHooks;h!==null&&Ta(e,h,null)}else{let h=n.preOrderHooks;h!==null&&Aa(e,h,0,null),Bu(e,0)}if(o||eA(e),V_(e,0),n.contentQueries!==null&&P_(n,e),!s)if(u){let h=n.contentCheckHooks;h!==null&&Ta(e,h)}else{let h=n.contentHooks;h!==null&&Aa(e,h,1),Bu(e,1)}h0(n,e);let d=n.components;d!==null&&B_(e,d,0);let f=n.viewQuery;if(f!==null&&vd(2,f,r),!s)if(u){let h=n.viewCheckHooks;h!==null&&Ta(e,h)}else{let h=n.viewHooks;h!==null&&Aa(e,h,2),Bu(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$u]){for(let h of e[$u])h();e[$u]=null}s||(e[x]&=-73)}catch(u){throw s||cc(e),u}finally{l!==null&&(Sm(l,c),a&&G0(l)),Jd()}}function V_(n,e){for(let t=e_(n);t!==null;t=t_(t))for(let r=Ue;r<t.length;r++){let i=t[r];$_(i,e)}}function eA(n){for(let e=e_(n);e!==null;e=t_(e)){if(!(e[x]&ja.HasTransplantedViews))continue;let t=e[La];for(let r=0;r<t.length;r++){let i=t[r];_v(i)}}}function tA(n,e,t){let r=Fn(e,n);$_(r,t)}function $_(n,e){Kd(n)&&_d(n,e)}function _d(n,e){let r=n[$],i=n[x],s=n[ft],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&gu(s)),o||=!1,s&&(s.dirty=!1),n[x]&=-9217,o)X0(r,n,r.template,n[ke]);else if(i&8192){V_(n,1);let a=r.components;a!==null&&B_(n,a,1)}}function B_(n,e,t){for(let r=0;r<e.length;r++)tA(n,e[r],t)}function If(n,e){let t=Tv()?64:1088;for(n[Ht].changeDetectionScheduler?.notify(e);n;){n[x]|=t;let r=dr(n);if(rd(n)&&!r)return n;n=r}return null}var pr=class{get rootNodes(){let e=this._lView,t=e[$];return Wa(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ke]}set context(e){this._lView[ke]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ve];if(un(e)){let t=e[Fa],r=t?t.indexOf(this):-1;r>-1&&(ws(e,r),Pa(t,r))}this._attachedToViewContainer=!1}dc(this._lView[$],this._lView)}onDestroy(e){Ev(this._lView,e)}markForCheck(){If(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[x]&=-129}reattach(){sd(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,U_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new v(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rd(this._lView),t=this._lView[_i];t!==null&&!e&&mf(t,this._lView),u_(this._lView[$],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new v(902,!1);this._appRef=e;let t=rd(this._lView),r=this._lView[_i];r!==null&&!t&&d_(r,this._lView),sd(this._lView)}},gc=(()=>{class n{static{this.__NG_ELEMENT_ID__=iA}}return n})(),nA=gc,rA=class extends nA{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Ns(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new pr(i)}};function iA(){return sA(gt(),ne())}function sA(n,e){return n.type&4?new rA(e,n,uc(n,e)):null}var DH=new RegExp(`^(\\d+)*(${zT}|${HT})*(.*)`);var oA=()=>null;function Ci(n,e){return oA(n,e)}var Di=class{},mc=new P("",{providedIn:"root",factory:()=>!1});var H_=new P(""),z_=new P(""),Ed=class{},qa=class{};function aA(n){let e=Error(`No component factory found for ${We(n)}.`);return e[cA]=n,e}var cA="ngComponent";var wd=class{resolveComponentFactory(e){throw aA(e)}},bi=class{static{this.NULL=new wd}},Rn=class{},yc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>lA()}}return n})();function lA(){let n=ne(),e=gt(),t=Fn(e.index,n);return(Nn(t)?t:n)[Te]}var uA=(()=>{class n{static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>null})}}return n})();function Id(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ny(i,a);else if(s==2){let c=a,l=e[++o];r=ny(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ga=class extends bi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=lr(e);return new Is(t,this.ngModule)}};function Ay(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Mn.None;e?t.push({propName:o,templateName:r,isSignal:(a&Mn.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function dA(n){let e=n.toLowerCase();return e==="svg"?WS:e==="math"?qS:null}var Is=class extends qa{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Ay(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Ay(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=DS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=G(null);try{i=i||this.ngModule;let o=i instanceof ht?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new ad(e,o):e,c=a.get(Rn,null);if(c===null)throw new v(407,!1);let l=a.get(uA,null),u=a.get(Di,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?m0(f,r,this.componentDef.encapsulation,a):l_(f,h,dA(h)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let m=null;p!==null&&(m=ff(p,a,!0));let I=_f(0,null,null,1,0,null,null,null,null,null,null),T=hc(null,I,null,g,null,null,d,f,a,null,m);Zd(T);let w,C,H=null;try{let A=this.componentDef,D,Z=null;A.findHostDirectiveDefs?(D=[],Z=new Map,A.findHostDirectiveDefs(A,D,Z),D.push(A)):D=[A];let de=fA(T,p);H=hA(de,p,A,D,T,d,f),C=Gd(I,nt),p&&mA(f,A,p,r),t!==void 0&&yA(C,this.ngContentSelectors,t),w=gA(H,A,D,Z,T,[vA]),wf(I,T,null)}catch(A){throw H!==null&&pd(H),pd(T),A}finally{Jd()}return new Cd(this.componentType,w,uc(C,T),T,C)}finally{G(s)}}},Cd=class extends Ed{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new pr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Ef(s[$],s,i,e,t),this.previousInputValues.set(e,t);let o=Fn(this._tNode.index,s);If(o,1)}}get injector(){return new cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fA(n,e){let t=n[$],r=nt;return n[r]=e,As(t,r,2,"#host",null)}function hA(n,e,t,r,i,s,o){let a=i[$];pA(r,n,e,o);let c=null;e!==null&&(c=ff(e,i[vi]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=hc(i,T_(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&yd(a,n,r.length-1),pc(i,d),i[n.index]=d}function pA(n,e,t,r){for(let i of n)e.mergedAttrs=$d(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Id(e,e.mergedAttrs,!0),t!==null&&__(r,t,e))}function gA(n,e,t,r,i,s){let o=gt(),a=i[$],c=pt(o,i);M_(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,f=Es(i,a,d,o);hr(f,i)}R_(a,i,o),c&&hr(c,i);let l=Es(i,a,o.directiveStart+o.componentOffset,o);if(n[ke]=i[ke]=l,s!==null)for(let u of s)u(l,e);return D_(a,o,i),l}function mA(n,e,t,r){if(r)Ju(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=bS(e.selectors[0]);i&&Ju(n,t,i),s&&s.length>0&&v_(n,t,s.join(" "))}}function yA(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function vA(){let n=gt();nf(ne()[$],n)}var Ri=(()=>{class n{static{this.__NG_ELEMENT_ID__=_A}}return n})();function _A(){let n=gt();return wA(n,ne())}var EA=Ri,W_=class extends EA{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return uc(this._hostTNode,this._hostLView)}get injector(){return new cr(this._hostTNode,this._hostLView)}get parentInjector(){let e=rf(this._hostTNode,this._hostLView);if(Lv(e)){let t=Va(e,this._hostLView),r=Ua(e),i=t[$].data[r+8];return new cr(i,t)}else return new cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ny(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Ci(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Ii(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!$S(e),a;if(o)a=t;else{let p=t||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Is(lr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(ht,null);g&&(s=g)}let u=lr(c.componentType??{}),d=Ci(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,Ii(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(YS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ve],l=new W_(c,c[qe],c[Ve]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Ms(o,i,s,r),e.attachToViewContainerRef(),Zy(Gu(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ny(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ws(this._lContainer,t);r&&(Pa(Gu(this._lContainer),t),dc(r[$],r))}detach(e){let t=this._adjustIndex(e,-1),r=ws(this._lContainer,t);return r&&Pa(Gu(this._lContainer),t)!=null?new pr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ny(n){return n[Fa]}function Gu(n){return n[Fa]||(n[Fa]=[])}function wA(n,e){let t,r=e[n.index];return un(r)?t=r:(t=x_(r,e,null,n),e[n.index]=t,pc(e,t)),CA(t,e,n,r),new W_(t,n,e)}function IA(n,e){let t=n[Te],r=t.createComment(""),i=pt(e,n),s=p_(t,i);return za(t,s,r,o0(t,i),!1),r}var CA=SA,DA=()=>!1;function bA(n,e,t){return DA(n,e,t)}function SA(n,e,t,r){if(n[ur])return;let i;t.type&8?i=zt(r):i=IA(e,t),n[ur]=i}var My=new Set;function vr(n){My.has(n)||(My.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var xn=class{},Cs=class{};var Dd=class extends xn{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ga(this);let s=ov(e);this._bootstrapComponents=c_(s.bootstrap),this._r3Injector=Gv(e,t,[{provide:xn,useValue:this},{provide:bi,useValue:this.componentFactoryResolver},...r],We(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bd=class extends Cs{constructor(e){super(),this.moduleType=e}create(e){return new Dd(this.moduleType,e,[])}};var Ka=class extends xn{constructor(e){super(),this.componentFactoryResolver=new Ga(this),this.instance=null;let t=new ys([...e.providers,{provide:xn,useValue:this},{provide:bi,useValue:this.componentFactoryResolver}],e.parent||zd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cf(n,e,t=null){return new Ka({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function q_(n){return AA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function TA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function AA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function G_(n,e,t){return n[e]=t}function NA(n,e){return n[e]}function Pn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function MA(n,e,t,r){let i=Pn(n,e,t);return Pn(n,e+1,r)||i}function RA(n){return(n.flags&32)===32}function xA(n,e,t,r,i,s,o,a,c){let l=e.consts,u=As(e,n,4,o||null,a||null);N_(e,t,u,wi(l,c)),nf(e,u);let d=u.tView=_f(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Ya(n,e,t,r,i,s,o,a,c,l){let u=t+nt,d=e.firstCreatePass?xA(u,e,n,r,i,s,o,a,c):e.data[u];Ts(d,!1);let f=PA(e,n,d,t);ef()&&yf(e,n,f,d),hr(f,n);let h=x_(f,n,f,d);return n[u]=h,pc(n,h),bA(h,d,n),qd(d)&&b_(e,n,d),c!=null&&S_(n,d,l),d}function Nt(n,e,t,r,i,s,o,a){let c=ne(),l=At(),u=wi(l.consts,s);return Ya(c,l,n,e,t,r,i,u,o,a),Nt}var PA=OA;function OA(n,e,t,r){return tf(!0),e[Te].createComment("")}var hs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(hs||{}),kA=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Ry=class n{constructor(){this.ngZone=E(oe),this.scheduler=E(Di),this.errorHandler=E(cn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[hs.EarlyRead,hs.Write,hs.MixedReadWrite,hs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}};function vc(n,e,t,r){let i=ne(),s=Ni();if(Pn(i,s,e)){let o=At(),a=Xd();P0(a,i,n,e,t,r)}return vc}function FA(n,e,t,r){return Pn(n,Ni(),t)?e+tc(t)+r:yr}function Re(n,e,t){let r=ne(),i=Ni();if(Pn(r,i,e)){let s=At(),o=Xd();A_(s,o,r,n,e,r[Te],t,!1)}return Re}function xy(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Ef(n,t,s[o],o,r)}var Sd=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Ku(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function LA(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=n.at(s),u=e[s],d=Ku(s,l,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let f=n.at(o),h=e[c],p=Ku(o,f,c,h,t);if(p!==0){p<0&&n.updateValue(o,h),o--,c--;continue}let g=t(s,l),m=t(o,f),I=t(s,u);if(Object.is(I,m)){let T=t(c,h);Object.is(T,g)?(n.swap(s,o),n.updateValue(o,h),c--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new Qa,i??=Oy(n,s,o,t),Td(n,r,s,I))n.updateValue(s,u),s++,o++;else if(i.has(I))r.set(g,n.detach(s)),o--;else{let T=n.create(s,e[s]);n.attach(s,T),s++,o++}}for(;s<=c;)Py(n,r,t,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let u=n.at(s),d=l.value,f=Ku(s,u,s,d,t);if(f!==0)f<0&&n.updateValue(s,d),s++,l=c.next();else{r??=new Qa,i??=Oy(n,s,o,t);let h=t(s,d);if(Td(n,r,s,h))n.updateValue(s,d),s++,o++,l=c.next();else if(!i.has(h))n.attach(s,n.create(s,d)),s++,o++,l=c.next();else{let p=t(s,u);r.set(p,n.detach(s)),o--}}}for(;!l.done;)Py(n,r,t,n.length,l.value),l=c.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(c=>{n.destroy(c)})}function Td(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Py(n,e,t,r,i){if(Td(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function Oy(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Qa=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function K_(n,e){vr("NgControlFlow");let t=ne(),r=Ni(),i=t[r]!==yr?t[r]:-1,s=i!==-1?Za(t,nt+i):void 0,o=0;if(Pn(t,r,n)){let a=G(null);try{if(s!==void 0&&F_(s,o),n!==-1){let c=nt+n,l=Za(t,c),u=Rd(t[$],c),d=Ci(l,u.tView.ssrId),f=Ns(t,u,e,{dehydratedView:d});Ms(l,f,o,Ii(u,d))}}finally{G(a)}}else if(s!==void 0){let a=k_(s,o);a!==void 0&&(a[ke]=e)}}var Ad=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ue}};function Y_(n){return n}var Nd=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Q_(n,e,t,r,i,s,o,a,c,l,u,d,f){vr("NgControlFlow");let h=ne(),p=At(),g=c!==void 0,m=ne(),I=a?o.bind(m[tt][ke]):o,T=new Nd(g,I);m[nt+n]=T,Ya(h,p,n+1,e,t,r,i,wi(p.consts,s)),g&&Ya(h,p,n+2,c,l,u,d,wi(p.consts,f))}var Md=class extends Sd{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ue}at(e){return this.getLView(e)[ke].$implicit}attach(e,t){let r=t[yi];this.needsIndexUpdate||=e!==this.length,Ms(this.lContainer,t,e,Ii(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,jA(this.lContainer,e)}create(e,t){let r=Ci(this.lContainer,this.templateTNode.tView.ssrId),i=Ns(this.hostLView,this.templateTNode,new Ad(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){dc(e[$],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ke].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ke].$index=e}getLView(e){return UA(this.lContainer,e)}};function Z_(n){let e=G(null),t=lc();try{let r=ne(),i=r[$],s=r[t],o=t+1,a=Za(r,o);if(s.liveCollection===void 0){let l=Rd(i,o);s.liveCollection=new Md(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(LA(c,n,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=Ni(),u=c.length===0;if(Pn(r,l,u)){let d=t+2,f=Za(r,d);if(u){let h=Rd(i,d),p=Ci(f,h.tView.ssrId),g=Ns(r,h,void 0,{dehydratedView:p});Ms(f,g,0,Ii(h,p))}else F_(f,0)}}}finally{G(e)}}function Za(n,e){return n[e]}function jA(n,e){return ws(n,e)}function UA(n,e){return k_(n,e)}function Rd(n,e){return Gd(n,e)}function VA(n,e,t,r,i,s){let o=e.consts,a=wi(o,i),c=As(e,n,2,r,a);return N_(e,t,c,wi(o,s)),c.attrs!==null&&Id(c,c.attrs,!1),c.mergedAttrs!==null&&Id(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ae(n,e,t,r){let i=ne(),s=At(),o=nt+n,a=i[Te],c=s.firstCreatePass?VA(o,s,i,e,t,r):s.data[o],l=$A(s,i,c,a,e,n);i[o]=l;let u=qd(c);return Ts(c,!0),__(a,l,c),!RA(c)&&ef()&&yf(s,i,l,c),JS()===0&&hr(l,i),XS(),u&&(b_(s,i,c),D_(s,c,i)),r!==null&&S_(i,c),ae}function ce(){let n=gt();bv()?Sv():(n=n.parent,Ts(n,!1));let e=n;tT(e)&&nT(),eT();let t=At();return t.firstCreatePass&&(nf(t,n),hv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&gT(e)&&xy(t,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&mT(e)&&xy(t,e,ne(),e.stylesWithoutHost,!1),ce}function $e(n,e,t,r){return ae(n,e,t,r),ce(),$e}var $A=(n,e,t,r,i,s)=>(tf(!0),l_(r,i,dT()));function J_(){return ne()}function Df(n,e,t){let r=ne(),i=Ni();if(Pn(r,i,e)){let s=At(),o=Xd(),a=cT(s.data),c=U0(a,o,r);A_(s,o,r,n,e,c,t,!0)}return Df}var Ja="en-US";var BA=Ja;function HA(n){typeof n=="string"&&(BA=n.toLowerCase().replace(/_/g,"-"))}var zA=(n,e,t)=>{};function Ge(n,e,t,r){let i=ne(),s=At(),o=gt();return qA(s,i,i[Te],o,n,e,r),Ge}function WA(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ka],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function qA(n,e,t,r,i,s,o){let a=qd(r),l=n.firstCreatePass&&j0(n),u=e[ke],d=L0(e),f=!0;if(r.type&3||o){let g=pt(r,e),m=o?o(g):g,I=d.length,T=o?C=>o(zt(C[r.index])):r.index,w=null;if(!o&&a&&(w=WA(n,e,i,r.index)),w!==null){let C=w.__ngLastListenerFn__||w;C.__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,f=!1}else{s=Fy(r,e,u,s),zA(g,i,s);let C=t.listen(m,i,s);d.push(s,C),l&&l.push(i,T,I,I+1)}}else s=Fy(r,e,u,s);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let I=p[m],T=p[m+1],H=e[I][T].subscribe(s),A=d.length;d.push(s,H),l&&l.push(i,r.index,A,-(A+1))}}}function ky(n,e,t,r){let i=G(null);try{return Vt(6,e,t),t(r)!==!1}catch(s){return O_(n,s),!1}finally{Vt(7,e,t),G(i)}}function Fy(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Fn(n.index,e):e;If(o,5);let a=ky(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=ky(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function dn(n=1){return uT(n)}function GA(n,e){let t=null,r=_S(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?nv(n,s,!0):IS(r,s))return i}return t}function X_(n){let e=ne()[tt][qe];if(!e.projection){let t=n?n.length:1,r=e.projection=dS(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?GA(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function eE(n,e=0,t,r,i,s){let o=ne(),a=At(),c=r?n+1:null;c!==null&&Ya(o,a,c,r,i,s,null,t);let l=As(a,nt+n,16,null,t||null);l.projection===null&&(l.projection=e),Sv();let d=!o[yi]||Cv();o[tt][qe].projection[l.projection]===null&&c!==null?KA(o,a,c):d&&(l.flags&32)!==32&&u0(a,o,l)}function KA(n,e,t){let r=nt+t,i=e.data[r],s=n[r],o=Ci(s,i.tView.ssrId),a=Ns(n,i,void 0,{dehydratedView:o});Ms(s,a,0,Ii(i,o))}function xe(n,e=""){let t=ne(),r=At(),i=n+nt,s=r.firstCreatePass?As(r,i,1,e,null):r.data[i],o=YA(r,t,s,e,n);t[i]=o,ef()&&yf(r,t,o,s),Ts(s,!1)}var YA=(n,e,t,r,i)=>(tf(!0),ZT(e[Te],r));function _r(n){return jn("",n,""),_r}function jn(n,e,t){let r=ne(),i=FA(r,n,e,t);return i!==yr&&V0(r,lc(),i),jn}var QA=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=lv(!1,t.type),i=r.length>0?Cf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=M({token:n,providedIn:"environment",factory:()=>new n(j(ht))})}}return n})();function Gt(n){vr("NgStandalone"),n.getStandaloneInjector=e=>e.get(QA).getOrCreateStandaloneInjector(n)}function tE(n,e,t){let r=Av()+n,i=ne();return i[r]===yr?G_(i,r,t?e.call(t):e()):NA(i,r)}function nE(n,e,t,r,i){return JA(ne(),Av(),n,e,t,r,i)}function ZA(n,e){let t=n[e];return t===yr?void 0:t}function JA(n,e,t,r,i,s,o){let a=e+t;return MA(n,a,i,s)?G_(n,a+2,o?r.call(o,i,s):r(i,s)):ZA(n,a+2)}var On=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},rE=new On("18.2.13");var _c=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var iE=new P("");function Rs(n){return!!n&&typeof n.then=="function"}function sE(n){return!!n&&typeof n.subscribe=="function"}var oE=new P(""),aE=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=E(oE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Rs(s))t.push(s);else if(sE(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bf=new P("");function XA(){Tm(()=>{throw new v(600,!1)})}function eN(n){return n.isBoundToModule}var tN=10;function nN(n,e,t){try{let r=t();return Rs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Er=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(FT),this.afterRenderManager=E(kA),this.zonelessEnabled=E(mc),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new je,this.afterTick=new je,this.componentTypes=[],this.components=[],this.isStable=E(Mi).hasPendingTasks.pipe(K(t=>!t)),this._injector=E(ht)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof qa;if(!this._injector.get(aE).done){let f=!i&&sv(t),h=!1;throw new v(405,h)}let o;i?o=t:o=this._injector.get(bi).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=eN(o)?void 0:this._injector.get(xn),c=r||o.selector,l=o.create(St.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(iE,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Na(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new v(101,!1);let t=G(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,G(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Rn,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<tN;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)rN(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ac(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Na(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(bf,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Na(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new v(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Na(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rN(n,e,t,r){if(!t&&!ac(n))return;U_(n,e,t&&!r?0:1)}var xd=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Sf=(()=>{class n{compileModuleSync(t){return new bd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ov(t),s=c_(i.declarations).reduce((o,a)=>{let c=lr(a);return c&&o.push(new Is(c)),o},[]);return new xd(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var iN=(()=>{class n{constructor(){this.zone=E(oe),this.changeDetectionScheduler=E(Di),this.applicationRef=E(Er)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sN=new P("",{factory:()=>!1});function cE({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new oe(fe(b({},uE()),{scheduleInRootZone:t})),[{provide:oe,useFactory:n},{provide:mi,multi:!0,useFactory:()=>{let r=E(iN,{optional:!0});return()=>r.initialize()}},{provide:mi,multi:!0,useFactory:()=>{let r=E(oN);return()=>{r.initialize()}}},e===!0?{provide:H_,useValue:!0}:[],{provide:z_,useValue:t??Kv}]}function lE(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=cE({ngZoneFactory:()=>{let i=uE(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&vr("NgZone_CoalesceEvent"),new oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return kn([{provide:sN,useValue:!0},{provide:mc,useValue:!1},r])}function uE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var oN=(()=>{class n{constructor(){this.subscription=new pe,this.initialized=!1,this.zone=E(oe),this.pendingTasks=E(Mi)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aN=(()=>{class n{constructor(){this.appRef=E(Er),this.taskService=E(Mi),this.ngZone=E(oe),this.zonelessEnabled=E(mc),this.disableScheduling=E(H_,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new pe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ba):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(z_,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ey:Qv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ba+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ey(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cN(){return typeof $localize<"u"&&$localize.locale||Ja}var Tf=new P("",{providedIn:"root",factory:()=>E(Tf,V.Optional|V.SkipSelf)||cN()});var Pd=new P("");function ba(n){return!n.moduleRef}function lN(n){let e=ba(n)?n.r3Injector:n.moduleRef.injector,t=e.get(oe);return t.run(()=>{ba(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(cn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),ba(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Pd);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Pd);o.add(s),n.moduleRef.onDestroy(()=>{Na(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return nN(r,t,()=>{let s=e.get(aE);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Tf,Ja);if(HA(o||Ja),ba(n)){let a=e.get(Er);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return uN(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function uN(n,e){let t=n.injector.get(Er);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new v(-403,!1);e.push(n)}var Ma=null;function dN(n=[],e){return St.create({name:e,providers:[{provide:rc,useValue:"platform"},{provide:Pd,useValue:new Set([()=>Ma=null])},...n]})}function fN(n=[]){if(Ma)return Ma;let e=dN(n);return Ma=e,XA(),hN(e),e}function hN(n){n.get(lf,null)?.forEach(t=>t())}var wr=(()=>{class n{static{this.__NG_ELEMENT_ID__=pN}}return n})();function pN(n){return gN(gt(),ne(),(n&16)===16)}function gN(n,e,t){if(sc(n)&&!t){let r=Fn(n.index,e);return new pr(r,r)}else if(n.type&175){let r=e[tt];return new pr(r,e)}return null}var Od=class{constructor(){}supports(e){return q_(e)}create(e){return new kd(e)}},mN=(n,e)=>e,kd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mN}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<Ly(r,i,s)?t:r,a=Ly(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<l&&(s[f]=h+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!q_(e))throw new v(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,TA(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Fd(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Xa),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Fd=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ld=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Xa=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ld,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Ly(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function jy(){return new Af([new Od])}var Af=(()=>{class n{static{this.\u0275prov=M({token:n,providedIn:"root",factory:jy})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||jy()),deps:[[n,new Qy,new Tt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new v(901,!1)}}return n})();function dE(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=fN(r),s=[cE({}),{provide:Di,useExisting:aN},...t||[]],o=new Ka({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return lN({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var yE=null;function xi(){return yE}function vE(n){yE??=n}var Ec=class{};var Ke=new P(""),_E=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(EN),providedIn:"platform"})}}return n})();var EN=(()=>{class n extends _E{constructor(){super(),this._doc=E(Ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xi().getBaseHref(this._doc)}onPopState(t){let r=xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function EE(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function fE(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Ir(n){return n&&n[0]!=="?"?"?"+n:n}var Ic=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(wE),providedIn:"root"})}}return n})(),wN=new P(""),wE=(()=>{class n extends Ic{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??E(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return EE(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Ir(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Ir(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(j(_E),j(wN,8))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xs=(()=>{class n{constructor(t){this._subject=new Se,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=DN(fE(hE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ir(r))}normalize(t){return n.stripTrailingSlash(CN(this._basePath,hE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Ir}static{this.joinWithSlash=EE}static{this.stripTrailingSlash=fE}static{this.\u0275fac=function(r){return new(r||n)(j(Ic))}}static{this.\u0275prov=M({token:n,factory:()=>IN(),providedIn:"root"})}}return n})();function IN(){return new xs(j(Ic))}function CN(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function hE(n){return n.replace(/\/index.html$/,"")}function DN(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function IE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Nf=/\s+/,pE=[],CE=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=pE,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Nf):pE}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Nf):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Nf).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Fe(gr),Fe(yc))}}static{this.\u0275dir=Si({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Mf=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Cc=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Mf(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),gE(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);gE(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Fe(Ri),Fe(gc),Fe(Af))}}static{this.\u0275dir=Si({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function gE(n,e){n.context.$implicit=e.item}var Dc=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Rf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Fe(Ri),Fe(gc))}}static{this.\u0275dir=Si({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Rf=class{constructor(){this.$implicit=null,this.ngIf=null}};function mE(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${We(e)}'.`)}var Cr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ss({type:n})}static{this.\u0275inj=bs({})}}return n})(),DE="browser",bN="server";function xf(n){return n===bN}var wc=class{};var Ff=class extends Ec{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lf=class n extends Ff{static makeCurrent(){vE(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=SN();return t==null?null:TN(t)}resetBaseElement(){Ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return IE(document.cookie,e)}},Ps=null;function SN(){return Ps=Ps||document.querySelector("base"),Ps?Ps.getAttribute("href"):null}function TN(n){return new URL(n,document.baseURI).pathname}var AN=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),jf=new P(""),TE=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new v(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(j(jf),j(oe))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),bc=class{constructor(e){this._doc=e}},Of="ng-app-id",AE=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xf(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Of}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Of),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Of,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(j(Ke),j(cf),j(df,8),j(Ln))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),kf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vf=/%COMP%/g,NE="%COMP%",NN=`_nghost-${NE}`,MN=`_ngcontent-${NE}`,RN=!0,xN=new P("",{providedIn:"root",factory:()=>RN});function PN(n){return MN.replace(Vf,n)}function ON(n){return NN.replace(Vf,n)}function ME(n,e){return e.map(t=>t.replace(Vf,n))}var Sc=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=xf(a),this.defaultRenderer=new Os(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Bt.ShadowDom&&(r=fe(b({},r),{encapsulation:Bt.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Tc?i.applyToHost(t):i instanceof ks&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Bt.Emulated:s=new Tc(c,l,r,this.appId,u,o,a,d);break;case Bt.ShadowDom:return new Uf(c,l,t,r,o,a,this.nonce,d);default:s=new ks(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(j(TE),j(AE),j(cf),j(xN),j(Ke),j(Ln),j(oe),j(df))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),Os=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(kf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(bE(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(bE(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new v(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=kf[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=kf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(mr.DashCase|mr.Important)?e.style.setProperty(t,r,i&mr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&mr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=xi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function bE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Uf=class extends Os{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ME(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ks=class extends Os{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?ME(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Tc=class extends ks{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=PN(l),this.hostAttr=ON(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},kN=(()=>{class n extends bc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(j(Ke))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),SE=["alt","control","meta","shift"],FN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jN=(()=>{class n extends bc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xi().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),SE.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=FN[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),SE.forEach(o=>{if(o!==i){let a=LN[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(j(Ke))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})();function RE(n,e){return dE(b({rootComponent:n},UN(e)))}function UN(n){return{appProviders:[...zN,...n?.providers??[]],platformProviders:HN}}function VN(){Lf.makeCurrent()}function $N(){return new cn}function BN(){return r_(document),document}var HN=[{provide:Ln,useValue:DE},{provide:lf,useValue:VN,multi:!0},{provide:Ke,useFactory:BN,deps:[]}];var zN=[{provide:rc,useValue:"root"},{provide:cn,useFactory:$N,deps:[]},{provide:jf,useClass:kN,multi:!0,deps:[Ke,oe,Ln]},{provide:jf,useClass:jN,multi:!0,deps:[Ke]},Sc,AE,TE,{provide:Rn,useExisting:Sc},{provide:wc,useClass:AN,deps:[]},[]];var xE=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(j(Ke))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var U="primary",Js=Symbol("RouteTitle"),Wf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ji(n){return new Wf(n)}function qN(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function GN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kt(n[t],e[t]))return!1;return!0}function Kt(n,e){let t=n?qf(n):void 0,r=e?qf(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!VE(n[i],e[i]))return!1;return!0}function qf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function VE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function $E(n){return n.length>0?n[n.length-1]:null}function Vn(n){return Pu(n)?n:Rs(n)?_e(Promise.resolve(n)):F(n)}var KN={exact:HE,subset:zE},BE={exact:YN,subset:QN,ignored:()=>!0};function PE(n,e,t){return KN[t.paths](n.root,e.root,t.matrixParams)&&BE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function YN(n,e){return Kt(n,e)}function HE(n,e,t){if(!br(n.segments,e.segments)||!Mc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!HE(n.children[r],e.children[r],t))return!1;return!0}function QN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>VE(n[t],e[t]))}function zE(n,e,t){return WE(n,e,e.segments,t)}function WE(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!br(i,t)||e.hasChildren()||!Mc(i,t,r))}else if(n.segments.length===t.length){if(!br(n.segments,t)||!Mc(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!zE(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!br(n.segments,i)||!Mc(n.segments,i,r)||!n.children[U]?!1:WE(n.children[U],e,s,r)}}function Mc(n,e,t){return e.every((r,i)=>BE[t](n[i].parameters,r.parameters))}var hn=class{constructor(e=new re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ji(this.queryParams),this._queryParamMap}toString(){return XN.serialize(this)}},re=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rc(this)}},Dr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ji(this.parameters),this._parameterMap}toString(){return GE(this)}};function ZN(n,e){return br(n,e)&&n.every((t,r)=>Kt(t.parameters,e[r].parameters))}function br(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function JN(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===U&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==U&&(t=t.concat(e(i,r)))}),t}var vh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>new Bs,providedIn:"root"})}}return n})(),Bs=class{parse(e){let t=new Kf(e);return new hn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Fs(e.root,!0)}`,r=nM(e.queryParams),i=typeof e.fragment=="string"?`#${eM(e.fragment)}`:"";return`${t}${r}${i}`}},XN=new Bs;function Rc(n){return n.segments.map(e=>GE(e)).join("/")}function Fs(n,e){if(!n.hasChildren())return Rc(n);if(e){let t=n.children[U]?Fs(n.children[U],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==U&&r.push(`${i}:${Fs(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=JN(n,(r,i)=>i===U?[Fs(n.children[U],!1)]:[`${i}:${Fs(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[U]!=null?`${Rc(n)}/${t[0]}`:`${Rc(n)}/(${t.join("//")})`}}function qE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ac(n){return qE(n).replace(/%3B/gi,";")}function eM(n){return encodeURI(n)}function Gf(n){return qE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xc(n){return decodeURIComponent(n)}function OE(n){return xc(n.replace(/\+/g,"%20"))}function GE(n){return`${Gf(n.path)}${tM(n.parameters)}`}function tM(n){return Object.entries(n).map(([e,t])=>`;${Gf(e)}=${Gf(t)}`).join("")}function nM(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ac(t)}=${Ac(i)}`).join("&"):`${Ac(t)}=${Ac(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var rM=/^[^\/()?;#]+/;function $f(n){let e=n.match(rM);return e?e[0]:""}var iM=/^[^\/()?;=#]+/;function sM(n){let e=n.match(iM);return e?e[0]:""}var oM=/^[^=?&#]+/;function aM(n){let e=n.match(oM);return e?e[0]:""}var cM=/^[^&#]+/;function lM(n){let e=n.match(cM);return e?e[0]:""}var Kf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new re([],{}):new re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[U]=new re(e,t)),r}parseSegment(){let e=$f(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new v(4009,!1);return this.capture(e),new Dr(xc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=sM(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=$f(this.remaining);i&&(r=i,this.capture(r))}e[xc(t)]=xc(r)}parseQueryParam(e){let t=aM(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=lM(this.remaining);o&&(r=o,this.capture(r))}let i=OE(t),s=OE(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$f(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new v(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=U);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[U]:new re([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new v(4011,!1)}};function KE(n){return n.segments.length>0?new re([],{[U]:n}):n}function YE(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=YE(i);if(r===U&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new re(n.segments,e);return uM(t)}function uM(n){if(n.numberOfChildren===1&&n.children[U]){let e=n.children[U];return new re(n.segments.concat(e.segments),e.children)}return n}function Hs(n){return n instanceof hn}function dM(n,e,t=null,r=null){let i=QE(n);return ZE(i,e,t,r)}function QE(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new re(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=KE(r);return e??i}function ZE(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Bf(i,i,i,t,r);let s=fM(e);if(s.toRoot())return Bf(i,i,new re([],{}),t,r);let o=hM(s,i,n),a=o.processChildren?Us(o.segmentGroup,o.index,s.commands):XE(o.segmentGroup,o.index,s.commands);return Bf(i,o.segmentGroup,a,t,r)}function Pc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function zs(n){return typeof n=="object"&&n!=null&&n.outlets}function Bf(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=JE(n,e,t);let a=KE(YE(o));return new hn(a,s,i)}function JE(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=JE(s,e,t)}),new re(n.segments,r)}var Oc=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pc(r[0]))throw new v(4003,!1);let i=r.find(zs);if(i&&i!==$E(r))throw new v(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fM(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Oc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Oc(t,e,r)}var ki=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function hM(n,e,t){if(n.isAbsolute)return new ki(e,!0,0);if(!t)return new ki(e,!1,NaN);if(t.parent===null)return new ki(t,!0,0);let r=Pc(n.commands[0])?0:1,i=t.segments.length-1+r;return pM(t,i,n.numberOfDoubleDots)}function pM(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new v(4005,!1);i=r.segments.length}return new ki(r,!1,i-s)}function gM(n){return zs(n[0])?n[0].outlets:{[U]:n}}function XE(n,e,t){if(n??=new re([],{}),n.segments.length===0&&n.hasChildren())return Us(n,e,t);let r=mM(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new re(n.segments.slice(0,r.pathIndex),{});return s.children[U]=new re(n.segments.slice(r.pathIndex),n.children),Us(s,0,i)}else return r.match&&i.length===0?new re(n.segments,{}):r.match&&!n.hasChildren()?Yf(n,e,t):r.match?Us(n,0,i):Yf(n,e,t)}function Us(n,e,t){if(t.length===0)return new re(n.segments,{});{let r=gM(t),i={};if(Object.keys(r).some(s=>s!==U)&&n.children[U]&&n.numberOfChildren===1&&n.children[U].segments.length===0){let s=Us(n.children[U],e,t);return new re(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=XE(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new re(n.segments,i)}}function mM(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(zs(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!FE(c,l,o))return s;r+=2}else{if(!FE(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Yf(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(zs(s)){let c=yM(s.outlets);return new re(r,c)}if(i===0&&Pc(t[0])){let c=n.segments[e];r.push(new Dr(c.path,kE(t[0]))),i++;continue}let o=zs(s)?s.outlets[U]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Pc(a)?(r.push(new Dr(o,kE(a))),i+=2):(r.push(new Dr(o,{})),i++)}return new re(r,{})}function yM(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Yf(new re([],{}),0,r))}),e}function kE(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function FE(n,e,t){return n==t.path&&Kt(e,t.parameters)}var Vs="imperative",Pe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Pe||{}),mt=class{constructor(e,t){this.id=e,this.url=t}},Ws=class extends mt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Pe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Sr=class extends mt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Pe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},it=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(it||{}),Qf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Qf||{}),fn=class extends mt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Pe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends mt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Pe.NavigationSkipped}},qs=class extends mt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Pe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},kc=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zf=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jf=class extends mt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Pe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Xf=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eh=class extends mt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Pe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},th=class{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nh=class{constructor(e){this.route=e,this.type=Pe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rh=class{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ih=class{constructor(e){this.snapshot=e,this.type=Pe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sh=class{constructor(e){this.snapshot=e,this.type=Pe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oh=class{constructor(e){this.snapshot=e,this.type=Pe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Gs=class{},Ui=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function vM(n,e){return n.providers&&!n._injector&&(n._injector=Cf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Rt(n){return n.outlet||U}function _M(n,e){let t=n.filter(r=>Rt(r)===e);return t.push(...n.filter(r=>Rt(r)!==e)),t}function Xs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ah=class{get injector(){return Xs(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Bc(this.rootInjector),this.attachRef=null}},Bc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ah(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(j(ht))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ch(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ch(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=lh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lh(e,this._root).map(t=>t.value)}};function ch(n,e){if(n===e.value)return e;for(let t of e.children){let r=ch(n,t);if(r)return r}return null}function lh(n,e){if(n===e.value)return[e];for(let t of e.children){let r=lh(n,t);if(r.length)return r.unshift(e),r}return[]}var rt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Oi(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Lc=class extends Fc{constructor(e,t){super(e),this.snapshot=t,_h(this,e)}toString(){return this.snapshot.toString()}};function ew(n){let e=EM(n),t=new Me([new Dr("",{})]),r=new Me({}),i=new Me({}),s=new Me({}),o=new Me(""),a=new Un(t,r,s,o,i,U,n,e.root);return a.snapshot=e.root,new Lc(new rt(a,[]),e)}function EM(n){let e={},t={},r={},i="",s=new Fi([],e,r,i,t,U,n,null,{});return new Uc("",new rt(s,[]))}var Un=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[Js]))??F(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>ji(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>ji(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:b(b({},e.params),n.params),data:b(b({},e.data),n.data),resolve:b(b(b(b({},n.data),e.data),i?.data),n._resolvedData)}:r={params:b({},n.params),data:b({},n.data),resolve:b(b({},n.data),n._resolvedData??{})},i&&nw(i)&&(r.resolve[Js]=i.title),r}var Fi=class{get title(){return this.data?.[Js]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ji(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ji(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Uc=class extends Fc{constructor(e,t){super(t),this.url=e,_h(this,t)}toString(){return tw(this._root)}};function _h(n,e){e.value._routerState=n,e.children.forEach(t=>_h(n,t))}function tw(n){let e=n.children.length>0?` { ${n.children.map(tw).join(", ")} } `:"";return`${n.value}${e}`}function Hf(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Kt(e.params,t.params)||n.paramsSubject.next(t.params),GN(e.url,t.url)||n.urlSubject.next(t.url),Kt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function uh(n,e){let t=Kt(n.params,e.params)&&ZN(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||uh(n.parent,e.parent))}function nw(n){return typeof n.title=="string"||n.title===null}var Eh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=U,this.activateEvents=new Se,this.deactivateEvents=new Se,this.attachEvents=new Se,this.detachEvents=new Se,this.parentContexts=E(Bc),this.location=E(Ri),this.changeDetector=E(wr),this.inputBinder=E(wh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new v(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new dh(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Si({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[oc]})}}return n})(),dh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Un?this.route:e===Bc?this.childContexts:this.parent.get(e,t)}},wh=new P("");function wM(n,e,t){let r=Ks(n,e._root,t?t._root:void 0);return new Lc(r,e)}function Ks(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=IM(n,e,t);return new rt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ks(n,a)),o}}let r=CM(e.value),i=e.children.map(s=>Ks(n,s));return new rt(r,i)}}function IM(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ks(n,r,i);return Ks(n,r)})}function CM(n){return new Un(new Me(n.url),new Me(n.params),new Me(n.queryParams),new Me(n.fragment),new Me(n.data),n.outlet,n.component,n)}var Ys=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},rw="ngNavigationCancelingError";function Vc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Hs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=iw(!1,it.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function iw(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[rw]=!0,t.cancellationCode=e,t}function DM(n){return sw(n)&&Hs(n.url)}function sw(n){return!!n&&n[rw]}var bM=(n,e,t,r)=>K(i=>(new fh(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),fh=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Oi(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Oi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Oi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Oi(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new oh(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ih(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Hf(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Hf(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},$c=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Li=class{constructor(e,t){this.component=e,this.route=t}};function SM(n,e,t){let r=n._root,i=e?e._root:null;return Ls(r,i,t,[r.value])}function TM(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $i(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Hy(n)?n:e.get(n):r}function Ls(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Oi(e);return n.children.forEach(o=>{AM(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>$s(a,t.getContext(o),i)),i}function AM(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=NM(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new $c(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ls(n,e,a?a.children:null,r,i):Ls(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Li(a.outlet.component,o))}else o&&$s(e,a,i),i.canActivateChecks.push(new $c(r)),s.component?Ls(n,null,a?a.children:null,r,i):Ls(n,null,t,r,i);return i}function NM(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!br(n.url,e.url);case"pathParamsOrQueryParamsChange":return!br(n.url,e.url)||!Kt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uh(n,e)||!Kt(n.queryParams,e.queryParams);case"paramsChange":default:return!uh(n,e)}}function $s(n,e,t){let r=Oi(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?$s(o,e.children.getContext(s),t):$s(o,null,t):$s(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Li(e.outlet.component,i)):t.canDeactivateChecks.push(new Li(null,i)):t.canDeactivateChecks.push(new Li(null,i))}function eo(n){return typeof n=="function"}function MM(n){return typeof n=="boolean"}function RM(n){return n&&eo(n.canLoad)}function xM(n){return n&&eo(n.canActivate)}function PM(n){return n&&eo(n.canActivateChild)}function OM(n){return n&&eo(n.canDeactivate)}function kM(n){return n&&eo(n.canMatch)}function ow(n){return n instanceof on||n?.name==="EmptyError"}var Nc=Symbol("INITIAL_VALUE");function Vi(){return Ct(n=>wa(n.map(e=>e.pipe(an(1),ju(Nc)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===Nc)return Nc;if(t===!1||FM(t))return t}return!0}),It(e=>e!==Nc),an(1)))}function FM(n){return Hs(n)||n instanceof Ys}function LM(n,e){return Ee(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?F(fe(b({},t),{guardsResult:!0})):jM(o,r,i,n).pipe(Ee(a=>a&&MM(a)?UM(r,s,n,e):F(a)),K(a=>fe(b({},t),{guardsResult:a})))})}function jM(n,e,t,r){return _e(n).pipe(Ee(i=>zM(i.component,i.route,t,e,r)),jt(i=>i!==!0,!0))}function UM(n,e,t,r){return _e(e).pipe(ci(i=>ai($M(i.route.parent,r),VM(i.route,r),HM(n,i.path,t),BM(n,i.route,t))),jt(i=>i!==!0,!0))}function VM(n,e){return n!==null&&e&&e(new sh(n)),F(!0)}function $M(n,e){return n!==null&&e&&e(new rh(n)),F(!0)}function BM(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(s=>Ia(()=>{let o=Xs(e)??t,a=$i(s,o),c=xM(a)?a.canActivate(e,n):ln(o,()=>a(e,n));return Vn(c).pipe(jt())}));return F(i).pipe(Vi())}function HM(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>TM(o)).filter(o=>o!==null).map(o=>Ia(()=>{let a=o.guards.map(c=>{let l=Xs(o.node)??t,u=$i(c,l),d=PM(u)?u.canActivateChild(r,n):ln(l,()=>u(r,n));return Vn(d).pipe(jt())});return F(a).pipe(Vi())}));return F(s).pipe(Vi())}function zM(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(a=>{let c=Xs(e)??i,l=$i(a,c),u=OM(l)?l.canDeactivate(n,e,t,r):ln(c,()=>l(n,e,t,r));return Vn(u).pipe(jt())});return F(o).pipe(Vi())}function WM(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(o=>{let a=$i(o,n),c=RM(a)?a.canLoad(e,t):ln(n,()=>a(e,t));return Vn(c)});return F(s).pipe(Vi(),aw(r))}function aw(n){return bu(we(e=>{if(typeof e!="boolean")throw Vc(n,e)}),K(e=>e===!0))}function qM(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(o=>{let a=$i(o,n),c=kM(a)?a.canMatch(e,t):ln(n,()=>a(e,t));return Vn(c)});return F(s).pipe(Vi(),aw(r))}var Qs=class{constructor(e){this.segmentGroup=e||null}},Zs=class extends Error{constructor(e){super(),this.urlTree=e}};function Pi(n){return oi(new Qs(n))}function GM(n){return oi(new v(4e3,!1))}function KM(n){return oi(iw(!1,it.GuardRejected))}var hh=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[U])return GM(`${e.redirectTo}`);i=i.children[U]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:g}=i,m=ln(s,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:g}));if(m instanceof hn)throw new Zs(m);t=m}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Zs(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new hn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new re(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new v(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},ph={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function YM(n,e,t,r,i){let s=cw(n,e,t);return s.matched?(r=vM(e,r),qM(r,e,t,i).pipe(K(o=>o===!0?s:b({},ph)))):F(s)}function cw(n,e,t){if(e.path==="**")return QM(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?b({},ph):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||qN)(t,n,e);if(!i)return b({},ph);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?b(b({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function QM(n){return{matched:!0,parameters:n.length>0?$E(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function LE(n,e,t,r){return t.length>0&&XM(n,t,r)?{segmentGroup:new re(e,JM(r,new re(t,n.children))),slicedSegments:[]}:t.length===0&&eR(n,t,r)?{segmentGroup:new re(n.segments,ZM(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new re(n.segments,n.children),slicedSegments:t}}function ZM(n,e,t,r){let i={};for(let s of t)if(Hc(n,e,s)&&!r[Rt(s)]){let o=new re([],{});i[Rt(s)]=o}return b(b({},r),i)}function JM(n,e){let t={};t[U]=e;for(let r of n)if(r.path===""&&Rt(r)!==U){let i=new re([],{});t[Rt(r)]=i}return t}function XM(n,e,t){return t.some(r=>Hc(n,e,r)&&Rt(r)!==U)}function eR(n,e,t){return t.some(r=>Hc(n,e,r))}function Hc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function tR(n,e,t){return e.length===0&&!n.children[t]}var gh=class{};function nR(n,e,t,r,i,s,o="emptyOnly"){return new mh(n,e,t,r,i,o,s).recognize()}var rR=31,mh=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new hh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new v(4002,`'${e.segmentGroup}'`)}recognize(){let e=LE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new rt(r,t),s=new Uc("",i),o=dM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Fi([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,U,t).pipe(K(r=>({children:r,rootSnapshot:t})),bn(r=>{if(r instanceof Zs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qs?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(K(o=>o instanceof rt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return _e(s).pipe(ci(o=>{let a=r.children[o],c=_M(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Lu((o,a)=>(o.push(...a),o)),Sn(null),Fu(),Ee(o=>{if(o===null)return Pi(r);let a=lw(o);return iR(a),F(a)}))}processSegment(e,t,r,i,s,o,a){return _e(t).pipe(ci(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(bn(l=>{if(l instanceof Qs)return F(null);throw l}))),jt(c=>!!c),bn(c=>{if(ow(c))return tR(r,i,s)?F(new gh):Pi(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Rt(r)!==o&&(o===U||!Hc(i,s,r))?Pi(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Pi(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=cw(t,i,s);if(!c)return Pi(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rR&&(this.allowRedirects=!1));let h=new Fi(s,l,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,jE(i),Rt(i),i.component??i._loadedComponent??null,i,UE(i)),p=jc(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,g).pipe(Ee(m=>this.processSegment(e,r,t,m.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=YM(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ct(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ct(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Fi(f,d,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,jE(r),Rt(r),r.component??r._loadedComponent??null,r,UE(r)),g=jc(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:m,slicedSegments:I}=LE(t,f,h,l);if(I.length===0&&m.hasChildren())return this.processChildren(u,l,m,p).pipe(K(w=>new rt(p,w)));if(l.length===0&&I.length===0)return F(new rt(p,[]));let T=Rt(r)===s;return this.processSegment(u,l,m,I,T?U:s,!0,p).pipe(K(w=>new rt(p,w instanceof rt?[w]:[])))}))):Pi(t)))}getChildConfig(e,t,r){return t.children?F({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?F({routes:t._loadedRoutes,injector:t._loadedInjector}):WM(e,t,r,this.urlSerializer).pipe(Ee(i=>i?this.configLoader.loadChildren(e,t).pipe(we(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):KM(t))):F({routes:[],injector:e})}};function iR(n){n.sort((e,t)=>e.value.outlet===U?-1:t.value.outlet===U?1:e.value.outlet.localeCompare(t.value.outlet))}function sR(n){let e=n.value.routeConfig;return e&&e.path===""}function lw(n){let e=[],t=new Set;for(let r of n){if(!sR(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=lw(r.children);e.push(new rt(r.value,i))}return e.filter(r=>!t.has(r))}function jE(n){return n.data||{}}function UE(n){return n.resolve||{}}function oR(n,e,t,r,i,s){return Ee(o=>nR(n,e,t,r,o.extractedUrl,i,s).pipe(K(({state:a,tree:c})=>fe(b({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function aR(n,e){return Ee(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return F(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of uw(c))o.add(l);let a=0;return _e(o).pipe(ci(c=>s.has(c)?cR(c,r,n,e):(c.data=jc(c,c.parent,n).resolve,F(void 0))),we(()=>a++),li(1),Ee(c=>a===o.size?F(t):et))})}function uw(n){let e=n.children.map(t=>uw(t)).flat();return[n,...e]}function cR(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!nw(i)&&(s[Js]=i.title),lR(s,n,e,r).pipe(K(o=>(n._resolvedData=o,n.data=jc(n,n.parent,t).resolve,null)))}function lR(n,e,t,r){let i=qf(n);if(i.length===0)return F({});let s={};return _e(i).pipe(Ee(o=>uR(n[o],e,t,r).pipe(jt(),we(a=>{if(a instanceof Ys)throw Vc(new Bs,a);s[o]=a}))),li(1),ku(s),bn(o=>ow(o)?et:oi(o)))}function uR(n,e,t,r){let i=Xs(e)??r,s=$i(n,i),o=s.resolve?s.resolve(e,t):ln(i,()=>s(e,t));return Vn(o)}function zf(n){return Ct(e=>{let t=n(e);return t?_e(t).pipe(K(()=>e)):F(e)})}var dw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===U);return r}getResolvedTitleForRoute(t){return t.data[Js]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(dR),providedIn:"root"})}}return n})(),dR=(()=>{class n extends dw{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(j(xE))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ih=new P("",{providedIn:"root",factory:()=>({})}),fR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Wt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Gt],decls:1,vars:0,template:function(r,i){r&1&&$e(0,"router-outlet")},dependencies:[Eh],encapsulation:2})}}return n})();function Ch(n){let e=n.children&&n.children.map(Ch),t=e?fe(b({},n),{children:e}):b({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==U&&(t.component=fR),t}var Dh=new P(""),hR=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(Sf)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Vn(t.loadComponent()).pipe(K(fw),we(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ds(()=>{this.componentLoaders.delete(t)})),i=new ni(r,()=>new je).pipe(ti());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=pR(r,this.compiler,t,this.onLoadEndListener).pipe(ds(()=>{this.childrenLoaders.delete(r)})),o=new ni(s,()=>new je).pipe(ti());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pR(n,e,t,r){return Vn(n.loadChildren()).pipe(K(fw),Ee(i=>i instanceof Cs||Array.isArray(i)?F(i):_e(e.compileModuleAsync(i))),K(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Dh,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ch),injector:s}}))}function gR(n){return n&&typeof n=="object"&&"default"in n}function fw(n){return gR(n)?n.default:n}var bh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(mR),providedIn:"root"})}}return n})(),mR=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yR=new P("");var vR=new P(""),_R=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=E(hR),this.environmentInjector=E(ht),this.urlSerializer=E(vh),this.rootContexts=E(Bc),this.location=E(xs),this.inputBindingEnabled=E(wh,{optional:!0})!==null,this.titleStrategy=E(dw),this.options=E(Ih,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(bh),this.createViewTransition=E(yR,{optional:!0}),this.navigationErrorHandler=E(vR,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let t=i=>this.events.next(new th(i)),r=i=>this.events.next(new nh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(b(b({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Me({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vs,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(It(s=>s.id!==0),K(s=>fe(b({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ct(s=>{let o=!1,a=!1;return F(s).pipe(Ct(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",it.SupersededByNewNavigation),et;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Tr(c.id,this.urlSerializer.serialize(c.rawUrl),d,Qf.IgnoredSameUrlNavigation)),c.resolve(!1),et}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(Ct(d=>{let f=this.transitions?.getValue();return this.events.next(new Ws(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?et:Promise.resolve(d)}),oR(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),we(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=fe(b({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new kc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:g}=c,m=new Ws(d,this.urlSerializer.serialize(f),h,p);this.events.next(m);let I=ew(this.rootComponentType).snapshot;return this.currentTransition=s=fe(b({},c),{targetSnapshot:I,urlAfterRedirects:f,extras:fe(b({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let d="";return this.events.next(new Tr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Qf.IgnoredByUrlHandlingStrategy)),c.resolve(!1),et}}),we(c=>{let l=new Zf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=s=fe(b({},c),{guards:SM(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),LM(this.environmentInjector,c=>this.events.next(c)),we(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Vc(this.urlSerializer,c.guardsResult);let l=new Jf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),It(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",it.GuardRejected),!1)),zf(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(we(l=>{let u=new Xf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ct(l=>{let u=!1;return F(l).pipe(aR(this.paramsInheritanceStrategy,this.environmentInjector),we({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",it.NoDataFromResolver)}}))}),we(l=>{let u=new eh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),zf(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(we(f=>{u.component=f}),K(()=>{})));for(let f of u.children)d.push(...l(f));return d};return wa(l(c.targetSnapshot.root)).pipe(Sn(null),an(1))}),zf(()=>this.afterPreactivation()),Ct(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?_e(u).pipe(K(()=>s)):F(s)}),K(c=>{let l=wM(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=fe(b({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),we(()=>{this.events.next(new Gs)}),bM(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),an(1),we({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Uu(this.transitionAbortSubject.pipe(we(c=>{throw c}))),ds(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",it.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),bn(c=>{if(a=!0,sw(c))this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),DM(c)?this.events.next(new Ui(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new qs(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=ln(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof Ys){let{message:d,cancellationCode:f}=Vc(this.urlSerializer,u);this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),d,f)),this.events.next(new Ui(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return et}))}))}cancelNavigationTransition(t,r,i){let s=new fn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ER(n){return n!==Vs}var wR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(IR),providedIn:"root"})}}return n})(),yh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},IR=(()=>{class n extends yh{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=sf(n)))(i||n)}})()}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(CR),providedIn:"root"})}}return n})(),CR=(()=>{class n extends hw{constructor(){super(...arguments),this.location=E(xs),this.urlSerializer=E(vh),this.options=E(Ih,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(bh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ew(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ws)this.stateMemento=this.createStateMemento();else if(t instanceof Tr)this.rawUrlTree=r.initialUrl;else if(t instanceof kc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Gs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof fn&&(t.code===it.GuardRejected||t.code===it.NoDataFromResolver)?this.restoreHistory(r):t instanceof qs?this.restoreHistory(r,!0):t instanceof Sr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof hn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=b(b({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=b(b({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=sf(n)))(i||n)}})()}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),js=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(js||{});function DR(n,e){n.events.pipe(It(t=>t instanceof Sr||t instanceof fn||t instanceof qs||t instanceof Tr),K(t=>t instanceof Sr||t instanceof Tr?js.COMPLETE:(t instanceof fn?t.code===it.Redirect||t.code===it.SupersededByNewNavigation:!1)?js.REDIRECTING:js.FAILED),It(t=>t!==js.REDIRECTING),an(1)).subscribe(()=>{e()})}function bR(n){throw n}var SR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},zc=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=E(_c),this.stateManager=E(hw),this.options=E(Ih,{optional:!0})||{},this.pendingTasks=E(Mi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(_R),this.urlSerializer=E(vh),this.location=E(xs),this.urlHandlingStrategy=E(bh),this._events=new je,this.errorHandler=this.options.errorHandler||bR,this.navigated=!1,this.routeReuseStrategy=E(wR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(Dh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(wh,{optional:!0}),this.eventsSubscription=new pe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof fn&&r.code!==it.Redirect&&r.code!==it.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Sr)this.navigated=!0;else if(r instanceof Ui){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=b({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ER(i.source)},o);this.scheduleNavigation(a,Vs,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}NR(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=b({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Ch),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=b(b({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=QE(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return ZE(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Hs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Vs,null,r)}navigate(t,r={skipLocationChange:!1}){return AR(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=b({},SR):r===!1?i=b({},TR):i=r,Hs(t))return PE(this.currentUrlTree,t,i);let s=this.parseUrl(t);return PE(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return DR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AR(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new v(4008,!1)}function NR(n){return!(n instanceof Gs)&&!(n instanceof Ui)}var MR=new P("");function pw(n,...e){return kn([{provide:Dh,multi:!0,useValue:n},[],{provide:Un,useFactory:RR,deps:[zc]},{provide:bf,multi:!0,useFactory:xR},e.map(t=>t.\u0275providers)])}function RR(n){return n.routerState.root}function xR(){let n=E(St);return e=>{let t=n.get(Er);if(e!==t.components[0])return;let r=n.get(zc),i=n.get(PR);n.get(OR)===1&&r.initialNavigation(),n.get(kR,null,V.Optional)?.setUpPreloading(),n.get(MR,null,V.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var PR=new P("",{factory:()=>new je}),OR=new P("",{providedIn:"root",factory:()=>1});var kR=new P("");var $n=function(n){return n.Oval="oval",n.Diamond="diamond",n.Squigle="squiggle",n}($n||{}),Bn=function(n){return n.Red="red",n.Green="green",n.Blue="blue",n}(Bn||{}),Hn=function(n){return n.Solid="solid",n.Striped="striped",n.Open="open",n}(Hn||{});var to=class{Cards=[];constructor(){this.newCards()}newCards(){var e=[$n.Diamond,$n.Oval,$n.Squigle],t=[Bn.Red,Bn.Green,Bn.Blue],r=[Hn.Open,Hn.Solid,Hn.Striped],i=this.Cards,s=1;for(let o=1;o<=3;o++)e.forEach(a=>{t.forEach(c=>{r.forEach(l=>{var u={Color:c,Fill:l,Count:o,Shape:a,Id:s,Selected:!1,Blink:!1,Shake:!1};i.push(u),s++})})})}findMissingSetCard(e,t){let r=e.Color===t.Color,i=e.Count===t.Count,s=e.Fill===t.Fill,o=e.Shape===t.Shape,a=r?e.Color:this.missingColor(e.Color,t.Color),c=i?e.Count:this.missingCount(e.Count,t.Count),l=s?e.Fill:this.missingFill(e.Fill,t.Fill),u=o?e.Shape:this.missingShape(e.Shape,t.Shape);return this.Cards.find(d=>d.Color===a&&d.Count===c&&d.Fill===l&&d.Shape===u)}missingColor(e,t){let r=[Bn.Red,Bn.Green,Bn.Blue];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingCount(e,t){let r=[1,2,3];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingShape(e,t){let r=[$n.Diamond,$n.Oval,$n.Squigle];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingFill(e,t){let r=[Hn.Open,Hn.Solid,Hn.Striped];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}removeFrom(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}};var O=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(O||{}),Yt="*";function ro(n,e){return{type:O.Trigger,name:n,definitions:e,options:{}}}function Ar(n,e=null){return{type:O.Animate,styles:e,timings:n}}function gw(n,e=null){return{type:O.Sequence,steps:n,options:e}}function Be(n){return{type:O.Style,styles:n,offset:null}}function Sh(n,e,t){return{type:O.State,name:n,styles:e,options:t}}function mw(n){return{type:O.Keyframes,steps:n}}function io(n,e,t=null){return{type:O.Transition,expr:n,animation:e,options:t}}function yw(n,e,t=null){return{type:O.Query,selector:n,animation:e,options:t}}function vw(n,e){return{type:O.Stagger,timings:n,animation:e}}var zn=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},no=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Wc="!";var LR=(n,e)=>({card:!0,selected:n,blink:e}),jR=()=>[];function UR(n,e){if(n&1&&$e(0,"img",3),n&2){let t=dn();Re("src",t.ImagePath(),a_)("alt","")}}var _w=(()=>{class n{CardInfo;CardSelected=new Se;CardUnSelected=new Se;Found=!1;dealIn=!0;get shake(){return this.CardInfo?.Shake?"on":"off"}ImagePath(){var t=this.CardInfo;return`set_picts/${t.Shape}_${t.Fill}_${t.Color}.png`}clicked(){this.Found||(this.CardInfo.Selected=!this.CardInfo.Selected,this.CardInfo.Selected?this.CardSelected.emit(this.CardInfo):this.CardUnSelected.emit(this.CardInfo))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Wt({type:n,selectors:[["app-card"]],hostVars:2,hostBindings:function(r,i){r&2&&Df("@dealIn",i.dealIn)("@shake",i.shake)},inputs:{CardInfo:"CardInfo",Found:"Found"},outputs:{CardSelected:"CardSelected",CardUnSelected:"CardUnSelected"},standalone:!0,features:[Gt],decls:3,vars:6,consts:[[3,"click","ngClass"],[1,"card-images"],["draggable","false",3,"src","alt",4,"ngFor","ngForOf"],["draggable","false",3,"src","alt"]],template:function(r,i){r&1&&(ae(0,"div",0),Ge("click",function(){return i.clicked()}),ae(1,"div",1),Nt(2,UR,1,2,"img",2),ce()()),r&2&&(Re("ngClass",nE(2,LR,i.CardInfo.Selected,i.CardInfo.Blink)),ye(2),Re("ngForOf",tE(5,jR).constructor(i.CardInfo.Count)))},dependencies:[Cr,CE,Cc],styles:[".card[_ngcontent-%COMP%]{background-color:#f6f6f6;border-radius:5px;min-width:100px}@media (hover: hover) and (pointer: fine){.card[_ngcontent-%COMP%]{transition:transform .14s ease,box-shadow .14s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.01);box-shadow:0 6px 18px #0000001f}}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinker .3s linear infinite}@keyframes _ngcontent-%COMP%_blinker{50%{background-color:#ffb700}}.selected[_ngcontent-%COMP%]{background-color:#d8d9ee!important}.card-images[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}@media (orientation: landscape){.card-images[_ngcontent-%COMP%]{height:8.3333333333vw}}@media (orientation: portrait){.card-images[_ngcontent-%COMP%]{height:14.2857142857vw}}.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;transform:rotate(90deg);transform-origin:center center}@media (orientation: landscape){.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.5vw}}@media (orientation: portrait){.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:4vw}}"],data:{animation:[ro("dealIn",[io(":enter",[Be({opacity:0,transform:"translateY(12px) scale(0.96)"}),Ar("220ms cubic-bezier(.2,.8,.2,1)",Be({opacity:1,transform:"translateY(0) scale(1)"}))])]),ro("shake",[Sh("off",Be({})),Sh("on",Be({})),io("off => on",[Ar("180ms ease-out",Be({transform:"translateX(-6px)"})),Ar("140ms ease-out",Be({transform:"translateX(6px)"})),Ar("120ms ease-out",Be({transform:"translateX(0)"}))])])]}})}return n})();var VR=["*"];function $R(n,e){if(n&1&&(ae(0,"div",1)(1,"div",2),xe(2),eE(3),ce()()),n&2){let t=dn();ye(2),jn(" ",t.Message," ")}}var Ew=(()=>{class n{Message="";Visible=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Wt({type:n,selectors:[["app-dialog"]],inputs:{Message:"Message",Visible:"Visible"},standalone:!0,features:[Gt],ngContentSelectors:VR,decls:1,vars:1,consts:[["class","dialog-backdrop",4,"ngIf"],[1,"dialog-backdrop"],[1,"dialog"]],template:function(r,i){r&1&&(X_(),Nt(0,$R,4,1,"div",0)),r&2&&Re("ngIf",i.Visible)},dependencies:[Cr,Dc],styles:[".dialog-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:999}.dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;background:linear-gradient(160deg,#145c32,#0f3d22);border:2px solid #e6c85c;border-radius:18px;padding:1.5em 2em;max-width:420px;width:90%;color:#f5f5f5;text-align:center;box-shadow:0 8px 28px #000000b3,inset 0 2px 10px #ffffff0d,0 0 18px #ffd70040}"]})}return n})();var pn=class{static getToday(){var e=new Date().toISOString();return e.split("T")[0]}};var Ah={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(n,e){if(!n)throw Nr(e)},Nr=function(n){return new Error("Firebase Database ("+Ah.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var Iw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BR=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Gc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,o||(f=64)),r.push(t[u],t[d],t[f],t[h])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Iw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new Nh;let f=s<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Nh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Rh=function(n){let e=Iw(n);return Gc.encodeByteArray(e,!0)},so=function(n){return Rh(n).replace(/\./g,"")},oo=function(n){try{return Gc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Cw(n){return Dw(void 0,n)}function Dw(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!HR(t)||(n[t]=Dw(n[t],e[t]));return n}function HR(n){return n!=="__proto__"}function zR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var WR=()=>zR().__FIREBASE_DEFAULTS__,qR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&oo(n[1]);return e&&JSON.parse(e)},xh=()=>{try{return WR()||qR()||GR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bw=n=>{var e,t;return(t=(e=xh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Sw=n=>{let e=bw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ph=()=>{var n;return(n=xh())===null||n===void 0?void 0:n.config},Tw=n=>{var e;return(e=xh())===null||e===void 0?void 0:e[`_${n}`]};var Wn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Aw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[so(JSON.stringify(t)),so(JSON.stringify(o)),""].join(".")}function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ao(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function Nw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mw(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Kc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zt(){return Ah.NODE_CLIENT===!0||Ah.NODE_ADMIN===!0}function Rw(){try{return typeof indexedDB=="object"}catch{return!1}}function xw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var KR="FirebaseError",Qt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=KR,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}},gn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?YR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Qt(i,a,r)}};function YR(n,e){return n.replace(QR,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var QR=/\{\$([^}]+)}/g;function Bi(n){return JSON.parse(n)}function ve(n){return JSON.stringify(n)}var Pw=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Bi(oo(s[0])||""),t=Bi(oo(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var Ow=function(n){let e=Pw(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},kw=function(n){let e=Pw(n).claims;return typeof e=="object"&&e.admin===!0};function Jt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Mr(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Yc(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function co(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function lo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(ww(s)&&ww(o)){if(!lo(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ww(n){return n!==null&&typeof n=="object"}function uo(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var qc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Fw(n,e){let t=new Mh(n,e);return t.subscribe.bind(t)}var Mh=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ZR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Th),i.error===void 0&&(i.error=Th),i.complete===void 0&&(i.complete=Th);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZR(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Th(){}function Qc(n,e){return`${n} failed: ${e} argument `}var Lw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,y(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},fo=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var hW=4*60*60*1e3;function yt(n){return n&&n._delegate?n._delegate:n}var vt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Rr="[DEFAULT]";var Zc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Wn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XR(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JR(n){return n===Rr?void 0:n}function XR(n){return n.instantiationMode==="EAGER"}var ho=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Zc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ex=[],ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ie||{}),tx={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},nx=ie.INFO,rx={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},ix=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=rx[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},qn=class{constructor(e){this.name=e,this._logLevel=nx,this._logHandler=ix,this._userLogHandler=null,ex.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};var sx=(n,e)=>e.some(t=>n instanceof t),jw,Uw;function ox(){return jw||(jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ax(){return Uw||(Uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Vw=new WeakMap,kh=new WeakMap,$w=new WeakMap,Oh=new WeakMap,Lh=new WeakMap;function cx(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Xt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Vw.set(t,n)}).catch(()=>{}),Lh.set(e,n),e}function lx(n){if(kh.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});kh.set(n,e)}var Fh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return kh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$w.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Bw(n){Fh=n(Fh)}function ux(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Jc(this),e,...t);return $w.set(r,e.sort?e.sort():[e]),Xt(r)}:ax().includes(n)?function(...e){return n.apply(Jc(this),e),Xt(Vw.get(this))}:function(...e){return Xt(n.apply(Jc(this),e))}}function dx(n){return typeof n=="function"?ux(n):(n instanceof IDBTransaction&&lx(n),sx(n,ox())?new Proxy(n,Fh):n)}function Xt(n){if(n instanceof IDBRequest)return cx(n);if(Oh.has(n))return Oh.get(n);let e=dx(n);return e!==n&&(Oh.set(n,e),Lh.set(e,n)),e}var Jc=n=>Lh.get(n);function zw(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Xt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Xt(o.result),c.oldVersion,c.newVersion,Xt(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var fx=["get","getKey","getAll","getAllKeys","count"],hx=["put","add","delete","clear"],jh=new Map;function Hw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=hx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fx.includes(t)))return;let s=function(o,...a){return _(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return jh.set(e,s),s}Bw(n=>fe(b({},n),{get:(e,t,r)=>Hw(e,t)||n.get(e,t,r),has:(e,t)=>!!Hw(e,t)||n.has(e,t)}));var Vh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(px(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function px(n){let e=n.getComponent();return e?.type==="VERSION"}var $h="@firebase/app",Ww="0.10.13";var mn=new qn("@firebase/app"),gx="@firebase/app-compat",mx="@firebase/analytics-compat",yx="@firebase/analytics",vx="@firebase/app-check-compat",_x="@firebase/app-check",Ex="@firebase/auth",wx="@firebase/auth-compat",Ix="@firebase/database",Cx="@firebase/data-connect",Dx="@firebase/database-compat",bx="@firebase/functions",Sx="@firebase/functions-compat",Tx="@firebase/installations",Ax="@firebase/installations-compat",Nx="@firebase/messaging",Mx="@firebase/messaging-compat",Rx="@firebase/performance",xx="@firebase/performance-compat",Px="@firebase/remote-config",Ox="@firebase/remote-config-compat",kx="@firebase/storage",Fx="@firebase/storage-compat",Lx="@firebase/firestore",jx="@firebase/vertexai-preview",Ux="@firebase/firestore-compat",Vx="firebase",$x="10.14.1";var Bh="[DEFAULT]",Bx={[$h]:"fire-core",[gx]:"fire-core-compat",[yx]:"fire-analytics",[mx]:"fire-analytics-compat",[_x]:"fire-app-check",[vx]:"fire-app-check-compat",[Ex]:"fire-auth",[wx]:"fire-auth-compat",[Ix]:"fire-rtdb",[Cx]:"fire-data-connect",[Dx]:"fire-rtdb-compat",[bx]:"fire-fn",[Sx]:"fire-fn-compat",[Tx]:"fire-iid",[Ax]:"fire-iid-compat",[Nx]:"fire-fcm",[Mx]:"fire-fcm-compat",[Rx]:"fire-perf",[xx]:"fire-perf-compat",[Px]:"fire-rc",[Ox]:"fire-rc-compat",[kx]:"fire-gcs",[Fx]:"fire-gcs-compat",[Lx]:"fire-fst",[Ux]:"fire-fst-compat",[jx]:"fire-vertex","fire-js":"fire-js",[Vx]:"fire-js-all"};var po=new Map,Hx=new Map,Hh=new Map;function qw(n,e){try{n.container.addComponent(e)}catch(t){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kn(n){let e=n.name;if(Hh.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;Hh.set(e,n);for(let t of po.values())qw(t,n);for(let t of Hx.values())qw(t,n);return!0}function Gh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hi(n){return n.settings!==void 0}var zx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new gn("app","Firebase",zx);var zh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}};var zi=$x;function Kh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Bh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gn.create("bad-app-name",{appName:String(i)});if(t||(t=Ph()),!t)throw Gn.create("no-options");let s=po.get(i);if(s){if(lo(t,s.options)&&lo(r,s.config))return s;throw Gn.create("duplicate-app",{appName:i})}let o=new ho(i);for(let c of Hh.values())o.addComponent(c);let a=new zh(t,r,o);return po.set(i,a),a}function mo(n=Bh){let e=po.get(n);if(!e&&n===Bh&&Ph())return Kh();if(!e)throw Gn.create("no-app",{appName:n});return e}function Xc(){return Array.from(po.values())}function Ae(n,e,t){var r;let i=(r=Bx[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(a.join(" "));return}Kn(new vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Wx="firebase-heartbeat-database",qx=1,go="firebase-heartbeat-store",Uh=null;function Qw(){return Uh||(Uh=zw(Wx,qx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(go)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gn.create("idb-open",{originalErrorMessage:n.message})})),Uh}function Gx(n){return _(this,null,function*(){try{let t=(yield Qw()).transaction(go),r=yield t.objectStore(go).get(Zw(n));return yield t.done,r}catch(e){if(e instanceof Qt)mn.warn(e.message);else{let t=Gn.create("idb-get",{originalErrorMessage:e?.message});mn.warn(t.message)}}})}function Gw(n,e){return _(this,null,function*(){try{let r=(yield Qw()).transaction(go,"readwrite");yield r.objectStore(go).put(e,Zw(n)),yield r.done}catch(t){if(t instanceof Qt)mn.warn(t.message);else{let r=Gn.create("idb-set",{originalErrorMessage:t?.message});mn.warn(r.message)}}})}function Zw(n){return`${n.name}!${n.options.appId}`}var Kx=1024,Yx=30*24*60*60*1e3,Wh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new qh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Kw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Yx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Kw(),{heartbeatsToSend:r,unsentEntries:i}=Qx(this._heartbeatsCache.heartbeats),s=so(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return mn.warn(t),""}})}};function Kw(){return new Date().toISOString().substring(0,10)}function Qx(n,e=Kx){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Yw(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Yw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var qh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Rw()?xw().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Gx(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Gw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Yw(n){return so(JSON.stringify({version:2,heartbeats:n})).length}function Zx(n){Kn(new vt("platform-logger",e=>new Vh(e),"PRIVATE")),Kn(new vt("heartbeat",e=>new Wh(e),"PRIVATE")),Ae($h,Ww,n),Ae($h,Ww,"esm2017"),Ae("fire-js","")}Zx("");var Jx="firebase",Xx="10.14.1";Ae(Jx,Xx,"app");var qi=new On("ANGULARFIRE2_VERSION");function Qh(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var vo=(n,e)=>{let t=e?[e]:Xc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},yo=class{constructor(){return vo(eP)}},eP="app-check";function Wi(){}var el=class{zone;delegate;constructor(e,t=Ru){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Yh=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wi,{},Wi,Wi)),t.pipe(we({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},_o=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new el(Zone.current)),this.insideAngular=t.run(()=>new el(Zone.current,Mu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(j(oe))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tl(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function tP(n){return tl().ngZone.runOutsideAngular(()=>n())}function xr(n){return tl().ngZone.run(()=>n())}function nP(n){return rP(tl())(n)}function rP(n){return function(t){return t=t.lift(new Yh(n.ngZone)),t.pipe(Dn(n.outsideAngular),Cn(n.insideAngular))}}var iP=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),xr(()=>n.apply(void 0,r))},Yn=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=xr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wi,{},Wi,Wi))),r[s]=iP(r[s],t));let i=tP(()=>n.apply(this,r));if(!e)if(i instanceof X){let s=tl();return i.pipe(Dn(s.outsideAngular),Cn(s.insideAngular))}else return xr(()=>i);return i instanceof X?i.pipe(nP):i instanceof Promise?xr(()=>new Promise((s,o)=>i.then(a=>xr(()=>s(a)),a=>xr(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:xr(()=>i)};var Pr=class{constructor(e){return e}},Eo=class{constructor(){return Xc()}};function sP(n){return n&&n.length===1?n[0]:new Pr(mo())}var Zh=new P("angularfire2._apps"),oP={provide:Pr,useFactory:sP,deps:[[new Tt,Zh]]},aP={provide:Eo,deps:[[new Tt,Zh]]};function cP(n){return(e,t)=>{let r=t.get(Ln);Ae("angularfire",qi.full,"core"),Ae("angularfire",qi.full,"app"),Ae("angular",rE.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Pr(i)}}function Jw(n,...e){return kn([oP,aP,{provide:Zh,useFactory:cP(n),multi:!0,deps:[oe,St,_o,...e]}])}var Xw=Yn(Kh,!0);function aI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var cI=aI,lI=new gn("auth","Firebase",aI());var sl=new qn("@firebase/auth");function lP(n,...e){sl.logLevel<=ie.WARN&&sl.warn(`Auth (${zi}): ${n}`,...e)}function rl(n,...e){sl.logLevel<=ie.ERROR&&sl.error(`Auth (${zi}): ${n}`,...e)}function eI(n,...e){throw lp(n,...e)}function cp(n,...e){return lp(n,...e)}function uI(n,e,t){let r=Object.assign(Object.assign({},cI()),{[e]:t});return new gn("auth","Firebase",r).create(e,{appName:n.name})}function il(n){return uI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lp(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lI.create(n,...e)}function te(n,e,...t){if(!n)throw lp(e,...t)}function wo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rl(e),new Error(e)}function ol(n,e){n||wo(e)}function uP(){return tI()==="http:"||tI()==="https:"}function tI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function dP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uP()||Mw()||"connection"in navigator)?navigator.onLine:!0}function fP(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var kr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ol(t>e,"Short delay should be less than long delay!"),this.isMobile=ao()||Kc()}get(){return dP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hP(n,e){ol(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var al=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var pP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var gP=new kr(3e4,6e4);function dI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function dl(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return fI(n,i,()=>_(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=uo(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let h=Object.assign({method:e,headers:f},l);return Nw()||(h.referrerPolicy="no-referrer"),al.fetch()(hI(n,n.config.apiHost,t,d),h)}))})}function fI(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},pP),e);try{let i=new ep(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nl(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw nl(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw nl(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw uI(n,u,l);eI(n,u)}}catch(i){if(i instanceof Qt)throw i;eI(n,"network-request-failed",{message:String(i)})}})}function hI(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?hP(n.config,i):`${n.config.apiScheme}://${i}`}var ep=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(cp(this.auth,"network-request-failed")),gP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function nl(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=cp(n,e,r);return i.customData._tokenResponse=t,i}function mP(n,e){return _(this,null,function*(){return dl(n,"POST","/v1/accounts:delete",e)})}function pI(n,e){return _(this,null,function*(){return dl(n,"POST","/v1/accounts:lookup",e)})}function Io(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function up(n,e=!1){return _(this,null,function*(){let t=yt(n),r=yield t.getIdToken(e),i=gI(r);te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Io(Jh(i.auth_time)),issuedAtTime:Io(Jh(i.iat)),expirationTime:Io(Jh(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Jh(n){return Number(n)*1e3}function gI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rl("JWT malformed, contained fewer than 3 sections"),null;try{let i=oo(t);return i?JSON.parse(i):(rl("Failed to decode base64 JWT payload"),null)}catch(i){return rl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nI(n){let e=gI(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tp(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Qt&&yP(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function yP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var np=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Do=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Io(this.lastLoginAt),this.creationTime=Io(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function cl(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield tp(n,pI(t,{idToken:r}));te(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mI(s.providerUserInfo):[],a=vP(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Do(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function dp(n){return _(this,null,function*(){let e=yt(n);yield cl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function vP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mI(n){return n.map(e=>{var{providerId:t}=e,r=xu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function _P(n,e){return _(this,null,function*(){let t=yield fI(n,{},()=>_(this,null,function*(){let r=uo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=hI(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",al.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function EP(n,e){return _(this,null,function*(){return dl(n,"POST","/v2/accounts:revokeToken",dI(n,e))})}var Co=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");let t=nI(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield _P(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return wo("not implemented")}};function Qn(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var bo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=xu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new np(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Do(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield tp(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return up(this,e)}reload(){return dp(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield cl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Hi(this.auth.app))return Promise.reject(il(this.auth));let e=yield this.getIdToken();return yield tp(this,mP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,h=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=t.photoURL)!==null&&o!==void 0?o:void 0,g=(a=t.tenantId)!==null&&a!==void 0?a:void 0,m=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,I=(l=t.createdAt)!==null&&l!==void 0?l:void 0,T=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:C,isAnonymous:H,providerData:A,stsTokenManager:D}=t;te(w&&D,e,"internal-error");let Z=Co.fromJSON(this.name,D);te(typeof w=="string",e,"internal-error"),Qn(d,e.name),Qn(f,e.name),te(typeof C=="boolean",e,"internal-error"),te(typeof H=="boolean",e,"internal-error"),Qn(h,e.name),Qn(p,e.name),Qn(g,e.name),Qn(m,e.name),Qn(I,e.name),Qn(T,e.name);let de=new n({uid:w,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:H,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:Z,createdAt:I,lastLoginAt:T});return A&&Array.isArray(A)&&(de.providerData=A.map(me=>Object.assign({},me))),m&&(de._redirectEventId=m),de}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Co;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield cl(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];te(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?mI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Co;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Do(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var rI=new Map;function Or(n){ol(n instanceof Function,"Expected a class definition");let e=rI.get(n);return e?(ol(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rI.set(n,e),e)}var wP=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),rp=wP;function Xh(n,e,t){return`firebase:${n}:${e}:${t}`}var ll=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Xh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?bo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(Or(rp),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Or(rp),o=Xh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=bo._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function iI(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TP(e))return"Blackberry";if(AP(e))return"Webos";if(CP(e))return"Safari";if((e.includes("chrome/")||DP(e))&&!e.includes("edge/"))return"Chrome";if(SP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function IP(n=xt()){return/firefox\//i.test(n)}function CP(n=xt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DP(n=xt()){return/crios\//i.test(n)}function bP(n=xt()){return/iemobile/i.test(n)}function SP(n=xt()){return/android/i.test(n)}function TP(n=xt()){return/blackberry/i.test(n)}function AP(n=xt()){return/webos/i.test(n)}function yI(n,e=[]){let t;switch(n){case"Browser":t=iI(xt());break;case"Worker":t=`${iI(xt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zi}/${r}`}var ip=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function NP(t){return _(this,arguments,function*(n,e={}){return dl(n,"GET","/v2/passwordPolicy",dI(n,e))})}var MP=6,sp=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:MP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var op=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ul(this),this.idTokenSubscription=new ul(this),this.beforeStateQueue=new ip(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ll.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield pI(this,{idToken:e}),r=yield bo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Hi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield cl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fP()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Hi(this.app))return Promise.reject(il(this));let t=e?yt(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Hi(this.app)?Promise.reject(il(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Hi(this.app)?Promise.reject(il(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Or(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield NP(this),t=new sp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield EP(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Or(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=yield ll.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&lP(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function RP(n){return yt(n)}var ul=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Fw(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xP={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PP(n){xP=n}function OP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function kP(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Or);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var uq=OP("rcb"),dq=new kr(3e4,6e4);var fq=new kr(2e3,1e4);var hq=10*60*1e3;var pq=new kr(3e4,6e4);var gq=new kr(5e3,15e3);var mq=encodeURIComponent("fac");var sI="@firebase/auth",oI="1.7.9";var ap=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function FP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LP(n){Kn(new vt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yI(n)},l=new op(r,i,s,c);return kP(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Kn(new vt("auth-internal",e=>{let t=RP(e.getProvider("auth").getImmediate());return(r=>new ap(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ae(sI,oI,FP(n)),Ae(sI,oI,"esm2017")}var jP=5*60,yq=Tw("authIdTokenMaxAge")||jP;function UP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}PP({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=cp("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",UP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LP("Browser");var jO="auth";var fl=class{constructor(){return vo(jO)}};var vI="@firebase/database",_I="1.0.8";var pg="";function UO(n){pg=n}var _p=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Bi(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ep=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Jt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var QI=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _p(e)}}catch{}return new Ep},Lr=QI("localStorage"),wp=QI("sessionStorage");var Yi=new qn("@firebase/database"),VO=function(){let n=1;return function(){return n++}}(),ZI=function(n){let e=Lw(n),t=new qc;t.update(e);let r=t.digest();return Gc.encodeByteArray(r)},Bo=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bo.apply(null,r):typeof r=="object"?e+=ve(r):e+=r,e+=" "}return e},Ur=null,EI=!0,$O=function(n,e){y(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Yi.logLevel=ie.VERBOSE,Ur=Yi.log.bind(Yi),e&&wp.set("logging_enabled",!0)):typeof n=="function"?Ur=n:(Ur=null,wp.remove("logging_enabled"))},Le=function(...n){if(EI===!0&&(EI=!1,Ur===null&&wp.get("logging_enabled")===!0&&$O(!0)),Ur){let e=Bo.apply(null,n);Ur(e)}},Ho=function(n){return function(...e){Le(n,...e)}},Ip=function(...n){let e="FIREBASE INTERNAL ERROR: "+Bo(...n);Yi.error(e)},yn=function(...n){let e=`FIREBASE FATAL ERROR: ${Bo(...n)}`;throw Yi.error(e),new Error(e)},Ye=function(...n){let e="FIREBASE WARNING: "+Bo(...n);Yi.warn(e)},BO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ye("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},JI=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},HO=function(n){if(Zt()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Zi="[MIN_NAME]",Vr="[MAX_NAME]",is=function(n,e){if(n===e)return 0;if(n===Zi||e===Vr)return-1;if(e===Zi||n===Vr)return 1;{let t=wI(n),r=wI(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},zO=function(n,e){return n===e?0:n<e?-1:1},So=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ve(e))},gg=function(n){if(typeof n!="object"||n===null)return ve(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=ve(e[r]),t+=":",t+=gg(n[e[r]]);return t+="}",t},XI=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Qe(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var eC=function(n){y(!JI(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},WO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function GO(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var KO=new RegExp("^-?(0*)\\d{1,10}$"),YO=-2147483648,QO=2147483647,wI=function(n){if(KO.test(n)){let e=Number(n);if(e>=YO&&e<=QO)return e}return null},ss=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ye("Exception was thrown by user callback.",t),e},Math.floor(0))}},ZO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ro=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Cp=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ye(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Dp=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Le("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ye(e)}},xo=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),pl="5",tC="v",nC="s",rC="r",iC="f",sC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oC="ls",aC="p",bp="ac",cC="websocket",lC="long_polling";var gl=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function JO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function uC(n,e,t){y(typeof e=="string","typeof type must == string"),y(typeof t=="object","typeof params must == object");let r;if(e===cC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===lC)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);JO(n)&&(t.ns=n.namespace);let i=[];return Qe(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Sp=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Jt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Cw(this.counters_)}};var fp={},hp={};function mg(n){let e=n.toString();return fp[e]||(fp[e]=new Sp),fp[e]}function XO(n,e){let t=n.toString();return hp[t]||(hp[t]=e()),hp[t]}var Tp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ss(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var II="start",ek="close",tk="pLPCommand",nk="pRTLPCB",dC="id",fC="pw",hC="ser",rk="cb",ik="seg",sk="ts",ok="d",ak="dframe",pC=1870,gC=30,ck=pC-gC,lk=25e3,uk=3e4,Ap=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ho(e),this.stats_=mg(t),this.urlFn=c=>(this.appCheckToken&&(c[bp]=this.appCheckToken),uC(t,lC,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Tp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uk)),HO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Np((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===II)this.id=a,this.password=c;else if(o===ek)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[II]="t",r[hC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[rk]=this.scriptTagHolder.uniqueCallbackIdentifier),r[tC]=pl,this.transportSessionId&&(r[nC]=this.transportSessionId),this.lastSessionId&&(r[oC]=this.lastSessionId),this.applicationId&&(r[aC]=this.applicationId),this.appCheckToken&&(r[bp]=this.appCheckToken),typeof location<"u"&&location.hostname&&sC.test(location.hostname)&&(r[rC]=iC);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Zt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WO()&&!qO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=ve(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Rh(t),i=XI(r,ck);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Zt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[ak]="t",r[dC]=e,r[fC]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ve(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Np=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Zt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=VO(),window[tk+this.uniqueCallbackIdentifier]=e,window[nk+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Le("frame writing exception"),a.stack&&Le(a.stack),Le(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Le("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[dC]=this.myID,e[fC]=this.myPW,e[hC]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+gC+r.length<=pC;){let o=this.pendingSegs.shift();r=r+"&"+ik+i+"="+o.seg+"&"+sk+i+"="+o.ts+"&"+ok+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(lk)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Zt()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Le("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var dk=16384,fk=45e3,ml=null;typeof MozWebSocket<"u"?ml=MozWebSocket:typeof WebSocket<"u"&&(ml=WebSocket);var To=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ho(this.connId),this.stats_=mg(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[tC]=pl,!Zt()&&typeof location<"u"&&location.hostname&&sC.test(location.hostname)&&(a[rC]=iC),r&&(a[nC]=r),i&&(a[oC]=i),s&&(a[bp]=s),o&&(a[aC]=o),uC(t,cC,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lr.set("previous_websocket_failure",!0);try{let i;if(Zt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${pl}/${pg}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ml(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&ml!==null&&!n.forceDisallow_}static previouslyFailed(){return Lr.isInMemoryStorage||Lr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Lr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Bi(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(y(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=ve(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=XI(r,dk);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(fk))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),hk=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ap,To]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=To&&To.isAvailable(),i=r&&!To.previouslyFailed();if(t.webSocketOnly&&(r||Ye("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[To];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),pk=6e4,gk=5e3,mk=10*1024,yk=100*1024,pp="t",CI="d",vk="s",DI="r",_k="e",bI="o",SI="a",TI="n",AI="p",Ek="h",Mp=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ho("c:"+this.id+":"),this.transportManager_=new hk(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ro(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mk?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(pp in e){let t=e[pp];t===SI?this.upgradeIfSecondaryHealthy_():t===DI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===bI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=So("t",e),r=So("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:AI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:TI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=So("t",e),r=So("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=So(pp,e);if(CI in e){let r=e[CI];if(t===Ek){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===TI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===vk?this.onConnectionShutdown_(r):t===DI?this.onReset_(r):t===_k?Ip("Server Error: "+r):t===bI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ip("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),pl!==r&&Ye("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ro(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(pk))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ro(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(gk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:AI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var yl=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var vl=class{constructor(e){this.allowedEvents_=e,this.listeners_={},y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){y(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var _l=class n extends vl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ao()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var NI=32,MI=768,se=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ee(){return new se("")}function q(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Xn(n){return n.pieces_.length-n.pieceNum_}function ue(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new se(n.pieces_,e)}function mC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function wk(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function yC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function vC(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new se(e,0)}function Ie(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof se)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new se(t,0)}function z(n){return n.pieceNum_>=n.pieces_.length}function He(n,e){let t=q(n),r=q(e);if(t===null)return e;if(t===r)return He(ue(n),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function _C(n,e){if(Xn(n)!==Xn(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ot(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Xn(n)>Xn(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Rp=class{constructor(e,t){this.errorPrefix_=t,this.parts_=yC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fo(this.parts_[r]);EC(this)}};function Ik(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=fo(e),EC(n)}function Ck(n){let e=n.parts_.pop();n.byteLength_-=fo(e),n.parts_.length>0&&(n.byteLength_-=1)}function EC(n){if(n.byteLength_>MI)throw new Error(n.errorPrefix_+"has a key path longer than "+MI+" bytes ("+n.byteLength_+").");if(n.parts_.length>NI)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+NI+") or object contains a cycle "+Fr(n))}function Fr(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var xp=class n extends vl{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return y(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ao=1e3,Dk=60*5*1e3,RI=30*1e3,bk=1.3,Sk=3e4,Tk="server_kill",xI=3,yg=(()=>{class n extends yl{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Ho("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ao,this.maxReconnectDelay_=Dk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Zt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xp.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&_l.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(ve(o)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Wn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Jt(t,"w")){let i=Mr(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ye(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||kw(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RI)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Ow(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ve(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Ip("Unrecognized action received from server: "+ve(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Sk&&(this.reconnectDelay_=Ao),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bk)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Le("getToken() completed but was canceled"):(Le("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Mp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,p=>{Ye(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Tk)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Ye(f),l())}}})}interrupt(t){Le("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Le("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Yc(this.interruptReasons_)&&(this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>gg(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new se(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Le("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=xI&&(this.reconnectDelay_=RI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Le("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=xI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Zt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+pg.replace(/\./g,"-")]=1,ao()?t["framework.cordova"]=1:Kc()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=_l.getInstance().currentlyOnline();return Yc(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),B=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Ji=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new B(Zi,e),i=new B(Zi,t);return this.compare(r,i)!==0}minPost(){return B.MIN}};var hl,El=class extends Ji{static get __EMPTY_NODE(){return hl}static set __EMPTY_NODE(e){hl=e}compare(e,t){return is(e.name,t.name)}isDefinedOn(e){throw Nr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return B.MIN}maxPost(){return new B(Vr,hl)}makePost(e,t){return y(typeof e=="string","KeyIndex indexValue must always be a string."),new B(e,hl)}toString(){return".key"}},Qi=new El;var Ki=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Pt=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??_t.EMPTY_NODE,this.right=o??_t.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _t.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return _t.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Pp=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Pt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},_t=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ki(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ki(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ki(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ki(this.root_,null,this.comparator_,!0,e)}};_t.EMPTY_NODE=new Pp;function Ak(n,e){return is(n.name,e.name)}function vg(n,e){return is(n,e)}var Op;function Nk(n){Op=n}var wC=function(n){return typeof n=="number"?"number:"+eC(n):"string:"+n},IC=function(n){if(n.isLeafNode()){let e=n.val();y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Jt(e,".sv"),"Priority must be a string or number.")}else y(n===Op||n.isEmpty(),"priority of unexpected type.");y(n===Op||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var PI,Xi=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),IC(this.priorityNode_)}static set __childrenNodeConstructor(t){PI=t}static get __childrenNodeConstructor(){return PI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return z(t)?this:q(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=q(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Xn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wC(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=eC(this.value_):t+=this.value_,this.lazyHash_=ZI(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(y(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return y(s>=0,"Unknown leaf type: "+r),y(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),CC,DC;function Mk(n){CC=n}function Rk(n){DC=n}var kp=class extends Ji{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?is(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return B.MIN}maxPost(){return new B(Vr,new Xi("[PRIORITY-POST]",DC))}makePost(e,t){let r=CC(e);return new B(t,new Xi("[PRIORITY-POST]",r))}toString(){return".priority"}},ge=new kp;var xk=Math.log(2),Fp=class{constructor(e){let t=s=>parseInt(Math.log(s)/xk,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},wl=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=n[c],f=t?t(d):d,new Pt(f,d.node,Pt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),g=i(h+1,l);return d=n[h],f=t?t(d):d,new Pt(f,d.node,Pt.BLACK,p,g)}},s=function(c){let l=null,u=null,d=n.length,f=function(p,g){let m=d-p,I=d;d-=p;let T=i(m+1,I),w=n[m],C=t?t(w):w;h(new Pt(C,w.node,g,null,T))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?f(m,Pt.BLACK):(f(m,Pt.BLACK),f(m,Pt.RED))}return u},o=new Fp(n.length),a=s(o);return new _t(r||e,a)};var gp,Gi={},es=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return y(Gi&&ge,"ChildrenNode.ts has not been loaded"),gp=gp||new n({".priority":Gi},{".priority":ge}),gp}get(e){let t=Mr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _t?t:null}hasIndex(e){return Jt(this.indexSet_,e.toString())}addIndex(e,t){y(e!==Qi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(B.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=wl(r,e.getCompare()):a=Gi;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=co(this.indexes_,(i,s)=>{let o=Mr(this.indexSet_,s);if(y(o,"Missing index implementation for "+s),i===Gi)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(B.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),wl(a,o.getCompare())}else return Gi;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new B(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=co(this.indexes_,i=>{if(i===Gi)return i;{let s=t.get(e.name);return s?i.remove(new B(e.name,s)):i}});return new n(r,this.indexSet_)}};var No,L=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&IC(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return No||(No=new n(new _t(vg),null,es.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||No}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?No:r}}getChild(t){let r=q(t);return r===null?this:this.getImmediateChild(r).getChild(ue(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(y(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new B(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?No:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=q(t);if(i===null)return r;{y(q(t)!==".priority"||Xn(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ue(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ge,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+wC(this.getPriority().val())+":"),this.forEachChild(ge,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":ZI(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new B(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new B(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new B(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,B.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,B.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zo?-1:0}withIndex(t){if(t===Qi||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Qi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ge),s=r.getIterator(ge),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Qi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Lp=class extends L{constructor(){super(new _t(vg),L.EMPTY_NODE,es.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}},zo=new Lp;Object.defineProperties(B,{MIN:{value:new B(Zi,L.EMPTY_NODE)},MAX:{value:new B(Vr,zo)}});El.__EMPTY_NODE=L.EMPTY_NODE;Xi.__childrenNodeConstructor=L;Nk(zo);Rk(zo);var Pk=!0;function Ne(n,e=null){if(n===null)return L.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Xi(t,Ne(e))}if(!(n instanceof Array)&&Pk){let t=[],r=!1;if(Qe(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Ne(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new B(o,c)))}}),t.length===0)return L.EMPTY_NODE;let s=wl(t,Ak,o=>o.name,vg);if(r){let o=wl(t,ge.getCompare());return new L(s,Ne(e),new es({".priority":o},{".priority":ge}))}else return new L(s,Ne(e),es.Default)}else{let t=L.EMPTY_NODE;return Qe(n,(r,i)=>{if(Jt(n,r)&&r.substring(0,1)!=="."){let s=Ne(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Ne(e))}}Mk(Ne);var jp=class extends Ji{constructor(e){super(),this.indexPath_=e,y(!z(e)&&q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?is(e.name,t.name):s}makePost(e,t){let r=Ne(e),i=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new B(t,i)}maxPost(){let e=L.EMPTY_NODE.updateChild(this.indexPath_,zo);return new B(Vr,e)}toString(){return yC(this.indexPath_,0).join("/")}};var Up=class extends Ji{compare(e,t){let r=e.node.compareTo(t.node);return r===0?is(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(e,t){let r=Ne(e);return new B(t,r)}toString(){return".value"}},Ok=new Up;function bC(n){return{type:"value",snapshotNode:n}}function ts(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Fo(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Lo(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function kk(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var jo=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Fo(t,a)):y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ts(t,r)):o.trackChildChange(Lo(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ge,(i,s)=>{t.hasChild(i)||r.trackChildChange(Fo(i,s))}),t.isLeafNode()||t.forEachChild(ge,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Lo(i,s,o))}else r.trackChildChange(ts(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Il=class n{constructor(e){this.indexedFilter_=new jo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new B(t,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=L.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(L.EMPTY_NODE);let s=this;return t.forEachChild(ge,(o,a)=>{s.matches(new B(o,a))||(i=i.updateImmediateChild(o,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var Vp=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Il(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new B(t,r))||(r=L.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=L.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(L.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;y(a.numChildren()===this.limit_,"");let c=new B(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,c);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(Lo(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(Fo(t,d));let g=a.updateImmediateChild(t,L.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(ts(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Fo(l.name,l.node)),s.trackChildChange(ts(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,L.EMPTY_NODE)):e}};var $p=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zi}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ge}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Fk(n){return n.loadsAllData()?new jo(n.getIndex()):n.hasLimit()?new Vp(n):new Il(n)}function OI(n){let e={};if(n.isDefault())return e;let t;if(n.index_===ge?t="$priority":n.index_===Ok?t="$value":n.index_===Qi?t="$key":(y(n.index_ instanceof jp,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ve(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=ve(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+ve(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=ve(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+ve(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function kI(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==ge&&(e.i=n.index_.toString()),e}var Bp=class n extends yl{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ho("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=OI(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Mr(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=OI(e._queryParams),r=e._path.toString(),i=new Wn;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uo(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Bi(a.responseText)}catch{Ye("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ye("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Hp=class{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Cl(){return{value:null,children:new Map}}function SC(n,e,t){if(z(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=q(e);n.children.has(r)||n.children.set(r,Cl());let i=n.children.get(r);e=ue(e),SC(i,e,t)}}function zp(n,e,t){n.value!==null?t(e,n.value):Lk(n,(r,i)=>{let s=new se(e.toString()+"/"+r);zp(i,s,t)})}function Lk(n,e){n.children.forEach((t,r)=>{e(r,t)})}var Wp=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qe(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var FI=10*1e3,jk=30*1e3,Uk=5*60*1e3,qp=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Wp(e);let r=FI+(jk-FI)*Math.random();Ro(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Qe(e,(i,s)=>{s>0&&Jt(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Ro(this.reportStats_.bind(this),Math.floor(Math.random()*2*Uk))}};var en=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(en||{});function TC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _g(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Eg(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Gp=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=en.ACK_USER_WRITE,this.source=TC()}operationForChild(e){if(z(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new se(e));return new n(ee(),t,this.revert)}}else return y(q(this.path)===e,"operationForChild called for unrelated child."),new n(ue(this.path),this.affectedTree,this.revert)}};var Dl=class n{constructor(e,t){this.source=e,this.path=t,this.type=en.LISTEN_COMPLETE}operationForChild(e){return z(this.path)?new n(this.source,ee()):new n(this.source,ue(this.path))}};var ns=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=en.OVERWRITE}operationForChild(e){return z(this.path)?new n(this.source,ee(),this.snap.getImmediateChild(e)):new n(this.source,ue(this.path),this.snap)}};var bl=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=en.MERGE}operationForChild(e){if(z(this.path)){let t=this.children.subtree(new se(e));return t.isEmpty()?null:t.value?new ns(this.source,ee(),t.value):new n(this.source,ee(),t)}else return y(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var tn=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(z(e))return this.isFullyInitialized()&&!this.filtered_;let t=q(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Kp=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Vk(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(kk(o.childName,o.snapshotNode))}),Mo(n,i,"child_removed",e,r,t),Mo(n,i,"child_added",e,r,t),Mo(n,i,"child_moved",s,r,t),Mo(n,i,"child_changed",e,r,t),Mo(n,i,"value",e,r,t),i}function Mo(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>Bk(n,a,c)),o.forEach(a=>{let c=$k(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function $k(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Bk(n,e,t){if(e.childName==null||t.childName==null)throw Nr("Should only compare child_ events.");let r=new B(e.childName,e.snapshotNode),i=new B(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Fl(n,e){return{eventCache:n,serverCache:e}}function Po(n,e,t,r){return Fl(new tn(e,t,r),n.serverCache)}function AC(n,e,t,r){return Fl(n.eventCache,new tn(e,t,r))}function Sl(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function $r(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var mp,Hk=()=>(mp||(mp=new _t(zO)),mp),Ze=class n{constructor(e,t=Hk()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Qe(e,(r,i)=>{t=t.set(new se(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ee(),value:this.value};if(z(e))return null;{let r=q(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ue(e),t);return s!=null?{path:Ie(new se(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(z(e))return this;{let t=q(e),r=this.children.get(t);return r!==null?r.subtree(ue(e)):new n(null)}}set(e,t){if(z(e))return new n(t,this.children);{let r=q(e),s=(this.children.get(r)||new n(null)).set(ue(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(z(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=q(e),r=this.children.get(t);if(r){let i=r.remove(ue(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(z(e))return this.value;{let t=q(e),r=this.children.get(t);return r?r.get(ue(e)):null}}setTree(e,t){if(z(e))return t;{let r=q(e),s=(this.children.get(r)||new n(null)).setTree(ue(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(ee(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ie(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ee(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(z(e))return null;{let s=q(e),o=this.children.get(s);return o?o.findOnPath_(ue(e),Ie(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ee(),t)}foreachOnPath_(e,t,r){if(z(e))return this;{this.value&&r(t,this.value);let i=q(e),s=this.children.get(i);return s?s.foreachOnPath_(ue(e),Ie(t,i),r):new n(null)}}foreach(e){this.foreach_(ee(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ie(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var kt=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Ze(null))}};function Oo(n,e,t){if(z(e))return new kt(new Ze(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=He(i,e);return s=s.updateChild(o,t),new kt(n.writeTree_.set(i,s))}else{let i=new Ze(t),s=n.writeTree_.setTree(e,i);return new kt(s)}}}function LI(n,e,t){let r=n;return Qe(t,(i,s)=>{r=Oo(r,Ie(e,i),s)}),r}function jI(n,e){if(z(e))return kt.empty();{let t=n.writeTree_.setTree(e,new Ze(null));return new kt(t)}}function Yp(n,e){return Br(n,e)!=null}function Br(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(He(t.path,e)):null}function UI(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(ge,(r,i)=>{e.push(new B(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new B(r,i.value))}),e}function Zn(n,e){if(z(e))return n;{let t=Br(n,e);return t!=null?new kt(new Ze(t)):new kt(n.writeTree_.subtree(e))}}function Qp(n){return n.writeTree_.isEmpty()}function rs(n,e){return NC(ee(),n.writeTree_,e)}function NC(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(y(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=NC(Ie(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Ie(n,".priority"),r)),t}}function Ll(n,e){return PC(e,n)}function zk(n,e,t,r,i){y(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Oo(n.visibleWrites,e,t)),n.lastWriteId=r}function Wk(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function qk(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);y(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&Gk(a,r.path)?i=!1:Ot(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Kk(n),!0;if(r.snap)n.visibleWrites=jI(n.visibleWrites,r.path);else{let a=r.children;Qe(a,c=>{n.visibleWrites=jI(n.visibleWrites,Ie(r.path,c))})}return!0}else return!1}function Gk(n,e){if(n.snap)return Ot(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Ot(Ie(n.path,t),e))return!0;return!1}function Kk(n){n.visibleWrites=MC(n.allWrites,Yk,ee()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Yk(n){return n.visible}function MC(n,e,t){let r=kt.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Ot(t,o)?(a=He(t,o),r=Oo(r,a,s.snap)):Ot(o,t)&&(a=He(o,t),r=Oo(r,ee(),s.snap.getChild(a)));else if(s.children){if(Ot(t,o))a=He(t,o),r=LI(r,a,s.children);else if(Ot(o,t))if(a=He(o,t),z(a))r=LI(r,ee(),s.children);else{let c=Mr(s.children,q(a));if(c){let l=c.getChild(ue(a));r=Oo(r,ee(),l)}}}else throw Nr("WriteRecord should have .snap or .children")}}return r}function RC(n,e,t,r,i){if(!r&&!i){let s=Br(n.visibleWrites,e);if(s!=null)return s;{let o=Zn(n.visibleWrites,e);if(Qp(o))return t;if(t==null&&!Yp(o,ee()))return null;{let a=t||L.EMPTY_NODE;return rs(o,a)}}}else{let s=Zn(n.visibleWrites,e);if(!i&&Qp(s))return t;if(!i&&t==null&&!Yp(s,ee()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ot(l.path,e)||Ot(e,l.path))},a=MC(n.allWrites,o,e),c=t||L.EMPTY_NODE;return rs(a,c)}}}function Qk(n,e,t){let r=L.EMPTY_NODE,i=Br(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ge,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=Zn(n.visibleWrites,e);return t.forEachChild(ge,(o,a)=>{let c=rs(Zn(s,new se(o)),a);r=r.updateImmediateChild(o,c)}),UI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Zn(n.visibleWrites,e);return UI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Zk(n,e,t,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ie(e,t);if(Yp(n.visibleWrites,s))return null;{let o=Zn(n.visibleWrites,s);return Qp(o)?i.getChild(t):rs(o,i.getChild(t))}}function Jk(n,e,t,r){let i=Ie(e,t),s=Br(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=Zn(n.visibleWrites,i);return rs(o,r.getNode().getImmediateChild(t))}else return null}function Xk(n,e){return Br(n.visibleWrites,e)}function eF(n,e,t,r,i,s,o){let a,c=Zn(n.visibleWrites,e),l=Br(c,ee());if(l!=null)a=l;else if(t!=null)a=rs(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function tF(){return{visibleWrites:kt.empty(),allWrites:[],lastWriteId:-1}}function Tl(n,e,t,r){return RC(n.writeTree,n.treePath,e,t,r)}function wg(n,e){return Qk(n.writeTree,n.treePath,e)}function VI(n,e,t,r){return Zk(n.writeTree,n.treePath,e,t,r)}function Al(n,e){return Xk(n.writeTree,Ie(n.treePath,e))}function nF(n,e,t,r,i,s){return eF(n.writeTree,n.treePath,e,t,r,i,s)}function Ig(n,e,t){return Jk(n.writeTree,n.treePath,e,t)}function xC(n,e){return PC(Ie(n.treePath,e),n.writeTree)}function PC(n,e){return{treePath:n,writeTree:e}}var Zp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;y(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Lo(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,Fo(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,ts(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Lo(r,e.snapshotNode,i.oldSnap));else throw Nr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Jp=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},OC=new Jp,Uo=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new tn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ig(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$r(this.viewCache_),s=nF(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function rF(n){return{filter:n}}function iF(n,e){y(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),y(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function sF(n,e,t,r,i){let s=new Zp,o,a;if(t.type===en.OVERWRITE){let l=t;l.source.fromUser?o=Xp(n,e,l.path,l.snap,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!z(l.path),o=Nl(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===en.MERGE){let l=t;l.source.fromUser?o=aF(n,e,l.path,l.children,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=eg(n,e,l.path,l.children,r,i,a,s))}else if(t.type===en.ACK_USER_WRITE){let l=t;l.revert?o=uF(n,e,l.path,r,i,s):o=cF(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===en.LISTEN_COMPLETE)o=lF(n,e,t.path,r,s);else throw Nr("Unknown operation type: "+t.type);let c=s.getChanges();return oF(e,o,c),{viewCache:o,changes:c}}function oF(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Sl(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(bC(Sl(e)))}}function kC(n,e,t,r,i,s){let o=e.eventCache;if(Al(r,t)!=null)return e;{let a,c;if(z(t))if(y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=$r(e),u=l instanceof L?l:L.EMPTY_NODE,d=wg(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Tl(r,$r(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=q(t);if(l===".priority"){y(Xn(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=VI(r,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=ue(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=VI(r,t,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=Ig(r,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Po(e,a,o.isFullyInitialized()||z(t),n.filter.filtersNodes())}}function Nl(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(z(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=q(t);if(!c.isCompleteForPath(t)&&Xn(t)>1)return e;let p=ue(t),m=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),m):l=u.updateChild(c.getNode(),h,m,p,OC,null)}let d=AC(e,l,c.isFullyInitialized()||z(t),u.filtersNodes()),f=new Uo(i,d,s);return kC(n,d,t,i,f,a)}function Xp(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new Uo(i,e,s);if(z(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Po(e,l,!0,n.filter.filtersNodes());else{let d=q(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Po(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ue(t),h=a.getNode().getImmediateChild(d),p;if(z(f))p=r;else{let g=u.getCompleteChild(d);g!=null?mC(f)===".priority"&&g.getChild(vC(f)).isEmpty()?p=g:p=g.updateChild(f,r):p=L.EMPTY_NODE}if(h.equals(p))c=e;else{let g=n.filter.updateChild(a.getNode(),d,p,f,u,o);c=Po(e,g,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function $I(n,e){return n.eventCache.isCompleteForChild(e)}function aF(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=Ie(t,c);$I(e,q(u))&&(a=Xp(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=Ie(t,c);$I(e,q(u))||(a=Xp(n,a,u,l,i,s,o))}),a}function BI(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function eg(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;z(t)?l=r:l=new Ze(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=BI(n,h,f);c=Nl(n,c,new se(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),g=BI(n,p,f);c=Nl(n,c,new se(d),g,i,s,o,a)}}),c}function cF(n,e,t,r,i,s,o){if(Al(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(z(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Nl(n,e,t,c.getNode().getChild(t),i,s,a,o);if(z(t)){let l=new Ze(null);return c.getNode().forEachChild(Qi,(u,d)=>{l=l.set(new se(u),d)}),eg(n,e,t,l,i,s,a,o)}else return e}else{let l=new Ze(null);return r.foreach((u,d)=>{let f=Ie(t,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),eg(n,e,t,l,i,s,a,o)}}function lF(n,e,t,r,i){let s=e.serverCache,o=AC(e,s.getNode(),s.isFullyInitialized()||z(t),s.isFiltered());return kC(n,o,t,r,OC,i)}function uF(n,e,t,r,i,s){let o;if(Al(r,t)!=null)return e;{let a=new Uo(r,e,i),c=e.eventCache.getNode(),l;if(z(t)||q(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Tl(r,$r(e));else{let d=e.serverCache.getNode();y(d instanceof L,"serverChildren would be complete if leaf node"),u=wg(r,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=q(t),d=Ig(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,ue(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,L.EMPTY_NODE,ue(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Tl(r,$r(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Al(r,ee())!=null,Po(e,l,o,n.filter.filtersNodes())}}var tg=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new jo(r.getIndex()),s=Fk(r);this.processor_=rF(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(L.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(L.EMPTY_NODE,a.getNode(),null),u=new tn(c,o.isFullyInitialized(),i.filtersNodes()),d=new tn(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Fl(d,u),this.eventGenerator_=new Kp(this.query_)}get query(){return this.query_}};function dF(n){return n.viewCache_.serverCache.getNode()}function fF(n){return Sl(n.viewCache_)}function hF(n,e){let t=$r(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!z(e)&&!t.getImmediateChild(q(e)).isEmpty())?t.getChild(e):null}function HI(n){return n.eventRegistrations_.length===0}function pF(n,e){n.eventRegistrations_.push(e)}function zI(n,e,t){let r=[];if(t){y(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function WI(n,e,t,r){e.type===en.MERGE&&e.source.queryId!==null&&(y($r(n.viewCache_),"We should always have a full cache before handling merges"),y(Sl(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=sF(n.processor_,i,e,t,r);return iF(n.processor_,s.viewCache),y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,FC(n,s.changes,s.viewCache.eventCache.getNode(),null)}function gF(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ge,(s,o)=>{r.push(ts(s,o))}),t.isFullyInitialized()&&r.push(bC(t.getNode())),FC(n,r,t.getNode(),e)}function FC(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return Vk(n.eventGenerator_,e,t,i)}var Ml,Rl=class{constructor(){this.views=new Map}};function mF(n){y(!Ml,"__referenceConstructor has already been defined"),Ml=n}function yF(){return y(Ml,"Reference.ts has not been loaded"),Ml}function vF(n){return n.views.size===0}function Cg(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return y(s!=null,"SyncTree gave us an op for an invalid query."),WI(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(WI(o,e,t,r));return s}}function LC(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Tl(t,i?r:null),c=!1;a?c=!0:r instanceof L?(a=wg(t,r),c=!1):(a=L.EMPTY_NODE,c=!1);let l=Fl(new tn(a,c,!1),new tn(r,i,!1));return new tg(e,l)}return o}function _F(n,e,t,r,i,s){let o=LC(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),pF(o,t),gF(o,t)}function EF(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=er(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat(zI(l,t,r)),HI(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat(zI(c,t,r)),HI(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!er(n)&&s.push(new(yF())(e._repo,e._path)),{removed:s,events:o}}function jC(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jn(n,e){let t=null;for(let r of n.views.values())t=t||hF(r,e);return t}function UC(n,e){if(e._queryParams.loadsAllData())return jl(n);{let r=e._queryIdentifier;return n.views.get(r)}}function VC(n,e){return UC(n,e)!=null}function er(n){return jl(n)!=null}function jl(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var xl;function wF(n){y(!xl,"__referenceConstructor has already been defined"),xl=n}function IF(){return y(xl,"Reference.ts has not been loaded"),xl}var CF=1,Pl=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ze(null),this.pendingWriteTree_=tF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function $C(n,e,t,r,i){return zk(n.pendingWriteTree_,e,t,r,i),i?qo(n,new ns(TC(),e,t)):[]}function jr(n,e,t=!1){let r=Wk(n.pendingWriteTree_,e);if(qk(n.pendingWriteTree_,e)){let s=new Ze(null);return r.snap!=null?s=s.set(ee(),!0):Qe(r.children,o=>{s=s.set(new se(o),!0)}),qo(n,new Gp(r.path,s,t))}else return[]}function Wo(n,e,t){return qo(n,new ns(_g(),e,t))}function DF(n,e,t){let r=Ze.fromObject(t);return qo(n,new bl(_g(),e,r))}function bF(n,e){return qo(n,new Dl(_g(),e))}function SF(n,e,t){let r=bg(n,t);if(r){let i=Sg(r),s=i.path,o=i.queryId,a=He(s,e),c=new Dl(Eg(o),a);return Tg(n,s,c)}else return[]}function BC(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||VC(o,e))){let c=EF(o,e,t,r);vF(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(f,h)=>er(h));if(u&&!d){let f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=MF(f);for(let p=0;p<h.length;++p){let g=h[p],m=g.query,I=qC(n,g);n.listenProvider_.startListening(ko(m),Vo(n,m),I.hashFn,I.onComplete)}}}!d&&l.length>0&&!r&&(u?n.listenProvider_.stopListening(ko(e),null):l.forEach(f=>{let h=n.queryToTagMap.get(Ul(f));n.listenProvider_.stopListening(ko(f),h)}))}RF(n,l)}return a}function HC(n,e,t,r){let i=bg(n,r);if(i!=null){let s=Sg(i),o=s.path,a=s.queryId,c=He(o,e),l=new ns(Eg(a),c,t);return Tg(n,o,l)}else return[]}function TF(n,e,t,r){let i=bg(n,r);if(i){let s=Sg(i),o=s.path,a=s.queryId,c=He(o,e),l=Ze.fromObject(t),u=new bl(Eg(a),c,l);return Tg(n,o,u)}else return[]}function AF(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=He(f,i);s=s||Jn(h,p),o=o||er(h)});let a=n.syncPointTree_.get(i);a?(o=o||er(a),s=s||Jn(a,ee())):(a=new Rl,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=L.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((h,p)=>{let g=Jn(p,ee());g&&(s=s.updateImmediateChild(h,g))}));let l=VC(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Ul(e);y(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=xF();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}let u=Ll(n.pendingWriteTree_,i),d=_F(a,e,t,u,s,c);if(!l&&!o&&!r){let f=UC(a,e);d=d.concat(PF(n,e,f))}return d}function Dg(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=He(o,e),l=Jn(a,c);if(l)return l});return RC(i,e,s,t,!0)}function NF(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{let d=He(l,t);r=r||Jn(u,d)});let i=n.syncPointTree_.get(t);i?r=r||Jn(i,ee()):(i=new Rl,n.syncPointTree_=n.syncPointTree_.set(t,i));let s=r!=null,o=s?new tn(r,!0,!1):null,a=Ll(n.pendingWriteTree_,e._path),c=LC(i,e,a,s?o.getNode():L.EMPTY_NODE,s);return fF(c)}function qo(n,e){return zC(e,n.syncPointTree_,null,Ll(n.pendingWriteTree_,ee()))}function zC(n,e,t,r){if(z(n.path))return WC(n,e,t,r);{let i=e.get(ee());t==null&&i!=null&&(t=Jn(i,ee()));let s=[],o=q(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=xC(r,o);s=s.concat(zC(a,c,l,u))}return i&&(s=s.concat(Cg(i,n,r,t))),s}}function WC(n,e,t,r){let i=e.get(ee());t==null&&i!=null&&(t=Jn(i,ee()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=xC(r,o),u=n.operationForChild(o);u&&(s=s.concat(WC(u,a,c,l)))}),i&&(s=s.concat(Cg(i,n,r,t))),s}function qC(n,e){let t=e.query,r=Vo(n,t);return{hashFn:()=>(dF(e)||L.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?SF(n,t._path,r):bF(n,t._path);{let s=GO(i,t);return BC(n,t,null,s)}}}}function Vo(n,e){let t=Ul(e);return n.queryToTagMap.get(t)}function Ul(n){return n._path.toString()+"$"+n._queryIdentifier}function bg(n,e){return n.tagToQueryMap.get(e)}function Sg(n){let e=n.indexOf("$");return y(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new se(n.substr(0,e))}}function Tg(n,e,t){let r=n.syncPointTree_.get(e);y(r,"Missing sync point for query tag that we're tracking");let i=Ll(n.pendingWriteTree_,e);return Cg(r,t,i,null)}function MF(n){return n.fold((e,t,r)=>{if(t&&er(t))return[jl(t)];{let i=[];return t&&(i=jC(t)),Qe(r,(s,o)=>{i=i.concat(o)}),i}})}function ko(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(IF())(n._repo,n._path):n}function RF(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Ul(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function xF(){return CF++}function PF(n,e,t){let r=e._path,i=Vo(n,e),s=qC(n,t),o=n.listenProvider_.startListening(ko(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)y(!er(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!z(l)&&u&&er(u))return[jl(u).query];{let f=[];return u&&(f=f.concat(jC(u).map(h=>h.query))),Qe(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(ko(u),Vo(n,u))}}return o}var ng=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},rg=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Ie(this.path_,e);return new n(this.syncTree_,t)}node(){return Dg(this.syncTree_,this.path_)}},OF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},qI=function(n,e,t){if(!n||typeof n!="object")return n;if(y(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return kF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return FF(n[".sv"],e);y(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},kF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:y(!1,"Unexpected server value: "+n)}},FF=function(n,e,t){n.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=e.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},LF=function(n,e,t,r){return Ag(e,new rg(t,n),r)},GC=function(n,e,t){return Ag(n,new ng(e),t)};function Ag(n,e,t){let r=n.getPriority().val(),i=qI(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=qI(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Xi(a,Ne(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Xi(i))),o.forEachChild(ge,(a,c)=>{let l=Ag(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var $o=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function Ng(n,e){let t=e instanceof se?e:new se(e),r=n,i=q(t);for(;i!==null;){let s=Mr(r.node.children,i)||{children:{},childCount:0};r=new $o(i,r,s),t=ue(t),i=q(t)}return r}function os(n){return n.node.value}function KC(n,e){n.node.value=e,ig(n)}function YC(n){return n.node.childCount>0}function jF(n){return os(n)===void 0&&!YC(n)}function Vl(n,e){Qe(n.node.children,(t,r)=>{e(new $o(t,n,r))})}function QC(n,e,t,r){t&&!r&&e(n),Vl(n,i=>{QC(i,e,!0,r)}),t&&r&&e(n)}function UF(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Go(n){return new se(n.parent===null?n.name:Go(n.parent)+"/"+n.name)}function ig(n){n.parent!==null&&VF(n.parent,n.name,n)}function VF(n,e,t){let r=jF(t),i=Jt(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ig(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ig(n))}var $F=/[\[\].#$\/\u0000-\u001F\u007F]/,BF=/[\[\].#$\u0000-\u001F\u007F]/,yp=10*1024*1024,ZC=function(n){return typeof n=="string"&&n.length!==0&&!$F.test(n)},JC=function(n){return typeof n=="string"&&n.length!==0&&!BF.test(n)},HF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),JC(n)};var zF=function(n,e,t,r){r&&e===void 0||Mg(Qc(n,"value"),e,t)},Mg=function(n,e,t){let r=t instanceof se?new Rp(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Fr(r));if(typeof e=="function")throw new Error(n+"contains a function "+Fr(r)+" with contents = "+e.toString());if(JI(e))throw new Error(n+"contains "+e.toString()+" "+Fr(r));if(typeof e=="string"&&e.length>yp/3&&fo(e)>yp)throw new Error(n+"contains a string greater than "+yp+" utf8 bytes "+Fr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Qe(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!ZC(o)))throw new Error(n+" contains an invalid key ("+o+") "+Fr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ik(r,o),Mg(n,a,r),Ck(r)}),i&&s)throw new Error(n+' contains ".value" child '+Fr(r)+" in addition to actual children.")}};var XC=function(n,e,t,r){if(!(r&&t===void 0)&&!JC(t))throw new Error(Qc(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},WF=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),XC(n,e,t,r)},qF=function(n,e){if(q(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},GF=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ZC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!HF(t))throw new Error(Qc(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var sg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function eD(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!_C(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function nn(n,e,t){eD(n,t),KF(n,r=>Ot(r,e)||Ot(e,r))}function KF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(YF(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function YF(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Ur&&Le("event: "+t.toString()),ss(r)}}}var QF="repo_interrupt",ZF=25,og=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cl(),this.transactionQueueTree_=new $o,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function JF(n,e,t){if(n.stats_=mg(n.repoInfo_),n.forceRestClient_||ZO())n.server_=new Bp(n.repoInfo_,(r,i,s,o)=>{GI(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>KI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new yg(n.repoInfo_,e,(r,i,s,o)=>{GI(n,r,i,s,o)},r=>{KI(n,r)},r=>{eL(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=XO(n.repoInfo_,()=>new qp(n.stats_,n.server_)),n.infoData_=new Hp,n.infoSyncTree_=new Pl({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Wo(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),xg(n,"connected",!1),n.serverSyncTree_=new Pl({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);nn(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function XF(n){let t=n.infoData_.getNode(new se(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Rg(n){return OF({timestamp:XF(n)})}function GI(n,e,t,r,i){n.dataUpdateCount++;let s=new se(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=co(t,l=>Ne(l));o=TF(n.serverSyncTree_,s,c,i)}else{let c=Ne(t);o=HC(n.serverSyncTree_,s,c,i)}else if(r){let c=co(t,l=>Ne(l));o=DF(n.serverSyncTree_,s,c)}else{let c=Ne(t);o=Wo(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Bl(n,s)),nn(n.eventQueue_,a,o)}function KI(n,e){xg(n,"connected",e),e===!1&&rL(n)}function eL(n,e){Qe(e,(t,r)=>{xg(n,t,r)})}function xg(n,e,t){let r=new se("/.info/"+e),i=Ne(t);n.infoData_.updateSnapshot(r,i);let s=Wo(n.infoSyncTree_,r,i);nn(n.eventQueue_,r,s)}function tD(n){return n.nextWriteId_++}function tL(n,e,t){let r=NF(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let s=Ne(i).withIndex(e._queryParams.getIndex());AF(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=Wo(n.serverSyncTree_,e._path,s);else{let a=Vo(n.serverSyncTree_,e);o=HC(n.serverSyncTree_,e._path,s,a)}return nn(n.eventQueue_,e._path,o),BC(n.serverSyncTree_,e,t,null,!0),s},i=>($l(n,"get for query "+ve(e)+" failed: "+i),Promise.reject(new Error(i))))}function nL(n,e,t,r,i){$l(n,"set",{path:e.toString(),value:t,priority:r});let s=Rg(n),o=Ne(t,r),a=Dg(n.serverSyncTree_,e),c=GC(o,a,s),l=tD(n),u=$C(n.serverSyncTree_,e,c,l,!0);eD(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,h)=>{let p=f==="ok";p||Ye("set at "+e+" failed: "+f);let g=jr(n.serverSyncTree_,l,!p);nn(n.eventQueue_,e,g),sL(n,i,f,h)});let d=oD(n,e);Bl(n,d),nn(n.eventQueue_,d,[])}function rL(n){$l(n,"onDisconnectEvents");let e=Rg(n),t=Cl();zp(n.onDisconnect_,ee(),(i,s)=>{let o=LF(i,s,n.serverSyncTree_,e);SC(t,i,o)});let r=[];zp(t,ee(),(i,s)=>{r=r.concat(Wo(n.serverSyncTree_,i,s));let o=oD(n,i);Bl(n,o)}),n.onDisconnect_=Cl(),nn(n.eventQueue_,ee(),r)}function iL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(QF)}function $l(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Le(t,...e)}function sL(n,e,t,r){e&&ss(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function nD(n,e,t){return Dg(n.serverSyncTree_,e,t)||L.EMPTY_NODE}function Pg(n,e=n.transactionQueueTree_){if(e||Hl(n,e),os(e)){let t=iD(n,e);y(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&oL(n,Go(e),t)}else YC(e)&&Vl(e,t=>{Pg(n,t)})}function oL(n,e,t){let r=t.map(l=>l.currentWriteId),i=nD(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=He(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{$l(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(jr(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Hl(n,Ng(n.transactionQueueTree_,e)),Pg(n,n.transactionQueueTree_),nn(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)ss(d[f])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Ye("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}Bl(n,e)}},o)}function Bl(n,e){let t=rD(n,e),r=Go(t),i=iD(n,t);return aL(n,i,r),r}function aL(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=He(t,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(jr(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=ZF)u=!0,d="maxretry",i=i.concat(jr(n.serverSyncTree_,c.currentWriteId,!0));else{let f=nD(n,c.path,o);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Mg("transaction failed: Data returned ",h,c.path);let p=Ne(h);typeof h=="object"&&h!=null&&Jt(h,".priority")||(p=p.updatePriority(f.getPriority()));let m=c.currentWriteId,I=Rg(n),T=GC(p,f,I);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=T,c.currentWriteId=tD(n),o.splice(o.indexOf(m),1),i=i.concat($C(n.serverSyncTree_,c.path,T,c.currentWriteId,c.applyLocally)),i=i.concat(jr(n.serverSyncTree_,m,!0))}else u=!0,d="nodata",i=i.concat(jr(n.serverSyncTree_,c.currentWriteId,!0))}nn(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Hl(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)ss(r[a]);Pg(n,n.transactionQueueTree_)}function rD(n,e){let t,r=n.transactionQueueTree_;for(t=q(e);t!==null&&os(r)===void 0;)r=Ng(r,t),e=ue(e),t=q(e);return r}function iD(n,e){let t=[];return sD(n,e,t),t.sort((r,i)=>r.order-i.order),t}function sD(n,e,t){let r=os(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Vl(e,i=>{sD(n,i,t)})}function Hl(n,e){let t=os(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,KC(e,t.length>0?t:void 0)}Vl(e,r=>{Hl(n,r)})}function oD(n,e){let t=Go(rD(n,e)),r=Ng(n.transactionQueueTree_,e);return UF(r,i=>{vp(n,i)}),vp(n,r),QC(r,i=>{vp(n,i)}),t}function vp(n,e){let t=os(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(y(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(y(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(jr(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?KC(e,void 0):t.length=s+1,nn(n.eventQueue_,Go(e),i);for(let o=0;o<r.length;o++)ss(r[o])}}function cL(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function lL(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ye(`Invalid query segment '${t}' in query '${n}'`)}return e}var YI=function(n,e){let t=uL(n),r=t.namespace;t.domain==="firebase.com"&&yn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||BO();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new gl(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new se(t.pathString)}},uL=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=cL(n.substring(u,d)));let f=lL(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var ag=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}},cg=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var lg=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var ug=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return z(this._path)?null:mC(this._path)}get ref(){return new vn(this._repo,this._path)}get _queryIdentifier(){let e=kI(this._queryParams),t=gg(e);return t==="{}"?"default":t}get _queryObject(){return kI(this._queryParams)}isEqual(e){if(e=yt(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=_C(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+wk(this._path)}};var vn=class n extends ug{constructor(e,t){super(e,t,new $p,!1)}get parent(){let e=vC(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Ol=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new se(e),r=kl(this.ref,e);return new n(this._node.getChild(t),r,ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,kl(this.ref,r),ge)))}hasChild(e){let t=new se(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function aD(n,e){return n=yt(n),n._checkNotDeleted("ref"),e!==void 0?kl(n._root,e):n._root}function kl(n,e){return n=yt(n),q(n._path)===null?WF("child","path",e,!1):XC("child","path",e,!1),new vn(n._repo,Ie(n._path,e))}function cD(n,e){n=yt(n),qF("set",n._path),zF("set",e,n._path,!1);let t=new Wn;return nL(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function lD(n){n=yt(n);let e=new lg(()=>{}),t=new dg(e);return tL(n._repo,n,t).then(r=>new Ol(r,new vn(n._repo,n._path),n._queryParams.getIndex()))}var dg=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new ag("value",this,new Ol(e.snapshotNode,new vn(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new cg(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};mF(vn);wF(vn);var dL="FIREBASE_DATABASE_EMULATOR_HOST",fg={},fL=!1;function hL(n,e,t,r){n.repoInfo_=new gl(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function pL(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Le("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=YI(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[dL]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=YI(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new xo(xo.OWNER):new Dp(n.name,n.options,e);GF("Invalid Firebase Database URL",o),z(o.path)||yn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=mL(a,n,u,new Cp(n.name,t));return new hg(d,n)}function gL(n,e){let t=fg[e];(!t||t[n.key]!==n)&&yn(`Database ${e}(${n.repoInfo_}) has already been deleted.`),iL(n),delete t[n.key]}function mL(n,e,t,r){let i=fg[e.name];i||(i={},fg[e.name]=i);let s=i[n.toURLString()];return s&&yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new og(n,fL,t,r),i[n.toURLString()]=s,s}var hg=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vn(this._repo,ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(gL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yn("Cannot call "+e+" on a deleted database.")}};function uD(n=mo(),e){let t=Gh(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Sw("database");r&&dD(t,...r)}return t}function dD(n,e,t,r={}){n=yt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&yn("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xo(xo.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Aw(r.mockUserToken,n.app.options.projectId);s=new xo(o)}hL(i,e,t,s)}function yL(n){UO(zi),Kn(new vt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return pL(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Ae(vI,_I,n),Ae(vI,_I,"esm2017")}yg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};yg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};yL();var Hr=class{constructor(e){return e}},fD="database",Og=class{constructor(){return vo(fD)}};var kg=new P("angularfire2.database-instances");function vL(n,e){let t=Qh(fD,n,e);return t&&new Hr(t)}function _L(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hr(r)}}var EL={provide:Og,deps:[[new Tt,kg]]},wL={provide:Hr,useFactory:vL,deps:[[new Tt,kg],Pr]};function hD(n,...e){return Ae("angularfire",qi.full,"rtdb"),kn([wL,EL,{provide:kg,useFactory:_L(n),multi:!0,deps:[oe,St,_o,Eo,[new Tt,fl],[new Tt,yo],...e]}])}var Fg=Yn(lD,!0),zl=Yn(uD,!0);var Lg=Yn(aD,!0);var pD=Yn(cD,!0);var Ko=_b(RD());var xD=(()=>{class n{rng=(0,Ko.default)(pn.getToday());constructor(){this.rng=(0,Ko.default)(pn.getToday())}setTodaySeed(){this.rng=(0,Ko.default)(pn.getToday())}setSeed(t){this.rng=(0,Ko.default)(t)}getRandom(){return this.rng()}getRandomInt(t,r){return Math.floor(this.rng()*(r-t+1))+t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NL(n,e){if(n&1){let t=J_();ae(0,"app-card",22),Ge("CardSelected",function(i){Yd(t);let s=dn(2);return Qd(s.cardSelected(i))})("CardUnSelected",function(i){Yd(t);let s=dn(2);return Qd(s.cardUnSelected(i))}),ce()}if(n&2){let t=e.$implicit;Re("CardInfo",t),vc("id",t.Id)}}function ML(n,e){if(n&1&&(ae(0,"div",20),Nt(1,NL,1,2,"app-card",21),ce()),n&2){let t=dn();Re("@list",void 0),ye(),Re("ngForOf",t.Tabel)}}function RL(n,e){if(n&1&&$e(0,"app-card",25),n&2){let t=e.$implicit;Re("CardInfo",t)("Found",!0)}}function xL(n,e){if(n&1&&(ae(0,"div",23),Nt(1,RL,1,2,"app-card",24),ce()),n&2){let t=e.$implicit;ye(),Re("ngForOf",t)}}function PL(n,e){n&1&&(ae(0,"td"),xe(1,"No results today yet."),ce())}function OL(n,e){if(n&1&&(ae(0,"tr")(1,"td"),xe(2),ce(),ae(3,"td",26),xe(4),ce(),ae(5,"td"),xe(6),ce()()),n&2){let t=e.$implicit,r=e.$index,i=dn();ye(2),jn("",r+1,"."),ye(2),_r(t.user),ye(2),_r(i.formatTime(t.time))}}var zg=(()=>{class n{randomService;route;elementRef;cdr;router;database=E(Hr);GameType="daily";title="daily-set";Deck=new to;SelectedCards=[];Tabel=[];Found=[];FoundIds=[];ExistingIds=[];SetCount=0;TotalSeconds=0;Time="00:00";Started=new Date().getTime();TimeHandle=null;showDialog=!1;dialogMessage="";Today=pn.getToday();HintCount=0;UserName="Guest";Toplist=[];ShowToplist=!1;GameId="";RenderGrid=!0;constructor(t,r,i,s,o){this.randomService=t,this.route=r,this.elementRef=i,this.cdr=s,this.router=o,this.setUserName(),this.route.params.subscribe(a=>{let c=a.id;c?this.startRandom(c):(console.log({id:c}),this.startDaily())})}showToplist(){this.getTopList(this.Today).then(t=>{this.Toplist=t,this.ShowToplist=!0})}storeResult(t,r,i){if(this.GameType==="random")return;let s=`${r}/${t}`,o=Lg(this.database,s);Fg(o).then(a=>{if(a.exists()){console.log("Data already exists. Not saving.");return}pD(o,{time:i}).then(()=>{console.log("Data saved successfully!")}).catch(c=>{console.error("Error saving data:",c)})}).catch(a=>{console.error("Error checking existing data:",a)})}getTopList(t,r=10){return _(this,null,function*(){let i=zl(),s=Lg(i,t);try{let o=yield Fg(s);if(!o.exists())return console.log("No results found for this gameId."),[];let a=[];return o.forEach(c=>{let l=c.key,u=c.val().time;a.push({user:l,time:u})}),a.sort((c,l)=>c.time-l.time).slice(0,r)}catch(o){return console.error("Error fetching top list:",o),[]}})}getCardPath(t){return`set_picts/${t.Shape}_${t.Fill}_${t.Color}.png`}startTime(){this.TimeHandle=setInterval(()=>{let r=new Date().getTime()-this.Started,i=Math.floor(r/1e3);i+=this.HintCount*60,this.TotalSeconds=i;let s=this.formatTime(i);this.Time=s},1e3)}formatTime(t){let r=Math.floor(t/60),i=t%60;return`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}cardUnSelected(t){let r=this.SelectedCards.indexOf(t);r>-1&&this.SelectedCards.splice(r,1)}shake(t){t.forEach(r=>r.Shake=!0),setTimeout(()=>t.forEach(r=>r.Shake=!1),450)}cardSelected(t){let r=this.SelectedCards;if(r.push(t),r.length==3)if(this.isSet(r[0],r[1],r[2])){r.forEach(s=>s.Selected=!1);let i=this.getId(this.SelectedCards);this.FoundIds.indexOf(i)==-1?(this.FoundIds.push(i),this.Found.push(structuredClone(this.SelectedCards)),this.SelectedCards.forEach(s=>this.blink(s)),this.Found.length===this.SetCount&&(this.storeResult(this.UserName,this.Today,this.TotalSeconds),clearInterval(this.TimeHandle),this.dialogMessage="Good! Your time:"+this.Time,this.showDialog=!0,this.fireConfetti(1200))):this.Found.forEach(s=>{let o=this.getId(s);i===o&&s.forEach(a=>this.blink(a))}),this.SelectedCards=[]}else this.shake(r),setTimeout(()=>{this.SelectedCards.forEach(i=>i.Selected=!1),this.SelectedCards=[]},500)}fireConfetti(t=3e3){let r=document.getElementById("confetti-canvas");if(!r)return;let i=r.getContext("2d"),s=r.width=window.innerWidth,o=r.height=window.innerHeight,a=180,c=s/2,l=o*.9,u=500,d=200,f=700,h=55,p=C=>C*Math.PI/180,g=Array.from({length:a}).map((C,H)=>{let A=-90+(Math.random()*2-1)*h,D=d+Math.random()*(f-d);return{x:c,y:l,vx:Math.cos(p(A))*D,vy:Math.sin(p(A))*D,r:2+Math.random()*4,rot:Math.random()*Math.PI,vr:(-.2+Math.random()*.4)*4,hue:Math.random()*360}}),m=performance.now(),I=m,T=1,w=C=>{let H=Math.min(32,C-I)/1e3;I=C;for(let D of g)D.vy+=u*H,D.x+=D.vx*H,D.y+=D.vy*H,D.rot+=D.vr*H;let A=C-m;T=Math.max(0,1-A/t),i.clearRect(0,0,s,o);for(let D of g)i.save(),i.translate(D.x,D.y),i.rotate(D.rot),i.fillStyle=`hsla(${D.hue}, 90%, 60%, ${T})`,i.fillRect(-D.r,-D.r,D.r*2,D.r*2),i.restore();A<t?requestAnimationFrame(w):i.clearRect(0,0,s,o)};requestAnimationFrame(w)}getId(t){return t.sort((i,s)=>i.Id-s.Id).map(i=>i.Id).join("_")}isSet(t,r,i){return!(!this.allAreSameOrAllDiffer(t.Color,r.Color,i.Color)||!this.allAreSameOrAllDiffer(t.Count,r.Count,i.Count)||!this.allAreSameOrAllDiffer(t.Shape,r.Shape,i.Shape)||!this.allAreSameOrAllDiffer(t.Fill,r.Fill,i.Fill))}allAreSameOrAllDiffer(t,r,i){return t===r&&r===i&&t===i||t!==r&&r!==i&&t!==i}setTable(){for(this.addRandomcard();this.Tabel.length<11&&(this.addRandomcard(),this.Tabel.length!==11);){var t=this.Tabel.length;let s=this.Tabel[t-1],o=this.Tabel[t-2];this.createSetOrAddRandom(s,o)}let r=this.Tabel[10],i=this.Tabel[0];this.createSetOrAddRandom(r,i),this.Tabel=this.shuffelArray(this.Tabel)}shuffelArray(t){let r=t.slice();for(let i=r.length-1;i>0;i--){let s=this.randomService.getRandomInt(0,i);[r[i],r[s]]=[r[s],r[i]]}return r}createSetOrAddRandom(t,r){let i=this.Deck.findMissingSetCard(t,r);i&&!this.Tabel.find(s=>s.Id==i.Id)?this.Tabel.push(i):this.addRandomcard()}addRandomcard(){let t=this.randomService.getRandomInt(0,80),r=this.Deck.Cards[t];this.Tabel.find(i=>i.Id===r.Id)?this.addRandomcard():this.Tabel.push(r)}countSets(){let t=[];for(let r=0;r<this.Tabel.length;r++)for(let i=r+1;i<this.Tabel.length;i++)for(let s=i+1;s<this.Tabel.length;s++)if(this.isSet(this.Tabel[r],this.Tabel[i],this.Tabel[s])){let o=this.getId([this.Tabel[r],this.Tabel[i],this.Tabel[s]]);t.indexOf(o)<0&&t.push(o)}this.SetCount=t.length,this.ExistingIds=t}giveHint(){for(let t=0;t<this.ExistingIds.length;t++){let r=this.ExistingIds[t];if(this.FoundIds.indexOf(r)==-1){let i=r.split("_"),s=this.HintCount%2==0?i[0]:i[1],o=this.Tabel.find(a=>a.Id==parseInt(s));o&&this.blink(o),this.HintCount++;return}}}blink(t){t.Blink=!0,setTimeout(()=>{t.Blink=!1},500)}shuffleCardsTable(){let t=this.elementRef.nativeElement.querySelector(".grid");if(!t)return;let r=Array.from(t.querySelectorAll("app-card")),i=new Map;r.forEach(s=>i.set(s,s.getBoundingClientRect())),this.Tabel=this.shuffelArray(this.Tabel),this.cdr.detectChanges(),requestAnimationFrame(()=>{Array.from(t.querySelectorAll("app-card")).forEach(o=>{let a=i.get(o);if(!a)return;let c=o.getBoundingClientRect(),l=a.left-c.left,u=a.top-c.top;o.style.willChange="transform",o.style.transform=`translate(${l}px, ${u}px)`,requestAnimationFrame(()=>{o.style.transition="transform 1000ms cubic-bezier(.2,.8,.2,1)",o.style.transform="";let d=()=>{o.style.transition="",o.style.willChange="",o.removeEventListener("transitionend",d)};o.addEventListener("transitionend",d)})})})}changeUserName(){let t=prompt("What is your name?");t?localStorage.setItem("set-user-name",t):t="Guest",this.UserName=t}setUserName(){let t=localStorage.getItem("set-user-name");t||(t=prompt("What is your name?"),t?localStorage.setItem("set-user-name",t):t="Guest"),this.UserName=t}navigateToRandom(){let t=Math.floor(Math.random()*1e3).toString();this.router.navigateByUrl(`game/${t}`)}navigateToDaily(){this.router.navigateByUrl("/")}startRandom(t){this.GameType="random",this.GameId=t,this.randomService.setSeed(t),this.startGame()}startDaily(){this.GameType="daily",this.randomService.setTodaySeed(),this.startGame()}startGame(){this.RenderGrid=!1,setTimeout(()=>{this.SelectedCards=[],this.Tabel=[],this.Found=[],this.FoundIds=[],this.ExistingIds=[],this.SetCount=0,this.Time="00:00",this.TotalSeconds=0,this.HintCount=0,this.Started=new Date().getTime(),this.showDialog=!1,this.dialogMessage="",this.Today=pn.getToday(),this.Deck=new to,this.Deck.Cards=this.shuffelArray(this.Deck.Cards),this.setTable(),this.countSets(),this.startTime(),this.RenderGrid=!0})}static \u0275fac=function(r){return new(r||n)(Fe(xD),Fe(Un),Fe(gr),Fe(wr),Fe(zc))};static \u0275cmp=Wt({type:n,selectors:[["app-root"]],standalone:!0,features:[Gt],decls:41,vars:12,consts:[[1,"app-container"],[1,"buttons"],[1,"poker-btn",3,"click"],["src","icons/new-daily.svg","alt","",1,"icon"],["src","icons/random.svg","alt","",1,"icon"],["src","icons/shuffle.svg","alt","","height","20px",1,"icon"],["src","icons/hint.svg","alt","","height","20px",1,"icon"],["src","icons/toplist.svg","alt","",1,"icon"],[1,"card-container"],[1,"tabel"],[1,"sub-header"],["class","grid",4,"ngIf"],[1,"founds-container"],[1,"found-count"],["class","founds-row",4,"ngFor","ngForOf"],[1,"usertime"],["href","#",1,"user",3,"click"],[1,"time"],[3,"click","Visible","Message"],["id","confetti-canvas",1,"confetti"],[1,"grid"],[3,"CardInfo","CardSelected","CardUnSelected",4,"ngFor","ngForOf"],[3,"CardSelected","CardUnSelected","CardInfo"],[1,"founds-row"],[3,"CardInfo","Found",4,"ngFor","ngForOf"],[3,"CardInfo","Found"],[1,"name"]],template:function(r,i){r&1&&(ae(0,"div",0)(1,"div",1)(2,"button",2),Ge("click",function(){return i.navigateToDaily()}),xe(3," Daily "),$e(4,"img",3),ce(),ae(5,"button",2),Ge("click",function(){return i.navigateToRandom()}),xe(6," Random "),$e(7,"img",4),ce(),ae(8,"button",2),Ge("click",function(){return i.shuffleCardsTable()}),xe(9," Shuffle "),$e(10,"img",5),ce(),ae(11,"button",2),Ge("click",function(){return i.giveHint()}),xe(12," Hint "),$e(13,"img",6),ce(),ae(14,"button",2),Ge("click",function(){return i.showToplist()}),xe(15," Toplist "),$e(16,"img",7),ce()(),ae(17,"div",8)(18,"div",9)(19,"div",10)(20,"span"),xe(21),ce(),ae(22,"span"),xe(23),ce()(),Nt(24,ML,2,2,"div",11),ce(),ae(25,"div",12)(26,"div",13),xe(27),ce(),Nt(28,xL,2,1,"div",14),ce()(),ae(29,"div",15)(30,"a",16),Ge("click",function(){return i.changeUserName()}),xe(31),ce(),ae(32,"div",17),xe(33),ce()()(),ae(34,"app-dialog",18),Ge("click",function(){return i.showDialog=!1}),ce(),ae(35,"app-dialog",18),Ge("click",function(){return i.ShowToplist=!1}),ae(36,"table"),Nt(37,PL,2,0,"td"),Q_(38,OL,7,3,"tr",null,Y_),ce()(),$e(40,"canvas",19)),r&2&&(ye(21),jn("Find the ",i.SetCount," sets"),ye(2),_r(i.GameType=="random"?"Id: "+i.GameId:i.Today),ye(),Re("ngIf",i.RenderGrid),ye(3),jn("Found ",i.Found.length,""),ye(),Re("ngForOf",i.Found),ye(3),_r(i.UserName),ye(2),_r(i.Time),ye(),Re("Visible",i.showDialog)("Message",i.dialogMessage),ye(),Re("Visible",i.ShowToplist)("Message",""),ye(2),K_(i.Toplist.length==0?37:-1),ye(),Z_(i.Toplist))},dependencies:[_w,Cr,Cc,Dc,Ew],styles:[".app-container[_ngcontent-%COMP%]{padding:1em}.card-container[_ngcontent-%COMP%]{display:flex}@media (orientation: landscape){.card-container[_ngcontent-%COMP%]{flex-direction:row}}@media (orientation: portrait){.card-container[_ngcontent-%COMP%]{flex-direction:column}}@media (orientation: landscape){.table[_ngcontent-%COMP%]{max-width:50vw}}.buttons[_ngcontent-%COMP%]{display:flex;gap:1vw;padding-bottom:2vh}.founds-container[_ngcontent-%COMP%]{font-size:x-large;margin-left:1em;scale:.6;transform-origin:top left}@media (orientation: portrait){.founds-container[_ngcontent-%COMP%]{margin-top:10px}}.founds-container[_ngcontent-%COMP%]   .found-count[_ngcontent-%COMP%]{display:block;text-align:center}.founds-container[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin-right:5px}.founds-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:8px}.sub-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:3px}.confetti[_ngcontent-%COMP%]{position:fixed;pointer-events:none;inset:0}.usertime[_ngcontent-%COMP%]{position:absolute;bottom:1em;right:1em}.time[_ngcontent-%COMP%]{font-size:1.5em}.toplist[_ngcontent-%COMP%]{font-size:.85rem;flex-direction:column}.toplist[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:.5rem}.toplist[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}"],data:{animation:[ro("list",[io(":enter",[yw("app-card",[Be({opacity:0,transformOrigin:"0% 100%"}),vw(100,[Ar("250ms linear",mw([Be({opacity:.5,transform:"translate3d(var(--deal-x, -60vw), var(--deal-y, 60vh), 0) scale(.9) rotate(-20deg)",offset:0}),Be({opacity:1,transform:"translate3d(0, 0, 0) scale(1) rotate(0)",offset:1})]))])],{optional:!0})])])]}})}return n})();var PD=[{path:"game/:id",component:zg},{path:"**",component:zg}];function OD(n){return new v(3e3,!1)}function kL(){return new v(3100,!1)}function FL(){return new v(3101,!1)}function LL(n){return new v(3001,!1)}function jL(n){return new v(3003,!1)}function UL(n){return new v(3004,!1)}function VL(n,e){return new v(3005,!1)}function $L(){return new v(3006,!1)}function BL(){return new v(3007,!1)}function HL(n,e){return new v(3008,!1)}function zL(n){return new v(3002,!1)}function WL(n,e,t,r,i){return new v(3010,!1)}function qL(){return new v(3011,!1)}function GL(){return new v(3012,!1)}function KL(){return new v(3200,!1)}function YL(){return new v(3202,!1)}function QL(){return new v(3013,!1)}function ZL(n){return new v(3014,!1)}function JL(n){return new v(3015,!1)}function XL(n){return new v(3016,!1)}function e1(n,e){return new v(3404,!1)}function t1(n){return new v(3502,!1)}function n1(n){return new v(3503,!1)}function r1(){return new v(3300,!1)}function i1(n){return new v(3504,!1)}function s1(n){return new v(3301,!1)}function o1(n,e){return new v(3302,!1)}function a1(n){return new v(3303,!1)}function c1(n,e){return new v(3400,!1)}function l1(n){return new v(3401,!1)}function u1(n){return new v(3402,!1)}function d1(n,e){return new v(3505,!1)}function tr(n){switch(n.length){case 0:return new zn;case 1:return n[0];default:return new no(n)}}function KD(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((f,h)=>{let p=h,g=f;if(h!=="offset")switch(p=n.normalizePropertyName(p,i),g){case Wc:g=t.get(h);break;case Yt:g=r.get(h);break;default:g=n.normalizeStyleValue(h,p,g,i);break}d.set(p,g)}),u||s.push(d),a=d,o=l}),i.length)throw t1(i);return s}function hm(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Wg(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Wg(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Wg(t,"destroy",n)));break}}function Wg(n,e,t){let r=t.totalTime,i=!!t.disabled,s=pm(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function pm(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ot(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function kD(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var f1=typeof document>"u"?null:document.documentElement;function gm(n){let e=n.parentNode||n.host||null;return e===f1?null:e}function h1(n){return n.substring(1,6)=="ebkit"}var Wr=null,FD=!1;function p1(n){Wr||(Wr=g1()||{},FD=Wr.style?"WebkitAppearance"in Wr.style:!1);let e=!0;return Wr.style&&!h1(n)&&(e=n in Wr.style,!e&&FD&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Wr.style)),e}function g1(){return typeof document<"u"?document.body:null}function YD(n,e){for(;e;){if(e===n)return!0;e=gm(e)}return!1}function QD(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var mm=(()=>{class n{validateStyleProperty(t){return p1(t)}containsElement(t,r){return YD(t,r)}getParentElement(t){return gm(t)}query(t,r,i){return QD(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new zn(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),Kr=class{static{this.NOOP=new mm}},Yr=class{};var m1=1e3,ZD="{{",y1="}}",JD="ng-enter",Zg="ng-leave",ql="ng-trigger",Zl=".ng-trigger",LD="ng-animating",Jg=".ng-animating";function _n(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Xg(parseFloat(e[1]),e[2])}function Xg(n,e){switch(e){case"s":return n*m1;default:return n}}function Jl(n,e,t){return n.hasOwnProperty("duration")?n:v1(n,e,t)}function v1(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(OD(n)),{duration:0,delay:0,easing:""};i=Xg(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=Xg(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(kL()),a=!0),s<0&&(e.push(FL()),a=!0),a&&e.splice(c,0,OD(n))}return{duration:i,delay:s,easing:o}}function _1(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function rn(n,e,t){e.forEach((r,i)=>{let s=ym(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Gr(n,e){e.forEach((t,r)=>{let i=ym(r);n.style[i]=""})}function Yo(n){return Array.isArray(n)?n.length==1?n[0]:gw(n):n}function E1(n,e,t){let r=e.params||{},i=XD(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(LL(s))})}var em=new RegExp(`${ZD}\\s*(.+?)\\s*${y1}`,"g");function XD(n){let e=[];if(typeof n=="string"){let t;for(;t=em.exec(n);)e.push(t[1]);em.lastIndex=0}return e}function Zo(n,e,t){let r=`${n}`,i=r.replace(em,(s,o)=>{let a=e[o];return a==null&&(t.push(jL(o)),a=""),a.toString()});return i==r?n:i}var w1=/-+([a-z0-9])/g;function ym(n){return n.replace(w1,(...e)=>e[1].toUpperCase())}function I1(n,e){return n===0||e===0}function C1(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,vm(n,a)))}}return e}function st(n,e,t){switch(e.type){case O.Trigger:return n.visitTrigger(e,t);case O.State:return n.visitState(e,t);case O.Transition:return n.visitTransition(e,t);case O.Sequence:return n.visitSequence(e,t);case O.Group:return n.visitGroup(e,t);case O.Animate:return n.visitAnimate(e,t);case O.Keyframes:return n.visitKeyframes(e,t);case O.Style:return n.visitStyle(e,t);case O.Reference:return n.visitReference(e,t);case O.AnimateChild:return n.visitAnimateChild(e,t);case O.AnimateRef:return n.visitAnimateRef(e,t);case O.Query:return n.visitQuery(e,t);case O.Stagger:return n.visitStagger(e,t);default:throw UL(e.type)}}function vm(n,e){return window.getComputedStyle(n)[e]}var D1=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Xl=class extends Yr{normalizePropertyName(e,t){return ym(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(D1.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(VL(e,r))}return o+s}};var eu="*";function b1(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>S1(r,t,e)):t.push(n),t}function S1(n,e,t){if(n[0]==":"){let c=T1(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(JL(n)),e;let i=r[1],s=r[2],o=r[3];e.push(jD(i,o));let a=i==eu&&o==eu;s[0]=="<"&&!a&&e.push(jD(o,i))}function T1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(XL(n)),"* => *"}}var Gl=new Set(["true","1"]),Kl=new Set(["false","0"]);function jD(n,e){let t=Gl.has(n)||Kl.has(n),r=Gl.has(e)||Kl.has(e);return(i,s)=>{let o=n==eu||n==i,a=e==eu||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Gl.has(n):Kl.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Gl.has(e):Kl.has(e)),o&&a}}var eb=":self",A1=new RegExp(`s*${eb}s*,?`,"g");function tb(n,e,t,r){return new tm(n).build(e,t,r)}var UD="",tm=class{constructor(e){this._driver=e}build(e,t,r){let i=new nm(t);return this._resetContextStyleTimingState(i),st(this,Yo(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=UD,e.collectedStyles=new Map,e.collectedStyles.set(UD,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push($L()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==O.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==O.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(BL())}),{type:O.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{XD(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(HL(e.name,[...s.values()]))}return{type:O.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=st(this,Yo(e.animation),t),i=b1(e.expr,t.errors);return{type:O.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:qr(e.options)}}visitSequence(e,t){return{type:O.Sequence,steps:e.steps.map(r=>st(this,r,t)),options:qr(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=st(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:O.Group,steps:s,options:qr(e.options)}}visitAnimate(e,t){let r=x1(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Be({});if(s.type==O.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=Be(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:O.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Yt?r.push(a):t.errors.push(zL(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(ZD)>=0){s=!0;break}}}),{type:O.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(WL(c,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:i}),t.options&&E1(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:O.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(qL()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(I=>{let T=this._makeStyleAst(I,t),w=T.offset!=null?T.offset:R1(T.styles),C=0;return w!=null&&(s++,C=T.offset=w),c=c||C<0||C>1,a=a||C<l,l=C,o.push(C),T});c&&t.errors.push(GL()),a&&t.errors.push(KL());let d=e.steps.length,f=0;s>0&&s<d?t.errors.push(YL()):s==0&&(f=i/(d-1));let h=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((I,T)=>{let w=f>0?T==h?1:f*T:o[T],C=w*m;t.currentTime=p+g.delay+C,g.duration=C,this._validateStyleAst(I,t),I.offset=w,r.styles.push(I)}),r}visitReference(e,t){return{type:O.Reference,animation:st(this,Yo(e.animation),t),options:qr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:O.AnimateChild,options:qr(e.options)}}visitAnimateRef(e,t){return{type:O.AnimateRef,animation:this.visitReference(e.animation,t),options:qr(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=N1(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ot(t.collectedStyles,t.currentQuerySelector,new Map);let a=st(this,Yo(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:O.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:qr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(QL());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Jl(e.timings,t.errors,!0);return{type:O.Stagger,animation:st(this,Yo(e.animation),t),timings:r,options:null}}};function N1(n){let e=!!n.split(/\s*,\s*/).find(t=>t==eb);return e&&(n=n.replace(A1,"")),n=n.replace(/@\*/g,Zl).replace(/@\w+/g,t=>Zl+"-"+t.slice(1)).replace(/:animating/g,Jg),[n,e]}function M1(n){return n?b({},n):null}var nm=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function R1(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function x1(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Jl(n,e).duration;return qg(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=qg(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Jl(t,e);return qg(i.duration,i.delay,i.easing)}function qr(n){return n?(n=b({},n),n.params&&(n.params=M1(n.params))):n={},n}function qg(n,e,t){return{duration:n,delay:e,easing:t}}function _m(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Jo=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},P1=1,O1=":enter",k1=new RegExp(O1,"g"),F1=":leave",L1=new RegExp(F1,"g");function nb(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new rm().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var rm=class{buildKeyframes(e,t,r,i,s,o,a,c,l,u=[]){l=l||new Jo;let d=new im(e,t,l,i,s,u,[]);d.options=c;let f=c.delay?_n(c.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,c),st(this,r,d);let h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){let m=h[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return h.length?h.map(p=>p.buildKeyframes()):[_m(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:_n(Zo(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?_n(r.duration):null,a=r.delay!=null?_n(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),st(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==O.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=tu);let o=_n(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>st(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?_n(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),st(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Zo(r,t.params,t.errors):r;return Jl(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==O.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?_n(i.delay):0;s&&(t.previousNode.type===O.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=tu);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),st(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;o=Math.max(o,f)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;st(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},tu={},im=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tu,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new nu(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=_n(r.duration)),r.delay!=null&&(i.delay=_n(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Zo(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=tu,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new sm(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(k1,"."+this._enterClassName),e=e.replace(L1,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(ZL(t)),a}},nu=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=P1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Yt),this._currentKeyframe.set(t,Yt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=j1(e,this._globalTimelineStyles);for(let[a,c]of o){let l=Zo(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yt),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===Wc?e.add(d):u===Yt&&t.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return _m(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},sm=class extends nu{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",VD(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let f=new Map(e[d]),h=f.get("offset"),p=t+h*r;f.set("offset",VD(p/o)),s.push(f)}r=o,t=0,i="",e=s}return _m(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function VD(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function j1(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Yt)}else for(let[s,o]of i)t.set(s,o)}),t}function $D(n,e,t,r,i,s,o,a,c,l,u,d,f){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:f}}var Gg={},ru=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return U1(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,u){let d=[],f=this.ast.options&&this.ast.options.params||Gg,h=a&&a.params||Gg,p=this.buildStyles(r,h,d),g=c&&c.params||Gg,m=this.buildStyles(i,g,d),I=new Set,T=new Map,w=new Map,C=i==="void",H={params:rb(g,f),delay:this.ast.options?.delay},A=u?[]:nb(e,t,this.ast.animation,s,o,p,m,H,l,d),D=0;return A.forEach(Z=>{D=Math.max(Z.duration+Z.delay,D)}),d.length?$D(t,this._triggerName,r,i,C,p,m,[],[],T,w,D,d):(A.forEach(Z=>{let de=Z.element,me=ot(T,de,new Set);Z.preStyleProps.forEach(Ce=>me.add(Ce));let at=ot(w,de,new Set);Z.postStyleProps.forEach(Ce=>at.add(Ce)),de!==t&&I.add(de)}),$D(t,this._triggerName,r,i,C,p,m,A,[...I.values()],T,w,D))}};function U1(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function rb(n,e){let t=b({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var om=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=rb(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Zo(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function V1(n,e,t){return new am(n,e,t)}var am=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new om(i.style,s,r))}),BD(this.states,"true","1"),BD(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ru(e,i,this.states))}),this.fallbackTransition=$1(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function $1(n,e,t){let r=[(o,a)=>!0],i={type:O.Sequence,steps:[],options:null},s={type:O.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new ru(n,s,e)}function BD(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var B1=new Jo,cm=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=tb(this._driver,t,r,i);if(r.length)throw n1(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=KD(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=nb(this._driver,t,s,JD,Zg,new Map,new Map,r,B1,i),o.forEach(u=>{let d=ot(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(r1()),o=[]),i.length)throw i1(i);a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Yt))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=tr(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw s1(e);return t}listen(e,t,r,i){let s=pm(t,"","","");return hm(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},HD="ng-animate-queued",H1=".ng-animate-queued",Kg="ng-animate-disabled",z1=".ng-animate-disabled",W1="ng-star-inserted",q1=".ng-star-inserted",G1=[],ib={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},K1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ft="__ng_removed",Xo=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=Q1(i),r){let s=e,{value:o}=s,a=Cm(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Qo="void",Yg=new Xo(Qo),lm=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Et(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw o1(r,t);if(r==null||r.length==0)throw a1(t);if(!Z1(r))throw c1(r,t);let s=ot(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=ot(this._engine.statesByElement,e,new Map);return a.has(t)||(Et(e,ql),Et(e,ql+"-"+t),a.set(t,Yg)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw l1(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new ea(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Et(e,ql),Et(e,ql+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new Xo(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=Yg),!(l.value===Qo)&&c.value===l.value){if(!ej(c.params,l.params)){let g=[],m=s.matchStyles(c.value,c.params,g),I=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Gr(e,m),rn(e,I)})}return}let f=ot(this._engine.playersByElement,e,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let h=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!h){if(!i)return;h=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(Et(e,HD),o.onStart(()=>{as(e,HD)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let m=this._engine.playersByElement.get(e);if(m){let I=m.indexOf(o);I>=0&&m.splice(I,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Zl,!0);r.forEach(i=>{if(i[Ft])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,Qo,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&tr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||Yg,u=new Xo(Qo),d=new ea(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Ft];(!s||s===ib)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Et(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=pm(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,hm(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},um=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new lm(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Yl(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Yl(t))return;let s=t[Ft];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Et(e,Kg)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),as(e,Kg))}removeNode(e,t,r){if(Yl(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ft]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Yl(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Zl,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Jg,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return tr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Ft];if(t&&t.setForRemoval){if(e[Ft]=ib,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Kg)&&this.markElementAsDisabled(e,!1),this.driver.query(e,z1,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Et(i,W1)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?tr(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw u1(e)}_flushAnimations(e,t){let r=new Jo,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(S=>{u.add(S);let N=this.driver.query(S,H1,!0);for(let R=0;R<N.length;R++)u.add(N[R])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=qD(f,this.collectedEnterElements),p=new Map,g=0;h.forEach((S,N)=>{let R=JD+g++;p.set(N,R),S.forEach(J=>Et(J,R))});let m=[],I=new Set,T=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){let N=this.collectedLeaveElements[S],R=N[Ft];R&&R.setForRemoval&&(m.push(N),I.add(N),R.hasAnimation?this.driver.query(N,q1,!0).forEach(J=>I.add(J)):T.add(N))}let w=new Map,C=qD(f,Array.from(I));C.forEach((S,N)=>{let R=Zg+g++;w.set(N,R),S.forEach(J=>Et(J,R))}),e.push(()=>{h.forEach((S,N)=>{let R=p.get(N);S.forEach(J=>as(J,R))}),C.forEach((S,N)=>{let R=w.get(N);S.forEach(J=>as(J,R))}),m.forEach(S=>{this.processLeaveNode(S)})});let H=[],A=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(t).forEach(R=>{let J=R.player,De=R.element;if(H.push(J),this.collectedEnterElements.length){let Oe=De[Ft];if(Oe&&Oe.setForMove){if(Oe.previousTriggersValues&&Oe.previousTriggersValues.has(R.triggerName)){let rr=Oe.previousTriggersValues.get(R.triggerName),lt=this.statesByElement.get(R.element);if(lt&&lt.has(R.triggerName)){let ta=lt.get(R.triggerName);ta.value=rr,lt.set(R.triggerName,ta)}}J.destroy();return}}let Lt=!d||!this.driver.containsElement(d,De),Je=w.get(De),wn=p.get(De),he=this._buildInstruction(R,r,wn,Je,Lt);if(he.errors&&he.errors.length){A.push(he);return}if(Lt){J.onStart(()=>Gr(De,he.fromStyles)),J.onDestroy(()=>rn(De,he.toStyles)),i.push(J);return}if(R.isFallbackTransition){J.onStart(()=>Gr(De,he.fromStyles)),J.onDestroy(()=>rn(De,he.toStyles)),i.push(J);return}let Em=[];he.timelines.forEach(Oe=>{Oe.stretchStartingKeyframe=!0,this.disabledNodes.has(Oe.element)||Em.push(Oe)}),he.timelines=Em,r.append(De,he.timelines);let db={instruction:he,player:J,element:De};o.push(db),he.queriedElements.forEach(Oe=>ot(a,Oe,[]).push(J)),he.preStyleProps.forEach((Oe,rr)=>{if(Oe.size){let lt=c.get(rr);lt||c.set(rr,lt=new Set),Oe.forEach((ta,cu)=>lt.add(cu))}}),he.postStyleProps.forEach((Oe,rr)=>{let lt=l.get(rr);lt||l.set(rr,lt=new Set),Oe.forEach((ta,cu)=>lt.add(cu))})});if(A.length){let S=[];A.forEach(N=>{S.push(d1(N.triggerName,N.errors))}),H.forEach(N=>N.destroy()),this.reportError(S)}let D=new Map,Z=new Map;o.forEach(S=>{let N=S.element;r.has(N)&&(Z.set(N,N),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,D))}),i.forEach(S=>{let N=S.element;this._getPreviousPlayers(N,!1,S.namespaceId,S.triggerName,null).forEach(J=>{ot(D,N,[]).push(J),J.destroy()})});let de=m.filter(S=>GD(S,c,l)),me=new Map;WD(me,this.driver,T,l,Yt).forEach(S=>{GD(S,c,l)&&de.push(S)});let Ce=new Map;h.forEach((S,N)=>{WD(Ce,this.driver,new Set(S),c,Wc)}),de.forEach(S=>{let N=me.get(S),R=Ce.get(S);me.set(S,new Map([...N?.entries()??[],...R?.entries()??[]]))});let ct=[],nr=[],En={};o.forEach(S=>{let{element:N,player:R,instruction:J}=S;if(r.has(N)){if(u.has(N)){R.onDestroy(()=>rn(N,J.toStyles)),R.disabled=!0,R.overrideTotalTime(J.totalTime),i.push(R);return}let De=En;if(Z.size>1){let Je=N,wn=[];for(;Je=Je.parentNode;){let he=Z.get(Je);if(he){De=he;break}wn.push(Je)}wn.forEach(he=>Z.set(he,De))}let Lt=this._buildAnimation(R.namespaceId,J,D,s,Ce,me);if(R.setRealPlayer(Lt),De===En)ct.push(R);else{let Je=this.playersByElement.get(De);Je&&Je.length&&(R.parentPlayer=tr(Je)),i.push(R)}}else Gr(N,J.fromStyles),R.onDestroy(()=>rn(N,J.toStyles)),nr.push(R),u.has(N)&&i.push(R)}),nr.forEach(S=>{let N=s.get(S.element);if(N&&N.length){let R=tr(N);S.setRealPlayer(R)}}),i.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<m.length;S++){let N=m[S],R=N[Ft];if(as(N,Zg),R&&R.hasAnimation)continue;let J=[];if(a.size){let Lt=a.get(N);Lt&&Lt.length&&J.push(...Lt);let Je=this.driver.query(N,Jg,!0);for(let wn=0;wn<Je.length;wn++){let he=a.get(Je[wn]);he&&he.length&&J.push(...he)}}let De=J.filter(Lt=>!Lt.destroyed);De.length?J1(this,N,De):this.processLeaveNode(N)}return m.length=0,ct.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();let N=this.players.indexOf(S);this.players.splice(N,1)}),S.play()}),ct}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Qo;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,u=l!==s,d=ot(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(h=>{let p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}Gr(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,f=t.timelines.map(p=>{let g=p.element;u.add(g);let m=g[Ft];if(m&&m.removedBeforeQueried)return new zn(p.duration,p.delay);let I=g!==c,T=X1((r.get(g)||G1).map(D=>D.getRealPlayer())).filter(D=>{let Z=D;return Z.element?Z.element===g:!1}),w=s.get(g),C=o.get(g),H=KD(this._normalizer,p.keyframes,w,C),A=this._buildPlayer(p,H,T);if(p.subTimeline&&i&&d.add(g),I){let D=new ea(e,a,g);D.setRealPlayer(A),l.push(D)}return A});l.forEach(p=>{ot(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>Y1(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Et(p,LD));let h=tr(f);return h.onDestroy(()=>{u.forEach(p=>as(p,LD)),rn(c,t.toStyles)}),d.forEach(p=>{ot(i,p,[]).push(h)}),h}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new zn(e.duration,e.delay)}},ea=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new zn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>hm(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ot(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Y1(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function Q1(n){return n??null}function Yl(n){return n&&n.nodeType===1}function Z1(n){return n=="start"||n=="done"}function zD(n,e){let t=n.style.display;return n.style.display=e??"none",t}function WD(n,e,t,r,i){let s=[];t.forEach(c=>s.push(zD(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let f=e.computeStyle(l,d,i);u.set(d,f),(!f||f.length==0)&&(l[Ft]=K1,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>zD(c,s[a++])),o}function qD(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function Et(n,e){n.classList?.add(e)}function as(n,e){n.classList?.remove(e)}function J1(n,e,t){tr(t).onDone(()=>n.processLeaveNode(e))}function X1(n){let e=[];return sb(n,e),e}function sb(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof no?sb(r.players,e):e.push(r)}}function ej(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function GD(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var cs=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new um(e.body,t,r),this._timelineEngine=new cm(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=tb(this._driver,s,c,l);if(c.length)throw e1(i,c);l.length&&void 0,a=V1(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=kD(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=kD(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function tj(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Qg(e[0]),e.length>1&&(r=Qg(e[e.length-1]))):e instanceof Map&&(t=Qg(e)),t||r?new dm(n,t,r):null}var dm=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&rn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rn(this._element,this._initialStyles),this._endStyles&&(rn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Gr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gr(this._element,this._endStyles),this._endStyles=null),rn(this._element,this._initialStyles),this._state=3)}};function Qg(n){let e=null;return n.forEach((t,r)=>{nj(r)&&(e=e||new Map,e.set(r,t))}),e}function nj(n){return n==="display"||n==="position"}var iu=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:vm(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},su=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return YD(e,t)}getParentElement(e){return gm(e)}query(e,t,r){return QD(e,t,r)}computeStyle(e,t,r){return vm(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(h=>h instanceof iu);I1(r,i)&&u.forEach(h=>{h.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=_1(t).map(h=>new Map(h));d=C1(e,d,l);let f=tj(e,d);return new iu(e,d,c,f)}};var Ql="@",ob="@.disabled",ou=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Ql&&t==ob?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},fm=class extends ou{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Ql?t.charAt(1)=="."&&t==ob?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Ql){let i=rj(e),s=t.slice(1),o="";return s.charAt(0)!=Ql&&([s,o]=ij(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function rj(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function ij(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var au=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let d=()=>l.delete(i);u=new ou(r,i,this.engine,d),l.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new fm(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var oj=(()=>{class n extends cs{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(j(Ke),j(Kr),j(Yr))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})();function aj(){return new Xl}function cj(n,e,t){return new au(n,e,t)}var ab=[{provide:Yr,useFactory:aj},{provide:cs,useClass:oj},{provide:Rn,useFactory:cj,deps:[Sc,cs,oe]}],lj=[{provide:Kr,useFactory:()=>new su},{provide:uf,useValue:"BrowserAnimations"},...ab],xG=[{provide:Kr,useClass:mm},{provide:uf,useValue:"NoopAnimations"},...ab];function cb(){return vr("NgEagerAnimations"),[...lj]}var lb={providers:[Jw(()=>Xw({projectId:"set-card-game-b7b55",appId:"1:314036741918:web:13991a7c172a1b2efecb0f",databaseURL:"https://set-card-game-b7b55-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"set-card-game-b7b55.firebasestorage.app",apiKey:"AIzaSyDZAx444-7oW19-zQFktsp_2Ef6D5lHD4A",authDomain:"set-card-game-b7b55.firebaseapp.com",messagingSenderId:"314036741918"})),hD(()=>zl()),lE({eventCoalescing:!0}),pw(PD),cb()]};var ub=(()=>{class n{title="testingrout";static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Wt({type:n,selectors:[["app-root"]],standalone:!0,features:[Gt],decls:1,vars:0,template:function(r,i){r&1&&$e(0,"router-outlet")},dependencies:[Eh]})}return n})();RE(ub,lb).catch(n=>console.error(n));
