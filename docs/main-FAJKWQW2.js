var nb=Object.create;var ou=Object.defineProperty,rb=Object.defineProperties,ib=Object.getOwnPropertyDescriptor,sb=Object.getOwnPropertyDescriptors,ob=Object.getOwnPropertyNames,Xo=Object.getOwnPropertySymbols,ab=Object.getPrototypeOf,au=Object.prototype.hasOwnProperty,Em=Object.prototype.propertyIsEnumerable;var _m=(n,e,t)=>e in n?ou(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,b=(n,e)=>{for(var t in e||={})au.call(e,t)&&_m(n,t,e[t]);if(Xo)for(var t of Xo(e))Em.call(e,t)&&_m(n,t,e[t]);return n},fe=(n,e)=>rb(n,sb(e));var wm=(n,e)=>{var t={};for(var r in n)au.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Xo)for(var r of Xo(n))e.indexOf(r)<0&&Em.call(n,r)&&(t[r]=n[r]);return t};var sn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var cb=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ob(e))!au.call(n,i)&&i!==t&&ou(n,i,{get:()=>e[i],enumerable:!(r=ib(e,i))||r.enumerable});return n};var lb=(n,e,t)=>(t=n!=null?nb(ab(n)):{},cb(e||!n||!n.__esModule?ou(t,"default",{value:n,enumerable:!0}):t,n));var _=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var oD=sn((sD,Fg)=>{"use strict";(function(n,e,t){function r(a){var c=this,l=o();c.next=function(){var u=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=u-(c.c=u|0)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(a),c.s0<0&&(c.s0+=1),c.s1-=l(a),c.s1<0&&(c.s1+=1),c.s2-=l(a),c.s2<0&&(c.s2+=1),l=null}function i(a,c){return c.c=a.c,c.s0=a.s0,c.s1=a.s1,c.s2=a.s2,c}function s(a,c){var l=new r(a),u=c&&c.state,d=l.next;return d.int32=function(){return l.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}function o(){var a=4022871197,c=function(l){l=String(l);for(var u=0;u<l.length;u++){a+=l.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return c}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.alea=s})(sD,typeof Fg=="object"&&Fg,typeof define=="function"&&define)});var cD=sn((aD,Lg)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},o===(o|0)?a.x=o:c+=o;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,a.next()}function i(o,a){return a.x=o.x,a.y=o.y,a.z=o.z,a.w=o.w,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xor128=s})(aD,typeof Lg=="object"&&Lg,typeof define=="function"&&define)});var uD=sn((lD,jg)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,o===(o|0)?a.x=o:c+=o;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,l==c.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function i(o,a){return a.x=o.x,a.y=o.y,a.z=o.z,a.w=o.w,a.v=o.v,a.d=o.d,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xorwow=s})(lD,typeof jg=="object"&&jg,typeof define=="function"&&define)});var fD=sn((dD,Ug)=>{"use strict";(function(n,e,t){function r(o){var a=this;a.next=function(){var l=a.x,u=a.i,d,f,h;return d=l[u],d^=d>>>7,f=d^d<<24,d=l[u+1&7],f^=d^d>>>10,d=l[u+3&7],f^=d^d>>>3,d=l[u+4&7],f^=d^d<<7,d=l[u+7&7],d=d^d<<13,f^=d^d<<9,l[u]=f,a.i=u+1&7,f};function c(l,u){var d,f,h=[];if(u===(u|0))f=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?f=h[7]=-1:f=h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}c(a,o)}function i(o,a){return a.x=o.x.slice(),a.i=o.i,a}function s(o,a){o==null&&(o=+new Date);var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.x&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xorshift7=s})(dD,typeof Ug=="object"&&Ug,typeof define=="function"&&define)});var pD=sn((hD,Vg)=>{"use strict";(function(n,e,t){function r(o){var a=this;a.next=function(){var l=a.w,u=a.X,d=a.i,f,h;return a.w=l=l+1640531527|0,h=u[d+34&127],f=u[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=u[d]=h^f,a.i=d,h+(l^l>>>16)|0};function c(l,u){var d,f,h,p,g,m=[],I=128;for(u===(u|0)?(f=u,u=null):(u=u+"\0",f=0,I=Math.max(I,u.length)),h=0,p=-32;p<I;++p)u&&(f^=u.charCodeAt((p+32)%u.length)),p===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(g=g+1640531527|0,d=m[p&127]^=f+g,h=d==0?h+1:0);for(h>=128&&(m[(u&&u.length||0)&127]=-1),h=127,p=4*128;p>0;--p)f=m[h+34&127],d=m[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,m[h]=f^d;l.w=g,l.X=m,l.i=h}c(a,o)}function i(o,a){return a.i=o.i,a.w=o.w,a.X=o.X.slice(),a}function s(o,a){o==null&&(o=+new Date);var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.X&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.xor4096=s})(hD,typeof Vg=="object"&&Vg,typeof define=="function"&&define)});var mD=sn((gD,$g)=>{"use strict";(function(n,e,t){function r(o){var a=this,c="";a.next=function(){var u=a.b,d=a.c,f=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-f|0,a.d=f<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,o===Math.floor(o)?(a.a=o/4294967296|0,a.b=o|0):c+=o;for(var l=0;l<c.length+20;l++)a.b^=c.charCodeAt(l)|0,a.next()}function i(o,a){return a.a=o.a,a.b=o.b,a.c=o.c,a.d=o.d,a}function s(o,a){var c=new r(o),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=s:t&&t.amd?t(function(){return s}):this.tychei=s})(gD,typeof $g=="object"&&$g,typeof define=="function"&&define)});var yD=sn(()=>{"use strict"});var _D=sn((vD,Bl)=>{"use strict";(function(n,e,t){var r=256,i=6,s=52,o="random",a=t.pow(r,i),c=t.pow(2,s),l=c*2,u=r-1,d;function f(w,C,H){var A=[];C=C==!0?{entropy:!0}:C||{};var D=m(g(C.entropy?[w,T(e)]:w??I(),3),A),Z=new h(A),de=function(){for(var me=Z.g(i),rt=a,Ce=0;me<c;)me=(me+Ce)*r,rt*=r,Ce=Z.g(1);for(;me>=l;)me/=2,rt/=2,Ce>>>=1;return(me+Ce)/rt};return de.int32=function(){return Z.g(4)|0},de.quick=function(){return Z.g(4)/4294967296},de.double=de,m(T(Z.S),e),(C.pass||H||function(me,rt,Ce,it){return it&&(it.S&&p(it,Z),me.state=function(){return p(Z,{})}),Ce?(t[o]=me,rt):me})(de,D,"global"in C?C.global:this==t,C.state)}function h(w){var C,H=w.length,A=this,D=0,Z=A.i=A.j=0,de=A.S=[];for(H||(w=[H++]);D<r;)de[D]=D++;for(D=0;D<r;D++)de[D]=de[Z=u&Z+w[D%H]+(C=de[D])],de[Z]=C;(A.g=function(me){for(var rt,Ce=0,it=A.i,tr=A.j,En=A.S;me--;)rt=En[it=u&it+1],Ce=Ce*r+En[u&(En[it]=En[tr=u&tr+rt])+(En[tr]=rt)];return A.i=it,A.j=tr,Ce})(r)}function p(w,C){return C.i=w.i,C.j=w.j,C.S=w.S.slice(),C}function g(w,C){var H=[],A=typeof w,D;if(C&&A=="object")for(D in w)try{H.push(g(w[D],C-1))}catch{}return H.length?H:A=="string"?w:w+"\0"}function m(w,C){for(var H=w+"",A,D=0;D<H.length;)C[u&D]=u&(A^=C[u&D]*19)+H.charCodeAt(D++);return T(C)}function I(){try{var w;return d&&(w=d.randomBytes)?w=w(r):(w=new Uint8Array(r),(n.crypto||n.msCrypto).getRandomValues(w)),T(w)}catch{var C=n.navigator,H=C&&C.plugins;return[+new Date,n,H,n.screen,T(e)]}}function T(w){return String.fromCharCode.apply(0,w)}if(m(t.random(),e),typeof Bl=="object"&&Bl.exports){Bl.exports=f;try{d=yD()}catch{}}else typeof define=="function"&&define.amd?define(function(){return f}):t["seed"+o]=f})(typeof self<"u"?self:vD,[],Math)});var wD=sn((G3,ED)=>{"use strict";var lL=oD(),uL=cD(),dL=uD(),fL=fD(),hL=pD(),pL=mD(),Br=_D();Br.alea=lL;Br.xor128=uL;Br.xorwow=dL;Br.xorshift7=fL;Br.xor4096=hL;Br.tychei=pL;ED.exports=Br});var lu=null;var cu=1,Im=Symbol("SIGNAL");function G(n){let e=lu;return lu=n,e}function Cm(){return lu}var uu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ub(n){if(!(gu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===cu)){if(!n.producerMustRecompute(n)&&!fu(n)){n.dirty=!1,n.lastCleanEpoch=cu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=cu}}function du(n){return n&&(n.nextProducerIndex=0),G(n)}function Dm(n,e){if(G(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(gu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)pu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function fu(n){mu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(ub(t),r!==t.version))return!0}return!1}function hu(n){if(mu(n),gu(n))for(let e=0;e<n.producerNode.length;e++)pu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function pu(n,e){if(db(n),n.liveConsumerNode.length===1&&fb(n))for(let r=0;r<n.producerNode.length;r++)pu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];mu(i),i.producerIndexOfThis[r]=e}}function gu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function db(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function fb(n){return n.producerNode!==void 0}function hb(){throw new Error}var pb=hb;function bm(n){pb=n}function k(n){return typeof n=="function"}function Kr(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ea=Kr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function rr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(k(r))try{r()}catch(s){e=s instanceof ea?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Sm(s)}catch(o){e=e??[],o instanceof ea?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ea(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Sm(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&rr(t,e)}remove(e){let{_finalizers:t}=this;t&&rr(t,e),e instanceof n&&e._removeParent(this)}};pe.EMPTY=(()=>{let n=new pe;return n.closed=!0,n})();var yu=pe.EMPTY;function ta(n){return n instanceof pe||n&&"closed"in n&&k(n.remove)&&k(n.add)&&k(n.unsubscribe)}function Sm(n){k(n)?n():n.unsubscribe()}var mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yr={setTimeout(n,e,...t){let{delegate:r}=Yr;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Yr;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function na(n){Yr.setTimeout(()=>{let{onUnhandledError:e}=mt;if(e)e(n);else throw n})}function rs(){}var Tm=vu("C",void 0,void 0);function Am(n){return vu("E",void 0,n)}function Nm(n){return vu("N",n,void 0)}function vu(n,e,t){return{kind:n,value:e,error:t}}var ir=null;function Qr(n){if(mt.useDeprecatedSynchronousErrorHandling){let e=!ir;if(e&&(ir={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ir;if(ir=null,t)throw r}}else n()}function Mm(n){mt.useDeprecatedSynchronousErrorHandling&&ir&&(ir.errorThrown=!0,ir.error=n)}var sr=class extends pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ta(e)&&e.add(this)):this.destination=yb}static create(e,t,r){return new Zr(e,t,r)}next(e){this.isStopped?Eu(Nm(e),this):this._next(e)}error(e){this.isStopped?Eu(Am(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Eu(Tm,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gb=Function.prototype.bind;function _u(n,e){return gb.call(n,e)}var wu=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ra(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ra(r)}else ra(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ra(t)}}},Zr=class extends sr{constructor(e,t,r){super();let i;if(k(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&mt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_u(e.next,s),error:e.error&&_u(e.error,s),complete:e.complete&&_u(e.complete,s)}):i=e}this.destination=new wu(i)}};function ra(n){mt.useDeprecatedSynchronousErrorHandling?Mm(n):na(n)}function mb(n){throw n}function Eu(n,e){let{onStoppedNotification:t}=mt;t&&Yr.setTimeout(()=>t(n,e))}var yb={closed:!0,next:rs,error:mb,complete:rs};var Jr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qe(n){return n}function Iu(...n){return Cu(n)}function Cu(n){return n.length===0?Qe:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var X=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=_b(t)?t:new Zr(t,r,i);return Qr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Rm(r),new r((i,s)=>{let o=new Zr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Jr](){return this}pipe(...t){return Cu(t)(this)}toPromise(t){return t=Rm(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Rm(n){var e;return(e=n??mt.Promise)!==null&&e!==void 0?e:Promise}function vb(n){return n&&k(n.next)&&k(n.error)&&k(n.complete)}function _b(n){return n&&n instanceof sr||vb(n)&&ta(n)}function Du(n){return k(n?.lift)}function Y(n){return e=>{if(Du(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(n,e,t,r,i){return new bu(n,e,t,r,i)}var bu=class extends sr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xr(){return Y((n,e)=>{let t=null;n._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ei=class extends X{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Du(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pe;let t=this.getSubject();e.add(this.source.subscribe(Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pe.EMPTY)}return e}refCount(){return Xr()(this)}};var xm=Kr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=(()=>{class n extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ia(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new xm}next(t){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?yu:(this.currentObservers=null,s.push(t),new pe(()=>{this.currentObservers=null,rr(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new X;return t.source=this,t}}return n.create=(e,t)=>new ia(e,t),n})(),ia=class extends Fe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:yu}};var Ne=class extends Fe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Su={now(){return(Su.delegate||Date).now()},delegate:void 0};var sa=class extends pe{constructor(e,t){super()}schedule(e,t=0){return this}};var is={setInterval(n,e,...t){let{delegate:r}=is;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=is;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ti=class extends sa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return is.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&is.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,rr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ni=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ni.now=Su.now;var ri=class extends ni{constructor(e,t=ni.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Tu=new ri(ti);var oa=class extends ti{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var aa=class extends ri{};var Au=new aa(oa);var Ze=new X(n=>n.complete());function Pm(n){return n&&k(n.schedule)}function Om(n){return n[n.length-1]}function km(n){return k(Om(n))?n.pop():void 0}function In(n){return Pm(Om(n))?n.pop():void 0}function Nu(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Lm(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Fm(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function or(n){return this instanceof or?(this.v=n,this):new or(n)}function jm(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(m,I){s.push([h,g,m,I])>1||c(h,g)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(g){f(s[0][3],g)}}function l(h){h.value instanceof or?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Um(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Fm=="function"?Fm(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ca=n=>n&&typeof n.length=="number"&&typeof n!="function";function la(n){return k(n?.then)}function ua(n){return k(n[Jr])}function da(n){return Symbol.asyncIterator&&k(n?.[Symbol.asyncIterator])}function fa(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Eb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ha=Eb();function pa(n){return k(n?.[ha])}function ga(n){return jm(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield or(t.read());if(i)return yield or(void 0);yield yield or(r)}}finally{t.releaseLock()}})}function ma(n){return k(n?.getReader)}function be(n){if(n instanceof X)return n;if(n!=null){if(ua(n))return wb(n);if(ca(n))return Ib(n);if(la(n))return Cb(n);if(da(n))return Vm(n);if(pa(n))return Db(n);if(ma(n))return bb(n)}throw fa(n)}function wb(n){return new X(e=>{let t=n[Jr]();if(k(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ib(n){return new X(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Cb(n){return new X(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,na)})}function Db(n){return new X(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Vm(n){return new X(e=>{Sb(n,e).catch(t=>e.error(t))})}function bb(n){return Vm(ga(n))}function Sb(n,e){var t,r,i,s;return Lm(this,void 0,void 0,function*(){try{for(t=Um(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function $e(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Cn(n,e=0){return Y((t,r)=>{t.subscribe(Q(r,i=>$e(r,n,()=>r.next(i),e),()=>$e(r,n,()=>r.complete(),e),i=>$e(r,n,()=>r.error(i),e)))})}function Dn(n,e=0){return Y((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function $m(n,e){return be(n).pipe(Dn(e),Cn(e))}function Bm(n,e){return be(n).pipe(Dn(e),Cn(e))}function Hm(n,e){return new X(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function zm(n,e){return new X(t=>{let r;return $e(t,e,()=>{r=n[ha](),$e(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}function ya(n,e){if(!n)throw new Error("Iterable cannot be null");return new X(t=>{$e(t,e,()=>{let r=n[Symbol.asyncIterator]();$e(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Wm(n,e){return ya(ga(n),e)}function qm(n,e){if(n!=null){if(ua(n))return $m(n,e);if(ca(n))return Hm(n,e);if(la(n))return Bm(n,e);if(da(n))return ya(n,e);if(pa(n))return zm(n,e);if(ma(n))return Wm(n,e)}throw fa(n)}function _e(n,e){return e?qm(n,e):be(n)}function F(...n){let e=In(n);return _e(n,e)}function ii(n,e){let t=k(n)?n:()=>n,r=i=>i.error(t());return new X(e?i=>e.schedule(r,0,i):r)}function Mu(n){return!!n&&(n instanceof X||k(n.lift)&&k(n.subscribe))}var on=Kr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function K(n,e){return Y((t,r)=>{let i=0;t.subscribe(Q(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Tb}=Array;function Ab(n,e){return Tb(e)?n(...e):n(e)}function Gm(n){return K(e=>Ab(n,e))}var{isArray:Nb}=Array,{getPrototypeOf:Mb,prototype:Rb,keys:xb}=Object;function Km(n){if(n.length===1){let e=n[0];if(Nb(e))return{args:e,keys:null};if(Pb(e)){let t=xb(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Pb(n){return n&&typeof n=="object"&&Mb(n)===Rb}function Ym(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function va(...n){let e=In(n),t=km(n),{args:r,keys:i}=Km(n);if(r.length===0)return _e([],e);let s=new X(Ob(r,e,i?o=>Ym(i,o):Qe));return t?s.pipe(Gm(t)):s}function Ob(n,e,t=Qe){return r=>{Qm(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Qm(e,()=>{let l=_e(n[c],e),u=!1;l.subscribe(Q(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Qm(n,e,t){n?$e(t,n,e):e()}function Zm(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=g=>l<r?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;be(t(g,u++)).subscribe(Q(e,I=>{i?.(I),s?h(I):e.next(I)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<r;){let I=c.shift();o?$e(e,o,()=>p(I)):p(I)}f()}catch(I){e.error(I)}}))};return n.subscribe(Q(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Ee(n,e,t=1/0){return k(e)?Ee((r,i)=>K((s,o)=>e(r,s,i,o))(be(n(r,i))),t):(typeof e=="number"&&(t=e),Y((r,i)=>Zm(r,i,n,t)))}function Ru(n=1/0){return Ee(Qe,n)}function Jm(){return Ru(1)}function si(...n){return Jm()(_e(n,In(n)))}function _a(n){return new X(e=>{be(n()).subscribe(e)})}function yt(n,e){return Y((t,r)=>{let i=0;t.subscribe(Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function bn(n){return Y((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Q(t,void 0,void 0,o=>{s=be(n(o,bn(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Xm(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Q(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function oi(n,e){return k(e)?Ee(n,e,1):Ee(n,1)}function Sn(n){return Y((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function an(n){return n<=0?()=>Ze:Y((e,t)=>{let r=0;e.subscribe(Q(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xu(n){return K(()=>n)}function Ea(n=kb){return Y((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kb(){return new on}function ss(n){return Y((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Lt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yt((i,s)=>n(i,s,r)):Qe,an(1),t?Sn(e):Ea(()=>new on))}function ai(n){return n<=0?()=>Ze:Y((e,t)=>{let r=[];e.subscribe(Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Pu(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yt((i,s)=>n(i,s,r)):Qe,ai(1),t?Sn(e):Ea(()=>new on))}function Ou(n,e){return Y(Xm(n,e,arguments.length>=2,!0))}function ku(...n){let e=In(n);return Y((t,r)=>{(e?si(n,t,e):si(n,t)).subscribe(r)})}function vt(n,e){return Y((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Q(r,c=>{i?.unsubscribe();let l=0,u=s++;be(n(c,u)).subscribe(i=Q(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Fu(n){return Y((e,t)=>{be(n).subscribe(Q(t,()=>t.complete(),rs)),!t.closed&&e.subscribe(t)})}function we(n,e,t){let r=k(n)||e||t?{next:n,error:e,complete:t}:n;return r?Y((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Q(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Qe}var Ly="https://g.co/ng/security#xss",v=class extends Error{constructor(e,t){super(Fd(e,t)),this.code=e}};function Fd(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ws(n){return{toString:n}.toString()}var wa="__parameters__";function Fb(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function jy(n,e,t){return ws(()=>{let r=Fb(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(wa)?c[wa]:Object.defineProperty(c,wa,{value:[]})[wa];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function oe(n){for(let e in n)if(n[e]===oe)return e;throw Error("Could not find renamed property on target object.")}function Be(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Be).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function ey(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Lb=oe({__forward_ref__:oe});function Uy(n){return n.__forward_ref__=Uy,n.toString=function(){return Be(this())},n}function at(n){return Vy(n)?n():n}function Vy(n){return typeof n=="function"&&n.hasOwnProperty(Lb)&&n.__forward_ref__===Uy}function M(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Is(n){return{providers:n.providers||[],imports:n.imports||[]}}function Qa(n){return ty(n,By)||ty(n,Hy)}function $y(n){return Qa(n)!==null}function ty(n,e){return n.hasOwnProperty(e)?n[e]:null}function jb(n){let e=n&&(n[By]||n[Hy]);return e||null}function ny(n){return n&&(n.hasOwnProperty(ry)||n.hasOwnProperty(Ub))?n[ry]:null}var By=oe({\u0275prov:oe}),ry=oe({\u0275inj:oe}),Hy=oe({ngInjectableDef:oe}),Ub=oe({ngInjectorDef:oe}),P=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=M({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zy(n){return n&&!!n.\u0275providers}var Vb=oe({\u0275cmp:oe}),$b=oe({\u0275dir:oe}),Bb=oe({\u0275pipe:oe}),Hb=oe({\u0275mod:oe}),Aa=oe({\u0275fac:oe}),cs=oe({__NG_ELEMENT_ID__:oe}),iy=oe({__NG_ENV_ID__:oe});function Ld(n){return typeof n=="string"?n:n==null?"":String(n)}function zb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ld(n)}function Wb(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new v(-200,n)}function jd(n,e){throw new v(-201,!1)}var V=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(V||{}),qu;function Wy(){return qu}function ot(n){let e=qu;return qu=n,e}function qy(n,e,t){let r=Qa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&V.Optional)return null;if(e!==void 0)return e;jd(n,"Injector")}var qb={},ls=qb,Gu="__NG_DI_FLAG__",Na="ngTempTokenPath",Gb="ngTokenPath",Kb=/\n/gm,Yb="\u0275",sy="__source",di;function Qb(){return di}function Tn(n){let e=di;return di=n,e}function Zb(n,e=V.Default){if(di===void 0)throw new v(-203,!1);return di===null?qy(n,void 0,e):di.get(n,e&V.Optional?null:void 0,e)}function j(n,e=V.Default){return(Wy()||Zb)(at(n),e)}function E(n,e=V.Default){return j(n,Za(e))}function Za(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ku(n){let e=[];for(let t=0;t<n.length;t++){let r=at(n[t]);if(Array.isArray(r)){if(r.length===0)throw new v(900,!1);let i,s=V.Default;for(let o=0;o<r.length;o++){let a=r[o],c=Jb(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(j(i,s))}else e.push(j(r))}return e}function Gy(n,e){return n[Gu]=e,n.prototype[Gu]=e,n}function Jb(n){return n[Gu]}function Xb(n,e,t,r){let i=n[Na];throw e[sy]&&i.unshift(e[sy]),n.message=eS(`
`+n.message,i,t,r),n[Gb]=i,n[Na]=null,n}function eS(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Yb?n.slice(2):n;let i=Be(e);if(Array.isArray(e))i=e.map(Be).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Be(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Kb,`
  `)}`}var Dt=Gy(jy("Optional"),8);var Ky=Gy(jy("SkipSelf"),4);function hi(n,e){let t=n.hasOwnProperty(Aa);return t?n[Aa]:null}function Ud(n,e){n.forEach(t=>Array.isArray(t)?Ud(t,e):e(t))}function Yy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ma(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var us={},jt=[],pi=new P(""),Qy=new P("",-1),Zy=new P(""),Ra=class{get(e,t=ls){if(t===ls){let r=new Error(`NullInjectorError: No provider for ${Be(e)}!`);throw r.name="NullInjectorError",r}return t}},Jy=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Jy||{}),$t=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}($t||{}),Mn=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Mn||{});function tS(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Yu(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];rS(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function nS(n){return n===3||n===4||n===6}function rS(n){return n.charCodeAt(0)===64}function Vd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?oy(n,t,i,null,e[++r]):oy(n,t,i,null,null))}}return n}function oy(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var Xy="ng-template";function iS(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&tS(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if($d(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function $d(n){return n.type===4&&n.value!==Xy}function sS(n,e,t){let r=n.type===4&&!t?Xy:n.value;return e===r}function oS(n,e,t){let r=4,i=n.attrs,s=i!==null?lS(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!_t(r)&&!_t(c))return!1;if(o&&_t(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!sS(n,c,t)||c===""&&e.length===1){if(_t(r))return!1;o=!0}}else if(r&8){if(i===null||!iS(n,i,c,t)){if(_t(r))return!1;o=!0}}else{let l=e[++a],u=aS(c,i,$d(n),t);if(u===-1){if(_t(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(_t(r))return!1;o=!0}}}}return _t(r)||o}function _t(n){return(n&1)===0}function aS(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return uS(e,n)}function cS(n,e,t=!1){for(let r=0;r<e.length;r++)if(oS(n,e[r],t))return!0;return!1}function lS(n){for(let e=0;e<n.length;e++){let t=n[e];if(nS(t))return e}return n.length}function uS(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ay(n,e){return n?":not("+e.trim()+")":e}function dS(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!_t(o)&&(e+=ay(s,i),i=""),r=o,s=s||!_t(r);t++}return i!==""&&(e+=ay(s,i)),e}function fS(n){return n.map(dS).join(",")}function hS(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!_t(i))break;i=s}r++}return{attrs:e,classes:t}}function zt(n){return ws(()=>{let e=iv(n),t=fe(b({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Jy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$t.Emulated,styles:n.styles||jt,_:null,schemas:n.schemas||null,tView:null,id:""});sv(t);let r=n.dependencies;return t.directiveDefs=ly(r,!1),t.pipeDefs=ly(r,!0),t.id=mS(t),t})}function pS(n){return cr(n)||ev(n)}function gS(n){return n!==null}function Cs(n){return ws(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function cy(n,e){if(n==null)return us;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Mn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Mn.None?[r,a]:r,e[s]=o):t[s]=r}return t}function wi(n){return ws(()=>{let e=iv(n);return sv(e),e})}function cr(n){return n[Vb]||null}function ev(n){return n[$b]||null}function tv(n){return n[Bb]||null}function nv(n){let e=cr(n)||ev(n)||tv(n);return e!==null?e.standalone:!1}function rv(n,e){let t=n[Hb]||null;if(!t&&e===!0)throw new Error(`Type ${Be(n)} does not have '\u0275mod' property.`);return t}function iv(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||us,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cy(n.inputs,e),outputs:cy(n.outputs),debugInfo:null}}function sv(n){n.features?.forEach(e=>e(n))}function ly(n,e){if(!n)return null;let t=e?tv:pS;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(gS)}function mS(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function On(n){return{\u0275providers:n}}function yS(...n){return{\u0275providers:ov(!0,n),\u0275fromNgModule:!0}}function ov(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Ud(e,o=>{let a=o;Qu(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&av(i,s),t}function av(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Bd(i,s=>{e(s,r)})}}function Qu(n,e,t,r){if(n=at(n),!n)return!1;let i=null,s=ny(n),o=!s&&cr(n);if(!s&&!o){let c=n.ngModule;if(s=ny(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Qu(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Ud(s.imports,u=>{Qu(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&av(l,e)}if(!a){let l=hi(i)||(()=>new i);e({provide:i,useFactory:l,deps:jt},i),e({provide:Zy,useValue:i,multi:!0},i),e({provide:pi,useValue:()=>j(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Bd(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Bd(n,e){for(let t of n)zy(t)&&(t=t.\u0275providers),Array.isArray(t)?Bd(t,e):e(t)}var vS=oe({provide:String,useValue:oe});function cv(n){return n!==null&&typeof n=="object"&&vS in n}function _S(n){return!!(n&&n.useExisting)}function ES(n){return!!(n&&n.useFactory)}function Zu(n){return typeof n=="function"}var Ja=new P(""),Ca={},wS={},Lu;function Hd(){return Lu===void 0&&(Lu=new Ra),Lu}var lt=class{},ds=class extends lt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xu(e,o=>this.processProvider(o)),this.records.set(Qy,ci(void 0,this)),i.has("environment")&&this.records.set(lt,ci(void 0,this));let s=this.records.get(Ja);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Zy,jt,V.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Tn(this),r=ot(void 0),i;try{return e()}finally{Tn(t),ot(r)}}get(e,t=ls,r=V.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(iy))return e[iy](this);r=Za(r);let i,s=Tn(this),o=ot(void 0);try{if(!(r&V.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=TS(e)&&Qa(e);l&&this.injectableDefInScope(l)?c=ci(Ju(e),Ca):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&V.Self?Hd():this.parent;return t=r&V.Optional&&t===ls?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Na]=a[Na]||[]).unshift(Be(e)),s)throw a;return Xb(a,e,"R3InjectorError",this.source)}else throw a}finally{ot(o),Tn(s)}}resolveInjectorInitializers(){let e=G(null),t=Tn(this),r=ot(void 0),i;try{let s=this.get(pi,jt,V.Self);for(let o of s)o()}finally{Tn(t),ot(r),G(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Be(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new v(205,!1)}processProvider(e){e=at(e);let t=Zu(e)?e:at(e&&e.provide),r=CS(e);if(!Zu(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ci(void 0,Ca,!0),i.factory=()=>Ku(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=G(null);try{return t.value===Ca&&(t.value=wS,t.value=t.factory()),typeof t.value=="object"&&t.value&&SS(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=at(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ju(n){let e=Qa(n),t=e!==null?e.factory:hi(n);if(t!==null)return t;if(n instanceof P)throw new v(204,!1);if(n instanceof Function)return IS(n);throw new v(204,!1)}function IS(n){if(n.length>0)throw new v(204,!1);let t=jb(n);return t!==null?()=>t.factory(n):()=>new n}function CS(n){if(cv(n))return ci(void 0,n.useValue);{let e=DS(n);return ci(e,Ca)}}function DS(n,e,t){let r;if(Zu(n)){let i=at(n);return hi(i)||Ju(i)}else if(cv(n))r=()=>at(n.useValue);else if(ES(n))r=()=>n.useFactory(...Ku(n.deps||[]));else if(_S(n))r=()=>j(at(n.useExisting));else{let i=at(n&&(n.useClass||n.provide));if(bS(n))r=()=>new i(...Ku(n.deps));else return hi(i)||Ju(i)}return r}function ci(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bS(n){return!!n.deps}function SS(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function TS(n){return typeof n=="function"||typeof n=="object"&&n instanceof P}function Xu(n,e){for(let t of n)Array.isArray(t)?Xu(t,e):t&&zy(t)?Xu(t.\u0275providers,e):e(t)}function ln(n,e){n instanceof ds&&n.assertNotDestroyed();let t,r=Tn(n),i=ot(void 0);try{return e()}finally{Tn(r),ot(i)}}function AS(){return Wy()!==void 0||Qb()!=null}function NS(n){return typeof n=="function"}var Wt=0,$=1,x=2,je=3,Et=4,bt=5,fs=6,xa=7,xe=8,gi=9,Bt=10,Pe=11,hs=12,uy=13,Ii=14,wt=15,mi=16,li=17,yi=18,Xa=19,lv=20,An=21,ju=22,ct=23,It=25,zd=1;var lr=7,Pa=8,Oa=9,Le=10,ka=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ka||{});function Nn(n){return Array.isArray(n)&&typeof n[zd]=="object"}function un(n){return Array.isArray(n)&&n[zd]===!0}function uv(n){return(n.flags&4)!==0}function ec(n){return n.componentOffset>-1}function Wd(n){return(n.flags&1)===1}function Ci(n){return!!n.template}function ed(n){return(n[x]&512)!==0}var td=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function dv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function tc(){return fv}function fv(n){return n.type.prototype.ngOnChanges&&(n.setInput=RS),MS}tc.ngInherit=!0;function MS(){let n=pv(this),e=n?.current;if(e){let t=n.previous;if(t===us)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function RS(n,e,t,r,i){let s=this.declaredInputs[r],o=pv(n)||xS(n,{previous:us,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new td(l&&l.currentValue,t,c===us),dv(n,e,i,t)}var hv="__ngSimpleChanges__";function pv(n){return n[hv]||null}function xS(n,e){return n[hv]=e}var dy=null;var Ut=function(n,e,t){dy?.(n,e,t)},PS="svg",OS="math";function Ht(n){for(;Array.isArray(n);)n=n[Wt];return n}function kS(n){for(;Array.isArray(n);){if(typeof n[zd]=="object")return n;n=n[Wt]}return null}function FS(n,e){return Ht(e[n])}function St(n,e){return Ht(e[n.index])}function qd(n,e){return n.data[e]}function kn(n,e){let t=e[n];return Nn(t)?t:t[Wt]}function Gd(n){return(n[x]&128)===128}function LS(n){return un(n[je])}function vi(n,e){return e==null?null:n[e]}function gv(n){n[li]=0}function mv(n){n[x]&1024||(n[x]|=1024,Gd(n)&&rc(n))}function jS(n,e){for(;n>0;)e=e[Ii],n--;return e}function nc(n){return!!(n[x]&9216||n[ct]?.dirty)}function nd(n){n[Bt].changeDetectionScheduler?.notify(8),n[x]&64&&(n[x]|=1024),nc(n)&&rc(n)}function rc(n){n[Bt].changeDetectionScheduler?.notify(0);let e=ur(n);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!Gd(e)));)e=ur(e)}function yv(n,e){if((n[x]&256)===256)throw new v(911,!1);n[An]===null&&(n[An]=[]),n[An].push(e)}function US(n,e){if(n[An]===null)return;let t=n[An].indexOf(e);t!==-1&&n[An].splice(t,1)}function ur(n){let e=n[je];return un(e)?e[je]:e}var W={lFrame:Tv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vv=!1;function VS(){return W.lFrame.elementDepthCount}function $S(){W.lFrame.elementDepthCount++}function BS(){W.lFrame.elementDepthCount--}function _v(){return W.bindingsEnabled}function HS(){return W.skipHydrationRootTNode!==null}function zS(n){return W.skipHydrationRootTNode===n}function WS(){W.skipHydrationRootTNode=null}function ae(){return W.lFrame.lView}function dn(){return W.lFrame.tView}function ic(n){return W.lFrame.contextLView=n,n[xe]}function sc(n){return W.lFrame.contextLView=null,n}function ut(){let n=Ev();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ev(){return W.lFrame.currentTNode}function qS(){let n=W.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ds(n,e){let t=W.lFrame;t.currentTNode=n,t.isParent=e}function wv(){return W.lFrame.isParent}function GS(){W.lFrame.isParent=!1}function Iv(){return vv}function fy(n){vv=n}function Cv(){let n=W.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function KS(n){return W.lFrame.bindingIndex=n}function bs(){return W.lFrame.bindingIndex++}function YS(){return W.lFrame.inI18n}function QS(n,e){let t=W.lFrame;t.bindingIndex=t.bindingRootIndex=n,rd(e)}function ZS(){return W.lFrame.currentDirectiveIndex}function rd(n){W.lFrame.currentDirectiveIndex=n}function JS(n){let e=W.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Dv(n){W.lFrame.currentQueryIndex=n}function XS(n){let e=n[$];return e.type===2?e.declTNode:e.type===1?n[bt]:null}function bv(n,e,t){if(t&V.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&V.Host);)if(i=XS(s),i===null||(s=s[Ii],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=W.lFrame=Sv();return r.currentTNode=e,r.lView=n,!0}function Kd(n){let e=Sv(),t=n[$];W.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Sv(){let n=W.lFrame,e=n===null?null:n.child;return e===null?Tv(n):e}function Tv(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Av(){let n=W.lFrame;return W.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Nv=Av;function Yd(){let n=Av();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function eT(n){return(W.lFrame.contextLView=jS(n,W.lFrame.contextLView))[xe]}function oc(){return W.lFrame.selectedIndex}function dr(n){W.lFrame.selectedIndex=n}function Mv(){let n=W.lFrame;return qd(n.tView,n.selectedIndex)}function tT(){return W.lFrame.currentNamespace}var Rv=!0;function Qd(){return Rv}function Zd(n){Rv=n}function nT(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=fv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Jd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Da(n,e,t){xv(n,e,3,t)}function ba(n,e,t,r){(n[x]&3)===t&&xv(n,e,t,r)}function Uu(n,e){let t=n[x];(t&3)===e&&(t&=16383,t+=1,n[x]=t)}function xv(n,e,t,r){let i=r!==void 0?n[li]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[li]+=65536),(a<s||s==-1)&&(rT(n,t,e,c),n[li]=(n[li]&4294901760)+c+2),c++}function hy(n,e){Ut(4,n,e);let t=G(null);try{e.call(n)}finally{G(t),Ut(5,n,e)}}function rT(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[x]>>14<n[li]>>16&&(n[x]&3)===e&&(n[x]+=16384,hy(a,s)):hy(a,s)}var fi=-1,ps=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function iT(n){return n instanceof ps}function sT(n){return(n.flags&8)!==0}function oT(n){return(n.flags&16)!==0}var Vu={},id=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Za(r);let i=this.injector.get(e,Vu,r);return i!==Vu||t===Vu?i:this.parentInjector.get(e,t,r)}};function Pv(n){return n!==fi}function Fa(n){return n&32767}function aT(n){return n>>16}function La(n,e){let t=aT(n),r=e;for(;t>0;)r=r[Ii],t--;return r}var sd=!0;function py(n){let e=sd;return sd=n,e}var cT=256,Ov=cT-1,kv=5,lT=0,Vt={};function uT(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(cs)&&(r=t[cs]),r==null&&(r=t[cs]=lT++);let i=r&Ov,s=1<<i;e.data[n+(i>>kv)]|=s}function Fv(n,e){let t=Lv(n,e);if(t!==-1)return t;let r=e[$];r.firstCreatePass&&(n.injectorIndex=e.length,$u(r.data,n),$u(e,null),$u(r.blueprint,null));let i=Xd(n,e),s=n.injectorIndex;if(Pv(i)){let o=Fa(i),a=La(i,e),c=a[$].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function $u(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Lv(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Xd(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=Bv(i),r===null)return fi;if(t++,i=i[Ii],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return fi}function dT(n,e,t){uT(n,e,t)}function jv(n,e,t){if(t&V.Optional||n!==void 0)return n;jd(e,"NodeInjector")}function Uv(n,e,t,r){if(t&V.Optional&&r===void 0&&(r=null),!(t&(V.Self|V.Host))){let i=n[gi],s=ot(void 0);try{return i?i.get(e,r,t&V.Optional):qy(e,r,t&V.Optional)}finally{ot(s)}}return jv(r,e,t)}function Vv(n,e,t,r=V.Default,i){if(n!==null){if(e[x]&2048&&!(r&V.Self)){let o=mT(n,e,t,r,Vt);if(o!==Vt)return o}let s=$v(n,e,t,r,Vt);if(s!==Vt)return s}return Uv(e,t,r,i)}function $v(n,e,t,r,i){let s=pT(t);if(typeof s=="function"){if(!bv(e,n,r))return r&V.Host?jv(i,t,r):Uv(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&V.Optional))jd(t);else return o}finally{Nv()}}else if(typeof s=="number"){let o=null,a=Lv(n,e),c=fi,l=r&V.Host?e[wt][bt]:null;for((a===-1||r&V.SkipSelf)&&(c=a===-1?Xd(n,e):e[a+8],c===fi||!my(r,!1)?a=-1:(o=e[$],a=Fa(c),e=La(c,e)));a!==-1;){let u=e[$];if(gy(s,a,u.data)){let d=fT(a,e,t,o,r,l);if(d!==Vt)return d}c=e[a+8],c!==fi&&my(r,e[$].data[a+8]===l)&&gy(s,a,e)?(o=u,a=Fa(c),e=La(c,e)):a=-1}}return i}function fT(n,e,t,r,i,s){let o=e[$],a=o.data[n+8],c=r==null?ec(a)&&sd:r!=o&&(a.type&3)!==0,l=i&V.Host&&s===a,u=hT(a,o,t,c,l);return u!==null?gs(e,o,u,a):Vt}function hT(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=o[h];if(h<c&&t===p||h>=c&&p.type===t)return h}if(i){let h=o[c];if(h&&Ci(h)&&h.type===t)return c}return null}function gs(n,e,t,r){let i=n[t],s=e.data;if(iT(i)){let o=i;o.resolving&&Wb(zb(s[t]));let a=py(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?ot(o.injectImpl):null,u=bv(n,r,V.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&nT(t,s[t],e)}finally{l!==null&&ot(l),py(a),o.resolving=!1,Nv()}}return i}function pT(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(cs)?n[cs]:void 0;return typeof e=="number"?e>=0?e&Ov:gT:e}function gy(n,e,t){let r=1<<n;return!!(t[e+(n>>kv)]&r)}function my(n,e){return!(n&V.Self)&&!(n&V.Host&&e)}var ar=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Vv(this._tNode,this._lView,e,Za(r),t)}};function gT(){return new ar(ut(),ae())}function ef(n){return ws(()=>{let e=n.prototype.constructor,t=e[Aa]||od(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Aa]||od(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function od(n){return Vy(n)?()=>{let e=od(at(n));return e&&e()}:hi(n)}function mT(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[x]&2048&&!(o[x]&512);){let a=$v(s,o,t,r|V.Self,Vt);if(a!==Vt)return a;let c=s.parent;if(!c){let l=o[lv];if(l){let u=l.get(t,Vt,r);if(u!==Vt)return u}c=Bv(o),o=o[Ii]}s=c}return i}function Bv(n){let e=n[$],t=e.type;return t===2?e.declTNode:t===1?n[bt]:null}function yy(n,e=null,t=null,r){let i=Hv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Hv(n,e=null,t=null,r,i=new Set){let s=[t||jt,yS(n)];return r=r||(typeof n=="object"?void 0:Be(n)),new ds(s,e||Hd(),r||null,i)}var Ct=class n{static{this.THROW_IF_NOT_FOUND=ls}static{this.NULL=new Ra}static create(e,t){if(Array.isArray(e))return yy({name:""},t,e,"");{let r=e.name??"";return yy({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=M({token:n,providedIn:"any",factory:()=>j(Qy)})}static{this.__NG_ELEMENT_ID__=-1}};var yT=new P("");yT.__NG_ELEMENT_ID__=n=>{let e=ut();if(e===null)throw new v(204,!1);if(e.type&2)return e.value;if(n&V.Optional)return null;throw new v(204,!1)};var vT="ngOriginalError";function Bu(n){return n[vT]}var zv=!0,Wv=(()=>{class n{static{this.__NG_ELEMENT_ID__=_T}static{this.__NG_ENV_ID__=t=>t}}return n})(),ad=class extends Wv{constructor(e){super(),this._lView=e}onDestroy(e){return yv(this._lView,e),()=>US(this._lView,e)}};function _T(){return new ad(ae())}var Di=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ne(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}}return n})();var cd=class extends Fe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,AS()&&(this.destroyRef=E(Wv,{optional:!0})??void 0,this.pendingTasks=E(Di,{optional:!0})??void 0)}emit(e){let t=G(null);try{super.next(e)}finally{G(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof pe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Se=cd;function ja(...n){}function qv(n){let e,t;function r(){n=ja;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function vy(n){return queueMicrotask(()=>n()),()=>{n=ja}}var tf="isAngularZone",Ua=tf+"_ID",ET=0,se=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Se(!1),this.onMicrotaskEmpty=new Se(!1),this.onStable=new Se(!1),this.onError=new Se(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=zv}=e;if(typeof Zone>"u")throw new v(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,CT(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tf)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new v(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new v(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,wT,ja,ja);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},wT={};function nf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function IT(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){qv(()=>{n.callbackScheduled=!1,ld(n),n.isCheckStableRunning=!0,nf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ld(n)}function CT(n){let e=()=>{IT(n)},t=ET++;n._inner=n._inner.fork({name:"angular",properties:{[tf]:!0,[Ua]:t,[Ua+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(DT(c))return r.invokeTask(s,o,a,c);try{return _y(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Ey(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return _y(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!bT(c)&&e(),Ey(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,ld(n),nf(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function ld(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function _y(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ey(n){n._nesting--,nf(n)}var ud=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Se,this.onMicrotaskEmpty=new Se,this.onStable=new Se,this.onError=new Se}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function DT(n){return Gv(n,"__ignore_ng_zone__")}function bT(n){return Gv(n,"__scheduler_tick__")}function Gv(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var cn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Bu(e);for(;t&&Bu(t);)t=Bu(t);return t||null}},ST=new P("",{providedIn:"root",factory:()=>{let n=E(se),e=E(cn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function TT(){return ac(ut(),ae())}function ac(n,e){return new Ss(St(n,e))}var Ss=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=TT}}return n})();function Kv(n){return(n.flags&128)===128}var Yv=new Map,AT=0;function NT(){return AT++}function MT(n){Yv.set(n[Xa],n)}function dd(n){Yv.delete(n[Xa])}var wy="__ngContext__";function fr(n,e){Nn(e)?(n[wy]=e[Xa],MT(e)):n[wy]=e}function Qv(n){return Jv(n[hs])}function Zv(n){return Jv(n[Et])}function Jv(n){for(;n!==null&&!un(n);)n=n[Et];return n}var fd;function Xv(n){fd=n}function RT(){if(fd!==void 0)return fd;if(typeof document<"u")return document;throw new v(210,!1)}var rf=new P("",{providedIn:"root",factory:()=>xT}),xT="ng",sf=new P(""),Fn=new P("",{providedIn:"platform",factory:()=>"unknown"});var of=new P(""),af=new P("",{providedIn:"root",factory:()=>RT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var PT="h",OT="b";var kT=()=>null;function cf(n,e,t=!1){return kT(n,e,t)}var e_=!1,FT=new P("",{providedIn:"root",factory:()=>e_});var Va=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ly})`}};function lf(n){return n instanceof Va?n.changingThisBreaksApplicationSecurity:n}function t_(n,e){let t=LT(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ly})`)}return t===e}function LT(n){return n instanceof Va&&n.getTypeName()||null}var jT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function n_(n){return n=String(n),n.match(jT)?n:"unsafe:"+n}var uf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(uf||{});function r_(n){let e=UT();return e?e.sanitize(uf.URL,n)||"":t_(n,"URL")?lf(n):n_(Ld(n))}function UT(){let n=ae();return n&&n[Bt].sanitizer}function i_(n){return n instanceof Function?n():n}var gr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(gr||{}),VT;function df(n,e){return VT(n,e)}function ui(n,e,t,r,i){if(r!=null){let s,o=!1;un(r)?s=r:Nn(r)&&(o=!0,r=r[Wt]);let a=Ht(r);n===0&&t!==null?i==null?c_(e,t,a):$a(e,t,a,i||null,!0):n===1&&t!==null?$a(e,t,a,i||null,!0):n===2?t0(e,a,o):n===3&&e.destroyNode(a),s!=null&&r0(e,n,s,t,i)}}function $T(n,e){return n.createText(e)}function BT(n,e,t){n.setValue(e,t)}function s_(n,e,t){return n.createElement(e,t)}function HT(n,e){o_(n,e),e[Wt]=null,e[bt]=null}function zT(n,e,t,r,i,s){r[Wt]=i,r[bt]=e,lc(n,r,t,1,i,s)}function o_(n,e){e[Bt].changeDetectionScheduler?.notify(9),lc(n,e,e[Pe],2,null,null)}function WT(n){let e=n[hs];if(!e)return Hu(n[$],n);for(;e;){let t=null;if(Nn(e))t=e[hs];else{let r=e[Le];r&&(t=r)}if(!t){for(;e&&!e[Et]&&e!==n;)Nn(e)&&Hu(e[$],e),e=e[je];e===null&&(e=n),Nn(e)&&Hu(e[$],e),t=e&&e[Et]}e=t}}function qT(n,e,t,r){let i=Le+r,s=t.length;r>0&&(t[i-1][Et]=e),r<s-Le?(e[Et]=t[i],Yy(t,Le+r,e)):(t.push(e),e[Et]=null),e[je]=t;let o=e[mi];o!==null&&t!==o&&a_(o,e);let a=e[yi];a!==null&&a.insertView(n),nd(e),e[x]|=128}function a_(n,e){let t=n[Oa],r=e[je];if(Nn(r))n[x]|=ka.HasTransplantedViews;else{let i=r[je][wt];e[wt]!==i&&(n[x]|=ka.HasTransplantedViews)}t===null?n[Oa]=[e]:t.push(e)}function ff(n,e){let t=n[Oa],r=t.indexOf(e);t.splice(r,1)}function ms(n,e){if(n.length<=Le)return;let t=Le+e,r=n[t];if(r){let i=r[mi];i!==null&&i!==n&&ff(i,r),e>0&&(n[t-1][Et]=r[Et]);let s=Ma(n,Le+e);HT(r[$],r);let o=s[yi];o!==null&&o.detachView(s[$]),r[je]=null,r[Et]=null,r[x]&=-129}return r}function cc(n,e){if(!(e[x]&256)){let t=e[Pe];t.destroyNode&&lc(n,e,t,3,null,null),WT(e)}}function Hu(n,e){if(e[x]&256)return;let t=G(null);try{e[x]&=-129,e[x]|=256,e[ct]&&hu(e[ct]),KT(n,e),GT(n,e),e[$].type===1&&e[Pe].destroy();let r=e[mi];if(r!==null&&un(e[je])){r!==e[je]&&ff(r,e);let i=e[yi];i!==null&&i.detachView(n)}dd(e)}finally{G(t)}}function GT(n,e){let t=n.cleanup,r=e[xa];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[xa]=null);let i=e[An];if(i!==null){e[An]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function KT(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ps)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ut(4,a,c);try{c.call(a)}finally{Ut(5,a,c)}}else{Ut(4,i,s);try{s.call(i)}finally{Ut(5,i,s)}}}}}function YT(n,e,t){return QT(n,e.parent,t)}function QT(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Wt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===$t.None||s===$t.Emulated)return null}return St(r,t)}}function $a(n,e,t,r,i){n.insertBefore(e,t,r,i)}function c_(n,e,t){n.appendChild(e,t)}function Iy(n,e,t,r,i){r!==null?$a(n,e,t,r,i):c_(n,e,t)}function l_(n,e){return n.parentNode(e)}function ZT(n,e){return n.nextSibling(e)}function JT(n,e,t){return e0(n,e,t)}function XT(n,e,t){return n.type&40?St(n,t):null}var e0=XT,Cy;function hf(n,e,t,r){let i=YT(n,r,e),s=e[Pe],o=r.parent||e[bt],a=JT(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Iy(s,i,t[c],a,!1);else Iy(s,i,t,a,!1);Cy!==void 0&&Cy(s,r,e,t,i)}function os(n,e){if(e!==null){let t=e.type;if(t&3)return St(e,n);if(t&4)return hd(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return os(n,r);{let i=n[e.index];return un(i)?hd(-1,i):Ht(i)}}else{if(t&128)return os(n,e.next);if(t&32)return df(e,n)()||Ht(n[e.index]);{let r=u_(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ur(n[wt]);return os(i,r)}else return os(n,e.next)}}}return null}function u_(n,e){if(e!==null){let r=n[wt][bt],i=e.projection;return r.projection[i]}return null}function hd(n,e){let t=Le+n+1;if(t<e.length){let r=e[t],i=r[$].firstChild;if(i!==null)return os(r,i)}return e[lr]}function t0(n,e,t){n.removeChild(null,e,t)}function pf(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&fr(Ht(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)pf(n,e,t.child,r,i,s,!1),ui(e,n,i,a,s);else if(c&32){let l=df(t,r),u;for(;u=l();)ui(e,n,i,u,s);ui(e,n,i,a,s)}else c&16?n0(n,e,r,t,i,s):ui(e,n,i,a,s);t=o?t.projectionNext:t.next}}function lc(n,e,t,r,i,s){pf(t,r,n.firstChild,e,i,s,!1)}function n0(n,e,t,r,i,s){let o=t[wt],c=o[bt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ui(e,n,i,u,s)}else{let l=c,u=o[je];Kv(r)&&(l.flags|=128),pf(n,e,l,u,i,s,!0)}}function r0(n,e,t,r,i){let s=t[lr],o=Ht(t);s!==o&&ui(e,n,r,s,i);for(let a=Le;a<t.length;a++){let c=t[a];lc(c[$],c,n,e,r,s)}}function i0(n,e,t){n.setAttribute(e,"style",t)}function d_(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function f_(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Yu(n,e,r),i!==null&&d_(n,e,i),s!==null&&i0(n,e,s)}var mr={};function ye(n=1){h_(dn(),ae(),oc()+n,!1)}function h_(n,e,t,r){if(!r)if((e[x]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Da(e,s,t)}else{let s=n.preOrderHooks;s!==null&&ba(e,s,0,t)}dr(t)}function Je(n,e=V.Default){let t=ae();if(t===null)return j(n,e);let r=ut();return Vv(r,t,at(n),e)}function p_(n,e,t,r,i,s){let o=G(null);try{let a=null;i&Mn.SignalBased&&(a=e[r][Im]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Mn.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):dv(e,a,r,s)}finally{G(o)}}function s0(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)dr(~i);else{let s=i,o=t[++r],a=t[++r];QS(o,s);let c=e[s];a(2,c)}}}finally{dr(-1)}}function uc(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Wt]=i,d[x]=r|4|128|8|64,(l!==null||n&&n[x]&2048)&&(d[x]|=2048),gv(d),d[je]=d[Ii]=n,d[xe]=t,d[Bt]=o||n&&n[Bt],d[Pe]=a||n&&n[Pe],d[gi]=c||n&&n[gi]||null,d[bt]=s,d[Xa]=NT(),d[fs]=u,d[lv]=l,d[wt]=e.type==2?n[wt]:d,d}function dc(n,e,t,r,i){let s=n.data[e];if(s===null)s=o0(n,e,t,r,i),YS()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=qS();s.injectorIndex=o===null?-1:o.injectorIndex}return Ds(s,!0),s}function o0(n,e,t,r,i){let s=Ev(),o=wv(),a=o?s:s&&s.parent,c=n.data[e]=d0(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function g_(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function m_(n,e,t,r,i){let s=oc(),o=r&2;try{dr(-1),o&&e.length>It&&h_(n,e,It,!1),Ut(o?2:0,i),t(r,i)}finally{dr(s),Ut(o?3:1,i)}}function y_(n,e,t){if(uv(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{G(r)}}}function v_(n,e,t){_v()&&(y0(n,e,t,St(t,e)),(t.flags&64)===64&&D_(n,e,t))}function __(n,e,t=St){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function E_(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=gf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function gf(n,e,t,r,i,s,o,a,c,l,u){let d=It+r,f=d+i,h=a0(d,f),p=typeof l=="function"?l():l;return h[$]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function a0(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:mr);return t}function c0(n,e,t,r){let s=r.get(FT,e_)||t===$t.ShadowDom,o=n.selectRootElement(e,s);return l0(o),o}function l0(n){u0(n)}var u0=()=>null;function d0(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return HS()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Dy(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Mn.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?by(r,t,l,a,c):by(r,t,l,a)}return r}function by(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function f0(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],f=t?t.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=Dy(0,d.inputs,u,c,h),l=Dy(1,d.outputs,u,l,p);let g=c!==null&&o!==null&&!$d(e)?S0(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function h0(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function w_(n,e,t,r,i,s,o,a){let c=St(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(mf(n,t,u,r,i),ec(e)&&p0(t,e.index)):e.type&3?(r=h0(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function p0(n,e){let t=kn(e,n);t[x]&16||(t[x]|=64)}function I_(n,e,t,r){if(_v()){let i=r===null?null:{"":-1},s=_0(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&C_(n,e,t,o,i,a),i&&E0(t,r,i)}t.mergedAttrs=Vd(t.mergedAttrs,t.attrs)}function C_(n,e,t,r,i,s){for(let l=0;l<r.length;l++)dT(Fv(t,e),n,r[l].type);I0(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=g_(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=Vd(t.mergedAttrs,u.hostAttrs),C0(n,t,e,c,u),w0(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}f0(n,t,s)}function g0(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;m0(o)!=a&&o.push(a),o.push(t,r,s)}}function m0(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function y0(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;ec(t)&&D0(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Fv(t,e),fr(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=gs(e,n,a,t);if(fr(l,e),o!==null&&b0(e,a-i,l,c,t,o),Ci(c)){let u=kn(t.index,e);u[xe]=gs(e,n,a,t)}}}function D_(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=ZS();try{dr(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];rd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&v0(c,l)}}finally{dr(-1),rd(o)}}function v0(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function _0(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(cS(e,o.selectors,!1))if(r||(r=[]),Ci(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;pd(n,e,c)}else r.unshift(o),pd(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function pd(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function E0(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new v(-301,!1);r.push(e[i],s)}}}function w0(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ci(e)&&(t[""]=n)}}function I0(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function C0(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=hi(i.type,!0)),o=new ps(s,Ci(i),Je);n.blueprint[r]=o,t[r]=o,g0(n,e,r,g_(n,t,i.hostVars,mr),i)}function D0(n,e,t){let r=St(e,n),i=E_(t),s=n[Bt].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=fc(n,uc(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function b0(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];p_(r,t,c,l,u,d)}}function S0(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function b_(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function S_(n,e){let t=n.contentQueries;if(t!==null){let r=G(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Dv(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function fc(n,e){return n[hs]?n[uy][Et]=e:n[hs]=e,n[uy]=e,e}function gd(n,e,t){Dv(0);let r=G(null);try{e(n,t)}finally{G(r)}}function T0(n){return n[xa]??=[]}function A0(n){return n.cleanup??=[]}function N0(n,e,t){return(n===null||Ci(n))&&(t=kS(t[e.index])),t[Pe]}function T_(n,e){let t=n[gi],r=t?t.get(cn,null):null;r&&r.handleError(e)}function mf(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];p_(u,l,r,a,c,i)}}function M0(n,e,t){let r=FS(e,n);BT(n[Pe],r,t)}function R0(n,e){let t=kn(e,n),r=t[$];x0(r,t);let i=t[Wt];i!==null&&t[fs]===null&&(t[fs]=cf(i,t[gi])),yf(r,t,t[xe])}function x0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function yf(n,e,t){Kd(e);try{let r=n.viewQuery;r!==null&&gd(1,r,t);let i=n.template;i!==null&&m_(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[yi]?.finishViewCreation(n),n.staticContentQueries&&S_(n,e),n.staticViewQueries&&gd(2,n.viewQuery,t);let s=n.components;s!==null&&P0(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[x]&=-5,Yd()}}function P0(n,e){for(let t=0;t<e.length;t++)R0(n,e[t])}function hc(n,e,t,r){let i=G(null);try{let s=e.tView,a=n[x]&4096?4096:16,c=uc(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[mi]=l;let u=n[yi];return u!==null&&(c[yi]=u.createEmbeddedView(s)),yf(s,c,t),c}finally{G(i)}}function A_(n,e){let t=Le+e;if(t<n.length)return n[t]}function ys(n,e){return!e||e.firstChild===null||Kv(n)}function pc(n,e,t,r=!0){let i=e[$];if(qT(i,e,n,t),r){let o=hd(t,n),a=e[Pe],c=l_(a,n[lr]);c!==null&&zT(i,n[bt],a,e,c,o)}let s=e[fs];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function N_(n,e){let t=ms(n,e);return t!==void 0&&cc(t[$],t),t}function Ba(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Ht(s)),un(s)&&O0(s,r);let o=t.type;if(o&8)Ba(n,e,t.child,r);else if(o&32){let a=df(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=u_(e,t);if(Array.isArray(a))r.push(...a);else{let c=ur(e[wt]);Ba(c[$],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function O0(n,e){for(let t=Le;t<n.length;t++){let r=n[t],i=r[$].firstChild;i!==null&&Ba(r[$],r,i,e)}n[lr]!==n[Wt]&&e.push(n[lr])}var M_=[];function k0(n){return n[ct]??F0(n)}function F0(n){let e=M_.pop()??Object.create(j0);return e.lView=n,e}function L0(n){n.lView[ct]!==n&&(n.lView=null,M_.push(n))}var j0=fe(b({},uu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{rc(n.lView)},consumerOnSignalRead(){this.lView[ct]=this}});function U0(n){let e=n[ct]??Object.create(V0);return e.lView=n,e}var V0=fe(b({},uu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ur(n.lView);for(;e&&!R_(e[$]);)e=ur(e);e&&mv(e)},consumerOnSignalRead(){this.lView[ct]=this}});function R_(n){return n.type!==2}var $0=100;function x_(n,e=!0,t=0){let r=n[Bt],i=r.rendererFactory,s=!1;s||i.begin?.();try{B0(n,t)}catch(o){throw e&&T_(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function B0(n,e){let t=Iv();try{fy(!0),md(n,e);let r=0;for(;nc(n);){if(r===$0)throw new v(103,!1);r++,md(n,1)}}finally{fy(t)}}function H0(n,e,t,r){let i=e[x];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Bt].inlineEffectRunner?.flush(),Kd(e);let a=!0,c=null,l=null;s||(R_(n)?(l=k0(e),c=du(l)):Cm()===null?(a=!1,l=U0(e),c=du(l)):e[ct]&&(hu(e[ct]),e[ct]=null));try{gv(e),KS(n.bindingStartIndex),t!==null&&m_(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let h=n.preOrderCheckHooks;h!==null&&Da(e,h,null)}else{let h=n.preOrderHooks;h!==null&&ba(e,h,0,null),Uu(e,0)}if(o||z0(e),P_(e,0),n.contentQueries!==null&&S_(n,e),!s)if(u){let h=n.contentCheckHooks;h!==null&&Da(e,h)}else{let h=n.contentHooks;h!==null&&ba(e,h,1),Uu(e,1)}s0(n,e);let d=n.components;d!==null&&k_(e,d,0);let f=n.viewQuery;if(f!==null&&gd(2,f,r),!s)if(u){let h=n.viewCheckHooks;h!==null&&Da(e,h)}else{let h=n.viewHooks;h!==null&&ba(e,h,2),Uu(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ju]){for(let h of e[ju])h();e[ju]=null}s||(e[x]&=-73)}catch(u){throw s||rc(e),u}finally{l!==null&&(Dm(l,c),a&&L0(l)),Yd()}}function P_(n,e){for(let t=Qv(n);t!==null;t=Zv(t))for(let r=Le;r<t.length;r++){let i=t[r];O_(i,e)}}function z0(n){for(let e=Qv(n);e!==null;e=Zv(e)){if(!(e[x]&ka.HasTransplantedViews))continue;let t=e[Oa];for(let r=0;r<t.length;r++){let i=t[r];mv(i)}}}function W0(n,e,t){let r=kn(e,n);O_(r,t)}function O_(n,e){Gd(n)&&md(n,e)}function md(n,e){let r=n[$],i=n[x],s=n[ct],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&fu(s)),o||=!1,s&&(s.dirty=!1),n[x]&=-9217,o)H0(r,n,r.template,n[xe]);else if(i&8192){P_(n,1);let a=r.components;a!==null&&k_(n,a,1)}}function k_(n,e,t){for(let r=0;r<e.length;r++)W0(n,e[r],t)}function vf(n,e){let t=Iv()?64:1088;for(n[Bt].changeDetectionScheduler?.notify(e);n;){n[x]|=t;let r=ur(n);if(ed(n)&&!r)return n;n=r}return null}var hr=class{get rootNodes(){let e=this._lView,t=e[$];return Ba(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xe]}set context(e){this._lView[xe]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[je];if(un(e)){let t=e[Pa],r=t?t.indexOf(this):-1;r>-1&&(ms(e,r),Ma(t,r))}this._attachedToViewContainer=!1}cc(this._lView[$],this._lView)}onDestroy(e){yv(this._lView,e)}markForCheck(){vf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[x]&=-129}reattach(){nd(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,x_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new v(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ed(this._lView),t=this._lView[mi];t!==null&&!e&&ff(t,this._lView),o_(this._lView[$],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new v(902,!1);this._appRef=e;let t=ed(this._lView),r=this._lView[mi];r!==null&&!t&&a_(r,this._lView),nd(this._lView)}},gc=(()=>{class n{static{this.__NG_ELEMENT_ID__=K0}}return n})(),q0=gc,G0=class extends q0{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=hc(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new hr(i)}};function K0(){return Y0(ut(),ae())}function Y0(n,e){return n.type&4?new G0(e,n,ac(n,e)):null}var dH=new RegExp(`^(\\d+)*(${OT}|${PT})*(.*)`);var Q0=()=>null;function vs(n,e){return Q0(n,e)}var _i=class{},mc=new P("",{providedIn:"root",factory:()=>!1});var F_=new P(""),L_=new P(""),yd=class{},Ha=class{};function Z0(n){let e=Error(`No component factory found for ${Be(n)}.`);return e[J0]=n,e}var J0="ngComponent";var vd=class{resolveComponentFactory(e){throw Z0(e)}},Ei=class{static{this.NULL=new vd}},Rn=class{},yc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>X0()}}return n})();function X0(){let n=ae(),e=ut(),t=kn(e.index,n);return(Nn(t)?t:n)[Pe]}var eA=(()=>{class n{static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>null})}}return n})();function _d(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ey(i,a);else if(s==2){let c=a,l=e[++o];r=ey(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var za=class extends Ei{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=cr(e);return new _s(t,this.ngModule)}};function Sy(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Mn.None;e?t.push({propName:o,templateName:r,isSignal:(a&Mn.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function tA(n){let e=n.toLowerCase();return e==="svg"?PS:e==="math"?OS:null}var _s=class extends Ha{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Sy(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Sy(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=fS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=G(null);try{i=i||this.ngModule;let o=i instanceof lt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new id(e,o):e,c=a.get(Rn,null);if(c===null)throw new v(407,!1);let l=a.get(eA,null),u=a.get(_i,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?c0(f,r,this.componentDef.encapsulation,a):s_(f,h,tA(h)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let m=null;p!==null&&(m=cf(p,a,!0));let I=gf(0,null,null,1,0,null,null,null,null,null,null),T=uc(null,I,null,g,null,null,d,f,a,null,m);Kd(T);let w,C,H=null;try{let A=this.componentDef,D,Z=null;A.findHostDirectiveDefs?(D=[],Z=new Map,A.findHostDirectiveDefs(A,D,Z),D.push(A)):D=[A];let de=nA(T,p);H=rA(de,p,A,D,T,d,f),C=qd(I,It),p&&oA(f,A,p,r),t!==void 0&&aA(C,this.ngContentSelectors,t),w=sA(H,A,D,Z,T,[cA]),yf(I,T,null)}catch(A){throw H!==null&&dd(H),dd(T),A}finally{Yd()}return new Ed(this.componentType,w,ac(C,T),T,C)}finally{G(s)}}},Ed=class extends yd{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new hr(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;mf(s[$],s,i,e,t),this.previousInputValues.set(e,t);let o=kn(this._tNode.index,s);vf(o,1)}}get injector(){return new ar(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function nA(n,e){let t=n[$],r=It;return n[r]=e,dc(t,r,2,"#host",null)}function rA(n,e,t,r,i,s,o){let a=i[$];iA(r,n,e,o);let c=null;e!==null&&(c=cf(e,i[gi]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=uc(i,E_(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&pd(a,n,r.length-1),fc(i,d),i[n.index]=d}function iA(n,e,t,r){for(let i of n)e.mergedAttrs=Vd(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_d(e,e.mergedAttrs,!0),t!==null&&f_(r,t,e))}function sA(n,e,t,r,i,s){let o=ut(),a=i[$],c=St(o,i);C_(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,f=gs(i,a,d,o);fr(f,i)}D_(a,i,o),c&&fr(c,i);let l=gs(i,a,o.directiveStart+o.componentOffset,o);if(n[xe]=i[xe]=l,s!==null)for(let u of s)u(l,e);return y_(a,o,i),l}function oA(n,e,t,r){if(r)Yu(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=hS(e.selectors[0]);i&&Yu(n,t,i),s&&s.length>0&&d_(n,t,s.join(" "))}}function aA(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function cA(){let n=ut();Jd(ae()[$],n)}var bi=(()=>{class n{static{this.__NG_ELEMENT_ID__=lA}}return n})();function lA(){let n=ut();return dA(n,ae())}var uA=bi,j_=class extends uA{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ac(this._hostTNode,this._hostLView)}get injector(){return new ar(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xd(this._hostTNode,this._hostLView);if(Pv(e)){let t=La(e,this._hostLView),r=Fa(e),i=t[$].data[r+8];return new ar(i,t)}else return new ar(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ty(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=vs(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,ys(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!NS(e),a;if(o)a=t;else{let p=t||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new _s(cr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(lt,null);g&&(s=g)}let u=cr(c.componentType??{}),d=vs(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,s);return this.insertImpl(h.hostView,a,ys(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(LS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[je],l=new j_(c,c[bt],c[je]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return pc(o,i,s,r),e.attachToViewContainerRef(),Yy(zu(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ty(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ms(this._lContainer,t);r&&(Ma(zu(this._lContainer),t),cc(r[$],r))}detach(e){let t=this._adjustIndex(e,-1),r=ms(this._lContainer,t);return r&&Ma(zu(this._lContainer),t)!=null?new hr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ty(n){return n[Pa]}function zu(n){return n[Pa]||(n[Pa]=[])}function dA(n,e){let t,r=e[n.index];return un(r)?t=r:(t=b_(r,e,null,n),e[n.index]=t,fc(e,t)),hA(t,e,n,r),new j_(t,n,e)}function fA(n,e){let t=n[Pe],r=t.createComment(""),i=St(e,n),s=l_(t,i);return $a(t,s,r,ZT(t,i),!1),r}var hA=mA,pA=()=>!1;function gA(n,e,t){return pA(n,e,t)}function mA(n,e,t,r){if(n[lr])return;let i;t.type&8?i=Ht(r):i=fA(e,t),n[lr]=i}var Ay=new Set;function yr(n){Ay.has(n)||(Ay.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var xn=class{},Es=class{};var wd=class extends xn{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new za(this);let s=rv(e);this._bootstrapComponents=i_(s.bootstrap),this._r3Injector=Hv(e,t,[{provide:xn,useValue:this},{provide:Ei,useValue:this.componentFactoryResolver},...r],Be(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Id=class extends Es{constructor(e){super(),this.moduleType=e}create(e){return new wd(this.moduleType,e,[])}};var Wa=class extends xn{constructor(e){super(),this.componentFactoryResolver=new za(this),this.instance=null;let t=new ds([...e.providers,{provide:xn,useValue:this},{provide:Ei,useValue:this.componentFactoryResolver}],e.parent||Hd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _f(n,e,t=null){return new Wa({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function U_(n){return vA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function yA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function vA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function V_(n,e,t){return n[e]=t}function _A(n,e){return n[e]}function pr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function EA(n,e,t,r){let i=pr(n,e,t);return pr(n,e+1,r)||i}function wA(n){return(n.flags&32)===32}function IA(n,e,t,r,i,s,o,a,c){let l=e.consts,u=dc(e,n,4,o||null,a||null);I_(e,t,u,vi(l,c)),Jd(e,u);let d=u.tView=gf(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Cd(n,e,t,r,i,s,o,a,c,l){let u=t+It,d=e.firstCreatePass?IA(u,e,n,r,i,s,o,a,c):e.data[u];Ds(d,!1);let f=CA(e,n,d,t);Qd()&&hf(e,n,f,d),fr(f,n);let h=b_(f,n,f,d);return n[u]=h,fc(n,h),gA(h,d,n),Wd(d)&&v_(e,n,d),c!=null&&__(n,d,l),d}function Tt(n,e,t,r,i,s,o,a){let c=ae(),l=dn(),u=vi(l.consts,s);return Cd(c,l,n,e,t,r,i,u,o,a),Tt}var CA=DA;function DA(n,e,t,r){return Zd(!0),e[Pe].createComment("")}var as=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(as||{}),bA=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Ny=class n{constructor(){this.ngZone=E(se),this.scheduler=E(_i),this.errorHandler=E(cn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[as.EarlyRead,as.Write,as.MixedReadWrite,as.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=M({token:n,providedIn:"root",factory:()=>new n})}};function SA(n,e,t,r){return pr(n,bs(),t)?e+Ld(t)+r:mr}function Ue(n,e,t){let r=ae(),i=bs();if(pr(r,i,e)){let s=dn(),o=Mv();w_(s,o,r,n,e,r[Pe],t,!1)}return Ue}function My(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";mf(n,t,s[o],o,r)}var Dd=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Wu(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function TA(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=n.at(s),u=e[s],d=Wu(s,l,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let f=n.at(o),h=e[c],p=Wu(o,f,c,h,t);if(p!==0){p<0&&n.updateValue(o,h),o--,c--;continue}let g=t(s,l),m=t(o,f),I=t(s,u);if(Object.is(I,m)){let T=t(c,h);Object.is(T,g)?(n.swap(s,o),n.updateValue(o,h),c--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new qa,i??=xy(n,s,o,t),bd(n,r,s,I))n.updateValue(s,u),s++,o++;else if(i.has(I))r.set(g,n.detach(s)),o--;else{let T=n.create(s,e[s]);n.attach(s,T),s++,o++}}for(;s<=c;)Ry(n,r,t,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let u=n.at(s),d=l.value,f=Wu(s,u,s,d,t);if(f!==0)f<0&&n.updateValue(s,d),s++,l=c.next();else{r??=new qa,i??=xy(n,s,o,t);let h=t(s,d);if(bd(n,r,s,h))n.updateValue(s,d),s++,o++,l=c.next();else if(!i.has(h))n.attach(s,n.create(s,d)),s++,o++,l=c.next();else{let p=t(s,u);r.set(p,n.detach(s)),o--}}}for(;!l.done;)Ry(n,r,t,n.length,l.value),l=c.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(c=>{n.destroy(c)})}function bd(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function Ry(n,e,t,r,i){if(bd(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function xy(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var qa=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Ef(n,e){yr("NgControlFlow");let t=ae(),r=bs(),i=t[r]!==mr?t[r]:-1,s=i!==-1?Ga(t,It+i):void 0,o=0;if(pr(t,r,n)){let a=G(null);try{if(s!==void 0&&N_(s,o),n!==-1){let c=It+n,l=Ga(t,c),u=Nd(t[$],c),d=vs(l,u.tView.ssrId),f=hc(t,u,e,{dehydratedView:d});pc(l,f,o,ys(u,d))}}finally{G(a)}}else if(s!==void 0){let a=A_(s,o);a!==void 0&&(a[xe]=e)}}var Sd=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Le}};function $_(n){return n}var Td=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function B_(n,e,t,r,i,s,o,a,c,l,u,d,f){yr("NgControlFlow");let h=ae(),p=dn(),g=c!==void 0,m=ae(),I=a?o.bind(m[wt][xe]):o,T=new Td(g,I);m[It+n]=T,Cd(h,p,n+1,e,t,r,i,vi(p.consts,s)),g&&Cd(h,p,n+2,c,l,u,d,vi(p.consts,f))}var Ad=class extends Dd{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Le}at(e){return this.getLView(e)[xe].$implicit}attach(e,t){let r=t[fs];this.needsIndexUpdate||=e!==this.length,pc(this.lContainer,t,e,ys(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,AA(this.lContainer,e)}create(e,t){let r=vs(this.lContainer,this.templateTNode.tView.ssrId),i=hc(this.hostLView,this.templateTNode,new Sd(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){cc(e[$],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[xe].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[xe].$index=e}getLView(e){return NA(this.lContainer,e)}};function H_(n){let e=G(null),t=oc();try{let r=ae(),i=r[$],s=r[t],o=t+1,a=Ga(r,o);if(s.liveCollection===void 0){let l=Nd(i,o);s.liveCollection=new Ad(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(TA(c,n,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=bs(),u=c.length===0;if(pr(r,l,u)){let d=t+2,f=Ga(r,d);if(u){let h=Nd(i,d),p=vs(f,h.tView.ssrId),g=hc(r,h,void 0,{dehydratedView:p});pc(f,g,0,ys(h,p))}else N_(f,0)}}}finally{G(e)}}function Ga(n,e){return n[e]}function AA(n,e){return ms(n,e)}function NA(n,e){return A_(n,e)}function Nd(n,e){return qd(n,e)}function MA(n,e,t,r,i,s){let o=e.consts,a=vi(o,i),c=dc(e,n,2,r,a);return I_(e,t,c,vi(o,s)),c.attrs!==null&&_d(c,c.attrs,!1),c.mergedAttrs!==null&&_d(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ce(n,e,t,r){let i=ae(),s=dn(),o=It+n,a=i[Pe],c=s.firstCreatePass?MA(o,s,i,e,t,r):s.data[o],l=RA(s,i,c,a,e,n);i[o]=l;let u=Wd(c);return Ds(c,!0),f_(a,l,c),!wA(c)&&Qd()&&hf(s,i,l,c),VS()===0&&fr(l,i),$S(),u&&(v_(s,i,c),y_(s,c,i)),r!==null&&__(i,c),ce}function le(){let n=ut();wv()?GS():(n=n.parent,Ds(n,!1));let e=n;zS(e)&&WS(),BS();let t=dn();return t.firstCreatePass&&(Jd(t,n),uv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&sT(e)&&My(t,e,ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&oT(e)&&My(t,e,ae(),e.stylesWithoutHost,!1),le}function qt(n,e,t,r){return ce(n,e,t,r),le(),qt}var RA=(n,e,t,r,i,s)=>(Zd(!0),s_(r,i,tT()));function wf(){return ae()}function If(n,e,t){let r=ae(),i=bs();if(pr(r,i,e)){let s=dn(),o=Mv(),a=JS(s.data),c=N0(a,o,r);w_(s,o,r,n,e,c,t,!0)}return If}var Ka="en-US";var xA=Ka;function PA(n){typeof n=="string"&&(xA=n.toLowerCase().replace(/_/g,"-"))}var OA=(n,e,t)=>{};function He(n,e,t,r){let i=ae(),s=dn(),o=ut();return FA(s,i,i[Pe],o,n,e,r),He}function kA(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[xa],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function FA(n,e,t,r,i,s,o){let a=Wd(r),l=n.firstCreatePass&&A0(n),u=e[xe],d=T0(e),f=!0;if(r.type&3||o){let g=St(r,e),m=o?o(g):g,I=d.length,T=o?C=>o(Ht(C[r.index])):r.index,w=null;if(!o&&a&&(w=kA(n,e,i,r.index)),w!==null){let C=w.__ngLastListenerFn__||w;C.__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,f=!1}else{s=Oy(r,e,u,s),OA(g,i,s);let C=t.listen(m,i,s);d.push(s,C),l&&l.push(i,T,I,I+1)}}else s=Oy(r,e,u,s);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let I=p[m],T=p[m+1],H=e[I][T].subscribe(s),A=d.length;d.push(s,H),l&&l.push(i,r.index,A,-(A+1))}}}function Py(n,e,t,r){let i=G(null);try{return Ut(6,e,t),t(r)!==!1}catch(s){return T_(n,s),!1}finally{Ut(7,e,t),G(i)}}function Oy(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?kn(n.index,e):e;vf(o,5);let a=Py(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=Py(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function At(n=1){return eT(n)}function Oe(n,e=""){let t=ae(),r=dn(),i=n+It,s=r.firstCreatePass?dc(r,i,1,e,null):r.data[i],o=LA(r,t,s,e,n);t[i]=o,Qd()&&hf(r,t,o,s),Ds(s,!1)}var LA=(n,e,t,r,i)=>(Zd(!0),$T(e[Pe],r));function vr(n){return Ln("",n,""),vr}function Ln(n,e,t){let r=ae(),i=SA(r,n,e,t);return i!==mr&&M0(r,oc(),i),Ln}var jA=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ov(!1,t.type),i=r.length>0?_f([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=M({token:n,providedIn:"environment",factory:()=>new n(j(lt))})}}return n})();function Gt(n){yr("NgStandalone"),n.getStandaloneInjector=e=>e.get(jA).getOrCreateStandaloneInjector(n)}function z_(n,e,t){let r=Cv()+n,i=ae();return i[r]===mr?V_(i,r,t?e.call(t):e()):_A(i,r)}function W_(n,e,t,r,i){return VA(ae(),Cv(),n,e,t,r,i)}function UA(n,e){let t=n[e];return t===mr?void 0:t}function VA(n,e,t,r,i,s,o){let a=e+t;return EA(n,a,i,s)?V_(n,a+2,o?r.call(o,i,s):r(i,s)):UA(n,a+2)}var Pn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},q_=new Pn("18.2.13");var vc=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var G_=new P("");function Ts(n){return!!n&&typeof n.then=="function"}function K_(n){return!!n&&typeof n.subscribe=="function"}var Y_=new P(""),Q_=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=E(Y_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Ts(s))t.push(s);else if(K_(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cf=new P("");function $A(){bm(()=>{throw new v(600,!1)})}function BA(n){return n.isBoundToModule}var HA=10;function zA(n,e,t){try{let r=t();return Ts(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var _r=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(ST),this.afterRenderManager=E(bA),this.zonelessEnabled=E(mc),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Fe,this.afterTick=new Fe,this.componentTypes=[],this.components=[],this.isStable=E(Di).hasPendingTasks.pipe(K(t=>!t)),this._injector=E(lt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Ha;if(!this._injector.get(Q_).done){let f=!i&&nv(t),h=!1;throw new v(405,h)}let o;i?o=t:o=this._injector.get(Ei).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=BA(o)?void 0:this._injector.get(xn),c=r||o.selector,l=o.create(Ct.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(G_,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Sa(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new v(101,!1);let t=G(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,G(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Rn,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<HA;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)WA(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>nc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Sa(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Cf,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sa(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new v(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sa(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function WA(n,e,t,r){if(!t&&!nc(n))return;x_(n,e,t&&!r?0:1)}var Md=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Df=(()=>{class n{compileModuleSync(t){return new Id(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=rv(t),s=i_(i.declarations).reduce((o,a)=>{let c=cr(a);return c&&o.push(new _s(c)),o},[]);return new Md(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qA=(()=>{class n{constructor(){this.zone=E(se),this.changeDetectionScheduler=E(_i),this.applicationRef=E(_r)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GA=new P("",{factory:()=>!1});function Z_({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new se(fe(b({},X_()),{scheduleInRootZone:t})),[{provide:se,useFactory:n},{provide:pi,multi:!0,useFactory:()=>{let r=E(qA,{optional:!0});return()=>r.initialize()}},{provide:pi,multi:!0,useFactory:()=>{let r=E(KA);return()=>{r.initialize()}}},e===!0?{provide:F_,useValue:!0}:[],{provide:L_,useValue:t??zv}]}function J_(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Z_({ngZoneFactory:()=>{let i=X_(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&yr("NgZone_CoalesceEvent"),new se(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return On([{provide:GA,useValue:!0},{provide:mc,useValue:!1},r])}function X_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var KA=(()=>{class n{constructor(){this.subscription=new pe,this.initialized=!1,this.zone=E(se),this.pendingTasks=E(Di)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YA=(()=>{class n{constructor(){this.appRef=E(_r),this.taskService=E(Di),this.ngZone=E(se),this.zonelessEnabled=E(mc),this.disableScheduling=E(F_,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new pe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ua):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(L_,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ud||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?vy:qv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ua+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vy(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QA(){return typeof $localize<"u"&&$localize.locale||Ka}var bf=new P("",{providedIn:"root",factory:()=>E(bf,V.Optional|V.SkipSelf)||QA()});var Rd=new P("");function Ia(n){return!n.moduleRef}function ZA(n){let e=Ia(n)?n.r3Injector:n.moduleRef.injector,t=e.get(se);return t.run(()=>{Ia(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(cn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Ia(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Rd);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Rd);o.add(s),n.moduleRef.onDestroy(()=>{Sa(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return zA(r,t,()=>{let s=e.get(Q_);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(bf,Ka);if(PA(o||Ka),Ia(n)){let a=e.get(_r);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return JA(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function JA(n,e){let t=n.injector.get(_r);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new v(-403,!1);e.push(n)}var Ta=null;function XA(n=[],e){return Ct.create({name:e,providers:[{provide:Ja,useValue:"platform"},{provide:Rd,useValue:new Set([()=>Ta=null])},...n]})}function eN(n=[]){if(Ta)return Ta;let e=XA(n);return Ta=e,$A(),tN(e),e}function tN(n){n.get(sf,null)?.forEach(t=>t())}var As=(()=>{class n{static{this.__NG_ELEMENT_ID__=nN}}return n})();function nN(n){return rN(ut(),ae(),(n&16)===16)}function rN(n,e,t){if(ec(n)&&!t){let r=kn(n.index,e);return new hr(r,r)}else if(n.type&175){let r=e[wt];return new hr(r,e)}return null}var xd=class{constructor(){}supports(e){return U_(e)}create(e){return new Pd(e)}},iN=(n,e)=>e,Pd=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||iN}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<ky(r,i,s)?t:r,a=ky(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<l&&(s[f]=h+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!U_(e))throw new v(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,yA(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Od(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ya),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ya),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Od=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},kd=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ya=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new kd,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ky(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Fy(){return new Sf([new xd])}var Sf=(()=>{class n{static{this.\u0275prov=M({token:n,providedIn:"root",factory:Fy})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Fy()),deps:[[n,new Ky,new Dt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new v(901,!1)}}return n})();function eE(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=eN(r),s=[Z_({}),{provide:_i,useExisting:YA},...t||[]],o=new Wa({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return ZA({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var oE=null;function Si(){return oE}function aE(n){oE??=n}var _c=class{};var ze=new P(""),cE=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(cN),providedIn:"platform"})}}return n})();var cN=(()=>{class n extends cE{constructor(){super(),this._doc=E(ze),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Si().getBaseHref(this._doc)}onPopState(t){let r=Si().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Si().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function lE(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function tE(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Er(n){return n&&n[0]!=="?"?"?"+n:n}var wc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(uE),providedIn:"root"})}}return n})(),lN=new P(""),uE=(()=>{class n extends wc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??E(ze).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lE(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Er(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Er(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Er(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(j(cE),j(lN,8))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ns=(()=>{class n{constructor(t){this._subject=new Se,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=fN(tE(nE(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Er(r))}normalize(t){return n.stripTrailingSlash(dN(this._basePath,nE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Er(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Er}static{this.joinWithSlash=lE}static{this.stripTrailingSlash=tE}static{this.\u0275fac=function(r){return new(r||n)(j(wc))}}static{this.\u0275prov=M({token:n,factory:()=>uN(),providedIn:"root"})}}return n})();function uN(){return new Ns(j(wc))}function dN(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function nE(n){return n.replace(/\/index.html$/,"")}function fN(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function dE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Tf=/\s+/,rE=[],fE=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=rE,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Tf):rE}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Tf):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Tf).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Je(Ss),Je(yc))}}static{this.\u0275dir=wi({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Af=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ic=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Af(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),iE(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);iE(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Je(bi),Je(gc),Je(Sf))}}static{this.\u0275dir=wi({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function iE(n,e){n.context.$implicit=e.item}var hE=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Nf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Je(bi),Je(gc))}}static{this.\u0275dir=wi({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),Nf=class{constructor(){this.$implicit=null,this.ngIf=null}};function sE(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Be(e)}'.`)}var wr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Cs({type:n})}static{this.\u0275inj=Is({})}}return n})(),pE="browser",hN="server";function Mf(n){return n===hN}var Ec=class{};var Of=class extends _c{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kf=class n extends Of{static makeCurrent(){aE(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=pN();return t==null?null:gN(t)}resetBaseElement(){Ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dE(document.cookie,e)}},Ms=null;function pN(){return Ms=Ms||document.querySelector("base"),Ms?Ms.getAttribute("href"):null}function gN(n){return new URL(n,document.baseURI).pathname}var mN=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),Ff=new P(""),yE=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new v(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(j(Ff),j(se))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),Cc=class{constructor(e){this._doc=e}},xf="ng-app-id",vE=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mf(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${xf}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(xf),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(xf,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(j(ze),j(rf),j(af,8),j(Fn))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),Pf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jf=/%COMP%/g,_E="%COMP%",yN=`_nghost-${_E}`,vN=`_ngcontent-${_E}`,_N=!0,EN=new P("",{providedIn:"root",factory:()=>_N});function wN(n){return vN.replace(jf,n)}function IN(n){return yN.replace(jf,n)}function EE(n,e){return e.map(t=>t.replace(jf,n))}var Dc=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Mf(a),this.defaultRenderer=new Rs(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===$t.ShadowDom&&(r=fe(b({},r),{encapsulation:$t.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof bc?i.applyToHost(t):i instanceof xs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case $t.Emulated:s=new bc(c,l,r,this.appId,u,o,a,d);break;case $t.ShadowDom:return new Lf(c,l,t,r,o,a,this.nonce,d);default:s=new xs(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(j(yE),j(vE),j(rf),j(EN),j(ze),j(Fn),j(se),j(af))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),Rs=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Pf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(gE(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(gE(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new v(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Pf[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Pf[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(gr.DashCase|gr.Important)?e.style.setProperty(t,r,i&gr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&gr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Si().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function gE(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Lf=class extends Rs{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=EE(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xs=class extends Rs{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?EE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bc=class extends xs{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=wN(l),this.hostAttr=IN(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},CN=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(j(ze))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),mE=["alt","control","meta","shift"],DN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bN={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},SN=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Si().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),mE.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=DN[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),mE.forEach(o=>{if(o!==i){let a=bN[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(j(ze))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})();function wE(n,e){return eE(b({rootComponent:n},TN(e)))}function TN(n){return{appProviders:[...xN,...n?.providers??[]],platformProviders:RN}}function AN(){kf.makeCurrent()}function NN(){return new cn}function MN(){return Xv(document),document}var RN=[{provide:Fn,useValue:pE},{provide:sf,useValue:AN,multi:!0},{provide:ze,useFactory:MN,deps:[]}];var xN=[{provide:Ja,useValue:"root"},{provide:cn,useFactory:NN,deps:[]},{provide:Ff,useClass:CN,multi:!0,deps:[ze,se,Fn]},{provide:Ff,useClass:SN,multi:!0,deps:[ze]},Dc,vE,yE,{provide:Rn,useExisting:Dc},{provide:Ec,useClass:mN,deps:[]},[]];var IE=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(j(ze))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var U="primary",Ys=Symbol("RouteTitle"),Hf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xi(n){return new Hf(n)}function ON(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function kN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Kt(n[t],e[t]))return!1;return!0}function Kt(n,e){let t=n?zf(n):void 0,r=e?zf(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!ME(n[i],e[i]))return!1;return!0}function zf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ME(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function RE(n){return n.length>0?n[n.length-1]:null}function Un(n){return Mu(n)?n:Ts(n)?_e(Promise.resolve(n)):F(n)}var FN={exact:PE,subset:OE},xE={exact:LN,subset:jN,ignored:()=>!0};function CE(n,e,t){return FN[t.paths](n.root,e.root,t.matrixParams)&&xE[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function LN(n,e){return Kt(n,e)}function PE(n,e,t){if(!Cr(n.segments,e.segments)||!Ac(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!PE(n.children[r],e.children[r],t))return!1;return!0}function jN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ME(n[t],e[t]))}function OE(n,e,t){return kE(n,e,e.segments,t)}function kE(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Cr(i,t)||e.hasChildren()||!Ac(i,t,r))}else if(n.segments.length===t.length){if(!Cr(n.segments,t)||!Ac(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!OE(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Cr(n.segments,i)||!Ac(n.segments,i,r)||!n.children[U]?!1:kE(n.children[U],e,s,r)}}function Ac(n,e,t){return e.every((r,i)=>xE[t](n[i].parameters,r.parameters))}var hn=class{constructor(e=new ne([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xi(this.queryParams),this._queryParamMap}toString(){return $N.serialize(this)}},ne=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nc(this)}},Ir=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xi(this.parameters),this._parameterMap}toString(){return LE(this)}};function UN(n,e){return Cr(n,e)&&n.every((t,r)=>Kt(t.parameters,e[r].parameters))}function Cr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function VN(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===U&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==U&&(t=t.concat(e(i,r)))}),t}var mh=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>new Us,providedIn:"root"})}}return n})(),Us=class{parse(e){let t=new qf(e);return new hn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ps(e.root,!0)}`,r=zN(e.queryParams),i=typeof e.fragment=="string"?`#${BN(e.fragment)}`:"";return`${t}${r}${i}`}},$N=new Us;function Nc(n){return n.segments.map(e=>LE(e)).join("/")}function Ps(n,e){if(!n.hasChildren())return Nc(n);if(e){let t=n.children[U]?Ps(n.children[U],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==U&&r.push(`${i}:${Ps(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=VN(n,(r,i)=>i===U?[Ps(n.children[U],!1)]:[`${i}:${Ps(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[U]!=null?`${Nc(n)}/${t[0]}`:`${Nc(n)}/(${t.join("//")})`}}function FE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sc(n){return FE(n).replace(/%3B/gi,";")}function BN(n){return encodeURI(n)}function Wf(n){return FE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mc(n){return decodeURIComponent(n)}function DE(n){return Mc(n.replace(/\+/g,"%20"))}function LE(n){return`${Wf(n.path)}${HN(n.parameters)}`}function HN(n){return Object.entries(n).map(([e,t])=>`;${Wf(e)}=${Wf(t)}`).join("")}function zN(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Sc(t)}=${Sc(i)}`).join("&"):`${Sc(t)}=${Sc(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var WN=/^[^\/()?;#]+/;function Uf(n){let e=n.match(WN);return e?e[0]:""}var qN=/^[^\/()?;=#]+/;function GN(n){let e=n.match(qN);return e?e[0]:""}var KN=/^[^=?&#]+/;function YN(n){let e=n.match(KN);return e?e[0]:""}var QN=/^[^&#]+/;function ZN(n){let e=n.match(QN);return e?e[0]:""}var qf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[U]=new ne(e,t)),r}parseSegment(){let e=Uf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new v(4009,!1);return this.capture(e),new Ir(Mc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=GN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Uf(this.remaining);i&&(r=i,this.capture(r))}e[Mc(t)]=Mc(r)}parseQueryParam(e){let t=YN(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=ZN(this.remaining);o&&(r=o,this.capture(r))}let i=DE(t),s=DE(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Uf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new v(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=U);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[U]:new ne([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new v(4011,!1)}};function jE(n){return n.segments.length>0?new ne([],{[U]:n}):n}function UE(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=UE(i);if(r===U&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ne(n.segments,e);return JN(t)}function JN(n){if(n.numberOfChildren===1&&n.children[U]){let e=n.children[U];return new ne(n.segments.concat(e.segments),e.children)}return n}function Vs(n){return n instanceof hn}function XN(n,e,t=null,r=null){let i=VE(n);return $E(i,e,t,r)}function VE(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new ne(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=jE(r);return e??i}function $E(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Vf(i,i,i,t,r);let s=eM(e);if(s.toRoot())return Vf(i,i,new ne([],{}),t,r);let o=tM(s,i,n),a=o.processChildren?Fs(o.segmentGroup,o.index,s.commands):HE(o.segmentGroup,o.index,s.commands);return Vf(i,o.segmentGroup,a,t,r)}function Rc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function $s(n){return typeof n=="object"&&n!=null&&n.outlets}function Vf(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=BE(n,e,t);let a=jE(UE(o));return new hn(a,s,i)}function BE(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=BE(s,e,t)}),new ne(n.segments,r)}var xc=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rc(r[0]))throw new v(4003,!1);let i=r.find($s);if(i&&i!==RE(r))throw new v(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function eM(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new xc(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new xc(t,e,r)}var Ni=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function tM(n,e,t){if(n.isAbsolute)return new Ni(e,!0,0);if(!t)return new Ni(e,!1,NaN);if(t.parent===null)return new Ni(t,!0,0);let r=Rc(n.commands[0])?0:1,i=t.segments.length-1+r;return nM(t,i,n.numberOfDoubleDots)}function nM(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new v(4005,!1);i=r.segments.length}return new Ni(r,!1,i-s)}function rM(n){return $s(n[0])?n[0].outlets:{[U]:n}}function HE(n,e,t){if(n??=new ne([],{}),n.segments.length===0&&n.hasChildren())return Fs(n,e,t);let r=iM(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ne(n.segments.slice(0,r.pathIndex),{});return s.children[U]=new ne(n.segments.slice(r.pathIndex),n.children),Fs(s,0,i)}else return r.match&&i.length===0?new ne(n.segments,{}):r.match&&!n.hasChildren()?Gf(n,e,t):r.match?Fs(n,0,i):Gf(n,e,t)}function Fs(n,e,t){if(t.length===0)return new ne(n.segments,{});{let r=rM(t),i={};if(Object.keys(r).some(s=>s!==U)&&n.children[U]&&n.numberOfChildren===1&&n.children[U].segments.length===0){let s=Fs(n.children[U],e,t);return new ne(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=HE(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ne(n.segments,i)}}function iM(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if($s(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!SE(c,l,o))return s;r+=2}else{if(!SE(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gf(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if($s(s)){let c=sM(s.outlets);return new ne(r,c)}if(i===0&&Rc(t[0])){let c=n.segments[e];r.push(new Ir(c.path,bE(t[0]))),i++;continue}let o=$s(s)?s.outlets[U]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Rc(a)?(r.push(new Ir(o,bE(a))),i+=2):(r.push(new Ir(o,{})),i++)}return new ne(r,{})}function sM(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Gf(new ne([],{}),0,r))}),e}function bE(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function SE(n,e,t){return n==t.path&&Kt(e,t.parameters)}var Ls="imperative",Me=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Me||{}),dt=class{constructor(e,t){this.id=e,this.url=t}},Bs=class extends dt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Me.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dr=class extends dt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Me.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},et=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(et||{}),Kf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Kf||{}),fn=class extends dt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Me.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},br=class extends dt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Me.NavigationSkipped}},Hs=class extends dt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Me.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Pc=class extends dt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Me.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yf=class extends dt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Me.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qf=class extends dt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Me.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Zf=class extends dt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Me.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jf=class extends dt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Me.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xf=class{constructor(e){this.route=e,this.type=Me.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},eh=class{constructor(e){this.route=e,this.type=Me.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},th=class{constructor(e){this.snapshot=e,this.type=Me.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nh=class{constructor(e){this.snapshot=e,this.type=Me.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rh=class{constructor(e){this.snapshot=e,this.type=Me.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ih=class{constructor(e){this.snapshot=e,this.type=Me.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zs=class{},Pi=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function oM(n,e){return n.providers&&!n._injector&&(n._injector=_f(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Mt(n){return n.outlet||U}function aM(n,e){let t=n.filter(r=>Mt(r)===e);return t.push(...n.filter(r=>Mt(r)!==e)),t}function Qs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sh=class{get injector(){return Qs(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Vc(this.rootInjector),this.attachRef=null}},Vc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(j(lt))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Oc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=oh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=oh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ah(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ah(e,this._root).map(t=>t.value)}};function oh(n,e){if(n===e.value)return e;for(let t of e.children){let r=oh(n,t);if(r)return r}return null}function ah(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ah(n,t);if(r.length)return r.unshift(e),r}return[]}var Xe=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ai(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var kc=class extends Oc{constructor(e,t){super(e),this.snapshot=t,yh(this,e)}toString(){return this.snapshot.toString()}};function zE(n){let e=cM(n),t=new Ne([new Ir("",{})]),r=new Ne({}),i=new Ne({}),s=new Ne({}),o=new Ne(""),a=new jn(t,r,s,o,i,U,n,e.root);return a.snapshot=e.root,new kc(new Xe(a,[]),e)}function cM(n){let e={},t={},r={},i="",s=new Mi([],e,r,i,t,U,n,null,{});return new Lc("",new Xe(s,[]))}var jn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[Ys]))??F(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>xi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>xi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fc(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:b(b({},e.params),n.params),data:b(b({},e.data),n.data),resolve:b(b(b(b({},n.data),e.data),i?.data),n._resolvedData)}:r={params:b({},n.params),data:b({},n.data),resolve:b(b({},n.data),n._resolvedData??{})},i&&qE(i)&&(r.resolve[Ys]=i.title),r}var Mi=class{get title(){return this.data?.[Ys]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Lc=class extends Oc{constructor(e,t){super(t),this.url=e,yh(this,t)}toString(){return WE(this._root)}};function yh(n,e){e.value._routerState=n,e.children.forEach(t=>yh(n,t))}function WE(n){let e=n.children.length>0?` { ${n.children.map(WE).join(", ")} } `:"";return`${n.value}${e}`}function $f(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Kt(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Kt(e.params,t.params)||n.paramsSubject.next(t.params),kN(e.url,t.url)||n.urlSubject.next(t.url),Kt(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ch(n,e){let t=Kt(n.params,e.params)&&UN(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ch(n.parent,e.parent))}function qE(n){return typeof n.title=="string"||n.title===null}var vh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=U,this.activateEvents=new Se,this.deactivateEvents=new Se,this.attachEvents=new Se,this.detachEvents=new Se,this.parentContexts=E(Vc),this.location=E(bi),this.changeDetector=E(As),this.inputBinder=E(_h,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new v(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new lh(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=wi({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[tc]})}}return n})(),lh=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jn?this.route:e===Vc?this.childContexts:this.parent.get(e,t)}},_h=new P("");function lM(n,e,t){let r=Ws(n,e._root,t?t._root:void 0);return new kc(r,e)}function Ws(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=uM(n,e,t);return new Xe(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ws(n,a)),o}}let r=dM(e.value),i=e.children.map(s=>Ws(n,s));return new Xe(r,i)}}function uM(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ws(n,r,i);return Ws(n,r)})}function dM(n){return new jn(new Ne(n.url),new Ne(n.params),new Ne(n.queryParams),new Ne(n.fragment),new Ne(n.data),n.outlet,n.component,n)}var qs=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},GE="ngNavigationCancelingError";function jc(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Vs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=KE(!1,et.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function KE(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[GE]=!0,t.cancellationCode=e,t}function fM(n){return YE(n)&&Vs(n.url)}function YE(n){return!!n&&n[GE]}var hM=(n,e,t,r)=>K(i=>(new uh(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),uh=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$f(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ai(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ai(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ai(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ai(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ih(s.value.snapshot))}),e.children.length&&this.forwardEvent(new nh(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if($f(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$f(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Uc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ri=class{constructor(e,t){this.component=e,this.route=t}};function pM(n,e,t){let r=n._root,i=e?e._root:null;return Os(r,i,t,[r.value])}function gM(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ki(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!$y(n)?n:e.get(n):r}function Os(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ai(e);return n.children.forEach(o=>{mM(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>js(a,t.getContext(o),i)),i}function mM(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=yM(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Uc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Os(n,e,a?a.children:null,r,i):Os(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ri(a.outlet.component,o))}else o&&js(e,a,i),i.canActivateChecks.push(new Uc(r)),s.component?Os(n,null,a?a.children:null,r,i):Os(n,null,t,r,i);return i}function yM(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Cr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Cr(n.url,e.url)||!Kt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ch(n,e)||!Kt(n.queryParams,e.queryParams);case"paramsChange":default:return!ch(n,e)}}function js(n,e,t){let r=Ai(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?js(o,e.children.getContext(s),t):js(o,null,t):js(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ri(e.outlet.component,i)):t.canDeactivateChecks.push(new Ri(null,i)):t.canDeactivateChecks.push(new Ri(null,i))}function Zs(n){return typeof n=="function"}function vM(n){return typeof n=="boolean"}function _M(n){return n&&Zs(n.canLoad)}function EM(n){return n&&Zs(n.canActivate)}function wM(n){return n&&Zs(n.canActivateChild)}function IM(n){return n&&Zs(n.canDeactivate)}function CM(n){return n&&Zs(n.canMatch)}function QE(n){return n instanceof on||n?.name==="EmptyError"}var Tc=Symbol("INITIAL_VALUE");function Oi(){return vt(n=>va(n.map(e=>e.pipe(an(1),ku(Tc)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===Tc)return Tc;if(t===!1||DM(t))return t}return!0}),yt(e=>e!==Tc),an(1)))}function DM(n){return Vs(n)||n instanceof qs}function bM(n,e){return Ee(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?F(fe(b({},t),{guardsResult:!0})):SM(o,r,i,n).pipe(Ee(a=>a&&vM(a)?TM(r,s,n,e):F(a)),K(a=>fe(b({},t),{guardsResult:a})))})}function SM(n,e,t,r){return _e(n).pipe(Ee(i=>xM(i.component,i.route,t,e,r)),Lt(i=>i!==!0,!0))}function TM(n,e,t,r){return _e(e).pipe(oi(i=>si(NM(i.route.parent,r),AM(i.route,r),RM(n,i.path,t),MM(n,i.route,t))),Lt(i=>i!==!0,!0))}function AM(n,e){return n!==null&&e&&e(new rh(n)),F(!0)}function NM(n,e){return n!==null&&e&&e(new th(n)),F(!0)}function MM(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(s=>_a(()=>{let o=Qs(e)??t,a=ki(s,o),c=EM(a)?a.canActivate(e,n):ln(o,()=>a(e,n));return Un(c).pipe(Lt())}));return F(i).pipe(Oi())}function RM(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>gM(o)).filter(o=>o!==null).map(o=>_a(()=>{let a=o.guards.map(c=>{let l=Qs(o.node)??t,u=ki(c,l),d=wM(u)?u.canActivateChild(r,n):ln(l,()=>u(r,n));return Un(d).pipe(Lt())});return F(a).pipe(Oi())}));return F(s).pipe(Oi())}function xM(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(a=>{let c=Qs(e)??i,l=ki(a,c),u=IM(l)?l.canDeactivate(n,e,t,r):ln(c,()=>l(n,e,t,r));return Un(u).pipe(Lt())});return F(o).pipe(Oi())}function PM(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let s=i.map(o=>{let a=ki(o,n),c=_M(a)?a.canLoad(e,t):ln(n,()=>a(e,t));return Un(c)});return F(s).pipe(Oi(),ZE(r))}function ZE(n){return Iu(we(e=>{if(typeof e!="boolean")throw jc(n,e)}),K(e=>e===!0))}function OM(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let s=i.map(o=>{let a=ki(o,n),c=CM(a)?a.canMatch(e,t):ln(n,()=>a(e,t));return Un(c)});return F(s).pipe(Oi(),ZE(r))}var Gs=class{constructor(e){this.segmentGroup=e||null}},Ks=class extends Error{constructor(e){super(),this.urlTree=e}};function Ti(n){return ii(new Gs(n))}function kM(n){return ii(new v(4e3,!1))}function FM(n){return ii(KE(!1,et.GuardRejected))}var dh=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[U])return kM(`${e.redirectTo}`);i=i.children[U]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:g}=i,m=ln(s,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:g}));if(m instanceof hn)throw new Ks(m);t=m}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ks(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new hn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ne(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new v(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},fh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LM(n,e,t,r,i){let s=JE(n,e,t);return s.matched?(r=oM(e,r),OM(r,e,t,i).pipe(K(o=>o===!0?s:b({},fh)))):F(s)}function JE(n,e,t){if(e.path==="**")return jM(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?b({},fh):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ON)(t,n,e);if(!i)return b({},fh);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?b(b({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function jM(n){return{matched:!0,parameters:n.length>0?RE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function TE(n,e,t,r){return t.length>0&&$M(n,t,r)?{segmentGroup:new ne(e,VM(r,new ne(t,n.children))),slicedSegments:[]}:t.length===0&&BM(n,t,r)?{segmentGroup:new ne(n.segments,UM(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ne(n.segments,n.children),slicedSegments:t}}function UM(n,e,t,r){let i={};for(let s of t)if($c(n,e,s)&&!r[Mt(s)]){let o=new ne([],{});i[Mt(s)]=o}return b(b({},r),i)}function VM(n,e){let t={};t[U]=e;for(let r of n)if(r.path===""&&Mt(r)!==U){let i=new ne([],{});t[Mt(r)]=i}return t}function $M(n,e,t){return t.some(r=>$c(n,e,r)&&Mt(r)!==U)}function BM(n,e,t){return t.some(r=>$c(n,e,r))}function $c(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function HM(n,e,t){return e.length===0&&!n.children[t]}var hh=class{};function zM(n,e,t,r,i,s,o="emptyOnly"){return new ph(n,e,t,r,i,o,s).recognize()}var WM=31,ph=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new dh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new v(4002,`'${e.segmentGroup}'`)}recognize(){let e=TE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new Xe(r,t),s=new Lc("",i),o=XN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Mi([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,U,t).pipe(K(r=>({children:r,rootSnapshot:t})),bn(r=>{if(r instanceof Ks)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Gs?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(K(o=>o instanceof Xe?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return _e(s).pipe(oi(o=>{let a=r.children[o],c=aM(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Ou((o,a)=>(o.push(...a),o)),Sn(null),Pu(),Ee(o=>{if(o===null)return Ti(r);let a=XE(o);return qM(a),F(a)}))}processSegment(e,t,r,i,s,o,a){return _e(t).pipe(oi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(bn(l=>{if(l instanceof Gs)return F(null);throw l}))),Lt(c=>!!c),bn(c=>{if(QE(c))return HM(r,i,s)?F(new hh):Ti(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Mt(r)!==o&&(o===U||!$c(i,s,r))?Ti(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Ti(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=JE(t,i,s);if(!c)return Ti(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WM&&(this.allowRedirects=!1));let h=new Mi(s,l,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,AE(i),Mt(i),i.component??i._loadedComponent??null,i,NE(i)),p=Fc(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,g).pipe(Ee(m=>this.processSegment(e,r,t,m.concat(f),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=LM(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(vt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(vt(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Mi(f,d,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,AE(r),Mt(r),r.component??r._loadedComponent??null,r,NE(r)),g=Fc(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:m,slicedSegments:I}=TE(t,f,h,l);if(I.length===0&&m.hasChildren())return this.processChildren(u,l,m,p).pipe(K(w=>new Xe(p,w)));if(l.length===0&&I.length===0)return F(new Xe(p,[]));let T=Mt(r)===s;return this.processSegment(u,l,m,I,T?U:s,!0,p).pipe(K(w=>new Xe(p,w instanceof Xe?[w]:[])))}))):Ti(t)))}getChildConfig(e,t,r){return t.children?F({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?F({routes:t._loadedRoutes,injector:t._loadedInjector}):PM(e,t,r,this.urlSerializer).pipe(Ee(i=>i?this.configLoader.loadChildren(e,t).pipe(we(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):FM(t))):F({routes:[],injector:e})}};function qM(n){n.sort((e,t)=>e.value.outlet===U?-1:t.value.outlet===U?1:e.value.outlet.localeCompare(t.value.outlet))}function GM(n){let e=n.value.routeConfig;return e&&e.path===""}function XE(n){let e=[],t=new Set;for(let r of n){if(!GM(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=XE(r.children);e.push(new Xe(r.value,i))}return e.filter(r=>!t.has(r))}function AE(n){return n.data||{}}function NE(n){return n.resolve||{}}function KM(n,e,t,r,i,s){return Ee(o=>zM(n,e,t,r,o.extractedUrl,i,s).pipe(K(({state:a,tree:c})=>fe(b({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function YM(n,e){return Ee(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return F(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of ew(c))o.add(l);let a=0;return _e(o).pipe(oi(c=>s.has(c)?QM(c,r,n,e):(c.data=Fc(c,c.parent,n).resolve,F(void 0))),we(()=>a++),ai(1),Ee(c=>a===o.size?F(t):Ze))})}function ew(n){let e=n.children.map(t=>ew(t)).flat();return[n,...e]}function QM(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!qE(i)&&(s[Ys]=i.title),ZM(s,n,e,r).pipe(K(o=>(n._resolvedData=o,n.data=Fc(n,n.parent,t).resolve,null)))}function ZM(n,e,t,r){let i=zf(n);if(i.length===0)return F({});let s={};return _e(i).pipe(Ee(o=>JM(n[o],e,t,r).pipe(Lt(),we(a=>{if(a instanceof qs)throw jc(new Us,a);s[o]=a}))),ai(1),xu(s),bn(o=>QE(o)?Ze:ii(o)))}function JM(n,e,t,r){let i=Qs(e)??r,s=ki(n,i),o=s.resolve?s.resolve(e,t):ln(i,()=>s(e,t));return Un(o)}function Bf(n){return vt(e=>{let t=n(e);return t?_e(t).pipe(K(()=>e)):F(e)})}var tw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===U);return r}getResolvedTitleForRoute(t){return t.data[Ys]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(XM),providedIn:"root"})}}return n})(),XM=(()=>{class n extends tw{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(j(IE))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Eh=new P("",{providedIn:"root",factory:()=>({})}),eR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=zt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Gt],decls:1,vars:0,template:function(r,i){r&1&&qt(0,"router-outlet")},dependencies:[vh],encapsulation:2})}}return n})();function wh(n){let e=n.children&&n.children.map(wh),t=e?fe(b({},n),{children:e}):b({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==U&&(t.component=eR),t}var Ih=new P(""),tR=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(Df)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Un(t.loadComponent()).pipe(K(nw),we(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ss(()=>{this.componentLoaders.delete(t)})),i=new ei(r,()=>new Fe).pipe(Xr());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=nR(r,this.compiler,t,this.onLoadEndListener).pipe(ss(()=>{this.childrenLoaders.delete(r)})),o=new ei(s,()=>new Fe).pipe(Xr());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nR(n,e,t,r){return Un(n.loadChildren()).pipe(K(nw),Ee(i=>i instanceof Es||Array.isArray(i)?F(i):_e(e.compileModuleAsync(i))),K(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Ih,[],{optional:!0,self:!0}).flat()),{routes:o.map(wh),injector:s}}))}function rR(n){return n&&typeof n=="object"&&"default"in n}function nw(n){return rR(n)?n.default:n}var Ch=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(iR),providedIn:"root"})}}return n})(),iR=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sR=new P("");var oR=new P(""),aR=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Fe,this.transitionAbortSubject=new Fe,this.configLoader=E(tR),this.environmentInjector=E(lt),this.urlSerializer=E(mh),this.rootContexts=E(Vc),this.location=E(Ns),this.inputBindingEnabled=E(_h,{optional:!0})!==null,this.titleStrategy=E(tw),this.options=E(Eh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(Ch),this.createViewTransition=E(sR,{optional:!0}),this.navigationErrorHandler=E(oR,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Xf(i)),r=i=>this.events.next(new eh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(b(b({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ne({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ls,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yt(s=>s.id!==0),K(s=>fe(b({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),vt(s=>{let o=!1,a=!1;return F(s).pipe(vt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",et.SupersededByNewNavigation),Ze;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new br(c.id,this.urlSerializer.serialize(c.rawUrl),d,Kf.IgnoredSameUrlNavigation)),c.resolve(!1),Ze}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(vt(d=>{let f=this.transitions?.getValue();return this.events.next(new Bs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Ze:Promise.resolve(d)}),KM(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),we(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=fe(b({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new Pc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:g}=c,m=new Bs(d,this.urlSerializer.serialize(f),h,p);this.events.next(m);let I=zE(this.rootComponentType).snapshot;return this.currentTransition=s=fe(b({},c),{targetSnapshot:I,urlAfterRedirects:f,extras:fe(b({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let d="";return this.events.next(new br(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Kf.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ze}}),we(c=>{let l=new Yf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=s=fe(b({},c),{guards:pM(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),bM(this.environmentInjector,c=>this.events.next(c)),we(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw jc(this.urlSerializer,c.guardsResult);let l=new Qf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),yt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",et.GuardRejected),!1)),Bf(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(we(l=>{let u=new Zf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),vt(l=>{let u=!1;return F(l).pipe(YM(this.paramsInheritanceStrategy,this.environmentInjector),we({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",et.NoDataFromResolver)}}))}),we(l=>{let u=new Jf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Bf(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(we(f=>{u.component=f}),K(()=>{})));for(let f of u.children)d.push(...l(f));return d};return va(l(c.targetSnapshot.root)).pipe(Sn(null),an(1))}),Bf(()=>this.afterPreactivation()),vt(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?_e(u).pipe(K(()=>s)):F(s)}),K(c=>{let l=lM(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=fe(b({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),we(()=>{this.events.next(new zs)}),hM(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),an(1),we({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Fu(this.transitionAbortSubject.pipe(we(c=>{throw c}))),ss(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",et.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),bn(c=>{if(a=!0,YE(c))this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),fM(c)?this.events.next(new Pi(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Hs(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=ln(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof qs){let{message:d,cancellationCode:f}=jc(this.urlSerializer,u);this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),d,f)),this.events.next(new Pi(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Ze}))}))}cancelNavigationTransition(t,r,i){let s=new fn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cR(n){return n!==Ls}var lR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(uR),providedIn:"root"})}}return n})(),gh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},uR=(()=>{class n extends gh{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ef(n)))(i||n)}})()}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:()=>E(dR),providedIn:"root"})}}return n})(),dR=(()=>{class n extends rw{constructor(){super(...arguments),this.location=E(Ns),this.urlSerializer=E(mh),this.options=E(Eh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(Ch),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Bs)this.stateMemento=this.createStateMemento();else if(t instanceof br)this.rawUrlTree=r.initialUrl;else if(t instanceof Pc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof zs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof fn&&(t.code===et.GuardRejected||t.code===et.NoDataFromResolver)?this.restoreHistory(r):t instanceof Hs?this.restoreHistory(r,!0):t instanceof Dr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof hn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=b(b({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=b(b({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ef(n)))(i||n)}})()}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ks=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ks||{});function fR(n,e){n.events.pipe(yt(t=>t instanceof Dr||t instanceof fn||t instanceof Hs||t instanceof br),K(t=>t instanceof Dr||t instanceof br?ks.COMPLETE:(t instanceof fn?t.code===et.Redirect||t.code===et.SupersededByNewNavigation:!1)?ks.REDIRECTING:ks.FAILED),yt(t=>t!==ks.REDIRECTING),an(1)).subscribe(()=>{e()})}function hR(n){throw n}var pR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},iw=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=E(vc),this.stateManager=E(rw),this.options=E(Eh,{optional:!0})||{},this.pendingTasks=E(Di),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(aR),this.urlSerializer=E(mh),this.location=E(Ns),this.urlHandlingStrategy=E(Ch),this._events=new Fe,this.errorHandler=this.options.errorHandler||hR,this.navigated=!1,this.routeReuseStrategy=E(lR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(Ih,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(_h,{optional:!0}),this.eventsSubscription=new pe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof fn&&r.code!==et.Redirect&&r.code!==et.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Dr)this.navigated=!0;else if(r instanceof Pi){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=b({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||cR(i.source)},o);this.scheduleNavigation(a,Ls,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}yR(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ls,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=b({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(wh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=b(b({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=VE(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return $E(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Vs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ls,null,r)}navigate(t,r={skipLocationChange:!1}){return mR(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=b({},pR):r===!1?i=b({},gR):i=r,Vs(t))return CE(this.currentUrlTree,t,i);let s=this.parseUrl(t);return CE(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return fR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mR(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new v(4008,!1)}function yR(n){return!(n instanceof zs)&&!(n instanceof Pi)}var vR=new P("");function sw(n,...e){return On([{provide:Ih,multi:!0,useValue:n},[],{provide:jn,useFactory:_R,deps:[iw]},{provide:Cf,multi:!0,useFactory:ER},e.map(t=>t.\u0275providers)])}function _R(n){return n.routerState.root}function ER(){let n=E(Ct);return e=>{let t=n.get(_r);if(e!==t.components[0])return;let r=n.get(iw),i=n.get(wR);n.get(IR)===1&&r.initialNavigation(),n.get(CR,null,V.Optional)?.setUpPreloading(),n.get(vR,null,V.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var wR=new P("",{factory:()=>new Fe}),IR=new P("",{providedIn:"root",factory:()=>1});var CR=new P("");var Vn=function(n){return n.Oval="oval",n.Diamond="diamond",n.Squigle="squiggle",n}(Vn||{}),$n=function(n){return n.Red="red",n.Green="green",n.Blue="blue",n}($n||{}),Bn=function(n){return n.Solid="solid",n.Striped="striped",n.Open="open",n}(Bn||{});var Js=class{Cards=[];constructor(){this.newCards()}newCards(){var e=[Vn.Diamond,Vn.Oval,Vn.Squigle],t=[$n.Red,$n.Green,$n.Blue],r=[Bn.Open,Bn.Solid,Bn.Striped],i=this.Cards,s=1;for(let o=1;o<=3;o++)e.forEach(a=>{t.forEach(c=>{r.forEach(l=>{var u={Color:c,Fill:l,Count:o,Shape:a,Id:s,Selected:!1,Blink:!1};i.push(u),s++})})})}findMissingSetCard(e,t){let r=e.Color===t.Color,i=e.Count===t.Count,s=e.Fill===t.Fill,o=e.Shape===t.Shape,a=r?e.Color:this.missingColor(e.Color,t.Color),c=i?e.Count:this.missingCount(e.Count,t.Count),l=s?e.Fill:this.missingFill(e.Fill,t.Fill),u=o?e.Shape:this.missingShape(e.Shape,t.Shape);return this.Cards.find(d=>d.Color===a&&d.Count===c&&d.Fill===l&&d.Shape===u)}missingColor(e,t){let r=[$n.Red,$n.Green,$n.Blue];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingCount(e,t){let r=[1,2,3];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingShape(e,t){let r=[Vn.Diamond,Vn.Oval,Vn.Squigle];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}missingFill(e,t){let r=[Bn.Open,Bn.Solid,Bn.Striped];return this.removeFrom(r,e),this.removeFrom(r,t),r[0]}removeFrom(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}};var O=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(O||{}),Yt="*";function eo(n,e){return{type:O.Trigger,name:n,definitions:e,options:{}}}function Sr(n,e=null){return{type:O.Animate,styles:e,timings:n}}function ow(n,e=null){return{type:O.Sequence,steps:n,options:e}}function We(n){return{type:O.Style,styles:n,offset:null}}function Dh(n,e,t){return{type:O.State,name:n,styles:e,options:t}}function to(n,e,t=null){return{type:O.Transition,expr:n,animation:e,options:t}}function aw(n,e,t=null){return{type:O.Query,selector:n,animation:e,options:t}}function cw(n,e){return{type:O.Stagger,timings:n,animation:e}}var Hn=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Xs=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Bc="!";var bR=(n,e)=>({card:!0,selected:n,blink:e}),SR=()=>[];function TR(n,e){if(n&1&&qt(0,"img",3),n&2){let t=At();Ue("src",t.ImagePath(),r_)("alt","")}}var lw=(()=>{class n{CardInfo;CardSelected=new Se;CardUnSelected=new Se;Found=!1;dealIn=!0;get shake(){return this.CardInfo?.Shake?"on":"off"}ImagePath(){var t=this.CardInfo;return`set_picts/${t.Shape}_${t.Fill}_${t.Color}.png`}clicked(){this.Found||(this.CardInfo.Selected=!this.CardInfo.Selected,this.CardInfo.Selected?this.CardSelected.emit(this.CardInfo):this.CardUnSelected.emit(this.CardInfo))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=zt({type:n,selectors:[["app-card"]],hostVars:2,hostBindings:function(r,i){r&2&&If("@dealIn",i.dealIn)("@shake",i.shake)},inputs:{CardInfo:"CardInfo",Found:"Found"},outputs:{CardSelected:"CardSelected",CardUnSelected:"CardUnSelected"},standalone:!0,features:[Gt],decls:3,vars:6,consts:[[3,"click","ngClass"],[1,"card-images"],["draggable","false",3,"src","alt",4,"ngFor","ngForOf"],["draggable","false",3,"src","alt"]],template:function(r,i){r&1&&(ce(0,"div",0),He("click",function(){return i.clicked()}),ce(1,"div",1),Tt(2,TR,1,2,"img",2),le()()),r&2&&(Ue("ngClass",W_(2,bR,i.CardInfo.Selected,i.CardInfo.Blink)),ye(2),Ue("ngForOf",z_(5,SR).constructor(i.CardInfo.Count)))},dependencies:[wr,fE,Ic],styles:[".card[_ngcontent-%COMP%]{background-color:#fff;width:13vw;padding:1vw;margin:0 auto;border-radius:.5vw;transform-style:preserve-3d;backface-visibility:hidden;transition:transform .14s ease,box-shadow .14s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.01);box-shadow:0 6px 18px #0000001f}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinker .3s linear infinite}@keyframes _ngcontent-%COMP%_blinker{50%{background-color:#f2f297}}.selected[_ngcontent-%COMP%]{background-color:#d8d9ee!important}.card-images[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:2vw;padding-bottom:2vw}.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5vw;height:auto;display:block;transform:rotate(90deg);margin:-.3vw}"],data:{animation:[eo("dealIn",[to(":enter",[We({opacity:0,transform:"translateY(12px) scale(0.96)"}),Sr("220ms cubic-bezier(.2,.8,.2,1)",We({opacity:1,transform:"translateY(0) scale(1)"}))])]),eo("shake",[Dh("off",We({})),Dh("on",We({})),to("off => on",[Sr("180ms ease-out",We({transform:"translateX(-6px)"})),Sr("140ms ease-out",We({transform:"translateX(6px)"})),Sr("120ms ease-out",We({transform:"translateX(0)"}))])])]}})}return n})();function AR(n,e){if(n&1&&(ce(0,"div",1)(1,"div",2),Oe(2),le()()),n&2){let t=At();ye(2),Ln(" ",t.Message," ")}}var uw=(()=>{class n{Message="";Visible=!1;static \u0275fac=function(r){return new(r||n)};static \u0275cmp=zt({type:n,selectors:[["app-dialog"]],inputs:{Message:"Message",Visible:"Visible"},standalone:!0,features:[Gt],decls:1,vars:1,consts:[["class","center-screen",4,"ngIf"],[1,"center-screen"],[1,"dialog"]],template:function(r,i){r&1&&Tt(0,AR,3,1,"div",0),r&2&&Ue("ngIf",i.Visible)},dependencies:[wr,hE]})}return n})();var pn=class{static getToday(){var e=new Date().toISOString();return e.split("T")[0]}};var Sh={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var y=function(n,e){if(!n)throw Tr(e)},Tr=function(n){return new Error("Firebase Database ("+Sh.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var fw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NR=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,o||(f=64)),r.push(t[u],t[d],t[f],t[h])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new Th;let f=s<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Th=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Nh=function(n){let e=fw(n);return zc.encodeByteArray(e,!0)},no=function(n){return Nh(n).replace(/\./g,"")},ro=function(n){try{return zc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hw(n){return pw(void 0,n)}function pw(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!MR(t)||(n[t]=pw(n[t],e[t]));return n}function MR(n){return n!=="__proto__"}function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var xR=()=>RR().__FIREBASE_DEFAULTS__,PR=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ro(n[1]);return e&&JSON.parse(e)},Mh=()=>{try{return xR()||PR()||OR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gw=n=>{var e,t;return(t=(e=Mh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},mw=n=>{let e=gw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Rh=()=>{var n;return(n=Mh())===null||n===void 0?void 0:n.config},yw=n=>{var e;return(e=Mh())===null||e===void 0?void 0:e[`_${n}`]};var zn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function vw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[no(JSON.stringify(t)),no(JSON.stringify(o)),""].join(".")}function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function io(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function _w(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ew(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Wc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zt(){return Sh.NODE_CLIENT===!0||Sh.NODE_ADMIN===!0}function ww(){try{return typeof indexedDB=="object"}catch{return!1}}function Iw(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var kR="FirebaseError",Qt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=kR,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gn.prototype.create)}},gn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?FR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Qt(i,a,r)}};function FR(n,e){return n.replace(LR,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var LR=/\{\$([^}]+)}/g;function Fi(n){return JSON.parse(n)}function ve(n){return JSON.stringify(n)}var Cw=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Fi(ro(s[0])||""),t=Fi(ro(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var Dw=function(n){let e=Cw(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},bw=function(n){let e=Cw(n).claims;return typeof e=="object"&&e.admin===!0};function Jt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ar(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function qc(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function so(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function oo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(dw(s)&&dw(o)){if(!oo(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function dw(n){return n!==null&&typeof n=="object"}function ao(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Hc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Sw(n,e){let t=new Ah(n,e);return t.subscribe.bind(t)}var Ah=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jR(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=bh),i.error===void 0&&(i.error=bh),i.complete===void 0&&(i.complete=bh);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jR(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bh(){}function Gc(n,e){return`${n} failed: ${e} argument `}var Tw=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,y(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},co=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var tW=4*60*60*1e3;function ft(n){return n&&n._delegate?n._delegate:n}var ht=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Nr="[DEFAULT]";var Kc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new zn;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VR(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function UR(n){return n===Nr?void 0:n}function VR(n){return n.instantiationMode==="EAGER"}var lo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Kc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $R=[],re=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(re||{}),BR={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},HR=re.INFO,zR={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},WR=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=zR[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wn=class{constructor(e){this.name=e,this._logLevel=HR,this._logHandler=WR,this._userLogHandler=null,$R.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var qR=(n,e)=>e.some(t=>n instanceof t),Aw,Nw;function GR(){return Aw||(Aw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KR(){return Nw||(Nw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Mw=new WeakMap,Ph=new WeakMap,Rw=new WeakMap,xh=new WeakMap,kh=new WeakMap;function YR(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Xt(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Mw.set(t,n)}).catch(()=>{}),kh.set(e,n),e}function QR(n){if(Ph.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Ph.set(n,e)}var Oh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ph.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Rw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xw(n){Oh=n(Oh)}function ZR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Yc(this),e,...t);return Rw.set(r,e.sort?e.sort():[e]),Xt(r)}:KR().includes(n)?function(...e){return n.apply(Yc(this),e),Xt(Mw.get(this))}:function(...e){return Xt(n.apply(Yc(this),e))}}function JR(n){return typeof n=="function"?ZR(n):(n instanceof IDBTransaction&&QR(n),qR(n,GR())?new Proxy(n,Oh):n)}function Xt(n){if(n instanceof IDBRequest)return YR(n);if(xh.has(n))return xh.get(n);let e=JR(n);return e!==n&&(xh.set(n,e),kh.set(e,n)),e}var Yc=n=>kh.get(n);function Ow(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Xt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Xt(o.result),c.oldVersion,c.newVersion,Xt(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var XR=["get","getKey","getAll","getAllKeys","count"],ex=["put","add","delete","clear"],Fh=new Map;function Pw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Fh.get(e))return Fh.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ex.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XR.includes(t)))return;let s=function(o,...a){return _(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Fh.set(e,s),s}xw(n=>fe(b({},n),{get:(e,t,r)=>Pw(e,t)||n.get(e,t,r),has:(e,t)=>!!Pw(e,t)||n.has(e,t)}));var jh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tx(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function tx(n){let e=n.getComponent();return e?.type==="VERSION"}var Uh="@firebase/app",kw="0.10.13";var mn=new Wn("@firebase/app"),nx="@firebase/app-compat",rx="@firebase/analytics-compat",ix="@firebase/analytics",sx="@firebase/app-check-compat",ox="@firebase/app-check",ax="@firebase/auth",cx="@firebase/auth-compat",lx="@firebase/database",ux="@firebase/data-connect",dx="@firebase/database-compat",fx="@firebase/functions",hx="@firebase/functions-compat",px="@firebase/installations",gx="@firebase/installations-compat",mx="@firebase/messaging",yx="@firebase/messaging-compat",vx="@firebase/performance",_x="@firebase/performance-compat",Ex="@firebase/remote-config",wx="@firebase/remote-config-compat",Ix="@firebase/storage",Cx="@firebase/storage-compat",Dx="@firebase/firestore",bx="@firebase/vertexai-preview",Sx="@firebase/firestore-compat",Tx="firebase",Ax="10.14.1";var Vh="[DEFAULT]",Nx={[Uh]:"fire-core",[nx]:"fire-core-compat",[ix]:"fire-analytics",[rx]:"fire-analytics-compat",[ox]:"fire-app-check",[sx]:"fire-app-check-compat",[ax]:"fire-auth",[cx]:"fire-auth-compat",[lx]:"fire-rtdb",[ux]:"fire-data-connect",[dx]:"fire-rtdb-compat",[fx]:"fire-fn",[hx]:"fire-fn-compat",[px]:"fire-iid",[gx]:"fire-iid-compat",[mx]:"fire-fcm",[yx]:"fire-fcm-compat",[vx]:"fire-perf",[_x]:"fire-perf-compat",[Ex]:"fire-rc",[wx]:"fire-rc-compat",[Ix]:"fire-gcs",[Cx]:"fire-gcs-compat",[Dx]:"fire-fst",[Sx]:"fire-fst-compat",[bx]:"fire-vertex","fire-js":"fire-js",[Tx]:"fire-js-all"};var uo=new Map,Mx=new Map,$h=new Map;function Fw(n,e){try{n.container.addComponent(e)}catch(t){mn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gn(n){let e=n.name;if($h.has(e))return mn.debug(`There were multiple attempts to register component ${e}.`),!1;$h.set(e,n);for(let t of uo.values())Fw(t,n);for(let t of Mx.values())Fw(t,n);return!0}function Wh(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Li(n){return n.settings!==void 0}var Rx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qn=new gn("app","Firebase",Rx);var Bh=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}};var ji=Ax;function qh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Vh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qn.create("bad-app-name",{appName:String(i)});if(t||(t=Rh()),!t)throw qn.create("no-options");let s=uo.get(i);if(s){if(oo(t,s.options)&&oo(r,s.config))return s;throw qn.create("duplicate-app",{appName:i})}let o=new lo(i);for(let c of $h.values())o.addComponent(c);let a=new Bh(t,r,o);return uo.set(i,a),a}function ho(n=Vh){let e=uo.get(n);if(!e&&n===Vh&&Rh())return qh();if(!e)throw qn.create("no-app",{appName:n});return e}function Qc(){return Array.from(uo.values())}function Te(n,e,t){var r;let i=(r=Nx[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mn.warn(a.join(" "));return}Gn(new ht(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var xx="firebase-heartbeat-database",Px=1,fo="firebase-heartbeat-store",Lh=null;function Vw(){return Lh||(Lh=Ow(xx,Px,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fo)}catch(t){console.warn(t)}}}}).catch(n=>{throw qn.create("idb-open",{originalErrorMessage:n.message})})),Lh}function Ox(n){return _(this,null,function*(){try{let t=(yield Vw()).transaction(fo),r=yield t.objectStore(fo).get($w(n));return yield t.done,r}catch(e){if(e instanceof Qt)mn.warn(e.message);else{let t=qn.create("idb-get",{originalErrorMessage:e?.message});mn.warn(t.message)}}})}function Lw(n,e){return _(this,null,function*(){try{let r=(yield Vw()).transaction(fo,"readwrite");yield r.objectStore(fo).put(e,$w(n)),yield r.done}catch(t){if(t instanceof Qt)mn.warn(t.message);else{let r=qn.create("idb-set",{originalErrorMessage:t?.message});mn.warn(r.message)}}})}function $w(n){return`${n.name}!${n.options.appId}`}var kx=1024,Fx=30*24*60*60*1e3,Hh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new zh(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Fx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mn.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=jw(),{heartbeatsToSend:r,unsentEntries:i}=Lx(this._heartbeatsCache.heartbeats),s=no(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return mn.warn(t),""}})}};function jw(){return new Date().toISOString().substring(0,10)}function Lx(n,e=kx){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Uw(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Uw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var zh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return ww()?Iw().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Ox(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Lw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Lw(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Uw(n){return no(JSON.stringify({version:2,heartbeats:n})).length}function jx(n){Gn(new ht("platform-logger",e=>new jh(e),"PRIVATE")),Gn(new ht("heartbeat",e=>new Hh(e),"PRIVATE")),Te(Uh,kw,n),Te(Uh,kw,"esm2017"),Te("fire-js","")}jx("");var Ux="firebase",Vx="10.14.1";Te(Ux,Vx,"app");var Vi=new Pn("ANGULARFIRE2_VERSION");function Kh(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var go=(n,e)=>{let t=e?[e]:Qc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},po=class{constructor(){return go($x)}},$x="app-check";function Ui(){}var Zc=class{zone;delegate;constructor(e,t=Au){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Gh=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ui,{},Ui,Ui)),t.pipe(we({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Zc(Zone.current)),this.insideAngular=t.run(()=>new Zc(Zone.current,Tu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(j(se))};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Bx(n){return Jc().ngZone.runOutsideAngular(()=>n())}function Mr(n){return Jc().ngZone.run(()=>n())}function Hx(n){return zx(Jc())(n)}function zx(n){return function(t){return t=t.lift(new Gh(n.ngZone)),t.pipe(Dn(n.outsideAngular),Cn(n.insideAngular))}}var Wx=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Mr(()=>n.apply(void 0,r))},Kn=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Mr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ui,{},Ui,Ui))),r[s]=Wx(r[s],t));let i=Bx(()=>n.apply(this,r));if(!e)if(i instanceof X){let s=Jc();return i.pipe(Dn(s.outsideAngular),Cn(s.insideAngular))}else return Mr(()=>i);return i instanceof X?i.pipe(Hx):i instanceof Promise?Mr(()=>new Promise((s,o)=>i.then(a=>Mr(()=>s(a)),a=>Mr(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Mr(()=>i)};var Rr=class{constructor(e){return e}},yo=class{constructor(){return Qc()}};function qx(n){return n&&n.length===1?n[0]:new Rr(ho())}var Yh=new P("angularfire2._apps"),Gx={provide:Rr,useFactory:qx,deps:[[new Dt,Yh]]},Kx={provide:yo,deps:[[new Dt,Yh]]};function Yx(n){return(e,t)=>{let r=t.get(Fn);Te("angularfire",Vi.full,"core"),Te("angularfire",Vi.full,"app"),Te("angular",q_.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Rr(i)}}function Bw(n,...e){return On([Gx,Kx,{provide:Yh,useFactory:Yx(n),multi:!0,deps:[se,Ct,mo,...e]}])}var Hw=Kn(qh,!0);function Zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Jw=Zw,Xw=new gn("auth","Firebase",Zw());var nl=new Wn("@firebase/auth");function Qx(n,...e){nl.logLevel<=re.WARN&&nl.warn(`Auth (${ji}): ${n}`,...e)}function el(n,...e){nl.logLevel<=re.ERROR&&nl.error(`Auth (${ji}): ${n}`,...e)}function zw(n,...e){throw ap(n,...e)}function op(n,...e){return ap(n,...e)}function eI(n,e,t){let r=Object.assign(Object.assign({},Jw()),{[e]:t});return new gn("auth","Firebase",r).create(e,{appName:n.name})}function tl(n){return eI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ap(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Xw.create(n,...e)}function te(n,e,...t){if(!n)throw ap(e,...t)}function vo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw el(e),new Error(e)}function rl(n,e){n||vo(e)}function Zx(){return Ww()==="http:"||Ww()==="https:"}function Ww(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Jx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zx()||Ew()||"connection"in navigator)?navigator.onLine:!0}function Xx(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Pr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,rl(t>e,"Short delay should be less than long delay!"),this.isMobile=io()||Wc()}get(){return Jx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function eP(n,e){rl(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var il=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var tP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var nP=new Pr(3e4,6e4);function tI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function cl(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return nI(n,i,()=>_(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=ao(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let h=Object.assign({method:e,headers:f},l);return _w()||(h.referrerPolicy="no-referrer"),il.fetch()(rI(n,n.config.apiHost,t,d),h)}))})}function nI(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},tP),e);try{let i=new Jh(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Xc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xc(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Xc(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Xc(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw eI(n,u,l);zw(n,u)}}catch(i){if(i instanceof Qt)throw i;zw(n,"network-request-failed",{message:String(i)})}})}function rI(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?eP(n.config,i):`${n.config.apiScheme}://${i}`}var Jh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(op(this.auth,"network-request-failed")),nP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Xc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=op(n,e,r);return i.customData._tokenResponse=t,i}function rP(n,e){return _(this,null,function*(){return cl(n,"POST","/v1/accounts:delete",e)})}function iI(n,e){return _(this,null,function*(){return cl(n,"POST","/v1/accounts:lookup",e)})}function _o(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cp(n,e=!1){return _(this,null,function*(){let t=ft(n),r=yield t.getIdToken(e),i=sI(r);te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:_o(Qh(i.auth_time)),issuedAtTime:_o(Qh(i.iat)),expirationTime:_o(Qh(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Qh(n){return Number(n)*1e3}function sI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return el("JWT malformed, contained fewer than 3 sections"),null;try{let i=ro(t);return i?JSON.parse(i):(el("Failed to decode base64 JWT payload"),null)}catch(i){return el("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qw(n){let e=sI(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xh(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Qt&&iP(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function iP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ep=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wo=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_o(this.lastLoginAt),this.creationTime=_o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function sl(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Xh(n,iI(t,{idToken:r}));te(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oI(s.providerUserInfo):[],a=sP(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wo(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function lp(n){return _(this,null,function*(){let e=ft(n);yield sl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function sP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oI(n){return n.map(e=>{var{providerId:t}=e,r=Nu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function oP(n,e){return _(this,null,function*(){let t=yield nI(n,{},()=>_(this,null,function*(){let r=ao({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=rI(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",il.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function aP(n,e){return _(this,null,function*(){return cl(n,"POST","/v2/accounts:revokeToken",tI(n,e))})}var Eo=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");let t=qw(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield oP(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return vo("not implemented")}};function Yn(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Io=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Nu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ep(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Xh(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return cp(this,e)}reload(){return lp(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield sl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Li(this.auth.app))return Promise.reject(tl(this.auth));let e=yield this.getIdToken();return yield Xh(this,rP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,h=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=t.photoURL)!==null&&o!==void 0?o:void 0,g=(a=t.tenantId)!==null&&a!==void 0?a:void 0,m=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,I=(l=t.createdAt)!==null&&l!==void 0?l:void 0,T=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:C,isAnonymous:H,providerData:A,stsTokenManager:D}=t;te(w&&D,e,"internal-error");let Z=Eo.fromJSON(this.name,D);te(typeof w=="string",e,"internal-error"),Yn(d,e.name),Yn(f,e.name),te(typeof C=="boolean",e,"internal-error"),te(typeof H=="boolean",e,"internal-error"),Yn(h,e.name),Yn(p,e.name),Yn(g,e.name),Yn(m,e.name),Yn(I,e.name),Yn(T,e.name);let de=new n({uid:w,auth:e,email:f,emailVerified:C,displayName:d,isAnonymous:H,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:Z,createdAt:I,lastLoginAt:T});return A&&Array.isArray(A)&&(de.providerData=A.map(me=>Object.assign({},me))),m&&(de._redirectEventId=m),de}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Eo;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sl(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];te(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?oI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Eo;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var Gw=new Map;function xr(n){rl(n instanceof Function,"Expected a class definition");let e=Gw.get(n);return e?(rl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Gw.set(n,e),e)}var cP=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),tp=cP;function Zh(n,e,t){return`firebase:${n}:${e}:${t}`}var ol=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Zh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Zh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Io._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(xr(tp),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||xr(tp),o=Zh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Io._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function Kw(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pP(e))return"Blackberry";if(gP(e))return"Webos";if(uP(e))return"Safari";if((e.includes("chrome/")||dP(e))&&!e.includes("edge/"))return"Chrome";if(hP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function lP(n=Rt()){return/firefox\//i.test(n)}function uP(n=Rt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dP(n=Rt()){return/crios\//i.test(n)}function fP(n=Rt()){return/iemobile/i.test(n)}function hP(n=Rt()){return/android/i.test(n)}function pP(n=Rt()){return/blackberry/i.test(n)}function gP(n=Rt()){return/webos/i.test(n)}function aI(n,e=[]){let t;switch(n){case"Browser":t=Kw(Rt());break;case"Worker":t=`${Kw(Rt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ji}/${r}`}var np=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mP(t){return _(this,arguments,function*(n,e={}){return cl(n,"GET","/v2/passwordPolicy",tI(n,e))})}var yP=6,rp=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:yP,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ip=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new al(this),this.idTokenSubscription=new al(this),this.beforeStateQueue=new np(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xr(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ol.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield iI(this,{idToken:e}),r=yield Io._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Li(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield sl(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Xx()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Li(this.app))return Promise.reject(tl(this));let t=e?ft(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Li(this.app)?Promise.reject(tl(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Li(this.app)?Promise.reject(tl(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(xr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield mP(this),t=new rp(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield aP(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&xr(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=yield ol.create(this,[xr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Qx(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function vP(n){return ft(n)}var al=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sw(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _P={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EP(n){_P=n}function wP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function IP(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var JW=wP("rcb"),XW=new Pr(3e4,6e4);var eq=new Pr(2e3,1e4);var tq=10*60*1e3;var nq=new Pr(3e4,6e4);var rq=new Pr(5e3,15e3);var iq=encodeURIComponent("fac");var Yw="@firebase/auth",Qw="1.7.9";var sp=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function CP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DP(n){Gn(new ht("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aI(n)},l=new ip(r,i,s,c);return IP(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gn(new ht("auth-internal",e=>{let t=vP(e.getProvider("auth").getImmediate());return(r=>new sp(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Te(Yw,Qw,CP(n)),Te(Yw,Qw,"esm2017")}var bP=5*60,sq=yw("authIdTokenMaxAge")||bP;function SP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}EP({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=op("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",SP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DP("Browser");var bO="auth";var ll=class{constructor(){return go(bO)}};var cI="@firebase/database",lI="1.0.8";var fg="";function SO(n){fg=n}var yp=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Fi(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var vp=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Jt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var VI=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yp(e)}}catch{}return new vp},kr=VI("localStorage"),_p=VI("sessionStorage");var Hi=new Wn("@firebase/database"),TO=function(){let n=1;return function(){return n++}}(),$I=function(n){let e=Tw(n),t=new Hc;t.update(e);let r=t.digest();return zc.encodeByteArray(r)},Uo=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Uo.apply(null,r):typeof r=="object"?e+=ve(r):e+=r,e+=" "}return e},Lr=null,uI=!0,AO=function(n,e){y(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Hi.logLevel=re.VERBOSE,Lr=Hi.log.bind(Hi),e&&_p.set("logging_enabled",!0)):typeof n=="function"?Lr=n:(Lr=null,_p.remove("logging_enabled"))},ke=function(...n){if(uI===!0&&(uI=!1,Lr===null&&_p.get("logging_enabled")===!0&&AO(!0)),Lr){let e=Uo.apply(null,n);Lr(e)}},Vo=function(n){return function(...e){ke(n,...e)}},Ep=function(...n){let e="FIREBASE INTERNAL ERROR: "+Uo(...n);Hi.error(e)},yn=function(...n){let e=`FIREBASE FATAL ERROR: ${Uo(...n)}`;throw Hi.error(e),new Error(e)},qe=function(...n){let e="FIREBASE WARNING: "+Uo(...n);Hi.warn(e)},NO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},BI=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},MO=function(n){if(Zt()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Wi="[MIN_NAME]",jr="[MAX_NAME]",Ji=function(n,e){if(n===e)return 0;if(n===Wi||e===jr)return-1;if(e===Wi||n===jr)return 1;{let t=dI(n),r=dI(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},RO=function(n,e){return n===e?0:n<e?-1:1},Co=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ve(e))},hg=function(n){if(typeof n!="object"||n===null)return ve(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=ve(e[r]),t+=":",t+=hg(n[e[r]]);return t+="}",t},HI=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function Ge(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var zI=function(n){y(!BI(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},xO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function OO(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var kO=new RegExp("^-?(0*)\\d{1,10}$"),FO=-2147483648,LO=2147483647,dI=function(n){if(kO.test(n)){let e=Number(n);if(e>=FO&&e<=LO)return e}return null},Xi=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw qe("Exception was thrown by user callback.",t),e},Math.floor(0))}},jO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ao=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var wp=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ip=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(ke("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qe(e)}},No=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),dl="5",WI="v",qI="s",GI="r",KI="f",YI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QI="ls",ZI="p",Cp="ac",JI="websocket",XI="long_polling";var fl=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function UO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function eC(n,e,t){y(typeof e=="string","typeof type must == string"),y(typeof t=="object","typeof params must == object");let r;if(e===JI)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===XI)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);UO(n)&&(t.ns=n.namespace);let i=[];return Ge(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Dp=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Jt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return hw(this.counters_)}};var up={},dp={};function pg(n){let e=n.toString();return up[e]||(up[e]=new Dp),up[e]}function VO(n,e){let t=n.toString();return dp[t]||(dp[t]=e()),dp[t]}var bp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Xi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var fI="start",$O="close",BO="pLPCommand",HO="pRTLPCB",tC="id",nC="pw",rC="ser",zO="cb",WO="seg",qO="ts",GO="d",KO="dframe",iC=1870,sC=30,YO=iC-sC,QO=25e3,ZO=3e4,Sp=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vo(e),this.stats_=pg(t),this.urlFn=c=>(this.appCheckToken&&(c[Cp]=this.appCheckToken),eC(t,XI,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZO)),MO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tp((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===fI)this.id=a,this.password=c;else if(o===$O)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[fI]="t",r[rC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[zO]=this.scriptTagHolder.uniqueCallbackIdentifier),r[WI]=dl,this.transportSessionId&&(r[qI]=this.transportSessionId),this.lastSessionId&&(r[QI]=this.lastSessionId),this.applicationId&&(r[ZI]=this.applicationId),this.appCheckToken&&(r[Cp]=this.appCheckToken),typeof location<"u"&&location.hostname&&YI.test(location.hostname)&&(r[GI]=KI);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Zt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xO()&&!PO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=ve(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Nh(t),i=HI(r,YO);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Zt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[KO]="t",r[tC]=e,r[nC]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=ve(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Tp=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Zt())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=TO(),window[BO+this.uniqueCallbackIdentifier]=e,window[HO+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ke("frame writing exception"),a.stack&&ke(a.stack),ke(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ke("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[tC]=this.myID,e[nC]=this.myPW,e[rC]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+sC+r.length<=iC;){let o=this.pendingSegs.shift();r=r+"&"+WO+i+"="+o.seg+"&"+qO+i+"="+o.ts+"&"+GO+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(QO)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Zt()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ke("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var JO=16384,XO=45e3,hl=null;typeof MozWebSocket<"u"?hl=MozWebSocket:typeof WebSocket<"u"&&(hl=WebSocket);var Do=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vo(this.connId),this.stats_=pg(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[WI]=dl,!Zt()&&typeof location<"u"&&location.hostname&&YI.test(location.hostname)&&(a[GI]=KI),r&&(a[qI]=r),i&&(a[QI]=i),s&&(a[Cp]=s),o&&(a[ZI]=o),eC(t,JI,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kr.set("previous_websocket_failure",!0);try{let i;if(Zt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${dl}/${fg}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new hl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&hl!==null&&!n.forceDisallow_}static previouslyFailed(){return kr.isInMemoryStorage||kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){kr.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Fi(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(y(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=ve(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=HI(r,JO);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(XO))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),ek=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Sp,Do]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Do&&Do.isAvailable(),i=r&&!Do.previouslyFailed();if(t.webSocketOnly&&(r||qe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Do];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),tk=6e4,nk=5e3,rk=10*1024,ik=100*1024,fp="t",hI="d",sk="s",pI="r",ok="e",gI="o",mI="a",yI="n",vI="p",ak="h",Ap=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vo("c:"+this.id+":"),this.transportManager_=new ek(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ao(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ik?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>rk?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fp in e){let t=e[fp];t===mI?this.upgradeIfSecondaryHealthy_():t===pI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===gI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Co("t",e),r=Co("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:vI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:mI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:yI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Co("t",e),r=Co("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Co(fp,e);if(hI in e){let r=e[hI];if(t===ak){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===yI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===sk?this.onConnectionShutdown_(r):t===pI?this.onReset_(r):t===ok?Ep("Server Error: "+r):t===gI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ep("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),dl!==r&&qe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ao(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tk))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ao(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:vI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var pl=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var gl=class{constructor(e){this.allowedEvents_=e,this.listeners_={},y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){y(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var ml=class n extends gl{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!io()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var _I=32,EI=768,ie=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ee(){return new ie("")}function q(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Jn(n){return n.pieces_.length-n.pieceNum_}function ue(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ie(n.pieces_,e)}function oC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ck(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function aC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function cC(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ie(e,0)}function Ie(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ie)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ie(t,0)}function z(n){return n.pieceNum_>=n.pieces_.length}function Ve(n,e){let t=q(n),r=q(e);if(t===null)return e;if(t===r)return Ve(ue(n),ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lC(n,e){if(Jn(n)!==Jn(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Pt(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Jn(n)>Jn(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Np=class{constructor(e,t){this.errorPrefix_=t,this.parts_=aC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=co(this.parts_[r]);uC(this)}};function lk(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=co(e),uC(n)}function uk(n){let e=n.parts_.pop();n.byteLength_-=co(e),n.parts_.length>0&&(n.byteLength_-=1)}function uC(n){if(n.byteLength_>EI)throw new Error(n.errorPrefix_+"has a key path longer than "+EI+" bytes ("+n.byteLength_+").");if(n.parts_.length>_I)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_I+") or object contains a cycle "+Or(n))}function Or(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Mp=class n extends gl{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return y(e==="visible","Unknown event type: "+e),[this.visible_]}};var bo=1e3,dk=60*5*1e3,wI=30*1e3,fk=1.3,hk=3e4,pk="server_kill",II=3,gg=(()=>{class n extends pl{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Vo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bo,this.maxReconnectDelay_=dk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Zt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mp.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&ml.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(ve(o)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new zn,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Jt(t,"w")){let i=Ar(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();qe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||bw(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wI)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Dw(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),y(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ve(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):Ep("Unrecognized action received from server: "+ve(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hk&&(this.reconnectDelay_=bo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fk)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){y(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ke("getToken() completed but was canceled"):(ke("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Ap(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,p=>{qe(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(pk)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&qe(f),l())}}})}interrupt(t){ke("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ke("Resuming connection for reason: "+t),delete this.interruptReasons_[t],qc(this.interruptReasons_)&&(this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>hg(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new ie(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){ke("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=II&&(this.reconnectDelay_=wI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ke("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=II&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Zt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+fg.replace(/\./g,"-")]=1,io()?t["framework.cordova"]=1:Wc()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=ml.getInstance().currentlyOnline();return qc(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),B=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var qi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new B(Wi,e),i=new B(Wi,t);return this.compare(r,i)!==0}minPost(){return B.MIN}};var ul,yl=class extends qi{static get __EMPTY_NODE(){return ul}static set __EMPTY_NODE(e){ul=e}compare(e,t){return Ji(e.name,t.name)}isDefinedOn(e){throw Tr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return B.MIN}maxPost(){return new B(jr,ul)}makePost(e,t){return y(typeof e=="string","KeyIndex indexValue must always be a string."),new B(e,ul)}toString(){return".key"}},zi=new yl;var Bi=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},xt=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??pt.EMPTY_NODE,this.right=o??pt.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return pt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return pt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Rp=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new xt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},pt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xt.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Bi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Bi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Bi(this.root_,null,this.comparator_,!0,e)}};pt.EMPTY_NODE=new Rp;function gk(n,e){return Ji(n.name,e.name)}function mg(n,e){return Ji(n,e)}var xp;function mk(n){xp=n}var dC=function(n){return typeof n=="number"?"number:"+zI(n):"string:"+n},fC=function(n){if(n.isLeafNode()){let e=n.val();y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Jt(e,".sv"),"Priority must be a string or number.")}else y(n===xp||n.isEmpty(),"priority of unexpected type.");y(n===xp||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var CI,Gi=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fC(this.priorityNode_)}static set __childrenNodeConstructor(t){CI=t}static get __childrenNodeConstructor(){return CI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return z(t)?this:q(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=q(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(y(i!==".priority"||Jn(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ue(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dC(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=zI(this.value_):t+=this.value_,this.lazyHash_=$I(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(y(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return y(s>=0,"Unknown leaf type: "+r),y(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),hC,pC;function yk(n){hC=n}function vk(n){pC=n}var Pp=class extends qi{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Ji(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return B.MIN}maxPost(){return new B(jr,new Gi("[PRIORITY-POST]",pC))}makePost(e,t){let r=hC(e);return new B(t,new Gi("[PRIORITY-POST]",r))}toString(){return".priority"}},ge=new Pp;var _k=Math.log(2),Op=class{constructor(e){let t=s=>parseInt(Math.log(s)/_k,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},vl=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=n[c],f=t?t(d):d,new xt(f,d.node,xt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),g=i(h+1,l);return d=n[h],f=t?t(d):d,new xt(f,d.node,xt.BLACK,p,g)}},s=function(c){let l=null,u=null,d=n.length,f=function(p,g){let m=d-p,I=d;d-=p;let T=i(m+1,I),w=n[m],C=t?t(w):w;h(new xt(C,w.node,g,null,T))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let g=c.nextBitIsOne(),m=Math.pow(2,c.count-(p+1));g?f(m,xt.BLACK):(f(m,xt.BLACK),f(m,xt.RED))}return u},o=new Op(n.length),a=s(o);return new pt(r||e,a)};var hp,$i={},Ki=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return y($i&&ge,"ChildrenNode.ts has not been loaded"),hp=hp||new n({".priority":$i},{".priority":ge}),hp}get(e){let t=Ar(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof pt?t:null}hasIndex(e){return Jt(this.indexSet_,e.toString())}addIndex(e,t){y(e!==zi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(B.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=vl(r,e.getCompare()):a=$i;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=so(this.indexes_,(i,s)=>{let o=Ar(this.indexSet_,s);if(y(o,"Missing index implementation for "+s),i===$i)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(B.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),vl(a,o.getCompare())}else return $i;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new B(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=so(this.indexes_,i=>{if(i===$i)return i;{let s=t.get(e.name);return s?i.remove(new B(e.name,s)):i}});return new n(r,this.indexSet_)}};var So,L=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fC(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return So||(So=new n(new pt(mg),null,Ki.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||So}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?So:r}}getChild(t){let r=q(t);return r===null?this:this.getImmediateChild(r).getChild(ue(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(y(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new B(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?So:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=q(t);if(i===null)return r;{y(q(t)!==".priority"||Jn(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(ue(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ge,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+dC(this.getPriority().val())+":"),this.forEachChild(ge,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":$I(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new B(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new B(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new B(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,B.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,B.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$o?-1:0}withIndex(t){if(t===zi||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===zi||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ge),s=r.getIterator(ge),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===zi?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),kp=class extends L{constructor(){super(new pt(mg),L.EMPTY_NODE,Ki.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}},$o=new kp;Object.defineProperties(B,{MIN:{value:new B(Wi,L.EMPTY_NODE)},MAX:{value:new B(jr,$o)}});yl.__EMPTY_NODE=L.EMPTY_NODE;Gi.__childrenNodeConstructor=L;mk($o);vk($o);var Ek=!0;function Ae(n,e=null){if(n===null)return L.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Gi(t,Ae(e))}if(!(n instanceof Array)&&Ek){let t=[],r=!1;if(Ge(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Ae(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new B(o,c)))}}),t.length===0)return L.EMPTY_NODE;let s=vl(t,gk,o=>o.name,mg);if(r){let o=vl(t,ge.getCompare());return new L(s,Ae(e),new Ki({".priority":o},{".priority":ge}))}else return new L(s,Ae(e),Ki.Default)}else{let t=L.EMPTY_NODE;return Ge(n,(r,i)=>{if(Jt(n,r)&&r.substring(0,1)!=="."){let s=Ae(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Ae(e))}}yk(Ae);var Fp=class extends qi{constructor(e){super(),this.indexPath_=e,y(!z(e)&&q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Ji(e.name,t.name):s}makePost(e,t){let r=Ae(e),i=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new B(t,i)}maxPost(){let e=L.EMPTY_NODE.updateChild(this.indexPath_,$o);return new B(jr,e)}toString(){return aC(this.indexPath_,0).join("/")}};var Lp=class extends qi{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Ji(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(e,t){let r=Ae(e);return new B(t,r)}toString(){return".value"}},wk=new Lp;function gC(n){return{type:"value",snapshotNode:n}}function Yi(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Po(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Oo(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Ik(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var ko=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Po(t,a)):y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Yi(t,r)):o.trackChildChange(Oo(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ge,(i,s)=>{t.hasChild(i)||r.trackChildChange(Po(i,s))}),t.isLeafNode()||t.forEachChild(ge,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Oo(i,s,o))}else r.trackChildChange(Yi(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var _l=class n{constructor(e){this.indexedFilter_=new ko(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new B(t,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=L.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(L.EMPTY_NODE);let s=this;return t.forEachChild(ge,(o,a)=>{s.matches(new B(o,a))||(i=i.updateImmediateChild(o,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var jp=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new _l(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new B(t,r))||(r=L.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=L.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(L.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(f,h)=>d(h,f)}else o=this.index_.getCompare();let a=e;y(a.numChildren()===this.limit_,"");let c=new B(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===t||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:o(f,c);if(u&&!r.isEmpty()&&h>=0)return s?.trackChildChange(Oo(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(Po(t,d));let g=a.updateImmediateChild(t,L.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s?.trackChildChange(Yi(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Po(l.name,l.node)),s.trackChildChange(Yi(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,L.EMPTY_NODE)):e}};var Up=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ge}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Ck(n){return n.loadsAllData()?new ko(n.getIndex()):n.hasLimit()?new jp(n):new _l(n)}function DI(n){let e={};if(n.isDefault())return e;let t;if(n.index_===ge?t="$priority":n.index_===wk?t="$value":n.index_===zi?t="$key":(y(n.index_ instanceof Fp,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ve(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=ve(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+ve(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=ve(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+ve(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bI(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==ge&&(e.i=n.index_.toString()),e}var Vp=class n extends pl{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=DI(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Ar(this.listens_,o)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=DI(e._queryParams),r=e._path.toString(),i=new zn;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ao(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Fi(a.responseText)}catch{qe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&qe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var $p=class{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function El(){return{value:null,children:new Map}}function mC(n,e,t){if(z(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=q(e);n.children.has(r)||n.children.set(r,El());let i=n.children.get(r);e=ue(e),mC(i,e,t)}}function Bp(n,e,t){n.value!==null?t(e,n.value):Dk(n,(r,i)=>{let s=new ie(e.toString()+"/"+r);Bp(i,s,t)})}function Dk(n,e){n.children.forEach((t,r)=>{e(r,t)})}var Hp=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ge(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var SI=10*1e3,bk=30*1e3,Sk=5*60*1e3,zp=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hp(e);let r=SI+(bk-SI)*Math.random();Ao(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;Ge(e,(i,s)=>{s>0&&Jt(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Ao(this.reportStats_.bind(this),Math.floor(Math.random()*2*Sk))}};var en=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(en||{});function yC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function yg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vg(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Wp=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=en.ACK_USER_WRITE,this.source=yC()}operationForChild(e){if(z(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ie(e));return new n(ee(),t,this.revert)}}else return y(q(this.path)===e,"operationForChild called for unrelated child."),new n(ue(this.path),this.affectedTree,this.revert)}};var wl=class n{constructor(e,t){this.source=e,this.path=t,this.type=en.LISTEN_COMPLETE}operationForChild(e){return z(this.path)?new n(this.source,ee()):new n(this.source,ue(this.path))}};var Qi=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=en.OVERWRITE}operationForChild(e){return z(this.path)?new n(this.source,ee(),this.snap.getImmediateChild(e)):new n(this.source,ue(this.path),this.snap)}};var Il=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=en.MERGE}operationForChild(e){if(z(this.path)){let t=this.children.subtree(new ie(e));return t.isEmpty()?null:t.value?new Qi(this.source,ee(),t.value):new n(this.source,ee(),t)}else return y(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var tn=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(z(e))return this.isFullyInitialized()&&!this.filtered_;let t=q(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var qp=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function Tk(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Ik(o.childName,o.snapshotNode))}),To(n,i,"child_removed",e,r,t),To(n,i,"child_added",e,r,t),To(n,i,"child_moved",s,r,t),To(n,i,"child_changed",e,r,t),To(n,i,"value",e,r,t),i}function To(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>Nk(n,a,c)),o.forEach(a=>{let c=Ak(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function Ak(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Nk(n,e,t){if(e.childName==null||t.childName==null)throw Tr("Should only compare child_ events.");let r=new B(e.childName,e.snapshotNode),i=new B(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Pl(n,e){return{eventCache:n,serverCache:e}}function Mo(n,e,t,r){return Pl(new tn(e,t,r),n.serverCache)}function vC(n,e,t,r){return Pl(n.eventCache,new tn(e,t,r))}function Cl(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ur(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var pp,Mk=()=>(pp||(pp=new pt(RO)),pp),Ke=class n{constructor(e,t=Mk()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Ge(e,(r,i)=>{t=t.set(new ie(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ee(),value:this.value};if(z(e))return null;{let r=q(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(ue(e),t);return s!=null?{path:Ie(new ie(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(z(e))return this;{let t=q(e),r=this.children.get(t);return r!==null?r.subtree(ue(e)):new n(null)}}set(e,t){if(z(e))return new n(t,this.children);{let r=q(e),s=(this.children.get(r)||new n(null)).set(ue(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(z(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=q(e),r=this.children.get(t);if(r){let i=r.remove(ue(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(z(e))return this.value;{let t=q(e),r=this.children.get(t);return r?r.get(ue(e)):null}}setTree(e,t){if(z(e))return t;{let r=q(e),s=(this.children.get(r)||new n(null)).setTree(ue(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(ee(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Ie(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ee(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(z(e))return null;{let s=q(e),o=this.children.get(s);return o?o.findOnPath_(ue(e),Ie(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ee(),t)}foreachOnPath_(e,t,r){if(z(e))return this;{this.value&&r(t,this.value);let i=q(e),s=this.children.get(i);return s?s.foreachOnPath_(ue(e),Ie(t,i),r):new n(null)}}foreach(e){this.foreach_(ee(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ie(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Ot=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Ke(null))}};function Ro(n,e,t){if(z(e))return new Ot(new Ke(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ve(i,e);return s=s.updateChild(o,t),new Ot(n.writeTree_.set(i,s))}else{let i=new Ke(t),s=n.writeTree_.setTree(e,i);return new Ot(s)}}}function TI(n,e,t){let r=n;return Ge(t,(i,s)=>{r=Ro(r,Ie(e,i),s)}),r}function AI(n,e){if(z(e))return Ot.empty();{let t=n.writeTree_.setTree(e,new Ke(null));return new Ot(t)}}function Gp(n,e){return Vr(n,e)!=null}function Vr(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Ve(t.path,e)):null}function NI(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(ge,(r,i)=>{e.push(new B(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new B(r,i.value))}),e}function Qn(n,e){if(z(e))return n;{let t=Vr(n,e);return t!=null?new Ot(new Ke(t)):new Ot(n.writeTree_.subtree(e))}}function Kp(n){return n.writeTree_.isEmpty()}function Zi(n,e){return _C(ee(),n.writeTree_,e)}function _C(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(y(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=_C(Ie(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Ie(n,".priority"),r)),t}}function Ol(n,e){return CC(e,n)}function Rk(n,e,t,r,i){y(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ro(n.visibleWrites,e,t)),n.lastWriteId=r}function xk(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function Pk(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);y(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&Ok(a,r.path)?i=!1:Pt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return kk(n),!0;if(r.snap)n.visibleWrites=AI(n.visibleWrites,r.path);else{let a=r.children;Ge(a,c=>{n.visibleWrites=AI(n.visibleWrites,Ie(r.path,c))})}return!0}else return!1}function Ok(n,e){if(n.snap)return Pt(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Pt(Ie(n.path,t),e))return!0;return!1}function kk(n){n.visibleWrites=EC(n.allWrites,Fk,ee()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Fk(n){return n.visible}function EC(n,e,t){let r=Ot.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Pt(t,o)?(a=Ve(t,o),r=Ro(r,a,s.snap)):Pt(o,t)&&(a=Ve(o,t),r=Ro(r,ee(),s.snap.getChild(a)));else if(s.children){if(Pt(t,o))a=Ve(t,o),r=TI(r,a,s.children);else if(Pt(o,t))if(a=Ve(o,t),z(a))r=TI(r,ee(),s.children);else{let c=Ar(s.children,q(a));if(c){let l=c.getChild(ue(a));r=Ro(r,ee(),l)}}}else throw Tr("WriteRecord should have .snap or .children")}}return r}function wC(n,e,t,r,i){if(!r&&!i){let s=Vr(n.visibleWrites,e);if(s!=null)return s;{let o=Qn(n.visibleWrites,e);if(Kp(o))return t;if(t==null&&!Gp(o,ee()))return null;{let a=t||L.EMPTY_NODE;return Zi(o,a)}}}else{let s=Qn(n.visibleWrites,e);if(!i&&Kp(s))return t;if(!i&&t==null&&!Gp(s,ee()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Pt(l.path,e)||Pt(e,l.path))},a=EC(n.allWrites,o,e),c=t||L.EMPTY_NODE;return Zi(a,c)}}}function Lk(n,e,t){let r=L.EMPTY_NODE,i=Vr(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ge,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=Qn(n.visibleWrites,e);return t.forEachChild(ge,(o,a)=>{let c=Zi(Qn(s,new ie(o)),a);r=r.updateImmediateChild(o,c)}),NI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Qn(n.visibleWrites,e);return NI(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function jk(n,e,t,r,i){y(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Ie(e,t);if(Gp(n.visibleWrites,s))return null;{let o=Qn(n.visibleWrites,s);return Kp(o)?i.getChild(t):Zi(o,i.getChild(t))}}function Uk(n,e,t,r){let i=Ie(e,t),s=Vr(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=Qn(n.visibleWrites,i);return Zi(o,r.getNode().getImmediateChild(t))}else return null}function Vk(n,e){return Vr(n.visibleWrites,e)}function $k(n,e,t,r,i,s,o){let a,c=Qn(n.visibleWrites,e),l=Vr(c,ee());if(l!=null)a=l;else if(t!=null)a=Zi(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function Bk(){return{visibleWrites:Ot.empty(),allWrites:[],lastWriteId:-1}}function Dl(n,e,t,r){return wC(n.writeTree,n.treePath,e,t,r)}function _g(n,e){return Lk(n.writeTree,n.treePath,e)}function MI(n,e,t,r){return jk(n.writeTree,n.treePath,e,t,r)}function bl(n,e){return Vk(n.writeTree,Ie(n.treePath,e))}function Hk(n,e,t,r,i,s){return $k(n.writeTree,n.treePath,e,t,r,i,s)}function Eg(n,e,t){return Uk(n.writeTree,n.treePath,e,t)}function IC(n,e){return CC(Ie(n.treePath,e),n.writeTree)}function CC(n,e){return{treePath:n,writeTree:e}}var Yp=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;y(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),y(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Oo(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,Po(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,Yi(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Oo(r,e.snapshotNode,i.oldSnap));else throw Tr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Qp=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},DC=new Qp,Fo=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new tn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Eg(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ur(this.viewCache_),s=Hk(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function zk(n){return{filter:n}}function Wk(n,e){y(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),y(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function qk(n,e,t,r,i){let s=new Yp,o,a;if(t.type===en.OVERWRITE){let l=t;l.source.fromUser?o=Zp(n,e,l.path,l.snap,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!z(l.path),o=Sl(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===en.MERGE){let l=t;l.source.fromUser?o=Kk(n,e,l.path,l.children,r,i,s):(y(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Jp(n,e,l.path,l.children,r,i,a,s))}else if(t.type===en.ACK_USER_WRITE){let l=t;l.revert?o=Zk(n,e,l.path,r,i,s):o=Yk(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===en.LISTEN_COMPLETE)o=Qk(n,e,t.path,r,s);else throw Tr("Unknown operation type: "+t.type);let c=s.getChanges();return Gk(e,o,c),{viewCache:o,changes:c}}function Gk(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Cl(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(gC(Cl(e)))}}function bC(n,e,t,r,i,s){let o=e.eventCache;if(bl(r,t)!=null)return e;{let a,c;if(z(t))if(y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Ur(e),u=l instanceof L?l:L.EMPTY_NODE,d=_g(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Dl(r,Ur(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=q(t);if(l===".priority"){y(Jn(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=MI(r,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=ue(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let f=MI(r,t,o.getNode(),c);f!=null?d=o.getNode().getImmediateChild(l).updateChild(u,f):d=o.getNode().getImmediateChild(l)}else d=Eg(r,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return Mo(e,a,o.isFullyInitialized()||z(t),n.filter.filtersNodes())}}function Sl(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(z(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=q(t);if(!c.isCompleteForPath(t)&&Jn(t)>1)return e;let p=ue(t),m=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),m):l=u.updateChild(c.getNode(),h,m,p,DC,null)}let d=vC(e,l,c.isFullyInitialized()||z(t),u.filtersNodes()),f=new Fo(i,d,s);return bC(n,d,t,i,f,a)}function Zp(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new Fo(i,e,s);if(z(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Mo(e,l,!0,n.filter.filtersNodes());else{let d=q(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Mo(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ue(t),h=a.getNode().getImmediateChild(d),p;if(z(f))p=r;else{let g=u.getCompleteChild(d);g!=null?oC(f)===".priority"&&g.getChild(cC(f)).isEmpty()?p=g:p=g.updateChild(f,r):p=L.EMPTY_NODE}if(h.equals(p))c=e;else{let g=n.filter.updateChild(a.getNode(),d,p,f,u,o);c=Mo(e,g,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function RI(n,e){return n.eventCache.isCompleteForChild(e)}function Kk(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=Ie(t,c);RI(e,q(u))&&(a=Zp(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=Ie(t,c);RI(e,q(u))||(a=Zp(n,a,u,l,i,s,o))}),a}function xI(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Jp(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;z(t)?l=r:l=new Ke(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=xI(n,h,f);c=Sl(n,c,new ie(d),p,i,s,o,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),g=xI(n,p,f);c=Sl(n,c,new ie(d),g,i,s,o,a)}}),c}function Yk(n,e,t,r,i,s,o){if(bl(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(z(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Sl(n,e,t,c.getNode().getChild(t),i,s,a,o);if(z(t)){let l=new Ke(null);return c.getNode().forEachChild(zi,(u,d)=>{l=l.set(new ie(u),d)}),Jp(n,e,t,l,i,s,a,o)}else return e}else{let l=new Ke(null);return r.foreach((u,d)=>{let f=Ie(t,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),Jp(n,e,t,l,i,s,a,o)}}function Qk(n,e,t,r,i){let s=e.serverCache,o=vC(e,s.getNode(),s.isFullyInitialized()||z(t),s.isFiltered());return bC(n,o,t,r,DC,i)}function Zk(n,e,t,r,i,s){let o;if(bl(r,t)!=null)return e;{let a=new Fo(r,e,i),c=e.eventCache.getNode(),l;if(z(t)||q(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Dl(r,Ur(e));else{let d=e.serverCache.getNode();y(d instanceof L,"serverChildren would be complete if leaf node"),u=_g(r,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=q(t),d=Eg(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,ue(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,L.EMPTY_NODE,ue(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Dl(r,Ur(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||bl(r,ee())!=null,Mo(e,l,o,n.filter.filtersNodes())}}var Xp=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new ko(r.getIndex()),s=Ck(r);this.processor_=zk(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(L.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(L.EMPTY_NODE,a.getNode(),null),u=new tn(c,o.isFullyInitialized(),i.filtersNodes()),d=new tn(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Pl(d,u),this.eventGenerator_=new qp(this.query_)}get query(){return this.query_}};function Jk(n){return n.viewCache_.serverCache.getNode()}function Xk(n){return Cl(n.viewCache_)}function eF(n,e){let t=Ur(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!z(e)&&!t.getImmediateChild(q(e)).isEmpty())?t.getChild(e):null}function PI(n){return n.eventRegistrations_.length===0}function tF(n,e){n.eventRegistrations_.push(e)}function OI(n,e,t){let r=[];if(t){y(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function kI(n,e,t,r){e.type===en.MERGE&&e.source.queryId!==null&&(y(Ur(n.viewCache_),"We should always have a full cache before handling merges"),y(Cl(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=qk(n.processor_,i,e,t,r);return Wk(n.processor_,s.viewCache),y(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,SC(n,s.changes,s.viewCache.eventCache.getNode(),null)}function nF(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ge,(s,o)=>{r.push(Yi(s,o))}),t.isFullyInitialized()&&r.push(gC(t.getNode())),SC(n,r,t.getNode(),e)}function SC(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return Tk(n.eventGenerator_,e,t,i)}var Tl,Al=class{constructor(){this.views=new Map}};function rF(n){y(!Tl,"__referenceConstructor has already been defined"),Tl=n}function iF(){return y(Tl,"Reference.ts has not been loaded"),Tl}function sF(n){return n.views.size===0}function wg(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return y(s!=null,"SyncTree gave us an op for an invalid query."),kI(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(kI(o,e,t,r));return s}}function TC(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Dl(t,i?r:null),c=!1;a?c=!0:r instanceof L?(a=_g(t,r),c=!1):(a=L.EMPTY_NODE,c=!1);let l=Pl(new tn(a,c,!1),new tn(r,i,!1));return new Xp(e,l)}return o}function oF(n,e,t,r,i,s){let o=TC(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),tF(o,t),nF(o,t)}function aF(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=Xn(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat(OI(l,t,r)),PI(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat(OI(c,t,r)),PI(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Xn(n)&&s.push(new(iF())(e._repo,e._path)),{removed:s,events:o}}function AC(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Zn(n,e){let t=null;for(let r of n.views.values())t=t||eF(r,e);return t}function NC(n,e){if(e._queryParams.loadsAllData())return kl(n);{let r=e._queryIdentifier;return n.views.get(r)}}function MC(n,e){return NC(n,e)!=null}function Xn(n){return kl(n)!=null}function kl(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Nl;function cF(n){y(!Nl,"__referenceConstructor has already been defined"),Nl=n}function lF(){return y(Nl,"Reference.ts has not been loaded"),Nl}var uF=1,Ml=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=Bk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function RC(n,e,t,r,i){return Rk(n.pendingWriteTree_,e,t,r,i),i?Ho(n,new Qi(yC(),e,t)):[]}function Fr(n,e,t=!1){let r=xk(n.pendingWriteTree_,e);if(Pk(n.pendingWriteTree_,e)){let s=new Ke(null);return r.snap!=null?s=s.set(ee(),!0):Ge(r.children,o=>{s=s.set(new ie(o),!0)}),Ho(n,new Wp(r.path,s,t))}else return[]}function Bo(n,e,t){return Ho(n,new Qi(yg(),e,t))}function dF(n,e,t){let r=Ke.fromObject(t);return Ho(n,new Il(yg(),e,r))}function fF(n,e){return Ho(n,new wl(yg(),e))}function hF(n,e,t){let r=Cg(n,t);if(r){let i=Dg(r),s=i.path,o=i.queryId,a=Ve(s,e),c=new wl(vg(o),a);return bg(n,s,c)}else return[]}function xC(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||MC(o,e))){let c=aF(o,e,t,r);sF(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(f,h)=>Xn(h));if(u&&!d){let f=n.syncPointTree_.subtree(s);if(!f.isEmpty()){let h=yF(f);for(let p=0;p<h.length;++p){let g=h[p],m=g.query,I=FC(n,g);n.listenProvider_.startListening(xo(m),Lo(n,m),I.hashFn,I.onComplete)}}}!d&&l.length>0&&!r&&(u?n.listenProvider_.stopListening(xo(e),null):l.forEach(f=>{let h=n.queryToTagMap.get(Fl(f));n.listenProvider_.stopListening(xo(f),h)}))}vF(n,l)}return a}function PC(n,e,t,r){let i=Cg(n,r);if(i!=null){let s=Dg(i),o=s.path,a=s.queryId,c=Ve(o,e),l=new Qi(vg(a),c,t);return bg(n,o,l)}else return[]}function pF(n,e,t,r){let i=Cg(n,r);if(i){let s=Dg(i),o=s.path,a=s.queryId,c=Ve(o,e),l=Ke.fromObject(t),u=new Il(vg(a),c,l);return bg(n,o,u)}else return[]}function gF(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Ve(f,i);s=s||Zn(h,p),o=o||Xn(h)});let a=n.syncPointTree_.get(i);a?(o=o||Xn(a),s=s||Zn(a,ee())):(a=new Al,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=L.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((h,p)=>{let g=Zn(p,ee());g&&(s=s.updateImmediateChild(h,g))}));let l=MC(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=Fl(e);y(!n.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=_F();n.queryToTagMap.set(f,h),n.tagToQueryMap.set(h,f)}let u=Ol(n.pendingWriteTree_,i),d=oF(a,e,t,u,s,c);if(!l&&!o&&!r){let f=NC(a,e);d=d.concat(EF(n,e,f))}return d}function Ig(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ve(o,e),l=Zn(a,c);if(l)return l});return wC(i,e,s,t,!0)}function mF(n,e){let t=e._path,r=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{let d=Ve(l,t);r=r||Zn(u,d)});let i=n.syncPointTree_.get(t);i?r=r||Zn(i,ee()):(i=new Al,n.syncPointTree_=n.syncPointTree_.set(t,i));let s=r!=null,o=s?new tn(r,!0,!1):null,a=Ol(n.pendingWriteTree_,e._path),c=TC(i,e,a,s?o.getNode():L.EMPTY_NODE,s);return Xk(c)}function Ho(n,e){return OC(e,n.syncPointTree_,null,Ol(n.pendingWriteTree_,ee()))}function OC(n,e,t,r){if(z(n.path))return kC(n,e,t,r);{let i=e.get(ee());t==null&&i!=null&&(t=Zn(i,ee()));let s=[],o=q(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=IC(r,o);s=s.concat(OC(a,c,l,u))}return i&&(s=s.concat(wg(i,n,r,t))),s}}function kC(n,e,t,r){let i=e.get(ee());t==null&&i!=null&&(t=Zn(i,ee()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=IC(r,o),u=n.operationForChild(o);u&&(s=s.concat(kC(u,a,c,l)))}),i&&(s=s.concat(wg(i,n,r,t))),s}function FC(n,e){let t=e.query,r=Lo(n,t);return{hashFn:()=>(Jk(e)||L.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?hF(n,t._path,r):fF(n,t._path);{let s=OO(i,t);return xC(n,t,null,s)}}}}function Lo(n,e){let t=Fl(e);return n.queryToTagMap.get(t)}function Fl(n){return n._path.toString()+"$"+n._queryIdentifier}function Cg(n,e){return n.tagToQueryMap.get(e)}function Dg(n){let e=n.indexOf("$");return y(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ie(n.substr(0,e))}}function bg(n,e,t){let r=n.syncPointTree_.get(e);y(r,"Missing sync point for query tag that we're tracking");let i=Ol(n.pendingWriteTree_,e);return wg(r,t,i,null)}function yF(n){return n.fold((e,t,r)=>{if(t&&Xn(t))return[kl(t)];{let i=[];return t&&(i=AC(t)),Ge(r,(s,o)=>{i=i.concat(o)}),i}})}function xo(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(lF())(n._repo,n._path):n}function vF(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Fl(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function _F(){return uF++}function EF(n,e,t){let r=e._path,i=Lo(n,e),s=FC(n,t),o=n.listenProvider_.startListening(xo(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)y(!Xn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!z(l)&&u&&Xn(u))return[kl(u).query];{let f=[];return u&&(f=f.concat(AC(u).map(h=>h.query))),Ge(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(xo(u),Lo(n,u))}}return o}var eg=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},tg=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Ie(this.path_,e);return new n(this.syncTree_,t)}node(){return Ig(this.syncTree_,this.path_)}},wF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},FI=function(n,e,t){if(!n||typeof n!="object")return n;if(y(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return IF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return CF(n[".sv"],e);y(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},IF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:y(!1,"Unexpected server value: "+n)}},CF=function(n,e,t){n.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&y(!1,"Unexpected increment value: "+r);let i=e.node();if(y(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},DF=function(n,e,t,r){return Sg(e,new tg(t,n),r)},LC=function(n,e,t){return Sg(n,new eg(e),t)};function Sg(n,e,t){let r=n.getPriority().val(),i=FI(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=FI(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Gi(a,Ae(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Gi(i))),o.forEachChild(ge,(a,c)=>{let l=Sg(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var jo=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function Tg(n,e){let t=e instanceof ie?e:new ie(e),r=n,i=q(t);for(;i!==null;){let s=Ar(r.node.children,i)||{children:{},childCount:0};r=new jo(i,r,s),t=ue(t),i=q(t)}return r}function es(n){return n.node.value}function jC(n,e){n.node.value=e,ng(n)}function UC(n){return n.node.childCount>0}function bF(n){return es(n)===void 0&&!UC(n)}function Ll(n,e){Ge(n.node.children,(t,r)=>{e(new jo(t,n,r))})}function VC(n,e,t,r){t&&!r&&e(n),Ll(n,i=>{VC(i,e,!0,r)}),t&&r&&e(n)}function SF(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function zo(n){return new ie(n.parent===null?n.name:zo(n.parent)+"/"+n.name)}function ng(n){n.parent!==null&&TF(n.parent,n.name,n)}function TF(n,e,t){let r=bF(t),i=Jt(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ng(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ng(n))}var AF=/[\[\].#$\/\u0000-\u001F\u007F]/,NF=/[\[\].#$\u0000-\u001F\u007F]/,gp=10*1024*1024,$C=function(n){return typeof n=="string"&&n.length!==0&&!AF.test(n)},BC=function(n){return typeof n=="string"&&n.length!==0&&!NF.test(n)},MF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),BC(n)};var RF=function(n,e,t,r){r&&e===void 0||Ag(Gc(n,"value"),e,t)},Ag=function(n,e,t){let r=t instanceof ie?new Np(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Or(r));if(typeof e=="function")throw new Error(n+"contains a function "+Or(r)+" with contents = "+e.toString());if(BI(e))throw new Error(n+"contains "+e.toString()+" "+Or(r));if(typeof e=="string"&&e.length>gp/3&&co(e)>gp)throw new Error(n+"contains a string greater than "+gp+" utf8 bytes "+Or(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ge(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!$C(o)))throw new Error(n+" contains an invalid key ("+o+") "+Or(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);lk(r,o),Ag(n,a,r),uk(r)}),i&&s)throw new Error(n+' contains ".value" child '+Or(r)+" in addition to actual children.")}};var HC=function(n,e,t,r){if(!(r&&t===void 0)&&!BC(t))throw new Error(Gc(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xF=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),HC(n,e,t,r)},PF=function(n,e){if(q(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},OF=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$C(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!MF(t))throw new Error(Gc(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var rg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function zC(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!lC(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function nn(n,e,t){zC(n,t),kF(n,r=>Pt(r,e)||Pt(e,r))}function kF(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(FF(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function FF(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Lr&&ke("event: "+t.toString()),Xi(r)}}}var LF="repo_interrupt",jF=25,ig=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=El(),this.transactionQueueTree_=new jo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function UF(n,e,t){if(n.stats_=pg(n.repoInfo_),n.forceRestClient_||jO())n.server_=new Vp(n.repoInfo_,(r,i,s,o)=>{LI(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new gg(n.repoInfo_,e,(r,i,s,o)=>{LI(n,r,i,s,o)},r=>{jI(n,r)},r=>{$F(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=VO(n.repoInfo_,()=>new zp(n.stats_,n.server_)),n.infoData_=new $p,n.infoSyncTree_=new Ml({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Bo(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Mg(n,"connected",!1),n.serverSyncTree_=new Ml({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);nn(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function VF(n){let t=n.infoData_.getNode(new ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Ng(n){return wF({timestamp:VF(n)})}function LI(n,e,t,r,i){n.dataUpdateCount++;let s=new ie(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=so(t,l=>Ae(l));o=pF(n.serverSyncTree_,s,c,i)}else{let c=Ae(t);o=PC(n.serverSyncTree_,s,c,i)}else if(r){let c=so(t,l=>Ae(l));o=dF(n.serverSyncTree_,s,c)}else{let c=Ae(t);o=Bo(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Ul(n,s)),nn(n.eventQueue_,a,o)}function jI(n,e){Mg(n,"connected",e),e===!1&&zF(n)}function $F(n,e){Ge(e,(t,r)=>{Mg(n,t,r)})}function Mg(n,e,t){let r=new ie("/.info/"+e),i=Ae(t);n.infoData_.updateSnapshot(r,i);let s=Bo(n.infoSyncTree_,r,i);nn(n.eventQueue_,r,s)}function WC(n){return n.nextWriteId_++}function BF(n,e,t){let r=mF(n.serverSyncTree_,e);return r!=null?Promise.resolve(r):n.server_.get(e).then(i=>{let s=Ae(i).withIndex(e._queryParams.getIndex());gF(n.serverSyncTree_,e,t,!0);let o;if(e._queryParams.loadsAllData())o=Bo(n.serverSyncTree_,e._path,s);else{let a=Lo(n.serverSyncTree_,e);o=PC(n.serverSyncTree_,e._path,s,a)}return nn(n.eventQueue_,e._path,o),xC(n.serverSyncTree_,e,t,null,!0),s},i=>(jl(n,"get for query "+ve(e)+" failed: "+i),Promise.reject(new Error(i))))}function HF(n,e,t,r,i){jl(n,"set",{path:e.toString(),value:t,priority:r});let s=Ng(n),o=Ae(t,r),a=Ig(n.serverSyncTree_,e),c=LC(o,a,s),l=WC(n),u=RC(n.serverSyncTree_,e,c,l,!0);zC(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(f,h)=>{let p=f==="ok";p||qe("set at "+e+" failed: "+f);let g=Fr(n.serverSyncTree_,l,!p);nn(n.eventQueue_,e,g),qF(n,i,f,h)});let d=QC(n,e);Ul(n,d),nn(n.eventQueue_,d,[])}function zF(n){jl(n,"onDisconnectEvents");let e=Ng(n),t=El();Bp(n.onDisconnect_,ee(),(i,s)=>{let o=DF(i,s,n.serverSyncTree_,e);mC(t,i,o)});let r=[];Bp(t,ee(),(i,s)=>{r=r.concat(Bo(n.serverSyncTree_,i,s));let o=QC(n,i);Ul(n,o)}),n.onDisconnect_=El(),nn(n.eventQueue_,ee(),r)}function WF(n){n.persistentConnection_&&n.persistentConnection_.interrupt(LF)}function jl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ke(t,...e)}function qF(n,e,t,r){e&&Xi(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function qC(n,e,t){return Ig(n.serverSyncTree_,e,t)||L.EMPTY_NODE}function Rg(n,e=n.transactionQueueTree_){if(e||Vl(n,e),es(e)){let t=KC(n,e);y(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&GF(n,zo(e),t)}else UC(e)&&Ll(e,t=>{Rg(n,t)})}function GF(n,e,t){let r=t.map(l=>l.currentWriteId),i=qC(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];y(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ve(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{jl(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(Fr(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&d.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();Vl(n,Tg(n.transactionQueueTree_,e)),Rg(n,n.transactionQueueTree_),nn(n.eventQueue_,e,u);for(let f=0;f<d.length;f++)Xi(d[f])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{qe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}Ul(n,e)}},o)}function Ul(n,e){let t=GC(n,e),r=zo(t),i=KC(n,t);return KF(n,i,r),r}function KF(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ve(t,c.path),u=!1,d;if(y(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Fr(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=jF)u=!0,d="maxretry",i=i.concat(Fr(n.serverSyncTree_,c.currentWriteId,!0));else{let f=qC(n,c.path,o);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){Ag("transaction failed: Data returned ",h,c.path);let p=Ae(h);typeof h=="object"&&h!=null&&Jt(h,".priority")||(p=p.updatePriority(f.getPriority()));let m=c.currentWriteId,I=Ng(n),T=LC(p,f,I);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=T,c.currentWriteId=WC(n),o.splice(o.indexOf(m),1),i=i.concat(RC(n.serverSyncTree_,c.path,T,c.currentWriteId,c.applyLocally)),i=i.concat(Fr(n.serverSyncTree_,m,!0))}else u=!0,d="nodata",i=i.concat(Fr(n.serverSyncTree_,c.currentWriteId,!0))}nn(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Vl(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Xi(r[a]);Rg(n,n.transactionQueueTree_)}function GC(n,e){let t,r=n.transactionQueueTree_;for(t=q(e);t!==null&&es(r)===void 0;)r=Tg(r,t),e=ue(e),t=q(e);return r}function KC(n,e){let t=[];return YC(n,e,t),t.sort((r,i)=>r.order-i.order),t}function YC(n,e,t){let r=es(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ll(e,i=>{YC(n,i,t)})}function Vl(n,e){let t=es(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,jC(e,t.length>0?t:void 0)}Ll(e,r=>{Vl(n,r)})}function QC(n,e){let t=zo(GC(n,e)),r=Tg(n.transactionQueueTree_,e);return SF(r,i=>{mp(n,i)}),mp(n,r),VC(r,i=>{mp(n,i)}),t}function mp(n,e){let t=es(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(y(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(y(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Fr(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?jC(e,void 0):t.length=s+1,nn(n.eventQueue_,zo(e),i);for(let o=0;o<r.length;o++)Xi(r[o])}}function YF(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function QF(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qe(`Invalid query segment '${t}' in query '${n}'`)}return e}var UI=function(n,e){let t=ZF(n),r=t.namespace;t.domain==="firebase.com"&&yn(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&yn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||NO();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new fl(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ie(t.pathString)}},ZF=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=YF(n.substring(u,d)));let f=QF(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")t="localhost";else if(h.split(".").length<=2)t=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var sg=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}},og=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var ag=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var cg=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return z(this._path)?null:oC(this._path)}get ref(){return new vn(this._repo,this._path)}get _queryIdentifier(){let e=bI(this._queryParams),t=hg(e);return t==="{}"?"default":t}get _queryObject(){return bI(this._queryParams)}isEqual(e){if(e=ft(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=lC(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ck(this._path)}};var vn=class n extends cg{constructor(e,t){super(e,t,new Up,!1)}get parent(){let e=cC(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Rl=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new ie(e),r=xl(this.ref,e);return new n(this._node.getChild(t),r,ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,xl(this.ref,r),ge)))}hasChild(e){let t=new ie(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function ZC(n,e){return n=ft(n),n._checkNotDeleted("ref"),e!==void 0?xl(n._root,e):n._root}function xl(n,e){return n=ft(n),q(n._path)===null?xF("child","path",e,!1):HC("child","path",e,!1),new vn(n._repo,Ie(n._path,e))}function JC(n,e){n=ft(n),PF("set",n._path),RF("set",e,n._path,!1);let t=new zn;return HF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function XC(n){n=ft(n);let e=new ag(()=>{}),t=new lg(e);return BF(n._repo,n,t).then(r=>new Rl(r,new vn(n._repo,n._path),n._queryParams.getIndex()))}var lg=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new sg("value",this,new Rl(e.snapshotNode,new vn(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new og(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};rF(vn);cF(vn);var JF="FIREBASE_DATABASE_EMULATOR_HOST",ug={},XF=!1;function eL(n,e,t,r){n.repoInfo_=new fl(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function tL(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||yn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ke("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=UI(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[JF]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=UI(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new No(No.OWNER):new Ip(n.name,n.options,e);OF("Invalid Firebase Database URL",o),z(o.path)||yn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=rL(a,n,u,new wp(n.name,t));return new dg(d,n)}function nL(n,e){let t=ug[e];(!t||t[n.key]!==n)&&yn(`Database ${e}(${n.repoInfo_}) has already been deleted.`),WF(n),delete t[n.key]}function rL(n,e,t,r){let i=ug[e.name];i||(i={},ug[e.name]=i);let s=i[n.toURLString()];return s&&yn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new ig(n,XF,t,r),i[n.toURLString()]=s,s}var dg=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(UF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vn(this._repo,ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(nL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yn("Cannot call "+e+" on a deleted database.")}};function eD(n=ho(),e){let t=Wh(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=mw("database");r&&tD(t,...r)}return t}function tD(n,e,t,r={}){n=ft(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&yn("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new No(No.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:vw(r.mockUserToken,n.app.options.projectId);s=new No(o)}eL(i,e,t,s)}function iL(n){SO(ji),Gn(new ht("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return tL(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Te(cI,lI,n),Te(cI,lI,"esm2017")}gg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};gg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};iL();var $r=class{constructor(e){return e}},nD="database",xg=class{constructor(){return go(nD)}};var Pg=new P("angularfire2.database-instances");function sL(n,e){let t=Kh(nD,n,e);return t&&new $r(t)}function oL(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $r(r)}}var aL={provide:xg,deps:[[new Dt,Pg]]},cL={provide:$r,useFactory:sL,deps:[[new Dt,Pg],Rr]};function rD(n,...e){return Te("angularfire",Vi.full,"rtdb"),On([cL,aL,{provide:Pg,useFactory:oL(n),multi:!0,deps:[se,Ct,mo,yo,[new Dt,ll],[new Dt,po],...e]}])}var Og=Kn(XC,!0),$l=Kn(eD,!0);var kg=Kn(ZC,!0);var iD=Kn(JC,!0);var Wo=lb(wD());var ID=(()=>{class n{rng=(0,Wo.default)(pn.getToday());constructor(){this.rng=(0,Wo.default)(pn.getToday())}setTodaySeed(){this.rng=(0,Wo.default)(pn.getToday())}setSeed(t){this.rng=(0,Wo.default)(t)}getRandom(){return this.rng()}getRandomInt(t,r){return Math.floor(this.rng()*(r-t+1))+t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=M({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mL(n,e){if(n&1){let t=wf();ce(0,"app-card",14),He("CardSelected",function(i){ic(t);let s=At();return sc(s.cardSelected(i))})("CardUnSelected",function(i){ic(t);let s=At();return sc(s.cardUnSelected(i))}),le()}if(n&2){let t=e.$implicit;Ue("CardInfo",t)}}function yL(n,e){if(n&1&&qt(0,"app-card",19),n&2){let t=e.$implicit;Ue("CardInfo",t)("Found",!0)}}function vL(n,e){if(n&1&&(ce(0,"div",17),Tt(1,yL,1,2,"app-card",18),le()),n&2){let t=e.$implicit;ye(),Ue("ngForOf",t)}}function _L(n,e){if(n&1&&(ce(0,"div",7)(1,"div",15),Oe(2),le(),Tt(3,vL,2,1,"div",16),le()),n&2){let t=At();ye(2),Ln("Found ",t.Found.length,""),ye(),Ue("ngForOf",t.Found)}}function EL(n,e){if(n&1&&(ce(0,"tr")(1,"td"),Oe(2),le(),ce(3,"td",22),Oe(4),le(),ce(5,"td"),Oe(6),le()()),n&2){let t=e.$implicit,r=e.$index,i=At(2);ye(2),Ln("",r+1,"."),ye(2),vr(t.user),ye(2),vr(i.formatTime(t.time))}}function wL(n,e){if(n&1){let t=wf();ce(0,"div",20),He("click",function(){ic(t);let i=At();return sc(i.ShowToplist=!1)}),ce(1,"div",21)(2,"table"),B_(3,EL,7,3,"tr",null,$_),le()()()}if(n&2){let t=At();ye(3),H_(t.Toplist)}}var Bg=(()=>{class n{randomService;route;database=E($r);GameType="daily";title="daily-set";Deck=new Js;SelectedCards=[];Tabel=[];Found=[];FoundIds=[];ExistingIds=[];SetCount=0;TotalSeconds=0;Time="00:00";Started=new Date().getTime();TimeHandle=null;showDialog=!1;dialogMessage="";Today=pn.getToday();HintCount=0;UserName="Guest";Toplist=[];ShowToplist=!1;GameId="";constructor(t,r){this.randomService=t,this.route=r,this.setUserName(),r.params.subscribe(i=>{let s=i.id;s?this.startRandom(s):this.startDaily()})}showToplist(){this.getTopList(this.Today).then(t=>{this.Toplist=t}),this.ShowToplist=!0,this.fireConfetti()}storeResult(t,r,i){if(this.GameType==="random")return;let s=`${r}/${t}`,o=kg(this.database,s);Og(o).then(a=>{if(a.exists()){console.log("Data already exists. Not saving.");return}iD(o,{time:i}).then(()=>{console.log("Data saved successfully!")}).catch(c=>{console.error("Error saving data:",c)})}).catch(a=>{console.error("Error checking existing data:",a)})}getTopList(t,r=10){return _(this,null,function*(){let i=$l(),s=kg(i,t);try{let o=yield Og(s);if(!o.exists())return console.log("No results found for this gameId."),[];let a=[];return o.forEach(c=>{let l=c.key,u=c.val().time;a.push({user:l,time:u})}),a.sort((c,l)=>c.time-l.time).slice(0,r)}catch(o){return console.error("Error fetching top list:",o),[]}})}getCardPath(t){return`set_picts/${t.Shape}_${t.Fill}_${t.Color}.png`}startTime(){this.TimeHandle=setInterval(()=>{let r=new Date().getTime()-this.Started,i=Math.floor(r/1e3);i+=this.HintCount*60,this.TotalSeconds=i;let s=this.formatTime(i);this.Time=s},1e3)}formatTime(t){let r=Math.floor(t/60),i=t%60;return`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}cardUnSelected(t){let r=this.SelectedCards.indexOf(t);r>-1&&this.SelectedCards.splice(r,1)}shake(t){t.forEach(r=>r.Shake=!0),setTimeout(()=>t.forEach(r=>r.Shake=!1),450)}cardSelected(t){let r=this.SelectedCards;if(r.push(t),r.length==3)if(this.isSet(r[0],r[1],r[2])){r.forEach(s=>s.Selected=!1);let i=this.getId(this.SelectedCards);this.FoundIds.indexOf(i)==-1?(this.FoundIds.push(i),this.Found.push(structuredClone(this.SelectedCards)),this.SelectedCards.forEach(s=>this.blink(s)),this.Found.length===this.SetCount&&(this.storeResult(this.UserName,this.Today,this.TotalSeconds),clearInterval(this.TimeHandle),this.dialogMessage="Good! Your time:"+this.Time,this.showDialog=!0,this.fireConfetti(1200))):this.Found.forEach(s=>{let o=this.getId(s);i===o&&s.forEach(a=>this.blink(a))}),this.SelectedCards=[]}else this.shake(r),setTimeout(()=>{this.SelectedCards.forEach(i=>i.Selected=!1),this.SelectedCards=[]},500)}fireConfetti(t=3e3){let r=document.getElementById("confetti-canvas");if(!r)return;let i=r.getContext("2d"),s=r.width=window.innerWidth,o=r.height=window.innerHeight,a=180,c=s/2,l=o*.9,u=500,d=200,f=700,h=55,p=C=>C*Math.PI/180,g=Array.from({length:a}).map((C,H)=>{let A=-90+(Math.random()*2-1)*h,D=d+Math.random()*(f-d);return{x:c,y:l,vx:Math.cos(p(A))*D,vy:Math.sin(p(A))*D,r:2+Math.random()*4,rot:Math.random()*Math.PI,vr:(-.2+Math.random()*.4)*4,hue:Math.random()*360}}),m=performance.now(),I=m,T=1,w=C=>{let H=Math.min(32,C-I)/1e3;I=C;for(let D of g)D.vy+=u*H,D.x+=D.vx*H,D.y+=D.vy*H,D.rot+=D.vr*H;let A=C-m;T=Math.max(0,1-A/t),i.clearRect(0,0,s,o);for(let D of g)i.save(),i.translate(D.x,D.y),i.rotate(D.rot),i.fillStyle=`hsla(${D.hue}, 90%, 60%, ${T})`,i.fillRect(-D.r,-D.r,D.r*2,D.r*2),i.restore();A<t?requestAnimationFrame(w):i.clearRect(0,0,s,o)};requestAnimationFrame(w)}getId(t){return t.sort((i,s)=>i.Id-s.Id).map(i=>i.Id).join("_")}isSet(t,r,i){return!(!this.allAreSameOrAllDiffer(t.Color,r.Color,i.Color)||!this.allAreSameOrAllDiffer(t.Count,r.Count,i.Count)||!this.allAreSameOrAllDiffer(t.Shape,r.Shape,i.Shape)||!this.allAreSameOrAllDiffer(t.Fill,r.Fill,i.Fill))}allAreSameOrAllDiffer(t,r,i){return t===r&&r===i&&t===i||t!==r&&r!==i&&t!==i}setTable(){for(this.addRandomcard();this.Tabel.length<11&&(this.addRandomcard(),this.Tabel.length!==11);){var t=this.Tabel.length;let s=this.Tabel[t-1],o=this.Tabel[t-2];this.createSetOrAddRandom(s,o)}let r=this.Tabel[10],i=this.Tabel[0];this.createSetOrAddRandom(r,i),this.Tabel=this.shuffelArray(this.Tabel)}shuffelArray(t){let r=t.slice();for(let i=r.length-1;i>0;i--){let s=this.randomService.getRandomInt(0,i);[r[i],r[s]]=[r[s],r[i]]}return r}createSetOrAddRandom(t,r){let i=this.Deck.findMissingSetCard(t,r);i&&!this.Tabel.find(s=>s.Id==i.Id)?this.Tabel.push(i):this.addRandomcard()}addRandomcard(){let t=this.randomService.getRandomInt(0,80),r=this.Deck.Cards[t];this.Tabel.find(i=>i.Id===r.Id)?this.addRandomcard():this.Tabel.push(r)}countSets(){let t=[];for(let r=0;r<this.Tabel.length;r++)for(let i=r+1;i<this.Tabel.length;i++)for(let s=i+1;s<this.Tabel.length;s++)if(this.isSet(this.Tabel[r],this.Tabel[i],this.Tabel[s])){let o=this.getId([this.Tabel[r],this.Tabel[i],this.Tabel[s]]);t.indexOf(o)<0&&t.push(o)}this.SetCount=t.length,this.ExistingIds=t}giveHint(){for(let t=0;t<this.ExistingIds.length;t++){let r=this.ExistingIds[t];if(this.FoundIds.indexOf(r)==-1){let i=r.split("_"),s=this.HintCount%2==0?i[0]:i[1],o=this.Tabel.find(a=>a.Id==parseInt(s));o&&this.blink(o),this.HintCount++;return}}}blink(t){t.Blink=!0,setTimeout(()=>{t.Blink=!1},500)}shuffleTable(){this.Tabel=this.shuffelArray(this.Tabel)}changeUserName(){let t=prompt("What is your name?");t?localStorage.setItem("set-user-name",t):t="Guest",this.UserName=t}setUserName(){let t=localStorage.getItem("set-user-name");t||(t=prompt("What is your name?"),t?localStorage.setItem("set-user-name",t):t="Guest"),this.UserName=t}seedRandomAndStart(){let t=Math.floor(Math.random()*1e3).toString();location.href=`game/${t}`}startRandom(t){this.GameType="random",this.GameId=t,this.randomService.setSeed(t),this.startGame()}startDaily(){this.GameType="daily",this.randomService.setTodaySeed(),this.startGame()}startGame(){this.SelectedCards=[],this.Tabel=[],this.Found=[],this.FoundIds=[],this.ExistingIds=[],this.SetCount=0,this.Time="00:00",this.TotalSeconds=0,this.HintCount=0,this.Started=new Date().getTime(),this.showDialog=!1,this.dialogMessage="",this.Today=pn.getToday(),this.Deck=new Js,this.Deck.Cards=this.shuffelArray(this.Deck.Cards),this.setTable(),this.countSets(),this.startTime()}static \u0275fac=function(r){return new(r||n)(Je(ID),Je(jn))};static \u0275cmp=zt({type:n,selectors:[["app-root"]],standalone:!0,features:[Gt],decls:29,vars:10,consts:[[1,"app-container"],[1,"buttons"],[3,"click"],[1,"tabel"],[1,"sub-header"],[1,"grid"],[3,"CardInfo","CardSelected","CardUnSelected",4,"ngFor","ngForOf"],[1,"founds-container"],[1,"usertime"],["href","#",1,"user",3,"click"],[1,"time"],[3,"click","Visible","Message"],[1,"center-screen"],["id","confetti-canvas",1,"confetti"],[3,"CardSelected","CardUnSelected","CardInfo"],[1,"found-count"],["class","founds-row",4,"ngFor","ngForOf"],[1,"founds-row"],[3,"CardInfo","Found",4,"ngFor","ngForOf"],[3,"CardInfo","Found"],[1,"center-screen",3,"click"],[1,"toplist","dialog"],[1,"name"]],template:function(r,i){r&1&&(ce(0,"div",0)(1,"div",1)(2,"button",2),He("click",function(){return i.startDaily()}),Oe(3,"Daily"),le(),ce(4,"button",2),He("click",function(){return i.seedRandomAndStart()}),Oe(5,"Random"),le(),ce(6,"button",2),He("click",function(){return i.shuffleTable()}),Oe(7,"Shuffle"),le(),ce(8,"button",2),He("click",function(){return i.giveHint()}),Oe(9,"Hint"),le(),ce(10,"button",2),He("click",function(){return i.showToplist()}),Oe(11,"Toplist"),le()(),ce(12,"div",3)(13,"div",4)(14,"span"),Oe(15),le(),ce(16,"span"),Oe(17),le()(),ce(18,"div",5),Tt(19,mL,1,1,"app-card",6),le()(),Tt(20,_L,4,2,"div",7),le(),ce(21,"div",8)(22,"a",9),He("click",function(){return i.changeUserName()}),Oe(23),le(),ce(24,"div",10),Oe(25),le()(),ce(26,"app-dialog",11),He("click",function(){return i.showDialog=!1}),le(),Tt(27,wL,5,0,"div",12),qt(28,"canvas",13)),r&2&&(Ue("@list",void 0),ye(15),Ln("Find the ",i.SetCount," sets"),ye(2),vr(i.GameType=="random"?"Id: "+i.GameId:i.Today),ye(2),Ue("ngForOf",i.Tabel),ye(),Ef(i.Found.length>0?20:-1),ye(3),vr(i.UserName),ye(2),vr(i.Time),ye(),Ue("Visible",i.showDialog)("Message",i.dialogMessage),ye(),Ef(i.ShowToplist?27:-1))},dependencies:[lw,wr,Ic,uw],styles:[".buttons[_ngcontent-%COMP%]{display:flex;gap:2vw;padding-bottom:2vh}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:2em}.text[_ngcontent-%COMP%]{font-size:1.5em}.tabel[_ngcontent-%COMP%]{float:left}.founds-container[_ngcontent-%COMP%]{font-size:x-large;margin-top:1em;margin-left:1em;float:left;scale:.6;transform-origin:top left}.founds-container[_ngcontent-%COMP%]   .found-count[_ngcontent-%COMP%]{display:block;text-align:center}.founds-container[_ngcontent-%COMP%]   app-card[_ngcontent-%COMP%]{margin-right:5px}.founds-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:8px}.sub-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:.3vw;background-color:#bfefc3;padding:.3vw;animation:_ngcontent-%COMP%_ripple .18s ease-out}@keyframes _ngcontent-%COMP%_ripple{0%{filter:brightness(.98);transform:scale(.998)}to{filter:brightness(1);transform:scale(1)}}.confetti[_ngcontent-%COMP%]{position:fixed;pointer-events:none;inset:0}.usertime[_ngcontent-%COMP%]{position:absolute;right:.1em;top:.1em}.time[_ngcontent-%COMP%]{font-size:1.5em}.toplist[_ngcontent-%COMP%]{font-size:.85rem;flex-direction:column}.toplist[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:.5rem}.toplist[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}"],data:{animation:[eo("list",[to(":enter",[aw("app-card",[We({opacity:0,transform:"translateY(10px) scale(.98)"}),cw(50,Sr("160ms ease-out",We({opacity:1,transform:"translateY(0) scale(1)"})))],{optional:!0})])])]}})}return n})();var CD=[{path:"game/:id",component:Bg},{path:"**",component:Bg}];function DD(n){return new v(3e3,!1)}function IL(){return new v(3100,!1)}function CL(){return new v(3101,!1)}function DL(n){return new v(3001,!1)}function bL(n){return new v(3003,!1)}function SL(n){return new v(3004,!1)}function TL(n,e){return new v(3005,!1)}function AL(){return new v(3006,!1)}function NL(){return new v(3007,!1)}function ML(n,e){return new v(3008,!1)}function RL(n){return new v(3002,!1)}function xL(n,e,t,r,i){return new v(3010,!1)}function PL(){return new v(3011,!1)}function OL(){return new v(3012,!1)}function kL(){return new v(3200,!1)}function FL(){return new v(3202,!1)}function LL(){return new v(3013,!1)}function jL(n){return new v(3014,!1)}function UL(n){return new v(3015,!1)}function VL(n){return new v(3016,!1)}function $L(n,e){return new v(3404,!1)}function BL(n){return new v(3502,!1)}function HL(n){return new v(3503,!1)}function zL(){return new v(3300,!1)}function WL(n){return new v(3504,!1)}function qL(n){return new v(3301,!1)}function GL(n,e){return new v(3302,!1)}function KL(n){return new v(3303,!1)}function YL(n,e){return new v(3400,!1)}function QL(n){return new v(3401,!1)}function ZL(n){return new v(3402,!1)}function JL(n,e){return new v(3505,!1)}function er(n){switch(n.length){case 0:return new Hn;case 1:return n[0];default:return new Xs(n)}}function jD(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((f,h)=>{let p=h,g=f;if(h!=="offset")switch(p=n.normalizePropertyName(p,i),g){case Bc:g=t.get(h);break;case Yt:g=r.get(h);break;default:g=n.normalizeStyleValue(h,p,g,i);break}d.set(p,g)}),u||s.push(d),a=d,o=l}),i.length)throw BL(i);return s}function dm(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Hg(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Hg(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Hg(t,"destroy",n)));break}}function Hg(n,e,t){let r=t.totalTime,i=!!t.disabled,s=fm(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function fm(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function nt(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function bD(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var XL=typeof document>"u"?null:document.documentElement;function hm(n){let e=n.parentNode||n.host||null;return e===XL?null:e}function e1(n){return n.substring(1,6)=="ebkit"}var Hr=null,SD=!1;function t1(n){Hr||(Hr=n1()||{},SD=Hr.style?"WebkitAppearance"in Hr.style:!1);let e=!0;return Hr.style&&!e1(n)&&(e=n in Hr.style,!e&&SD&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Hr.style)),e}function n1(){return typeof document<"u"?document.body:null}function UD(n,e){for(;e;){if(e===n)return!0;e=hm(e)}return!1}function VD(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var pm=(()=>{class n{validateStyleProperty(t){return t1(t)}containsElement(t,r){return UD(t,r)}getParentElement(t){return hm(t)}query(t,r,i){return VD(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Hn(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})(),qr=class{static{this.NOOP=new pm}},Gr=class{};var r1=1e3,$D="{{",i1="}}",BD="ng-enter",Yg="ng-leave",Hl="ng-trigger",Kl=".ng-trigger",TD="ng-animating",Qg=".ng-animating";function _n(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Zg(parseFloat(e[1]),e[2])}function Zg(n,e){switch(e){case"s":return n*r1;default:return n}}function Yl(n,e,t){return n.hasOwnProperty("duration")?n:s1(n,e,t)}function s1(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(DD(n)),{duration:0,delay:0,easing:""};i=Zg(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=Zg(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(IL()),a=!0),s<0&&(e.push(CL()),a=!0),a&&e.splice(c,0,DD(n))}return{duration:i,delay:s,easing:o}}function o1(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function rn(n,e,t){e.forEach((r,i)=>{let s=gm(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Wr(n,e){e.forEach((t,r)=>{let i=gm(r);n.style[i]=""})}function qo(n){return Array.isArray(n)?n.length==1?n[0]:ow(n):n}function a1(n,e,t){let r=e.params||{},i=HD(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(DL(s))})}var Jg=new RegExp(`${$D}\\s*(.+?)\\s*${i1}`,"g");function HD(n){let e=[];if(typeof n=="string"){let t;for(;t=Jg.exec(n);)e.push(t[1]);Jg.lastIndex=0}return e}function Ko(n,e,t){let r=`${n}`,i=r.replace(Jg,(s,o)=>{let a=e[o];return a==null&&(t.push(bL(o)),a=""),a.toString()});return i==r?n:i}var c1=/-+([a-z0-9])/g;function gm(n){return n.replace(c1,(...e)=>e[1].toUpperCase())}function l1(n,e){return n===0||e===0}function u1(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,mm(n,a)))}}return e}function tt(n,e,t){switch(e.type){case O.Trigger:return n.visitTrigger(e,t);case O.State:return n.visitState(e,t);case O.Transition:return n.visitTransition(e,t);case O.Sequence:return n.visitSequence(e,t);case O.Group:return n.visitGroup(e,t);case O.Animate:return n.visitAnimate(e,t);case O.Keyframes:return n.visitKeyframes(e,t);case O.Style:return n.visitStyle(e,t);case O.Reference:return n.visitReference(e,t);case O.AnimateChild:return n.visitAnimateChild(e,t);case O.AnimateRef:return n.visitAnimateRef(e,t);case O.Query:return n.visitQuery(e,t);case O.Stagger:return n.visitStagger(e,t);default:throw SL(e.type)}}function mm(n,e){return window.getComputedStyle(n)[e]}var d1=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Ql=class extends Gr{normalizePropertyName(e,t){return gm(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(d1.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(TL(e,r))}return o+s}};var Zl="*";function f1(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>h1(r,t,e)):t.push(n),t}function h1(n,e,t){if(n[0]==":"){let c=p1(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(UL(n)),e;let i=r[1],s=r[2],o=r[3];e.push(AD(i,o));let a=i==Zl&&o==Zl;s[0]=="<"&&!a&&e.push(AD(o,i))}function p1(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(VL(n)),"* => *"}}var zl=new Set(["true","1"]),Wl=new Set(["false","0"]);function AD(n,e){let t=zl.has(n)||Wl.has(n),r=zl.has(e)||Wl.has(e);return(i,s)=>{let o=n==Zl||n==i,a=e==Zl||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?zl.has(n):Wl.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?zl.has(e):Wl.has(e)),o&&a}}var zD=":self",g1=new RegExp(`s*${zD}s*,?`,"g");function WD(n,e,t,r){return new Xg(n).build(e,t,r)}var ND="",Xg=class{constructor(e){this._driver=e}build(e,t,r){let i=new em(t);return this._resetContextStyleTimingState(i),tt(this,qo(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=ND,e.collectedStyles=new Map,e.collectedStyles.set(ND,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(AL()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==O.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==O.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(NL())}),{type:O.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{HD(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(ML(e.name,[...s.values()]))}return{type:O.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=tt(this,qo(e.animation),t),i=f1(e.expr,t.errors);return{type:O.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:zr(e.options)}}visitSequence(e,t){return{type:O.Sequence,steps:e.steps.map(r=>tt(this,r,t)),options:zr(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=tt(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:O.Group,steps:s,options:zr(e.options)}}visitAnimate(e,t){let r=_1(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:We({});if(s.type==O.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=We(l)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:O.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Yt?r.push(a):t.errors.push(RL(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf($D)>=0){s=!0;break}}}),{type:O.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=i&&s>=u.startTime&&i<=u.endTime&&(t.errors.push(xL(c,u.startTime,u.endTime,s,i)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:i}),t.options&&a1(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:O.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(PL()),r;let i=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(I=>{let T=this._makeStyleAst(I,t),w=T.offset!=null?T.offset:v1(T.styles),C=0;return w!=null&&(s++,C=T.offset=w),c=c||C<0||C>1,a=a||C<l,l=C,o.push(C),T});c&&t.errors.push(OL()),a&&t.errors.push(kL());let d=e.steps.length,f=0;s>0&&s<d?t.errors.push(FL()):s==0&&(f=i/(d-1));let h=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((I,T)=>{let w=f>0?T==h?1:f*T:o[T],C=w*m;t.currentTime=p+g.delay+C,g.duration=C,this._validateStyleAst(I,t),I.offset=w,r.styles.push(I)}),r}visitReference(e,t){return{type:O.Reference,animation:tt(this,qo(e.animation),t),options:zr(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:O.AnimateChild,options:zr(e.options)}}visitAnimateRef(e,t){return{type:O.AnimateRef,animation:this.visitReference(e.animation,t),options:zr(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=m1(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,nt(t.collectedStyles,t.currentQuerySelector,new Map);let a=tt(this,qo(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:O.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:zr(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(LL());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Yl(e.timings,t.errors,!0);return{type:O.Stagger,animation:tt(this,qo(e.animation),t),timings:r,options:null}}};function m1(n){let e=!!n.split(/\s*,\s*/).find(t=>t==zD);return e&&(n=n.replace(g1,"")),n=n.replace(/@\*/g,Kl).replace(/@\w+/g,t=>Kl+"-"+t.slice(1)).replace(/:animating/g,Qg),[n,e]}function y1(n){return n?b({},n):null}var em=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function v1(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function _1(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Yl(n,e).duration;return zg(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=zg(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Yl(t,e);return zg(i.duration,i.delay,i.easing)}function zr(n){return n?(n=b({},n),n.params&&(n.params=y1(n.params))):n={},n}function zg(n,e,t){return{duration:n,delay:e,easing:t}}function ym(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Yo=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},E1=1,w1=":enter",I1=new RegExp(w1,"g"),C1=":leave",D1=new RegExp(C1,"g");function qD(n,e,t,r,i,s=new Map,o=new Map,a,c,l=[]){return new tm().buildKeyframes(n,e,t,r,i,s,o,a,c,l)}var tm=class{buildKeyframes(e,t,r,i,s,o,a,c,l,u=[]){l=l||new Yo;let d=new nm(e,t,l,i,s,u,[]);d.options=c;let f=c.delay?_n(c.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,c),tt(this,r,d);let h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){let m=h[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return h.length?h.map(p=>p.buildKeyframes()):[ym(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:_n(Ko(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?_n(r.duration):null,a=r.delay!=null?_n(r.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),tt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==O.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Jl);let o=_n(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>tt(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?_n(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),tt(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Ko(r,t.params,t.errors):r;return Yl(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==O.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?_n(i.delay):0;s&&(t.previousNode.type===O.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Jl);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),tt(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let f=d.currentTimeline.currentTime;o=Math.max(o,f)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;tt(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}},Jl={},nm=class n{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Jl,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Xl(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=_n(r.duration)),r.delay!=null&&(i.delay=_n(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ko(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Jl,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new rm(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(I1,"."+this._enterClassName),e=e.replace(D1,"."+this._leaveClassName);let c=r!=1,l=this._driver.query(this.element,e,c);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(jL(t)),a}},Xl=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=E1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Yt),this._currentKeyframe.set(t,Yt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=b1(e,this._globalTimelineStyles);for(let[a,c]of o){let l=Ko(c,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yt),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===Bc?e.add(d):u===Yt&&t.add(d)}),r||l.set("offset",c/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return ym(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},rm=class extends Xl{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",MD(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let f=new Map(e[d]),h=f.get("offset"),p=t+h*r;f.set("offset",MD(p/o)),s.push(f)}r=o,t=0,i="",e=s}return ym(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function MD(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function b1(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Yt)}else for(let[s,o]of i)t.set(s,o)}),t}function RD(n,e,t,r,i,s,o,a,c,l,u,d,f){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:f}}var Wg={},eu=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return S1(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,l,u){let d=[],f=this.ast.options&&this.ast.options.params||Wg,h=a&&a.params||Wg,p=this.buildStyles(r,h,d),g=c&&c.params||Wg,m=this.buildStyles(i,g,d),I=new Set,T=new Map,w=new Map,C=i==="void",H={params:GD(g,f),delay:this.ast.options?.delay},A=u?[]:qD(e,t,this.ast.animation,s,o,p,m,H,l,d),D=0;return A.forEach(Z=>{D=Math.max(Z.duration+Z.delay,D)}),d.length?RD(t,this._triggerName,r,i,C,p,m,[],[],T,w,D,d):(A.forEach(Z=>{let de=Z.element,me=nt(T,de,new Set);Z.preStyleProps.forEach(Ce=>me.add(Ce));let rt=nt(w,de,new Set);Z.postStyleProps.forEach(Ce=>rt.add(Ce)),de!==t&&I.add(de)}),RD(t,this._triggerName,r,i,C,p,m,A,[...I.values()],T,w,D))}};function S1(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function GD(n,e){let t=b({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var im=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=GD(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Ko(o,i,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}};function T1(n,e,t){return new sm(n,e,t)}var sm=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new im(i.style,s,r))}),xD(this.states,"true","1"),xD(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new eu(e,i,this.states))}),this.fallbackTransition=A1(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function A1(n,e,t){let r=[(o,a)=>!0],i={type:O.Sequence,steps:[],options:null},s={type:O.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new eu(n,s,e)}function xD(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var N1=new Yo,om=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=WD(this._driver,t,r,i);if(r.length)throw HL(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=jD(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=qD(this._driver,t,s,BD,Yg,new Map,new Map,r,N1,i),o.forEach(u=>{let d=nt(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(zL()),o=[]),i.length)throw WL(i);a.forEach((u,d)=>{u.forEach((f,h)=>{u.set(h,this._driver.computeStyle(d,h,Yt))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=er(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw qL(e);return t}listen(e,t,r,i){let s=fm(t,"","","");return dm(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},PD="ng-animate-queued",M1=".ng-animate-queued",qg="ng-animate-disabled",R1=".ng-animate-disabled",x1="ng-star-inserted",P1=".ng-star-inserted",O1=[],KD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},k1={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},kt="__ng_removed",Qo=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=L1(i),r){let s=e,{value:o}=s,a=wm(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Go="void",Gg=new Qo(Go),am=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,gt(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw GL(r,t);if(r==null||r.length==0)throw KL(t);if(!j1(r))throw YL(r,t);let s=nt(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=nt(this._engine.statesByElement,e,new Map);return a.has(t)||(gt(e,Hl),gt(e,Hl+"-"+t),a.set(t,Gg)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw QL(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Zo(this.id,t,e),a=this._engine.statesByElement.get(e);a||(gt(e,Hl),gt(e,Hl+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new Qo(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=Gg),!(l.value===Go)&&c.value===l.value){if(!$1(c.params,l.params)){let g=[],m=s.matchStyles(c.value,c.params,g),I=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Wr(e,m),rn(e,I)})}return}let f=nt(this._engine.playersByElement,e,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let h=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!h){if(!i)return;h=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:h,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(gt(e,PD),o.onStart(()=>{ts(e,PD)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let m=this._engine.playersByElement.get(e);if(m){let I=m.indexOf(o);I>=0&&m.splice(I,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Kl,!0);r.forEach(i=>{if(i[kt])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,Go,i);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&er(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let c=this._triggers.get(o).fallbackTransition,l=r.get(o)||Gg,u=new Qo(Go),d=new Zo(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[kt];(!s||s===KD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){gt(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let c=fm(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,dm(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},cm=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new am(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let l=r.indexOf(c);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(ql(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!ql(t))return;let s=t[kt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),gt(e,qg)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ts(e,qg))}removeNode(e,t,r){if(ql(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[kt]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return ql(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Kl,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Qg,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return er(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[kt];if(t&&t.setForRemoval){if(e[kt]=KD,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(qg)&&this.markElementAsDisabled(e,!1),this.driver.query(e,R1,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];gt(i,x1)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?er(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw ZL(e)}_flushAnimations(e,t){let r=new Yo,i=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(S=>{u.add(S);let N=this.driver.query(S,M1,!0);for(let R=0;R<N.length;R++)u.add(N[R])});let d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=FD(f,this.collectedEnterElements),p=new Map,g=0;h.forEach((S,N)=>{let R=BD+g++;p.set(N,R),S.forEach(J=>gt(J,R))});let m=[],I=new Set,T=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){let N=this.collectedLeaveElements[S],R=N[kt];R&&R.setForRemoval&&(m.push(N),I.add(N),R.hasAnimation?this.driver.query(N,P1,!0).forEach(J=>I.add(J)):T.add(N))}let w=new Map,C=FD(f,Array.from(I));C.forEach((S,N)=>{let R=Yg+g++;w.set(N,R),S.forEach(J=>gt(J,R))}),e.push(()=>{h.forEach((S,N)=>{let R=p.get(N);S.forEach(J=>ts(J,R))}),C.forEach((S,N)=>{let R=w.get(N);S.forEach(J=>ts(J,R))}),m.forEach(S=>{this.processLeaveNode(S)})});let H=[],A=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(t).forEach(R=>{let J=R.player,De=R.element;if(H.push(J),this.collectedEnterElements.length){let Re=De[kt];if(Re&&Re.setForMove){if(Re.previousTriggersValues&&Re.previousTriggersValues.has(R.triggerName)){let nr=Re.previousTriggersValues.get(R.triggerName),st=this.statesByElement.get(R.element);if(st&&st.has(R.triggerName)){let Jo=st.get(R.triggerName);Jo.value=nr,st.set(R.triggerName,Jo)}}J.destroy();return}}let Ft=!d||!this.driver.containsElement(d,De),Ye=w.get(De),wn=p.get(De),he=this._buildInstruction(R,r,wn,Ye,Ft);if(he.errors&&he.errors.length){A.push(he);return}if(Ft){J.onStart(()=>Wr(De,he.fromStyles)),J.onDestroy(()=>rn(De,he.toStyles)),i.push(J);return}if(R.isFallbackTransition){J.onStart(()=>Wr(De,he.fromStyles)),J.onDestroy(()=>rn(De,he.toStyles)),i.push(J);return}let vm=[];he.timelines.forEach(Re=>{Re.stretchStartingKeyframe=!0,this.disabledNodes.has(Re.element)||vm.push(Re)}),he.timelines=vm,r.append(De,he.timelines);let tb={instruction:he,player:J,element:De};o.push(tb),he.queriedElements.forEach(Re=>nt(a,Re,[]).push(J)),he.preStyleProps.forEach((Re,nr)=>{if(Re.size){let st=c.get(nr);st||c.set(nr,st=new Set),Re.forEach((Jo,su)=>st.add(su))}}),he.postStyleProps.forEach((Re,nr)=>{let st=l.get(nr);st||l.set(nr,st=new Set),Re.forEach((Jo,su)=>st.add(su))})});if(A.length){let S=[];A.forEach(N=>{S.push(JL(N.triggerName,N.errors))}),H.forEach(N=>N.destroy()),this.reportError(S)}let D=new Map,Z=new Map;o.forEach(S=>{let N=S.element;r.has(N)&&(Z.set(N,N),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,D))}),i.forEach(S=>{let N=S.element;this._getPreviousPlayers(N,!1,S.namespaceId,S.triggerName,null).forEach(J=>{nt(D,N,[]).push(J),J.destroy()})});let de=m.filter(S=>LD(S,c,l)),me=new Map;kD(me,this.driver,T,l,Yt).forEach(S=>{LD(S,c,l)&&de.push(S)});let Ce=new Map;h.forEach((S,N)=>{kD(Ce,this.driver,new Set(S),c,Bc)}),de.forEach(S=>{let N=me.get(S),R=Ce.get(S);me.set(S,new Map([...N?.entries()??[],...R?.entries()??[]]))});let it=[],tr=[],En={};o.forEach(S=>{let{element:N,player:R,instruction:J}=S;if(r.has(N)){if(u.has(N)){R.onDestroy(()=>rn(N,J.toStyles)),R.disabled=!0,R.overrideTotalTime(J.totalTime),i.push(R);return}let De=En;if(Z.size>1){let Ye=N,wn=[];for(;Ye=Ye.parentNode;){let he=Z.get(Ye);if(he){De=he;break}wn.push(Ye)}wn.forEach(he=>Z.set(he,De))}let Ft=this._buildAnimation(R.namespaceId,J,D,s,Ce,me);if(R.setRealPlayer(Ft),De===En)it.push(R);else{let Ye=this.playersByElement.get(De);Ye&&Ye.length&&(R.parentPlayer=er(Ye)),i.push(R)}}else Wr(N,J.fromStyles),R.onDestroy(()=>rn(N,J.toStyles)),tr.push(R),u.has(N)&&i.push(R)}),tr.forEach(S=>{let N=s.get(S.element);if(N&&N.length){let R=er(N);S.setRealPlayer(R)}}),i.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<m.length;S++){let N=m[S],R=N[kt];if(ts(N,Yg),R&&R.hasAnimation)continue;let J=[];if(a.size){let Ft=a.get(N);Ft&&Ft.length&&J.push(...Ft);let Ye=this.driver.query(N,Qg,!0);for(let wn=0;wn<Ye.length;wn++){let he=a.get(Ye[wn]);he&&he.length&&J.push(...he)}}let De=J.filter(Ft=>!Ft.destroyed);De.length?U1(this,N,De):this.processLeaveNode(N)}return m.length=0,it.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();let N=this.players.indexOf(S);this.players.splice(N,1)}),S.play()}),it}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==Go;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let l=c.element,u=l!==s,d=nt(r,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(h=>{let p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}Wr(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,f=t.timelines.map(p=>{let g=p.element;u.add(g);let m=g[kt];if(m&&m.removedBeforeQueried)return new Hn(p.duration,p.delay);let I=g!==c,T=V1((r.get(g)||O1).map(D=>D.getRealPlayer())).filter(D=>{let Z=D;return Z.element?Z.element===g:!1}),w=s.get(g),C=o.get(g),H=jD(this._normalizer,p.keyframes,w,C),A=this._buildPlayer(p,H,T);if(p.subTimeline&&i&&d.add(g),I){let D=new Zo(e,a,g);D.setRealPlayer(A),l.push(D)}return A});l.forEach(p=>{nt(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>F1(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>gt(p,TD));let h=er(f);return h.onDestroy(()=>{u.forEach(p=>ts(p,TD)),rn(c,t.toStyles)}),d.forEach(p=>{nt(i,p,[]).push(h)}),h}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Hn(e.duration,e.delay)}},Zo=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Hn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>dm(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){nt(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function F1(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function L1(n){return n??null}function ql(n){return n&&n.nodeType===1}function j1(n){return n=="start"||n=="done"}function OD(n,e){let t=n.style.display;return n.style.display=e??"none",t}function kD(n,e,t,r,i){let s=[];t.forEach(c=>s.push(OD(c)));let o=[];r.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let f=e.computeStyle(l,d,i);u.set(d,f),(!f||f.length==0)&&(l[kt]=k1,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>OD(c,s[a++])),o}function FD(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:i.has(l)?c=r:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==r&&t.get(c).push(a)}),t}function gt(n,e){n.classList?.add(e)}function ts(n,e){n.classList?.remove(e)}function U1(n,e,t){er(t).onDone(()=>n.processLeaveNode(e))}function V1(n){let e=[];return YD(n,e),e}function YD(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof Xs?YD(r.players,e):e.push(r)}}function $1(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function LD(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var ns=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new cm(e.body,t,r),this._timelineEngine=new om(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let c=[],l=[],u=WD(this._driver,s,c,l);if(c.length)throw $L(i,c);l.length&&void 0,a=T1(i,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=bD(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=bD(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function B1(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Kg(e[0]),e.length>1&&(r=Kg(e[e.length-1]))):e instanceof Map&&(t=Kg(e)),t||r?new lm(n,t,r):null}var lm=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=n.initialStylesByElement.get(e);i||n.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&rn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rn(this._element,this._initialStyles),this._endStyles&&(rn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Wr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wr(this._element,this._endStyles),this._endStyles=null),rn(this._element,this._initialStyles),this._state=3)}};function Kg(n){let e=null;return n.forEach((t,r)=>{H1(r)&&(e=e||new Map,e.set(r,t))}),e}function H1(n){return n==="display"||n==="position"}var tu=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:mm(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},nu=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return UD(e,t)}getParentElement(e){return hm(e)}query(e,t,r){return VD(e,t,r)}computeStyle(e,t,r){return mm(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(h=>h instanceof tu);l1(r,i)&&u.forEach(h=>{h.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=o1(t).map(h=>new Map(h));d=u1(e,d,l);let f=B1(e,d);return new tu(e,d,c,f)}};var Gl="@",QD="@.disabled",ru=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Gl&&t==QD?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},um=class extends ru{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Gl?t.charAt(1)=="."&&t==QD?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==Gl){let i=z1(e),s=t.slice(1),o="";return s.charAt(0)!=Gl&&([s,o]=W1(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,r,a)})}return this.delegate.listen(e,t,r)}};function z1(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function W1(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var iu=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(i);if(!u){let d=()=>l.delete(i);u=new ru(r,i,this.engine,d),l.set(i,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new um(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var G1=(()=>{class n extends ns{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(j(ze),j(qr),j(Gr))}}static{this.\u0275prov=M({token:n,factory:n.\u0275fac})}}return n})();function K1(){return new Ql}function Y1(n,e,t){return new iu(n,e,t)}var ZD=[{provide:Gr,useFactory:K1},{provide:ns,useClass:G1},{provide:Rn,useFactory:Y1,deps:[Dc,ns,se]}],Q1=[{provide:qr,useFactory:()=>new nu},{provide:of,useValue:"BrowserAnimations"},...ZD],EG=[{provide:qr,useClass:pm},{provide:of,useValue:"NoopAnimations"},...ZD];function JD(){return yr("NgEagerAnimations"),[...Q1]}var XD={providers:[Bw(()=>Hw({projectId:"set-card-game-b7b55",appId:"1:314036741918:web:13991a7c172a1b2efecb0f",databaseURL:"https://set-card-game-b7b55-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"set-card-game-b7b55.firebasestorage.app",apiKey:"AIzaSyDZAx444-7oW19-zQFktsp_2Ef6D5lHD4A",authDomain:"set-card-game-b7b55.firebaseapp.com",messagingSenderId:"314036741918"})),rD(()=>$l()),J_({eventCoalescing:!0}),sw(CD),JD()]};var eb=(()=>{class n{title="testingrout";static \u0275fac=function(r){return new(r||n)};static \u0275cmp=zt({type:n,selectors:[["app-root"]],standalone:!0,features:[Gt],decls:1,vars:0,template:function(r,i){r&1&&qt(0,"router-outlet")},dependencies:[vh]})}return n})();wE(eb,XD).catch(n=>console.error(n));
