var xE=Object.create;var el=Object.defineProperty,OE=Object.defineProperties,PE=Object.getOwnPropertyDescriptor,kE=Object.getOwnPropertyDescriptors,LE=Object.getOwnPropertyNames,xp=Object.getOwnPropertySymbols,FE=Object.getPrototypeOf,Pp=Object.prototype.hasOwnProperty,jE=Object.prototype.propertyIsEnumerable;var Op=(t,e,n)=>e in t?el(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})Pp.call(e,n)&&Op(t,n,e[n]);if(xp)for(var n of xp(e))jE.call(e,n)&&Op(t,n,e[n]);return t},oe=(t,e)=>OE(t,kE(e));var Ft=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var UE=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of LE(e))!Pp.call(t,i)&&i!==n&&el(t,i,{get:()=>e[i],enumerable:!(r=PE(e,i))||r.enumerable});return t};var VE=(t,e,n)=>(n=t!=null?xE(FE(t)):{},UE(e||!t||!t.__esModule?el(n,"default",{value:t,enumerable:!0}):n,t));var v=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var fE=Ft((dE,bp)=>{"use strict";(function(t,e,n){function r(a){var c=this,l=s();c.next=function(){var u=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=u-(c.c=u|0)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(a),c.s0<0&&(c.s0+=1),c.s1-=l(a),c.s1<0&&(c.s1+=1),c.s2-=l(a),c.s2<0&&(c.s2+=1),l=null}function i(a,c){return c.c=a.c,c.s0=a.s0,c.s1=a.s1,c.s2=a.s2,c}function o(a,c){var l=new r(a),u=c&&c.state,d=l.next;return d.int32=function(){return l.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&i(u,l),d.state=function(){return i(l,{})}),d}function s(){var a=4022871197,c=function(l){l=String(l);for(var u=0;u<l.length;u++){a+=l.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return c}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.alea=o})(dE,typeof bp=="object"&&bp,typeof define=="function"&&define)});var pE=Ft((hE,Sp)=>{"use strict";(function(t,e,n){function r(s){var a=this,c="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:c+=s;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,a.next()}function i(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function o(s,a){var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor128=o})(hE,typeof Sp=="object"&&Sp,typeof define=="function"&&define)});var mE=Ft((gE,Tp)=>{"use strict";(function(t,e,n){function r(s){var a=this,c="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:c+=s;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,l==c.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function i(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function o(s,a){var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorwow=o})(gE,typeof Tp=="object"&&Tp,typeof define=="function"&&define)});var yE=Ft((vE,Ap)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var l=a.x,u=a.i,d,f,h;return d=l[u],d^=d>>>7,f=d^d<<24,d=l[u+1&7],f^=d^d>>>10,d=l[u+3&7],f^=d^d>>>3,d=l[u+4&7],f^=d^d<<7,d=l[u+7&7],d=d^d<<13,f^=d^d<<9,l[u]=f,a.i=u+1&7,f};function c(l,u){var d,f,h=[];if(u===(u|0))f=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?f=h[7]=-1:f=h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}c(a,s)}function i(s,a){return a.x=s.x.slice(),a.i=s.i,a}function o(s,a){s==null&&(s=+new Date);var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.x&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xorshift7=o})(vE,typeof Ap=="object"&&Ap,typeof define=="function"&&define)});var IE=Ft((_E,Np)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var l=a.w,u=a.X,d=a.i,f,h;return a.w=l=l+1640531527|0,h=u[d+34&127],f=u[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,h=u[d]=h^f,a.i=d,h+(l^l>>>16)|0};function c(l,u){var d,f,h,p,m,_=[],D=128;for(u===(u|0)?(f=u,u=null):(u=u+"\0",f=0,D=Math.max(D,u.length)),h=0,p=-32;p<D;++p)u&&(f^=u.charCodeAt((p+32)%u.length)),p===0&&(m=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(m=m+1640531527|0,d=_[p&127]^=f+m,h=d==0?h+1:0);for(h>=128&&(_[(u&&u.length||0)&127]=-1),h=127,p=4*128;p>0;--p)f=_[h+34&127],d=_[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,_[h]=f^d;l.w=m,l.X=_,l.i=h}c(a,s)}function i(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function o(s,a){s==null&&(s=+new Date);var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(l.X&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.xor4096=o})(_E,typeof Np=="object"&&Np,typeof define=="function"&&define)});var EE=Ft((wE,Mp)=>{"use strict";(function(t,e,n){function r(s){var a=this,c="";a.next=function(){var u=a.b,d=a.c,f=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-f|0,f=f<<24^f>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-f|0,a.d=f<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):c+=s;for(var l=0;l<c.length+20;l++)a.b^=c.charCodeAt(l)|0,a.next()}function i(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function o(s,a){var c=new r(s),l=a&&a.state,u=function(){return(c.next()>>>0)/4294967296};return u.double=function(){do var d=c.next()>>>11,f=(c.next()>>>0)/4294967296,h=(d+f)/(1<<21);while(h===0);return h},u.int32=c.next,u.quick=u,l&&(typeof l=="object"&&i(l,c),u.state=function(){return i(c,{})}),u}e&&e.exports?e.exports=o:n&&n.amd?n(function(){return o}):this.tychei=o})(wE,typeof Mp=="object"&&Mp,typeof define=="function"&&define)});var CE=Ft(()=>{"use strict"});var bE=Ft((DE,Xc)=>{"use strict";(function(t,e,n){var r=256,i=6,o=52,s="random",a=n.pow(r,i),c=n.pow(2,o),l=c*2,u=r-1,d;function f(w,T,ie){var F=[];T=T==!0?{entropy:!0}:T||{};var K=_(m(T.entropy?[w,B(e)]:w??D(),3),F),pe=new h(F),_e=function(){for(var Re=pe.g(i),Lt=a,yt=0;Re<c;)Re=(Re+yt)*r,Lt*=r,yt=pe.g(1);for(;Re>=l;)Re/=2,Lt/=2,yt>>>=1;return(Re+yt)/Lt};return _e.int32=function(){return pe.g(4)|0},_e.quick=function(){return pe.g(4)/4294967296},_e.double=_e,_(B(pe.S),e),(T.pass||ie||function(Re,Lt,yt,Jt){return Jt&&(Jt.S&&p(Jt,pe),Re.state=function(){return p(pe,{})}),yt?(n[s]=Re,Lt):Re})(_e,K,"global"in T?T.global:this==n,T.state)}function h(w){var T,ie=w.length,F=this,K=0,pe=F.i=F.j=0,_e=F.S=[];for(ie||(w=[ie++]);K<r;)_e[K]=K++;for(K=0;K<r;K++)_e[K]=_e[pe=u&pe+w[K%ie]+(T=_e[K])],_e[pe]=T;(F.g=function(Re){for(var Lt,yt=0,Jt=F.i,cs=F.j,Ei=F.S;Re--;)Lt=Ei[Jt=u&Jt+1],yt=yt*r+Ei[u&(Ei[Jt]=Ei[cs=u&cs+Lt])+(Ei[cs]=Lt)];return F.i=Jt,F.j=cs,yt})(r)}function p(w,T){return T.i=w.i,T.j=w.j,T.S=w.S.slice(),T}function m(w,T){var ie=[],F=typeof w,K;if(T&&F=="object")for(K in w)try{ie.push(m(w[K],T-1))}catch{}return ie.length?ie:F=="string"?w:w+"\0"}function _(w,T){for(var ie=w+"",F,K=0;K<ie.length;)T[u&K]=u&(F^=T[u&K]*19)+ie.charCodeAt(K++);return B(T)}function D(){try{var w;return d&&(w=d.randomBytes)?w=w(r):(w=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(w)),B(w)}catch{var T=t.navigator,ie=T&&T.plugins;return[+new Date,t,ie,t.screen,B(e)]}}function B(w){return String.fromCharCode.apply(0,w)}if(_(n.random(),e),typeof Xc=="object"&&Xc.exports){Xc.exports=f;try{d=CE()}catch{}}else typeof define=="function"&&define.amd?define(function(){return f}):n["seed"+s]=f})(typeof self<"u"?self:DE,[],Math)});var TE=Ft((GH,SE)=>{"use strict";var VP=fE(),$P=pE(),BP=mE(),HP=yE(),WP=IE(),zP=EE(),fr=bE();fr.alea=VP;fr.xor128=$P;fr.xorwow=BP;fr.xorshift7=HP;fr.xor4096=WP;fr.tychei=zP;SE.exports=fr});var nl=null;var tl=1,kp=Symbol("SIGNAL");function U(t){let e=nl;return nl=t,e}function Lp(){return nl}var rl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $E(t){if(!(cl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tl)){if(!t.producerMustRecompute(t)&&!ol(t)){t.dirty=!1,t.lastCleanEpoch=tl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=tl}}function il(t){return t&&(t.nextProducerIndex=0),U(t)}function Fp(t,e){if(U(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(cl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)al(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ol(t){ll(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||($E(n),r!==n.version))return!0}return!1}function sl(t){if(ll(t),cl(t))for(let e=0;e<t.producerNode.length;e++)al(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function al(t,e){if(BE(t),t.liveConsumerNode.length===1&&HE(t))for(let r=0;r<t.producerNode.length;r++)al(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ll(i),i.producerIndexOfThis[r]=e}}function cl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ll(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function BE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function HE(t){return t.producerNode!==void 0}function WE(){throw new Error}var zE=WE;function jp(t){zE=t}function A(t){return typeof t=="function"}function hr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ls=hr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Rn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(A(r))try{r()}catch(o){e=o instanceof ls?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Up(o)}catch(s){e=e??[],s instanceof ls?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ls(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Up(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Rn(n,e)}remove(e){let{_finalizers:n}=this;n&&Rn(n,e),e instanceof t&&e._removeParent(this)}};se.EMPTY=(()=>{let t=new se;return t.closed=!0,t})();var ul=se.EMPTY;function us(t){return t instanceof se||t&&"closed"in t&&A(t.remove)&&A(t.add)&&A(t.unsubscribe)}function Up(t){A(t)?t():t.unsubscribe()}var et={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pr={setTimeout(t,e,...n){let{delegate:r}=pr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=pr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ds(t){pr.setTimeout(()=>{let{onUnhandledError:e}=et;if(e)e(t);else throw t})}function Ci(){}var Vp=dl("C",void 0,void 0);function $p(t){return dl("E",void 0,t)}function Bp(t){return dl("N",t,void 0)}function dl(t,e,n){return{kind:t,value:e,error:n}}var xn=null;function gr(t){if(et.useDeprecatedSynchronousErrorHandling){let e=!xn;if(e&&(xn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xn;if(xn=null,n)throw r}}else t()}function Hp(t){et.useDeprecatedSynchronousErrorHandling&&xn&&(xn.errorThrown=!0,xn.error=t)}var On=class extends se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,us(e)&&e.add(this)):this.destination=YE}static create(e,n,r){return new mr(e,n,r)}next(e){this.isStopped?hl(Bp(e),this):this._next(e)}error(e){this.isStopped?hl($p(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hl(Vp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GE=Function.prototype.bind;function fl(t,e){return GE.call(t,e)}var pl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){fs(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){fs(r)}else fs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){fs(n)}}},mr=class extends On{constructor(e,n,r){super();let i;if(A(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&et.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fl(e.next,o),error:e.error&&fl(e.error,o),complete:e.complete&&fl(e.complete,o)}):i=e}this.destination=new pl(i)}};function fs(t){et.useDeprecatedSynchronousErrorHandling?Hp(t):ds(t)}function qE(t){throw t}function hl(t,e){let{onStoppedNotification:n}=et;n&&pr.setTimeout(()=>n(t,e))}var YE={closed:!0,next:Ci,error:qE,complete:Ci};var vr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function je(t){return t}function gl(...t){return ml(t)}function ml(t){return t.length===0?je:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=ZE(n)?n:new mr(n,r,i);return gr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Wp(r),new r((i,o)=>{let s=new mr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[vr](){return this}pipe(...n){return ml(n)(this)}toPromise(n){return n=Wp(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Wp(t){var e;return(e=t??et.Promise)!==null&&e!==void 0?e:Promise}function KE(t){return t&&A(t.next)&&A(t.error)&&A(t.complete)}function ZE(t){return t&&t instanceof On||KE(t)&&us(t)}function vl(t){return A(t?.lift)}function H(t){return e=>{if(vl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function W(t,e,n,r,i){return new yl(t,e,n,r,i)}var yl=class extends On{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yr(){return H((t,e)=>{let n=null;t._refCount++;let r=W(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var _r=class extends z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,vl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new se;let n=this.getSubject();e.add(this.source.subscribe(W(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=se.EMPTY)}return e}refCount(){return yr()(this)}};var zp=hr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=(()=>{class t extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new hs(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zp}next(n){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ul:(this.currentObservers=null,o.push(n),new se(()=>{this.currentObservers=null,Rn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new z;return n.source=this,n}}return t.create=(e,n)=>new hs(e,n),t})(),hs=class extends Se{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ul}};var Ie=class extends Se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _l={now(){return(_l.delegate||Date).now()},delegate:void 0};var ps=class extends se{constructor(e,n){super()}schedule(e,n=0){return this}};var Di={setInterval(t,e,...n){let{delegate:r}=Di;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Di;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ir=class extends ps{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Di.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Di.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Rn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var wr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};wr.now=_l.now;var Er=class extends wr{constructor(e,n=wr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Il=new Er(Ir);var gs=class extends Ir{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ms=class extends Er{};var wl=new ms(gs);var Ue=new z(t=>t.complete());function Gp(t){return t&&A(t.schedule)}function qp(t){return t[t.length-1]}function Yp(t){return A(qp(t))?t.pop():void 0}function Xt(t){return Gp(qp(t))?t.pop():void 0}function El(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Zp(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Kp(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pn(t){return this instanceof Pn?(this.v=t,this):new Pn(t)}function Qp(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(_,D){o.push([h,m,_,D])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(m){f(o[0][3],m)}}function l(h){h.value instanceof Pn?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Jp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Kp=="function"?Kp(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var vs=t=>t&&typeof t.length=="number"&&typeof t!="function";function ys(t){return A(t?.then)}function _s(t){return A(t[vr])}function Is(t){return Symbol.asyncIterator&&A(t?.[Symbol.asyncIterator])}function ws(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Es=QE();function Cs(t){return A(t?.[Es])}function Ds(t){return Qp(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Pn(n.read());if(i)return yield Pn(void 0);yield yield Pn(r)}}finally{n.releaseLock()}})}function bs(t){return A(t?.getReader)}function ge(t){if(t instanceof z)return t;if(t!=null){if(_s(t))return JE(t);if(vs(t))return XE(t);if(ys(t))return eC(t);if(Is(t))return Xp(t);if(Cs(t))return tC(t);if(bs(t))return nC(t)}throw ws(t)}function JE(t){return new z(e=>{let n=t[vr]();if(A(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XE(t){return new z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function eC(t){return new z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ds)})}function tC(t){return new z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Xp(t){return new z(e=>{rC(t,e).catch(n=>e.error(n))})}function nC(t){return Xp(Ds(t))}function rC(t,e){var n,r,i,o;return Zp(this,void 0,void 0,function*(){try{for(n=Jp(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function xe(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function en(t,e=0){return H((n,r)=>{n.subscribe(W(r,i=>xe(r,t,()=>r.next(i),e),()=>xe(r,t,()=>r.complete(),e),i=>xe(r,t,()=>r.error(i),e)))})}function tn(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function eg(t,e){return ge(t).pipe(tn(e),en(e))}function tg(t,e){return ge(t).pipe(tn(e),en(e))}function ng(t,e){return new z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function rg(t,e){return new z(n=>{let r;return xe(n,e,()=>{r=t[Es](),xe(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>A(r?.return)&&r.return()})}function Ss(t,e){if(!t)throw new Error("Iterable cannot be null");return new z(n=>{xe(n,e,()=>{let r=t[Symbol.asyncIterator]();xe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ig(t,e){return Ss(Ds(t),e)}function og(t,e){if(t!=null){if(_s(t))return eg(t,e);if(vs(t))return ng(t,e);if(ys(t))return tg(t,e);if(Is(t))return Ss(t,e);if(Cs(t))return rg(t,e);if(bs(t))return ig(t,e)}throw ws(t)}function ue(t,e){return e?og(t,e):ge(t)}function N(...t){let e=Xt(t);return ue(t,e)}function Cr(t,e){let n=A(t)?t:()=>t,r=i=>i.error(n());return new z(e?i=>e.schedule(r,0,i):r)}function Cl(t){return!!t&&(t instanceof z||A(t.lift)&&A(t.subscribe))}var jt=hr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function V(t,e){return H((n,r)=>{let i=0;n.subscribe(W(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:iC}=Array;function oC(t,e){return iC(e)?t(...e):t(e)}function sg(t){return V(e=>oC(t,e))}var{isArray:sC}=Array,{getPrototypeOf:aC,prototype:cC,keys:lC}=Object;function ag(t){if(t.length===1){let e=t[0];if(sC(e))return{args:e,keys:null};if(uC(e)){let n=lC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function uC(t){return t&&typeof t=="object"&&aC(t)===cC}function cg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ts(...t){let e=Xt(t),n=Yp(t),{args:r,keys:i}=ag(t);if(r.length===0)return ue([],e);let o=new z(dC(r,e,i?s=>cg(i,s):je));return n?o.pipe(sg(n)):o}function dC(t,e,n=je){return r=>{lg(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)lg(e,()=>{let l=ue(t[c],e),u=!1;l.subscribe(W(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function lg(t,e,n){t?xe(n,t,e):e()}function ug(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=m=>l<r?p(m):c.push(m),p=m=>{o&&e.next(m),l++;let _=!1;ge(n(m,u++)).subscribe(W(e,D=>{i?.(D),o?h(D):e.next(D)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let D=c.shift();s?xe(e,s,()=>p(D)):p(D)}f()}catch(D){e.error(D)}}))};return t.subscribe(W(e,h,()=>{d=!0,f()})),()=>{a?.()}}function de(t,e,n=1/0){return A(e)?de((r,i)=>V((o,s)=>e(r,o,i,s))(ge(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>ug(r,i,t,n)))}function Dl(t=1/0){return de(je,t)}function dg(){return Dl(1)}function Dr(...t){return dg()(ue(t,Xt(t)))}function As(t){return new z(e=>{ge(t()).subscribe(e)})}function tt(t,e){return H((n,r)=>{let i=0;n.subscribe(W(r,o=>t.call(e,o,i++)&&r.next(o)))})}function nn(t){return H((e,n)=>{let r=null,i=!1,o;r=e.subscribe(W(n,void 0,void 0,s=>{o=ge(t(s,nn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function fg(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(W(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function br(t,e){return A(e)?de(t,e,1):de(t,1)}function rn(t){return H((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ut(t){return t<=0?()=>Ue:H((e,n)=>{let r=0;e.subscribe(W(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function bl(t){return V(()=>t)}function Ns(t=fC){return H((e,n)=>{let r=!1;e.subscribe(W(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function fC(){return new jt}function bi(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function _t(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tt((i,o)=>t(i,o,r)):je,Ut(1),n?rn(e):Ns(()=>new jt))}function Sr(t){return t<=0?()=>Ue:H((e,n)=>{let r=[];e.subscribe(W(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Sl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tt((i,o)=>t(i,o,r)):je,Sr(1),n?rn(e):Ns(()=>new jt))}function Tl(t,e){return H(fg(t,e,arguments.length>=2,!0))}function Al(...t){let e=Xt(t);return H((n,r)=>{(e?Dr(t,n,e):Dr(t,n)).subscribe(r)})}function nt(t,e){return H((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(W(r,c=>{i?.unsubscribe();let l=0,u=o++;ge(t(c,u)).subscribe(i=W(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Nl(t){return H((e,n)=>{ge(t).subscribe(W(n,()=>n.complete(),Ci)),!n.closed&&e.subscribe(n)})}function fe(t,e,n){let r=A(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(W(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):je}var Zg="https://g.co/ng/security#xss",E=class extends Error{constructor(e,n){super(Nu(e,n)),this.code=e}};function Nu(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $i(t){return{toString:t}.toString()}var Ms="__parameters__";function hC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Qg(t,e,n){return $i(()=>{let r=hC(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Ms)?c[Ms]:Object.defineProperty(c,Ms,{value:[]})[Ms];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function Oe(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Oe).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function hg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var pC=J({__forward_ref__:J});function Jg(t){return t.__forward_ref__=Jg,t.toString=function(){return Oe(this())},t}function We(t){return Xg(t)?t():t}function Xg(t){return typeof t=="function"&&t.hasOwnProperty(pC)&&t.__forward_ref__===Jg}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function oa(t){return{providers:t.providers||[],imports:t.imports||[]}}function sa(t){return pg(t,tm)||pg(t,nm)}function em(t){return sa(t)!==null}function pg(t,e){return t.hasOwnProperty(e)?t[e]:null}function gC(t){let e=t&&(t[tm]||t[nm]);return e||null}function gg(t){return t&&(t.hasOwnProperty(mg)||t.hasOwnProperty(mC))?t[mg]:null}var tm=J({\u0275prov:J}),mg=J({\u0275inj:J}),nm=J({ngInjectableDef:J}),mC=J({ngInjectorDef:J}),S=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rm(t){return t&&!!t.\u0275providers}var vC=J({\u0275cmp:J}),yC=J({\u0275dir:J}),_C=J({\u0275pipe:J}),IC=J({\u0275mod:J}),Fs=J({\u0275fac:J}),Ai=J({__NG_ELEMENT_ID__:J}),vg=J({__NG_ENV_ID__:J});function Mu(t){return typeof t=="string"?t:t==null?"":String(t)}function wC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Mu(t)}function EC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new E(-200,t)}function Ru(t,e){throw new E(-201,!1)}var x=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(x||{}),Ul;function im(){return Ul}function He(t){let e=Ul;return Ul=t,e}function om(t,e,n){let r=sa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&x.Optional)return null;if(e!==void 0)return e;Ru(t,"Injector")}var CC={},Ni=CC,Vl="__NG_DI_FLAG__",js="ngTempTokenPath",DC="ngTokenPath",bC=/\n/gm,SC="\u0275",yg="__source",Mr;function TC(){return Mr}function on(t){let e=Mr;return Mr=t,e}function AC(t,e=x.Default){if(Mr===void 0)throw new E(-203,!1);return Mr===null?om(t,void 0,e):Mr.get(t,e&x.Optional?null:void 0,e)}function k(t,e=x.Default){return(im()||AC)(We(t),e)}function y(t,e=x.Default){return k(t,aa(e))}function aa(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function $l(t){let e=[];for(let n=0;n<t.length;n++){let r=We(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=x.Default;for(let s=0;s<r.length;s++){let a=r[s],c=NC(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(k(i,o))}else e.push(k(r))}return e}function sm(t,e){return t[Vl]=e,t.prototype[Vl]=e,t}function NC(t){return t[Vl]}function MC(t,e,n,r){let i=t[js];throw e[yg]&&i.unshift(e[yg]),t.message=RC(`
`+t.message,i,n,r),t[DC]=i,t[js]=null,t}function RC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==SC?t.slice(2):t;let i=Oe(e);if(Array.isArray(e))i=e.map(Oe).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Oe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(bC,`
  `)}`}var ct=sm(Qg("Optional"),8);var am=sm(Qg("SkipSelf"),4);function xr(t,e){let n=t.hasOwnProperty(Fs);return n?t[Fs]:null}function xu(t,e){t.forEach(n=>Array.isArray(n)?xu(n,e):e(n))}function cm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Us(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Mi={},It=[],Or=new S(""),lm=new S("",-1),um=new S(""),Vs=class{get(e,n=Ni){if(n===Ni){let r=new Error(`NullInjectorError: No provider for ${Oe(e)}!`);throw r.name="NullInjectorError",r}return n}},dm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(dm||{}),Ct=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ct||{}),cn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(cn||{});function xC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Bl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];PC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function OC(t){return t===3||t===4||t===6}function PC(t){return t.charCodeAt(0)===64}function Ou(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?_g(t,n,i,null,e[++r]):_g(t,n,i,null,null))}}return t}function _g(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var fm="ng-template";function kC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&xC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Pu(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Pu(t){return t.type===4&&t.value!==fm}function LC(t,e,n){let r=t.type===4&&!n?fm:t.value;return e===r}function FC(t,e,n){let r=4,i=t.attrs,o=i!==null?VC(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!rt(r)&&!rt(c))return!1;if(s&&rt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!LC(t,c,n)||c===""&&e.length===1){if(rt(r))return!1;s=!0}}else if(r&8){if(i===null||!kC(t,i,c,n)){if(rt(r))return!1;s=!0}}else{let l=e[++a],u=jC(c,i,Pu(t),n);if(u===-1){if(rt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(rt(r))return!1;s=!0}}}}return rt(r)||s}function rt(t){return(t&1)===0}function jC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return $C(e,t)}function UC(t,e,n=!1){for(let r=0;r<e.length;r++)if(FC(t,e[r],n))return!0;return!1}function VC(t){for(let e=0;e<t.length;e++){let n=t[e];if(OC(n))return e}return t.length}function $C(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Ig(t,e){return t?":not("+e.trim()+")":e}function BC(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!rt(s)&&(e+=Ig(o,i),i=""),r=s,o=o||!rt(r);n++}return i!==""&&(e+=Ig(o,i)),e}function HC(t){return t.map(BC).join(",")}function WC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!rt(i))break;i=o}r++}return{attrs:e,classes:n}}function St(t){return $i(()=>{let e=vm(t),n=oe(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===dm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ct.Emulated,styles:t.styles||It,_:null,schemas:t.schemas||null,tView:null,id:""});ym(n);let r=t.dependencies;return n.directiveDefs=Eg(r,!1),n.pipeDefs=Eg(r,!0),n.id=qC(n),n})}function zC(t){return Ln(t)||hm(t)}function GC(t){return t!==null}function ca(t){return $i(()=>({type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function wg(t,e){if(t==null)return Mi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=cn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==cn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Br(t){return $i(()=>{let e=vm(t);return ym(e),e})}function Ln(t){return t[vC]||null}function hm(t){return t[yC]||null}function pm(t){return t[_C]||null}function gm(t){let e=Ln(t)||hm(t)||pm(t);return e!==null?e.standalone:!1}function mm(t,e){let n=t[IC]||null;if(!n&&e===!0)throw new Error(`Type ${Oe(t)} does not have '\u0275mod' property.`);return n}function vm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Mi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wg(t.inputs,e),outputs:wg(t.outputs),debugInfo:null}}function ym(t){t.features?.forEach(e=>e(t))}function Eg(t,e){if(!t)return null;let n=e?pm:zC;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(GC)}function qC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function dn(t){return{\u0275providers:t}}function YC(...t){return{\u0275providers:_m(!0,t),\u0275fromNgModule:!0}}function _m(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return xu(e,s=>{let a=s;Hl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Im(i,o),n}function Im(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ku(i,o=>{e(o,r)})}}function Hl(t,e,n,r){if(t=We(t),!t)return!1;let i=null,o=gg(t),s=!o&&Ln(t);if(!o&&!s){let c=t.ngModule;if(o=gg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Hl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{xu(o.imports,u=>{Hl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Im(l,e)}if(!a){let l=xr(i)||(()=>new i);e({provide:i,useFactory:l,deps:It},i),e({provide:um,useValue:i,multi:!0},i),e({provide:Or,useValue:()=>k(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;ku(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ku(t,e){for(let n of t)rm(n)&&(n=n.\u0275providers),Array.isArray(n)?ku(n,e):e(n)}var KC=J({provide:String,useValue:J});function wm(t){return t!==null&&typeof t=="object"&&KC in t}function ZC(t){return!!(t&&t.useExisting)}function QC(t){return!!(t&&t.useFactory)}function Wl(t){return typeof t=="function"}var la=new S(""),xs={},JC={},Ml;function Lu(){return Ml===void 0&&(Ml=new Vs),Ml}var Ge=class{},Ri=class extends Ge{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gl(e,s=>this.processProvider(s)),this.records.set(lm,Tr(void 0,this)),i.has("environment")&&this.records.set(Ge,Tr(void 0,this));let o=this.records.get(la);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(um,It,x.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=U(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),U(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=on(this),r=He(void 0),i;try{return e()}finally{on(n),He(r)}}get(e,n=Ni,r=x.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(vg))return e[vg](this);r=aa(r);let i,o=on(this),s=He(void 0);try{if(!(r&x.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=iD(e)&&sa(e);l&&this.injectableDefInScope(l)?c=Tr(zl(e),xs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&x.Self?Lu():this.parent;return n=r&x.Optional&&n===Ni?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[js]=a[js]||[]).unshift(Oe(e)),o)throw a;return MC(a,e,"R3InjectorError",this.source)}else throw a}finally{He(s),on(o)}}resolveInjectorInitializers(){let e=U(null),n=on(this),r=He(void 0),i;try{let o=this.get(Or,It,x.Self);for(let s of o)s()}finally{on(n),He(r),U(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Oe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(e){e=We(e);let n=Wl(e)?e:We(e&&e.provide),r=eD(e);if(!Wl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Tr(void 0,xs,!0),i.factory=()=>$l(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=U(null);try{return n.value===xs&&(n.value=JC,n.value=n.factory()),typeof n.value=="object"&&n.value&&rD(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{U(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=We(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zl(t){let e=sa(t),n=e!==null?e.factory:xr(t);if(n!==null)return n;if(t instanceof S)throw new E(204,!1);if(t instanceof Function)return XC(t);throw new E(204,!1)}function XC(t){if(t.length>0)throw new E(204,!1);let n=gC(t);return n!==null?()=>n.factory(t):()=>new t}function eD(t){if(wm(t))return Tr(void 0,t.useValue);{let e=tD(t);return Tr(e,xs)}}function tD(t,e,n){let r;if(Wl(t)){let i=We(t);return xr(i)||zl(i)}else if(wm(t))r=()=>We(t.useValue);else if(QC(t))r=()=>t.useFactory(...$l(t.deps||[]));else if(ZC(t))r=()=>k(We(t.useExisting));else{let i=We(t&&(t.useClass||t.provide));if(nD(t))r=()=>new i(...$l(t.deps));else return xr(i)||zl(i)}return r}function Tr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function nD(t){return!!t.deps}function rD(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function iD(t){return typeof t=="function"||typeof t=="object"&&t instanceof S}function Gl(t,e){for(let n of t)Array.isArray(n)?Gl(n,e):n&&rm(n)?Gl(n.\u0275providers,e):e(n)}function $t(t,e){t instanceof Ri&&t.assertNotDestroyed();let n,r=on(t),i=He(void 0);try{return e()}finally{on(r),He(i)}}function oD(){return im()!==void 0||TC()!=null}function sD(t){return typeof t=="function"}var Bt=0,O=1,b=2,Ae=3,it=4,lt=5,xi=6,$s=7,Ce=8,Pr=9,Dt=10,Ne=11,Oi=12,Cg=13,Hr=14,ot=15,kr=16,Ar=17,Lr=18,ua=19,Em=20,sn=21,Rl=22,ze=23,st=25,Cm=1;var Fn=7,Bs=8,Hs=9,Te=10,Ws=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ws||{});function an(t){return Array.isArray(t)&&typeof t[Cm]=="object"}function Ht(t){return Array.isArray(t)&&t[Cm]===!0}function Dm(t){return(t.flags&4)!==0}function da(t){return t.componentOffset>-1}function Fu(t){return(t.flags&1)===1}function Bi(t){return!!t.template}function ql(t){return(t[b]&512)!==0}var Yl=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function bm(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function fa(){return Sm}function Sm(t){return t.type.prototype.ngOnChanges&&(t.setInput=cD),aD}fa.ngInherit=!0;function aD(){let t=Am(this),e=t?.current;if(e){let n=t.previous;if(n===Mi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function cD(t,e,n,r,i){let o=this.declaredInputs[r],s=Am(t)||lD(t,{previous:Mi,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Yl(l&&l.currentValue,n,c===Mi),bm(t,e,i,n)}var Tm="__ngSimpleChanges__";function Am(t){return t[Tm]||null}function lD(t,e){return t[Tm]=e}var Dg=null;var wt=function(t,e,n){Dg?.(t,e,n)},uD="svg",dD="math";function bt(t){for(;Array.isArray(t);)t=t[Bt];return t}function fD(t,e){return bt(e[t])}function ut(t,e){return bt(e[t.index])}function ju(t,e){return t.data[e]}function fn(t,e){let n=e[t];return an(n)?n:n[Bt]}function Uu(t){return(t[b]&128)===128}function hD(t){return Ht(t[Ae])}function Fr(t,e){return e==null?null:t[e]}function Nm(t){t[Ar]=0}function Mm(t){t[b]&1024||(t[b]|=1024,Uu(t)&&pa(t))}function pD(t,e){for(;t>0;)e=e[Hr],t--;return e}function ha(t){return!!(t[b]&9216||t[ze]?.dirty)}function Kl(t){t[Dt].changeDetectionScheduler?.notify(8),t[b]&64&&(t[b]|=1024),ha(t)&&pa(t)}function pa(t){t[Dt].changeDetectionScheduler?.notify(0);let e=jn(t);for(;e!==null&&!(e[b]&8192||(e[b]|=8192,!Uu(e)));)e=jn(e)}function Rm(t,e){if((t[b]&256)===256)throw new E(911,!1);t[sn]===null&&(t[sn]=[]),t[sn].push(e)}function gD(t,e){if(t[sn]===null)return;let n=t[sn].indexOf(e);n!==-1&&t[sn].splice(n,1)}function jn(t){let e=t[Ae];return Ht(e)?e[Ae]:e}var $={lFrame:Vm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xm=!1;function mD(){return $.lFrame.elementDepthCount}function vD(){$.lFrame.elementDepthCount++}function yD(){$.lFrame.elementDepthCount--}function Om(){return $.bindingsEnabled}function _D(){return $.skipHydrationRootTNode!==null}function ID(t){return $.skipHydrationRootTNode===t}function wD(){$.skipHydrationRootTNode=null}function re(){return $.lFrame.lView}function hn(){return $.lFrame.tView}function ga(t){return $.lFrame.contextLView=t,t[Ce]}function ma(t){return $.lFrame.contextLView=null,t}function qe(){let t=Pm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Pm(){return $.lFrame.currentTNode}function ED(){let t=$.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Hi(t,e){let n=$.lFrame;n.currentTNode=t,n.isParent=e}function km(){return $.lFrame.isParent}function CD(){$.lFrame.isParent=!1}function Lm(){return xm}function bg(t){xm=t}function DD(){let t=$.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bD(t){return $.lFrame.bindingIndex=t}function va(){return $.lFrame.bindingIndex++}function SD(){return $.lFrame.inI18n}function TD(t,e){let n=$.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zl(e)}function AD(){return $.lFrame.currentDirectiveIndex}function Zl(t){$.lFrame.currentDirectiveIndex=t}function Fm(t){$.lFrame.currentQueryIndex=t}function ND(t){let e=t[O];return e.type===2?e.declTNode:e.type===1?t[lt]:null}function jm(t,e,n){if(n&x.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&x.Host);)if(i=ND(o),i===null||(o=o[Hr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=$.lFrame=Um();return r.currentTNode=e,r.lView=t,!0}function Vu(t){let e=Um(),n=t[O];$.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Um(){let t=$.lFrame,e=t===null?null:t.child;return e===null?Vm(t):e}function Vm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function $m(){let t=$.lFrame;return $.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Bm=$m;function $u(){let t=$m();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function MD(t){return($.lFrame.contextLView=pD(t,$.lFrame.contextLView))[Ce]}function ya(){return $.lFrame.selectedIndex}function Un(t){$.lFrame.selectedIndex=t}function RD(){let t=$.lFrame;return ju(t.tView,t.selectedIndex)}function xD(){return $.lFrame.currentNamespace}var Hm=!0;function Bu(){return Hm}function Hu(t){Hm=t}function OD(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Sm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Wu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Os(t,e,n){Wm(t,e,3,n)}function Ps(t,e,n,r){(t[b]&3)===n&&Wm(t,e,n,r)}function xl(t,e){let n=t[b];(n&3)===e&&(n&=16383,n+=1,t[b]=n)}function Wm(t,e,n,r){let i=r!==void 0?t[Ar]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ar]+=65536),(a<o||o==-1)&&(PD(t,n,e,c),t[Ar]=(t[Ar]&4294901760)+c+2),c++}function Sg(t,e){wt(4,t,e);let n=U(null);try{e.call(t)}finally{U(n),wt(5,t,e)}}function PD(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[b]>>14<t[Ar]>>16&&(t[b]&3)===e&&(t[b]+=16384,Sg(a,o)):Sg(a,o)}var Rr=-1,Pi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function kD(t){return t instanceof Pi}function LD(t){return(t.flags&8)!==0}function FD(t){return(t.flags&16)!==0}var Ol={},Ql=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=aa(r);let i=this.injector.get(e,Ol,r);return i!==Ol||n===Ol?i:this.parentInjector.get(e,n,r)}};function zm(t){return t!==Rr}function zs(t){return t&32767}function jD(t){return t>>16}function Gs(t,e){let n=jD(t),r=e;for(;n>0;)r=r[Hr],n--;return r}var Jl=!0;function Tg(t){let e=Jl;return Jl=t,e}var UD=256,Gm=UD-1,qm=5,VD=0,Et={};function $D(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ai)&&(r=n[Ai]),r==null&&(r=n[Ai]=VD++);let i=r&Gm,o=1<<i;e.data[t+(i>>qm)]|=o}function Ym(t,e){let n=Km(t,e);if(n!==-1)return n;let r=e[O];r.firstCreatePass&&(t.injectorIndex=e.length,Pl(r.data,t),Pl(e,null),Pl(r.blueprint,null));let i=zu(t,e),o=t.injectorIndex;if(zm(i)){let s=zs(i),a=Gs(i,e),c=a[O].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Pl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Km(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=ev(i),r===null)return Rr;if(n++,i=i[Hr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Rr}function BD(t,e,n){$D(t,e,n)}function Zm(t,e,n){if(n&x.Optional||t!==void 0)return t;Ru(e,"NodeInjector")}function Qm(t,e,n,r){if(n&x.Optional&&r===void 0&&(r=null),!(n&(x.Self|x.Host))){let i=t[Pr],o=He(void 0);try{return i?i.get(e,r,n&x.Optional):om(e,r,n&x.Optional)}finally{He(o)}}return Zm(r,e,n)}function Jm(t,e,n,r=x.Default,i){if(t!==null){if(e[b]&2048&&!(r&x.Self)){let s=qD(t,e,n,r,Et);if(s!==Et)return s}let o=Xm(t,e,n,r,Et);if(o!==Et)return o}return Qm(e,n,r,i)}function Xm(t,e,n,r,i){let o=zD(n);if(typeof o=="function"){if(!jm(e,t,r))return r&x.Host?Zm(i,n,r):Qm(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&x.Optional))Ru(n);else return s}finally{Bm()}}else if(typeof o=="number"){let s=null,a=Km(t,e),c=Rr,l=r&x.Host?e[ot][lt]:null;for((a===-1||r&x.SkipSelf)&&(c=a===-1?zu(t,e):e[a+8],c===Rr||!Ng(r,!1)?a=-1:(s=e[O],a=zs(c),e=Gs(c,e)));a!==-1;){let u=e[O];if(Ag(o,a,u.data)){let d=HD(a,e,n,s,r,l);if(d!==Et)return d}c=e[a+8],c!==Rr&&Ng(r,e[O].data[a+8]===l)&&Ag(o,a,e)?(s=u,a=zs(c),e=Gs(c,e)):a=-1}}return i}function HD(t,e,n,r,i,o){let s=e[O],a=s.data[t+8],c=r==null?da(a)&&Jl:r!=s&&(a.type&3)!==0,l=i&x.Host&&o===a,u=WD(a,s,n,c,l);return u!==null?ki(e,s,u,a):Et}function WD(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&Bi(h)&&h.type===n)return c}return null}function ki(t,e,n,r){let i=t[n],o=e.data;if(kD(i)){let s=i;s.resolving&&EC(wC(o[n]));let a=Tg(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?He(s.injectImpl):null,u=jm(t,r,x.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&OD(n,o[n],e)}finally{l!==null&&He(l),Tg(a),s.resolving=!1,Bm()}}return i}function zD(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ai)?t[Ai]:void 0;return typeof e=="number"?e>=0?e&Gm:GD:e}function Ag(t,e,n){let r=1<<t;return!!(n[e+(t>>qm)]&r)}function Ng(t,e){return!(t&x.Self)&&!(t&x.Host&&e)}var kn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Jm(this._tNode,this._lView,e,aa(r),n)}};function GD(){return new kn(qe(),re())}function Gu(t){return $i(()=>{let e=t.prototype.constructor,n=e[Fs]||Xl(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Fs]||Xl(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Xl(t){return Xg(t)?()=>{let e=Xl(We(t));return e&&e()}:xr(t)}function qD(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[b]&2048&&!(s[b]&512);){let a=Xm(o,s,n,r|x.Self,Et);if(a!==Et)return a;let c=o.parent;if(!c){let l=s[Em];if(l){let u=l.get(n,Et,r);if(u!==Et)return u}c=ev(s),s=s[Hr]}o=c}return i}function ev(t){let e=t[O],n=e.type;return n===2?e.declTNode:n===1?t[lt]:null}function Mg(t,e=null,n=null,r){let i=tv(t,e,n,r);return i.resolveInjectorInitializers(),i}function tv(t,e=null,n=null,r,i=new Set){let o=[n||It,YC(t)];return r=r||(typeof t=="object"?void 0:Oe(t)),new Ri(o,e||Lu(),r||null,i)}var at=class t{static{this.THROW_IF_NOT_FOUND=Ni}static{this.NULL=new Vs}static create(e,n){if(Array.isArray(e))return Mg({name:""},n,e,"");{let r=e.name??"";return Mg({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=C({token:t,providedIn:"any",factory:()=>k(lm)})}static{this.__NG_ELEMENT_ID__=-1}};var YD=new S("");YD.__NG_ELEMENT_ID__=t=>{let e=qe();if(e===null)throw new E(204,!1);if(e.type&2)return e.value;if(t&x.Optional)return null;throw new E(204,!1)};var KD="ngOriginalError";function kl(t){return t[KD]}var nv=!0,rv=(()=>{class t{static{this.__NG_ELEMENT_ID__=ZD}static{this.__NG_ENV_ID__=n=>n}}return t})(),eu=class extends rv{constructor(e){super(),this._lView=e}onDestroy(e){return Rm(this._lView,e),()=>gD(this._lView,e)}};function ZD(){return new eu(re())}var Wr=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ie(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}}return t})();var tu=class extends Se{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,oD()&&(this.destroyRef=y(rv,{optional:!0})??void 0,this.pendingTasks=y(Wr,{optional:!0})??void 0)}emit(e){let n=U(null);try{super.next(e)}finally{U(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof se&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},me=tu;function qs(...t){}function iv(t){let e,n;function r(){t=qs;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Rg(t){return queueMicrotask(()=>t()),()=>{t=qs}}var qu="isAngularZone",Ys=qu+"_ID",QD=0,te=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new me(!1),this.onMicrotaskEmpty=new me(!1),this.onStable=new me(!1),this.onError=new me(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=nv}=e;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,eb(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qu)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JD,qs,qs);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},JD={};function Yu(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function XD(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){iv(()=>{t.callbackScheduled=!1,nu(t),t.isCheckStableRunning=!0,Yu(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),nu(t)}function eb(t){let e=()=>{XD(t)},n=QD++;t._inner=t._inner.fork({name:"angular",properties:{[qu]:!0,[Ys]:n,[Ys+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(tb(c))return r.invokeTask(o,s,a,c);try{return xg(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Og(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return xg(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!nb(c)&&e(),Og(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,nu(t),Yu(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function nu(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function xg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Og(t){t._nesting--,Yu(t)}var ru=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new me,this.onMicrotaskEmpty=new me,this.onStable=new me,this.onError=new me}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function tb(t){return ov(t,"__ignore_ng_zone__")}function nb(t){return ov(t,"__scheduler_tick__")}function ov(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Vt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&kl(e);for(;n&&kl(n);)n=kl(n);return n||null}},rb=new S("",{providedIn:"root",factory:()=>{let t=y(te),e=y(Vt);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function ib(){return _a(qe(),re())}function _a(t,e){return new Wi(ut(t,e))}var Wi=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=ib}}return t})();function sv(t){return(t.flags&128)===128}var av=new Map,ob=0;function sb(){return ob++}function ab(t){av.set(t[ua],t)}function iu(t){av.delete(t[ua])}var Pg="__ngContext__";function Vn(t,e){an(e)?(t[Pg]=e[ua],ab(e)):t[Pg]=e}function cv(t){return uv(t[Oi])}function lv(t){return uv(t[it])}function uv(t){for(;t!==null&&!Ht(t);)t=t[it];return t}var ou;function dv(t){ou=t}function cb(){if(ou!==void 0)return ou;if(typeof document<"u")return document;throw new E(210,!1)}var Ku=new S("",{providedIn:"root",factory:()=>lb}),lb="ng",Zu=new S(""),pn=new S("",{providedIn:"platform",factory:()=>"unknown"});var Qu=new S("",{providedIn:"root",factory:()=>cb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ub="h",db="b";var fb=()=>null;function Ju(t,e,n=!1){return fb(t,e,n)}var fv=!1,hb=new S("",{providedIn:"root",factory:()=>fv});var Ks=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zg})`}};function Xu(t){return t instanceof Ks?t.changingThisBreaksApplicationSecurity:t}function hv(t,e){let n=pb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Zg})`)}return n===e}function pb(t){return t instanceof Ks&&t.getTypeName()||null}var gb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pv(t){return t=String(t),t.match(gb)?t:"unsafe:"+t}var ed=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ed||{});function Ia(t){let e=mb();return e?e.sanitize(ed.URL,t)||"":hv(t,"URL")?Xu(t):pv(Mu(t))}function mb(){let t=re();return t&&t[Dt].sanitizer}function gv(t){return t instanceof Function?t():t}var Bn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Bn||{}),vb;function td(t,e){return vb(t,e)}function Nr(t,e,n,r,i){if(r!=null){let o,s=!1;Ht(r)?o=r:an(r)&&(s=!0,r=r[Bt]);let a=bt(r);t===0&&n!==null?i==null?_v(e,n,a):Zs(e,n,a,i||null,!0):t===1&&n!==null?Zs(e,n,a,i||null,!0):t===2?xb(e,a,s):t===3&&e.destroyNode(a),o!=null&&Pb(e,t,o,n,i)}}function yb(t,e){return t.createText(e)}function _b(t,e,n){t.setValue(e,n)}function mv(t,e,n){return t.createElement(e,n)}function Ib(t,e){vv(t,e),e[Bt]=null,e[lt]=null}function wb(t,e,n,r,i,o){r[Bt]=i,r[lt]=e,Ea(t,r,n,1,i,o)}function vv(t,e){e[Dt].changeDetectionScheduler?.notify(9),Ea(t,e,e[Ne],2,null,null)}function Eb(t){let e=t[Oi];if(!e)return Ll(t[O],t);for(;e;){let n=null;if(an(e))n=e[Oi];else{let r=e[Te];r&&(n=r)}if(!n){for(;e&&!e[it]&&e!==t;)an(e)&&Ll(e[O],e),e=e[Ae];e===null&&(e=t),an(e)&&Ll(e[O],e),n=e&&e[it]}e=n}}function Cb(t,e,n,r){let i=Te+r,o=n.length;r>0&&(n[i-1][it]=e),r<o-Te?(e[it]=n[i],cm(n,Te+r,e)):(n.push(e),e[it]=null),e[Ae]=n;let s=e[kr];s!==null&&n!==s&&yv(s,e);let a=e[Lr];a!==null&&a.insertView(t),Kl(e),e[b]|=128}function yv(t,e){let n=t[Hs],r=e[Ae];if(an(r))t[b]|=Ws.HasTransplantedViews;else{let i=r[Ae][ot];e[ot]!==i&&(t[b]|=Ws.HasTransplantedViews)}n===null?t[Hs]=[e]:n.push(e)}function nd(t,e){let n=t[Hs],r=n.indexOf(e);n.splice(r,1)}function Li(t,e){if(t.length<=Te)return;let n=Te+e,r=t[n];if(r){let i=r[kr];i!==null&&i!==t&&nd(i,r),e>0&&(t[n-1][it]=r[it]);let o=Us(t,Te+e);Ib(r[O],r);let s=o[Lr];s!==null&&s.detachView(o[O]),r[Ae]=null,r[it]=null,r[b]&=-129}return r}function wa(t,e){if(!(e[b]&256)){let n=e[Ne];n.destroyNode&&Ea(t,e,n,3,null,null),Eb(e)}}function Ll(t,e){if(e[b]&256)return;let n=U(null);try{e[b]&=-129,e[b]|=256,e[ze]&&sl(e[ze]),bb(t,e),Db(t,e),e[O].type===1&&e[Ne].destroy();let r=e[kr];if(r!==null&&Ht(e[Ae])){r!==e[Ae]&&nd(r,e);let i=e[Lr];i!==null&&i.detachView(t)}iu(e)}finally{U(n)}}function Db(t,e){let n=t.cleanup,r=e[$s];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[$s]=null);let i=e[sn];if(i!==null){e[sn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function bb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Pi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];wt(4,a,c);try{c.call(a)}finally{wt(5,a,c)}}else{wt(4,i,o);try{o.call(i)}finally{wt(5,i,o)}}}}}function Sb(t,e,n){return Tb(t,e.parent,n)}function Tb(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Bt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Ct.None||o===Ct.Emulated)return null}return ut(r,n)}}function Zs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function _v(t,e,n){t.appendChild(e,n)}function kg(t,e,n,r,i){r!==null?Zs(t,e,n,r,i):_v(t,e,n)}function Iv(t,e){return t.parentNode(e)}function Ab(t,e){return t.nextSibling(e)}function Nb(t,e,n){return Rb(t,e,n)}function Mb(t,e,n){return t.type&40?ut(t,n):null}var Rb=Mb,Lg;function rd(t,e,n,r){let i=Sb(t,r,e),o=e[Ne],s=r.parent||e[lt],a=Nb(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)kg(o,i,n[c],a,!1);else kg(o,i,n,a,!1);Lg!==void 0&&Lg(o,r,e,n,i)}function Si(t,e){if(e!==null){let n=e.type;if(n&3)return ut(e,t);if(n&4)return su(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Si(t,r);{let i=t[e.index];return Ht(i)?su(-1,i):bt(i)}}else{if(n&128)return Si(t,e.next);if(n&32)return td(e,t)()||bt(t[e.index]);{let r=wv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=jn(t[ot]);return Si(i,r)}else return Si(t,e.next)}}}return null}function wv(t,e){if(e!==null){let r=t[ot][lt],i=e.projection;return r.projection[i]}return null}function su(t,e){let n=Te+t+1;if(n<e.length){let r=e[n],i=r[O].firstChild;if(i!==null)return Si(r,i)}return e[Fn]}function xb(t,e,n){t.removeChild(null,e,n)}function id(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Vn(bt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)id(t,e,n.child,r,i,o,!1),Nr(e,t,i,a,o);else if(c&32){let l=td(n,r),u;for(;u=l();)Nr(e,t,i,u,o);Nr(e,t,i,a,o)}else c&16?Ob(t,e,r,n,i,o):Nr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ea(t,e,n,r,i,o){id(n,r,t.firstChild,e,i,o,!1)}function Ob(t,e,n,r,i,o){let s=n[ot],c=s[lt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Nr(e,t,i,u,o)}else{let l=c,u=s[Ae];sv(r)&&(l.flags|=128),id(t,e,l,u,i,o,!0)}}function Pb(t,e,n,r,i){let o=n[Fn],s=bt(n);o!==s&&Nr(e,t,r,o,i);for(let a=Te;a<n.length;a++){let c=n[a];Ea(c[O],c,t,e,r,o)}}function kb(t,e,n){t.setAttribute(e,"style",n)}function Ev(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Cv(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Bl(t,e,r),i!==null&&Ev(t,e,i),o!==null&&kb(t,e,o)}var zr={};function ae(t=1){Dv(hn(),re(),ya()+t,!1)}function Dv(t,e,n,r){if(!r)if((e[b]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Os(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ps(e,o,0,n)}Un(n)}function Ve(t,e=x.Default){let n=re();if(n===null)return k(t,e);let r=qe();return Jm(r,n,We(t),e)}function bv(t,e,n,r,i,o){let s=U(null);try{let a=null;i&cn.SignalBased&&(a=e[r][kp]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&cn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):bm(e,a,r,o)}finally{U(s)}}function Lb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Un(~i);else{let o=i,s=n[++r],a=n[++r];TD(s,o);let c=e[o];a(2,c)}}}finally{Un(-1)}}function Ca(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Bt]=i,d[b]=r|4|128|8|64,(l!==null||t&&t[b]&2048)&&(d[b]|=2048),Nm(d),d[Ae]=d[Hr]=t,d[Ce]=n,d[Dt]=s||t&&t[Dt],d[Ne]=a||t&&t[Ne],d[Pr]=c||t&&t[Pr]||null,d[lt]=o,d[ua]=sb(),d[xi]=u,d[Em]=l,d[ot]=e.type==2?t[ot]:d,d}function Da(t,e,n,r,i){let o=t.data[e];if(o===null)o=Fb(t,e,n,r,i),SD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=ED();o.injectorIndex=s===null?-1:s.injectorIndex}return Hi(o,!0),o}function Fb(t,e,n,r,i){let o=Pm(),s=km(),a=s?o:o&&o.parent,c=t.data[e]=Bb(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Sv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Tv(t,e,n,r,i){let o=ya(),s=r&2;try{Un(-1),s&&e.length>st&&Dv(t,e,st,!1),wt(s?2:0,i),n(r,i)}finally{Un(o),wt(s?3:1,i)}}function Av(t,e,n){if(Dm(e)){let r=U(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{U(r)}}}function Nv(t,e,n){Om()&&(Kb(t,e,n,ut(n,e)),(n.flags&64)===64&&Pv(t,e,n))}function Mv(t,e,n=ut){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Rv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=od(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function od(t,e,n,r,i,o,s,a,c,l,u){let d=st+r,f=d+i,h=jb(d,f),p=typeof l=="function"?l():l;return h[O]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function jb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:zr);return n}function Ub(t,e,n,r){let o=r.get(hb,fv)||n===Ct.ShadowDom,s=t.selectRootElement(e,o);return Vb(s),s}function Vb(t){$b(t)}var $b=()=>null;function Bb(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return _D()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Fg(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=cn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?jg(r,n,l,a,c):jg(r,n,l,a)}return r}function jg(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function Hb(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=Fg(0,d.inputs,u,c,h),l=Fg(1,d.outputs,u,l,p);let m=c!==null&&s!==null&&!Pu(e)?iS(c,u,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function Wb(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function zb(t,e,n,r,i,o,s,a){let c=ut(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(sd(t,n,u,r,i),da(e)&&Gb(n,e.index)):e.type&3?(r=Wb(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Gb(t,e){let n=fn(e,t);n[b]&16||(n[b]|=64)}function xv(t,e,n,r){if(Om()){let i=r===null?null:{"":-1},o=Qb(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Ov(t,e,n,s,i,a),i&&Jb(n,r,i)}n.mergedAttrs=Ou(n.mergedAttrs,n.attrs)}function Ov(t,e,n,r,i,o){for(let l=0;l<r.length;l++)BD(Ym(n,e),t,r[l].type);eS(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Sv(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Ou(n.mergedAttrs,u.hostAttrs),tS(t,n,e,c,u),Xb(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}Hb(t,n,o)}function qb(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Yb(s)!=a&&s.push(a),s.push(n,r,o)}}function Yb(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Kb(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;da(n)&&nS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ym(n,e),Vn(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=ki(e,t,a,n);if(Vn(l,e),s!==null&&rS(e,a-i,l,c,n,s),Bi(c)){let u=fn(n.index,e);u[Ce]=ki(e,t,a,n)}}}function Pv(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=AD();try{Un(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Zl(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Zb(c,l)}}finally{Un(-1),Zl(s)}}function Zb(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Qb(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(UC(e,s.selectors,!1))if(r||(r=[]),Bi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;au(t,e,c)}else r.unshift(s),au(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function au(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Jb(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new E(-301,!1);r.push(e[i],o)}}}function Xb(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bi(e)&&(n[""]=t)}}function eS(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function tS(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=xr(i.type,!0)),s=new Pi(o,Bi(i),Ve);t.blueprint[r]=s,n[r]=s,qb(t,e,r,Sv(t,n,i.hostVars,zr),i)}function nS(t,e,n){let r=ut(e,t),i=Rv(n),o=t[Dt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ba(t,Ca(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function rS(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];bv(r,n,c,l,u,d)}}function iS(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function kv(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Lv(t,e){let n=t.contentQueries;if(n!==null){let r=U(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Fm(o),a.contentQueries(2,e[s],s)}}}finally{U(r)}}}function ba(t,e){return t[Oi]?t[Cg][it]=e:t[Oi]=e,t[Cg]=e,e}function cu(t,e,n){Fm(0);let r=U(null);try{e(t,n)}finally{U(r)}}function oS(t){return t[$s]??=[]}function sS(t){return t.cleanup??=[]}function Fv(t,e){let n=t[Pr],r=n?n.get(Vt,null):null;r&&r.handleError(e)}function sd(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];bv(u,l,r,a,c,i)}}function aS(t,e,n){let r=fD(e,t);_b(t[Ne],r,n)}function cS(t,e){let n=fn(e,t),r=n[O];lS(r,n);let i=n[Bt];i!==null&&n[xi]===null&&(n[xi]=Ju(i,n[Pr])),ad(r,n,n[Ce])}function lS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ad(t,e,n){Vu(e);try{let r=t.viewQuery;r!==null&&cu(1,r,n);let i=t.template;i!==null&&Tv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Lr]?.finishViewCreation(t),t.staticContentQueries&&Lv(t,e),t.staticViewQueries&&cu(2,t.viewQuery,n);let o=t.components;o!==null&&uS(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[b]&=-5,$u()}}function uS(t,e){for(let n=0;n<e.length;n++)cS(t,e[n])}function Sa(t,e,n,r){let i=U(null);try{let o=e.tView,a=t[b]&4096?4096:16,c=Ca(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[kr]=l;let u=t[Lr];return u!==null&&(c[Lr]=u.createEmbeddedView(o)),ad(o,c,n),c}finally{U(i)}}function jv(t,e){let n=Te+e;if(n<t.length)return t[n]}function Fi(t,e){return!e||e.firstChild===null||sv(t)}function Ta(t,e,n,r=!0){let i=e[O];if(Cb(i,e,t,n),r){let s=su(n,t),a=e[Ne],c=Iv(a,t[Fn]);c!==null&&wb(i,t[lt],a,e,c,s)}let o=e[xi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Uv(t,e){let n=Li(t,e);return n!==void 0&&wa(n[O],n),n}function Qs(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(bt(o)),Ht(o)&&dS(o,r);let s=n.type;if(s&8)Qs(t,e,n.child,r);else if(s&32){let a=td(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=wv(e,n);if(Array.isArray(a))r.push(...a);else{let c=jn(e[ot]);Qs(c[O],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function dS(t,e){for(let n=Te;n<t.length;n++){let r=t[n],i=r[O].firstChild;i!==null&&Qs(r[O],r,i,e)}t[Fn]!==t[Bt]&&e.push(t[Fn])}var Vv=[];function fS(t){return t[ze]??hS(t)}function hS(t){let e=Vv.pop()??Object.create(gS);return e.lView=t,e}function pS(t){t.lView[ze]!==t&&(t.lView=null,Vv.push(t))}var gS=oe(I({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{pa(t.lView)},consumerOnSignalRead(){this.lView[ze]=this}});function mS(t){let e=t[ze]??Object.create(vS);return e.lView=t,e}var vS=oe(I({},rl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=jn(t.lView);for(;e&&!$v(e[O]);)e=jn(e);e&&Mm(e)},consumerOnSignalRead(){this.lView[ze]=this}});function $v(t){return t.type!==2}var yS=100;function Bv(t,e=!0,n=0){let r=t[Dt],i=r.rendererFactory,o=!1;o||i.begin?.();try{_S(t,n)}catch(s){throw e&&Fv(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function _S(t,e){let n=Lm();try{bg(!0),lu(t,e);let r=0;for(;ha(t);){if(r===yS)throw new E(103,!1);r++,lu(t,1)}}finally{bg(n)}}function IS(t,e,n,r){let i=e[b];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Dt].inlineEffectRunner?.flush(),Vu(e);let a=!0,c=null,l=null;o||($v(t)?(l=fS(e),c=il(l)):Lp()===null?(a=!1,l=mS(e),c=il(l)):e[ze]&&(sl(e[ze]),e[ze]=null));try{Nm(e),bD(t.bindingStartIndex),n!==null&&Tv(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Os(e,h,null)}else{let h=t.preOrderHooks;h!==null&&Ps(e,h,0,null),xl(e,0)}if(s||wS(e),Hv(e,0),t.contentQueries!==null&&Lv(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&Os(e,h)}else{let h=t.contentHooks;h!==null&&Ps(e,h,1),xl(e,1)}Lb(t,e);let d=t.components;d!==null&&zv(e,d,0);let f=t.viewQuery;if(f!==null&&cu(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&Os(e,h)}else{let h=t.viewHooks;h!==null&&Ps(e,h,2),xl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Rl]){for(let h of e[Rl])h();e[Rl]=null}o||(e[b]&=-73)}catch(u){throw o||pa(e),u}finally{l!==null&&(Fp(l,c),a&&pS(l)),$u()}}function Hv(t,e){for(let n=cv(t);n!==null;n=lv(n))for(let r=Te;r<n.length;r++){let i=n[r];Wv(i,e)}}function wS(t){for(let e=cv(t);e!==null;e=lv(e)){if(!(e[b]&Ws.HasTransplantedViews))continue;let n=e[Hs];for(let r=0;r<n.length;r++){let i=n[r];Mm(i)}}}function ES(t,e,n){let r=fn(e,t);Wv(r,n)}function Wv(t,e){Uu(t)&&lu(t,e)}function lu(t,e){let r=t[O],i=t[b],o=t[ze],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ol(o)),s||=!1,o&&(o.dirty=!1),t[b]&=-9217,s)IS(r,t,r.template,t[Ce]);else if(i&8192){Hv(t,1);let a=r.components;a!==null&&zv(t,a,1)}}function zv(t,e,n){for(let r=0;r<e.length;r++)ES(t,e[r],n)}function cd(t,e){let n=Lm()?64:1088;for(t[Dt].changeDetectionScheduler?.notify(e);t;){t[b]|=n;let r=jn(t);if(ql(t)&&!r)return t;t=r}return null}var $n=class{get rootNodes(){let e=this._lView,n=e[O];return Qs(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ce]}set context(e){this._lView[Ce]=e}get destroyed(){return(this._lView[b]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ae];if(Ht(e)){let n=e[Bs],r=n?n.indexOf(this):-1;r>-1&&(Li(e,r),Us(n,r))}this._attachedToViewContainer=!1}wa(this._lView[O],this._lView)}onDestroy(e){Rm(this._lView,e)}markForCheck(){cd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[b]&=-129}reattach(){Kl(this._lView),this._lView[b]|=128}detectChanges(){this._lView[b]|=1024,Bv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ql(this._lView),n=this._lView[kr];n!==null&&!e&&nd(n,this._lView),vv(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e;let n=ql(this._lView),r=this._lView[kr];r!==null&&!n&&yv(r,this._lView),Kl(this._lView)}},Aa=(()=>{class t{static{this.__NG_ELEMENT_ID__=bS}}return t})(),CS=Aa,DS=class extends CS{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Sa(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new $n(i)}};function bS(){return SS(qe(),re())}function SS(t,e){return t.type&4?new DS(e,t,_a(t,e)):null}var hV=new RegExp(`^(\\d+)*(${db}|${ub})*(.*)`);var TS=()=>null;function ji(t,e){return TS(t,e)}var jr=class{},Na=new S("",{providedIn:"root",factory:()=>!1});var Gv=new S(""),qv=new S(""),uu=class{},Js=class{};function AS(t){let e=Error(`No component factory found for ${Oe(t)}.`);return e[NS]=t,e}var NS="ngComponent";var du=class{resolveComponentFactory(e){throw AS(e)}},Ur=class{static{this.NULL=new du}},Vr=class{},Ma=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>MS()}}return t})();function MS(){let t=re(),e=qe(),n=fn(e.index,t);return(an(n)?n:t)[Ne]}var RS=(()=>{class t{static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>null})}}return t})();function fu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=hg(i,a);else if(o==2){let c=a,l=e[++s];r=hg(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Xs=class extends Ur{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ln(e);return new Ui(n,this.ngModule)}};function Ug(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:cn.None;e?n.push({propName:s,templateName:r,isSignal:(a&cn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function xS(t){let e=t.toLowerCase();return e==="svg"?uD:e==="math"?dD:null}var Ui=class extends Js{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ug(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ug(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=HC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=U(null);try{i=i||this.ngModule;let s=i instanceof Ge?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ql(e,s):e,c=a.get(Vr,null);if(c===null)throw new E(407,!1);let l=a.get(RS,null),u=a.get(jr,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?Ub(f,r,this.componentDef.encapsulation,a):mv(f,h,xS(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let _=null;p!==null&&(_=Ju(p,a,!0));let D=od(0,null,null,1,0,null,null,null,null,null,null),B=Ca(null,D,null,m,null,null,d,f,a,null,_);Vu(B);let w,T,ie=null;try{let F=this.componentDef,K,pe=null;F.findHostDirectiveDefs?(K=[],pe=new Map,F.findHostDirectiveDefs(F,K,pe),K.push(F)):K=[F];let _e=OS(B,p);ie=PS(_e,p,F,K,B,d,f),T=ju(D,st),p&&FS(f,F,p,r),n!==void 0&&jS(T,this.ngContentSelectors,n),w=LS(ie,F,K,pe,B,[US]),ad(D,B,null)}catch(F){throw ie!==null&&iu(ie),iu(B),F}finally{$u()}return new hu(this.componentType,w,_a(T,B),B,T)}finally{U(o)}}},hu=class extends uu{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new $n(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;sd(o[O],o,i,e,n),this.previousInputValues.set(e,n);let s=fn(this._tNode.index,o);cd(s,1)}}get injector(){return new kn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function OS(t,e){let n=t[O],r=st;return t[r]=e,Da(n,r,2,"#host",null)}function PS(t,e,n,r,i,o,s){let a=i[O];kS(r,t,e,s);let c=null;e!==null&&(c=Ju(e,i[Pr]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ca(i,Rv(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&au(a,t,r.length-1),ba(i,d),i[t.index]=d}function kS(t,e,n,r){for(let i of t)e.mergedAttrs=Ou(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(fu(e,e.mergedAttrs,!0),n!==null&&Cv(r,n,e))}function LS(t,e,n,r,i,o){let s=qe(),a=i[O],c=ut(s,i);Ov(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=ki(i,a,d,s);Vn(f,i)}Pv(a,i,s),c&&Vn(c,i);let l=ki(i,a,s.directiveStart+s.componentOffset,s);if(t[Ce]=i[Ce]=l,o!==null)for(let u of o)u(l,e);return Av(a,s,i),l}function FS(t,e,n,r){if(r)Bl(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=WC(e.selectors[0]);i&&Bl(t,n,i),o&&o.length>0&&Ev(t,n,o.join(" "))}}function jS(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function US(){let t=qe();Wu(re()[O],t)}var Gr=(()=>{class t{static{this.__NG_ELEMENT_ID__=VS}}return t})();function VS(){let t=qe();return BS(t,re())}var $S=Gr,Yv=class extends $S{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return _a(this._hostTNode,this._hostLView)}get injector(){return new kn(this._hostTNode,this._hostLView)}get parentInjector(){let e=zu(this._hostTNode,this._hostLView);if(zm(e)){let n=Gs(e,this._hostLView),r=zs(e),i=n[O].data[r+8];return new kn(i,n)}else return new kn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Vg(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Te}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ji(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Fi(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!sD(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new Ui(Ln(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?l:this.parentInjector).get(Ge,null);m&&(o=m)}let u=Ln(c.componentType??{}),d=ji(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,Fi(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ae],l=new Yv(c,c[lt],c[Ae]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ta(s,i,o,r),e.attachToViewContainerRef(),cm(Fl(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Vg(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Li(this._lContainer,n);r&&(Us(Fl(this._lContainer),n),wa(r[O],r))}detach(e){let n=this._adjustIndex(e,-1),r=Li(this._lContainer,n);return r&&Us(Fl(this._lContainer),n)!=null?new $n(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Vg(t){return t[Bs]}function Fl(t){return t[Bs]||(t[Bs]=[])}function BS(t,e){let n,r=e[t.index];return Ht(r)?n=r:(n=kv(r,e,null,t),e[t.index]=n,ba(e,n)),WS(n,e,t,r),new Yv(n,t,e)}function HS(t,e){let n=t[Ne],r=n.createComment(""),i=ut(e,t),o=Iv(n,i);return Zs(n,o,r,Ab(n,i),!1),r}var WS=qS,zS=()=>!1;function GS(t,e,n){return zS(t,e,n)}function qS(t,e,n,r){if(t[Fn])return;let i;n.type&8?i=bt(r):i=HS(e,n),t[Fn]=i}var $g=new Set;function zi(t){$g.has(t)||($g.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ln=class{},Vi=class{};var pu=class extends ln{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xs(this);let o=mm(e);this._bootstrapComponents=gv(o.bootstrap),this._r3Injector=tv(e,n,[{provide:ln,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver},...r],Oe(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gu=class extends Vi{constructor(e){super(),this.moduleType=e}create(e){return new pu(this.moduleType,e,[])}};var ea=class extends ln{constructor(e){super(),this.componentFactoryResolver=new Xs(this),this.instance=null;let n=new Ri([...e.providers,{provide:ln,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver}],e.parent||Lu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ld(t,e,n=null){return new ea({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Kv(t){return KS(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function YS(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function KS(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function ZS(t,e,n){return t[e]=n}function $r(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function QS(t,e,n,r){let i=$r(t,e,n);return $r(t,e+1,r)||i}function JS(t){return(t.flags&32)===32}function XS(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Da(e,t,4,s||null,a||null);xv(e,n,u,Fr(l,c)),Wu(e,u);let d=u.tView=od(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function mu(t,e,n,r,i,o,s,a,c,l){let u=n+st,d=e.firstCreatePass?XS(u,e,t,r,i,o,s,a,c):e.data[u];Hi(d,!1);let f=eT(e,t,d,n);Bu()&&rd(e,t,f,d),Vn(f,t);let h=kv(f,t,f,d);return t[u]=h,ba(t,h),GS(h,d,t),Fu(d)&&Nv(e,t,d),c!=null&&Mv(t,d,l),d}function dt(t,e,n,r,i,o,s,a){let c=re(),l=hn(),u=Fr(l.consts,o);return mu(c,l,t,e,n,r,i,u,s,a),dt}var eT=tT;function tT(t,e,n,r){return Hu(!0),e[Ne].createComment("")}var Ti=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ti||{}),nT=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Bg=class t{constructor(){this.ngZone=y(te),this.scheduler=y(jr),this.errorHandler=y(Vt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Ti.EarlyRead,Ti.Write,Ti.MixedReadWrite,Ti.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=C({token:t,providedIn:"root",factory:()=>new t})}};function rT(t,e,n,r){return $r(t,va(),n)?e+Mu(n)+r:zr}function we(t,e,n){let r=re(),i=va();if($r(r,i,e)){let o=hn(),s=RD();zb(o,s,r,t,e,r[Ne],n,!1)}return we}function Hg(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";sd(t,n,o[s],s,r)}var vu=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function jl(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function iT(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=t.at(o),u=e[o],d=jl(o,l,o,u,n);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let f=t.at(s),h=e[c],p=jl(s,f,c,h,n);if(p!==0){p<0&&t.updateValue(s,h),s--,c--;continue}let m=n(o,l),_=n(s,f),D=n(o,u);if(Object.is(D,_)){let B=n(c,h);Object.is(B,m)?(t.swap(o,s),t.updateValue(s,h),c--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new ta,i??=zg(t,o,s,n),yu(t,r,o,D))t.updateValue(o,u),o++,s++;else if(i.has(D))r.set(m,t.detach(o)),s--;else{let B=t.create(o,e[o]);t.attach(o,B),o++,s++}}for(;o<=c;)Wg(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=t.at(o),d=l.value,f=jl(o,u,o,d,n);if(f!==0)f<0&&t.updateValue(o,d),o++,l=c.next();else{r??=new ta,i??=zg(t,o,s,n);let h=n(o,d);if(yu(t,r,o,h))t.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(h))t.attach(o,t.create(o,d)),o++,s++,l=c.next();else{let p=n(o,u);r.set(p,t.detach(o)),s--}}}for(;!l.done;)Wg(t,r,n,t.length,l.value),l=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function yu(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Wg(t,e,n,r,i){if(yu(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function zg(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ta=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function ud(t,e){zi("NgControlFlow");let n=re(),r=va(),i=n[r]!==zr?n[r]:-1,o=i!==-1?na(n,st+i):void 0,s=0;if($r(n,r,t)){let a=U(null);try{if(o!==void 0&&Uv(o,s),t!==-1){let c=st+t,l=na(n,c),u=Eu(n[O],c),d=ji(l,u.tView.ssrId),f=Sa(n,u,e,{dehydratedView:d});Ta(l,f,s,Fi(u,d))}}finally{U(a)}}else if(o!==void 0){let a=jv(o,s);a!==void 0&&(a[Ce]=e)}}var _u=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Te}};function Zv(t){return t}var Iu=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Qv(t,e,n,r,i,o,s,a,c,l,u,d,f){zi("NgControlFlow");let h=re(),p=hn(),m=c!==void 0,_=re(),D=a?s.bind(_[ot][Ce]):s,B=new Iu(m,D);_[st+t]=B,mu(h,p,t+1,e,n,r,i,Fr(p.consts,o)),m&&mu(h,p,t+2,c,l,u,d,Fr(p.consts,f))}var wu=class extends vu{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Te}at(e){return this.getLView(e)[Ce].$implicit}attach(e,n){let r=n[xi];this.needsIndexUpdate||=e!==this.length,Ta(this.lContainer,n,e,Fi(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,oT(this.lContainer,e)}create(e,n){let r=ji(this.lContainer,this.templateTNode.tView.ssrId),i=Sa(this.hostLView,this.templateTNode,new _u(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){wa(e[O],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Ce].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ce].$index=e}getLView(e){return sT(this.lContainer,e)}};function Jv(t){let e=U(null),n=ya();try{let r=re(),i=r[O],o=r[n],s=n+1,a=na(r,s);if(o.liveCollection===void 0){let l=Eu(i,s);o.liveCollection=new wu(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(iT(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=va(),u=c.length===0;if($r(r,l,u)){let d=n+2,f=na(r,d);if(u){let h=Eu(i,d),p=ji(f,h.tView.ssrId),m=Sa(r,h,void 0,{dehydratedView:p});Ta(f,m,0,Fi(h,p))}else Uv(f,0)}}}finally{U(e)}}function na(t,e){return t[e]}function oT(t,e){return Li(t,e)}function sT(t,e){return jv(t,e)}function Eu(t,e){return ju(t,e)}function aT(t,e,n,r,i,o){let s=e.consts,a=Fr(s,i),c=Da(e,t,2,r,a);return xv(e,n,c,Fr(s,o)),c.attrs!==null&&fu(c,c.attrs,!1),c.mergedAttrs!==null&&fu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function X(t,e,n,r){let i=re(),o=hn(),s=st+t,a=i[Ne],c=o.firstCreatePass?aT(s,o,i,e,n,r):o.data[s],l=cT(o,i,c,a,e,t);i[s]=l;let u=Fu(c);return Hi(c,!0),Cv(a,l,c),!JS(c)&&Bu()&&rd(o,i,l,c),mD()===0&&Vn(l,i),vD(),u&&(Nv(o,i,c),Av(o,c,i)),r!==null&&Mv(i,c),X}function ee(){let t=qe();km()?CD():(t=t.parent,Hi(t,!1));let e=t;ID(e)&&wD(),yD();let n=hn();return n.firstCreatePass&&(Wu(n,t),Dm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&LD(e)&&Hg(n,e,re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&FD(e)&&Hg(n,e,re(),e.stylesWithoutHost,!1),ee}function ft(t,e,n,r){return X(t,e,n,r),ee(),ft}var cT=(t,e,n,r,i,o)=>(Hu(!0),mv(r,i,xD()));function dd(){return re()}var ra="en-US";var lT=ra;function uT(t){typeof t=="string"&&(lT=t.toLowerCase().replace(/_/g,"-"))}var dT=(t,e,n)=>{};function Pe(t,e,n,r){let i=re(),o=hn(),s=qe();return hT(o,i,i[Ne],s,t,e,r),Pe}function fT(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[$s],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function hT(t,e,n,r,i,o,s){let a=Fu(r),l=t.firstCreatePass&&sS(t),u=e[Ce],d=oS(e),f=!0;if(r.type&3||s){let m=ut(r,e),_=s?s(m):m,D=d.length,B=s?T=>s(bt(T[r.index])):r.index,w=null;if(!s&&a&&(w=fT(t,e,i,r.index)),w!==null){let T=w.__ngLastListenerFn__||w;T.__ngNextListenerFn__=o,w.__ngLastListenerFn__=o,f=!1}else{o=qg(r,e,u,o),dT(m,i,o);let T=n.listen(_,i,o);d.push(o,T),l&&l.push(i,B,D,D+1)}}else o=qg(r,e,u,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let _=0;_<m;_+=2){let D=p[_],B=p[_+1],ie=e[D][B].subscribe(o),F=d.length;d.push(o,ie),l&&l.push(i,r.index,F,-(F+1))}}}function Gg(t,e,n,r){let i=U(null);try{return wt(6,e,n),n(r)!==!1}catch(o){return Fv(t,o),!1}finally{wt(7,e,n),U(i)}}function qg(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?fn(t.index,e):e;cd(s,5);let a=Gg(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=Gg(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Ye(t=1){return MD(t)}function De(t,e=""){let n=re(),r=hn(),i=t+st,o=r.firstCreatePass?Da(r,i,1,e,null):r.data[i],s=pT(r,n,o,e,t);n[i]=s,Bu()&&rd(r,n,s,o),Hi(o,!1)}var pT=(t,e,n,r,i)=>(Hu(!0),yb(e[Ne],r));function Hn(t){return gn("",t,""),Hn}function gn(t,e,n){let r=re(),i=rT(r,t,e,n);return i!==zr&&aS(r,ya(),i),gn}var gT=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=_m(!1,n.type),i=r.length>0?ld([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=C({token:t,providedIn:"environment",factory:()=>new t(k(Ge))})}}return t})();function Tt(t){zi("NgStandalone"),t.getStandaloneInjector=e=>e.get(gT).getOrCreateStandaloneInjector(t)}function Xv(t,e,n,r,i){return vT(re(),DD(),t,e,n,r,i)}function mT(t,e){let n=t[e];return n===zr?void 0:n}function vT(t,e,n,r,i,o,s){let a=e+n;return QS(t,a,i,o)?ZS(t,a+2,s?r.call(s,i,o):r(i,o)):mT(t,a+2)}var un=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ey=new un("18.2.13");var Ra=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var ty=new S("");function Gi(t){return!!t&&typeof t.then=="function"}function ny(t){return!!t&&typeof t.subscribe=="function"}var ry=new S(""),iy=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=y(ry,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Gi(o))n.push(o);else if(ny(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),fd=new S("");function yT(){jp(()=>{throw new E(600,!1)})}function _T(t){return t.isBoundToModule}var IT=10;function wT(t,e,n){try{let r=n();return Gi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Wn=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=y(rb),this.afterRenderManager=y(nT),this.zonelessEnabled=y(Na),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Se,this.afterTick=new Se,this.componentTypes=[],this.components=[],this.isStable=y(Wr).hasPendingTasks.pipe(V(n=>!n)),this._injector=y(Ge)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Js;if(!this._injector.get(iy).done){let f=!i&&gm(n),h=!1;throw new E(405,h)}let s;i?s=n:s=this._injector.get(Ur).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=_T(s)?void 0:this._injector.get(ln),c=r||s.selector,l=s.create(at.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(ty,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),ks(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new E(101,!1);let n=U(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,U(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Vr,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<IT;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)ET(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ha(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ks(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(fd,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ks(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ks(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ET(t,e,n,r){if(!n&&!ha(t))return;Bv(t,e,n&&!r?0:1)}var Cu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},hd=(()=>{class t{compileModuleSync(n){return new gu(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=mm(n),o=gv(i.declarations).reduce((s,a)=>{let c=Ln(a);return c&&s.push(new Ui(c)),s},[]);return new Cu(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var CT=(()=>{class t{constructor(){this.zone=y(te),this.changeDetectionScheduler=y(jr),this.applicationRef=y(Wn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),DT=new S("",{factory:()=>!1});function oy({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new te(oe(I({},ay()),{scheduleInRootZone:n})),[{provide:te,useFactory:t},{provide:Or,multi:!0,useFactory:()=>{let r=y(CT,{optional:!0});return()=>r.initialize()}},{provide:Or,multi:!0,useFactory:()=>{let r=y(bT);return()=>{r.initialize()}}},e===!0?{provide:Gv,useValue:!0}:[],{provide:qv,useValue:n??nv}]}function sy(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=oy({ngZoneFactory:()=>{let i=ay(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&zi("NgZone_CoalesceEvent"),new te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return dn([{provide:DT,useValue:!0},{provide:Na,useValue:!1},r])}function ay(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var bT=(()=>{class t{constructor(){this.subscription=new se,this.initialized=!1,this.zone=y(te),this.pendingTasks=y(Wr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ST=(()=>{class t{constructor(){this.appRef=y(Wn),this.taskService=y(Wr),this.ngZone=y(te),this.zonelessEnabled=y(Na),this.disableScheduling=y(Gv,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new se,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ys):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(y(qv,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ru||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Rg:iv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ys+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Rg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function TT(){return typeof $localize<"u"&&$localize.locale||ra}var pd=new S("",{providedIn:"root",factory:()=>y(pd,x.Optional|x.SkipSelf)||TT()});var Du=new S("");function Rs(t){return!t.moduleRef}function AT(t){let e=Rs(t)?t.r3Injector:t.moduleRef.injector,n=e.get(te);return n.run(()=>{Rs(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Vt,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Rs(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Du);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Du);s.add(o),t.moduleRef.onDestroy(()=>{ks(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return wT(r,n,()=>{let o=e.get(iy);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(pd,ra);if(uT(s||ra),Rs(t)){let a=e.get(Wn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return NT(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function NT(t,e){let n=t.injector.get(Wn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new E(-403,!1);e.push(t)}var Ls=null;function MT(t=[],e){return at.create({name:e,providers:[{provide:la,useValue:"platform"},{provide:Du,useValue:new Set([()=>Ls=null])},...t]})}function RT(t=[]){if(Ls)return Ls;let e=MT(t);return Ls=e,yT(),xT(e),e}function xT(t){t.get(Zu,null)?.forEach(n=>n())}var qi=(()=>{class t{static{this.__NG_ELEMENT_ID__=OT}}return t})();function OT(t){return PT(qe(),re(),(t&16)===16)}function PT(t,e,n){if(da(t)&&!n){let r=fn(t.index,e);return new $n(r,r)}else if(t.type&175){let r=e[ot];return new $n(r,e)}return null}var bu=class{constructor(){}supports(e){return Kv(e)}create(e){return new Su(e)}},kT=(t,e)=>e,Su=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kT}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<Yg(r,i,o)?n:r,a=Yg(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let h=f<o.length?o[f]:o[f]=0,p=h+f;u<=p&&p<l&&(o[f]=h+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Kv(e))throw new E(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,YS(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Tu(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ia),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ia),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Tu=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Au=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ia=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Au,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Yg(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Kg(){return new gd([new bu])}var gd=(()=>{class t{static{this.\u0275prov=C({token:t,providedIn:"root",factory:Kg})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Kg()),deps:[[t,new am,new ct]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new E(901,!1)}}return t})();function cy(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=RT(r),o=[oy({}),{provide:jr,useExisting:ST},...n||[]],s=new ea({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return AT({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var py=null;function qr(){return py}function gy(t){py??=t}var xa=class{};var Ke=new S(""),my=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(UT),providedIn:"platform"})}}return t})();var UT=(()=>{class t extends my{constructor(){super(),this._doc=y(Ke),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qr().getBaseHref(this._doc)}onPopState(n){let r=qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=qr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function vy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ly(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function zn(t){return t&&t[0]!=="?"?"?"+t:t}var Pa=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(yy),providedIn:"root"})}}return t})(),VT=new S(""),yy=(()=>{class t extends Pa{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??y(Ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vy(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+zn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+zn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+zn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(k(my),k(VT,8))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Yi=(()=>{class t{constructor(n){this._subject=new me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=HT(ly(uy(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+zn(r))}normalize(n){return t.stripTrailingSlash(BT(this._basePath,uy(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+zn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+zn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=zn}static{this.joinWithSlash=vy}static{this.stripTrailingSlash=ly}static{this.\u0275fac=function(r){return new(r||t)(k(Pa))}}static{this.\u0275prov=C({token:t,factory:()=>$T(),providedIn:"root"})}}return t})();function $T(){return new Yi(k(Pa))}function BT(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function uy(t){return t.replace(/\/index.html$/,"")}function HT(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function _y(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var md=/\s+/,dy=[],Iy=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=dy,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(md):dy}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(md):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(md).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Ve(Wi),Ve(Ma))}}static{this.\u0275dir=Br({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var vd=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wy=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),fy(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);fy(o,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Ve(Gr),Ve(Aa),Ve(gd))}}static{this.\u0275dir=Br({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function fy(t,e){t.context.$implicit=e.item}var ka=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new yd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){hy("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){hy("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Ve(Gr),Ve(Aa))}}static{this.\u0275dir=Br({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),yd=class{constructor(){this.$implicit=null,this.ngIf=null}};function hy(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Oe(e)}'.`)}var Gn=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=ca({type:t})}static{this.\u0275inj=oa({})}}return t})(),Ey="browser",WT="server";function _d(t){return t===WT}var Oa=class{};var Cd=class extends xa{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dd=class t extends Cd{static makeCurrent(){gy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=zT();return n==null?null:GT(n)}resetBaseElement(){Ki=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _y(document.cookie,e)}},Ki=null;function zT(){return Ki=Ki||document.querySelector("base"),Ki?Ki.getAttribute("href"):null}function GT(t){return new URL(t,document.baseURI).pathname}var qT=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),bd=new S(""),Sy=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(k(bd),k(te))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),La=class{constructor(e){this._doc=e}},wd="ng-app-id",Ty=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_d(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${wd}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(wd),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(wd,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(k(Ke),k(Ku),k(Qu,8),k(pn))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),Ed={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Td=/%COMP%/g,Ay="%COMP%",YT=`_nghost-${Ay}`,KT=`_ngcontent-${Ay}`,ZT=!0,QT=new S("",{providedIn:"root",factory:()=>ZT});function JT(t){return KT.replace(Td,t)}function XT(t){return YT.replace(Td,t)}function Ny(t,e){return e.map(n=>n.replace(Td,t))}var Cy=(()=>{class t{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=_d(a),this.defaultRenderer=new Zi(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ct.ShadowDom&&(r=oe(I({},r),{encapsulation:Ct.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Fa?i.applyToHost(n):i instanceof Qi&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Ct.Emulated:o=new Fa(c,l,r,this.appId,u,s,a,d);break;case Ct.ShadowDom:return new Sd(c,l,n,r,s,a,this.nonce,d);default:o=new Qi(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(k(Sy),k(Ty),k(Ku),k(QT),k(Ke),k(pn),k(te),k(Qu))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),Zi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ed[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Dy(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Dy(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Ed[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ed[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Bn.DashCase|Bn.Important)?e.style.setProperty(n,r,i&Bn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Bn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Dy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Sd=class extends Zi{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ny(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qi=class extends Zi{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Ny(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Fa=class extends Qi{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=JT(l),this.hostAttr=XT(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},e0=(()=>{class t extends La{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(k(Ke))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})(),by=["alt","control","meta","shift"],t0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},n0={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},r0=(()=>{class t extends La{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qr().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),by.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=t0[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),by.forEach(s=>{if(s!==i){let a=n0[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(k(Ke))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac})}}return t})();function My(t,e){return cy(I({rootComponent:t},i0(e)))}function i0(t){return{appProviders:[...l0,...t?.providers??[]],platformProviders:c0}}function o0(){Dd.makeCurrent()}function s0(){return new Vt}function a0(){return dv(document),document}var c0=[{provide:pn,useValue:Ey},{provide:Zu,useValue:o0,multi:!0},{provide:Ke,useFactory:a0,deps:[]}];var l0=[{provide:la,useValue:"root"},{provide:Vt,useFactory:s0,deps:[]},{provide:bd,useClass:e0,multi:!0,deps:[Ke,te,pn]},{provide:bd,useClass:r0,multi:!0,deps:[Ke]},Cy,Ty,Sy,{provide:Vr,useExisting:Cy},{provide:Oa,useClass:qT,deps:[]},[]];var Ry=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(k(Ke))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var R="primary",go=Symbol("RouteTitle"),xd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Xr(t){return new xd(t)}function d0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function f0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!At(t[n],e[n]))return!1;return!0}function At(t,e){let n=t?Od(t):void 0,r=e?Od(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Uy(t[i],e[i]))return!1;return!0}function Od(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Uy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function Vy(t){return t.length>0?t[t.length-1]:null}function vn(t){return Cl(t)?t:Gi(t)?ue(Promise.resolve(t)):N(t)}var h0={exact:By,subset:Hy},$y={exact:p0,subset:g0,ignored:()=>!0};function xy(t,e,n){return h0[n.paths](t.root,e.root,n.matrixParams)&&$y[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function p0(t,e){return At(t,e)}function By(t,e,n){if(!Yn(t.segments,e.segments)||!Va(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!By(t.children[r],e.children[r],n))return!1;return!0}function g0(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Uy(t[n],e[n]))}function Hy(t,e,n){return Wy(t,e,e.segments,n)}function Wy(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Yn(i,n)||e.hasChildren()||!Va(i,n,r))}else if(t.segments.length===n.length){if(!Yn(t.segments,n)||!Va(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Hy(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Yn(t.segments,i)||!Va(t.segments,i,r)||!t.children[R]?!1:Wy(t.children[R],e,o,r)}}function Va(t,e,n){return e.every((r,i)=>$y[n](t[i].parameters,r.parameters))}var Gt=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xr(this.queryParams),this._queryParamMap}toString(){return y0.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $a(this)}},qn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Xr(this.parameters),this._parameterMap}toString(){return Gy(this)}};function m0(t,e){return Yn(t,e)&&t.every((n,r)=>At(n.parameters,e[r].parameters))}function Yn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function v0(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===R&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==R&&(n=n.concat(e(i,r)))}),n}var sf=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>new io,providedIn:"root"})}}return t})(),io=class{parse(e){let n=new kd(e);return new Gt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ji(e.root,!0)}`,r=w0(e.queryParams),i=typeof e.fragment=="string"?`#${_0(e.fragment)}`:"";return`${n}${r}${i}`}},y0=new io;function $a(t){return t.segments.map(e=>Gy(e)).join("/")}function Ji(t,e){if(!t.hasChildren())return $a(t);if(e){let n=t.children[R]?Ji(t.children[R],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==R&&r.push(`${i}:${Ji(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=v0(t,(r,i)=>i===R?[Ji(t.children[R],!1)]:[`${i}:${Ji(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[R]!=null?`${$a(t)}/${n[0]}`:`${$a(t)}/(${n.join("//")})`}}function zy(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ja(t){return zy(t).replace(/%3B/gi,";")}function _0(t){return encodeURI(t)}function Pd(t){return zy(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ba(t){return decodeURIComponent(t)}function Oy(t){return Ba(t.replace(/\+/g,"%20"))}function Gy(t){return`${Pd(t.path)}${I0(t.parameters)}`}function I0(t){return Object.entries(t).map(([e,n])=>`;${Pd(e)}=${Pd(n)}`).join("")}function w0(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ja(n)}=${ja(i)}`).join("&"):`${ja(n)}=${ja(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var E0=/^[^\/()?;#]+/;function Ad(t){let e=t.match(E0);return e?e[0]:""}var C0=/^[^\/()?;=#]+/;function D0(t){let e=t.match(C0);return e?e[0]:""}var b0=/^[^=?&#]+/;function S0(t){let e=t.match(b0);return e?e[0]:""}var T0=/^[^&#]+/;function A0(t){let e=t.match(T0);return e?e[0]:""}var kd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[R]=new Y(e,n)),r}parseSegment(){let e=Ad(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new qn(Ba(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=D0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ad(this.remaining);i&&(r=i,this.capture(r))}e[Ba(n)]=Ba(r)}parseQueryParam(e){let n=S0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=A0(this.remaining);s&&(r=s,this.capture(r))}let i=Oy(n),o=Oy(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ad(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=R);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[R]:new Y([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function qy(t){return t.segments.length>0?new Y([],{[R]:t}):t}function Yy(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Yy(i);if(r===R&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Y(t.segments,e);return N0(n)}function N0(t){if(t.numberOfChildren===1&&t.children[R]){let e=t.children[R];return new Y(t.segments.concat(e.segments),e.children)}return t}function oo(t){return t instanceof Gt}function M0(t,e,n=null,r=null){let i=Ky(t);return Zy(i,e,n,r)}function Ky(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Y(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=qy(r);return e??i}function Zy(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Nd(i,i,i,n,r);let o=R0(e);if(o.toRoot())return Nd(i,i,new Y([],{}),n,r);let s=x0(o,i,t),a=s.processChildren?to(s.segmentGroup,s.index,o.commands):Jy(s.segmentGroup,s.index,o.commands);return Nd(i,s.segmentGroup,a,n,r)}function Ha(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function so(t){return typeof t=="object"&&t!=null&&t.outlets}function Nd(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=Qy(t,e,n);let a=qy(Yy(s));return new Gt(a,o,i)}function Qy(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Qy(o,e,n)}),new Y(t.segments,r)}var Wa=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ha(r[0]))throw new E(4003,!1);let i=r.find(so);if(i&&i!==Vy(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function R0(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Wa(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Wa(n,e,r)}var Zr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function x0(t,e,n){if(t.isAbsolute)return new Zr(e,!0,0);if(!n)return new Zr(e,!1,NaN);if(n.parent===null)return new Zr(n,!0,0);let r=Ha(t.commands[0])?0:1,i=n.segments.length-1+r;return O0(n,i,t.numberOfDoubleDots)}function O0(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Zr(r,!1,i-o)}function P0(t){return so(t[0])?t[0].outlets:{[R]:t}}function Jy(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return to(t,e,n);let r=k0(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Y(t.segments.slice(0,r.pathIndex),{});return o.children[R]=new Y(t.segments.slice(r.pathIndex),t.children),to(o,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?Ld(t,e,n):r.match?to(t,0,i):Ld(t,e,n)}function to(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=P0(n),i={};if(Object.keys(r).some(o=>o!==R)&&t.children[R]&&t.numberOfChildren===1&&t.children[R].segments.length===0){let o=to(t.children[R],e,n);return new Y(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Jy(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Y(t.segments,i)}}function k0(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(so(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ky(c,l,s))return o;r+=2}else{if(!ky(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ld(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(so(o)){let c=L0(o.outlets);return new Y(r,c)}if(i===0&&Ha(n[0])){let c=t.segments[e];r.push(new qn(c.path,Py(n[0]))),i++;continue}let s=so(o)?o.outlets[R]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ha(a)?(r.push(new qn(s,Py(a))),i+=2):(r.push(new qn(s,{})),i++)}return new Y(r,{})}function L0(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ld(new Y([],{}),0,r))}),e}function Py(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ky(t,e,n){return t==n.path&&At(e,n.parameters)}var no="imperative",Ee=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ee||{}),Ze=class{constructor(e,n){this.id=e,this.url=n}},ao=class extends Ze{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ee.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kn=class extends Ze{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ee.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Be=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Be||{}),Fd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Fd||{}),zt=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ee.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zn=class extends Ze{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ee.NavigationSkipped}},co=class extends Ze{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ee.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},za=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends Ze{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ee.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vd=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends Ze{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ee.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bd=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hd=class{constructor(e){this.route=e,this.type=Ee.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Wd=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zd=class{constructor(e){this.snapshot=e,this.type=Ee.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gd=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{constructor(e){this.snapshot=e,this.type=Ee.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lo=class{},ei=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function F0(t,e){return t.providers&&!t._injector&&(t._injector=ld(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ht(t){return t.outlet||R}function j0(t,e){let n=t.filter(r=>ht(r)===e);return n.push(...t.filter(r=>ht(r)!==e)),n}function mo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Yd=class{get injector(){return mo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ja(this.rootInjector),this.attachRef=null}},Ja=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Yd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(k(Ge))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ga=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Kd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Kd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Zd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zd(e,this._root).map(n=>n.value)}};function Kd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Kd(t,n);if(r)return r}return null}function Zd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Zd(t,n);if(r.length)return r.unshift(e),r}return[]}var $e=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Kr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var qa=class extends Ga{constructor(e,n){super(e),this.snapshot=n,af(this,e)}toString(){return this.snapshot.toString()}};function Xy(t){let e=U0(t),n=new Ie([new qn("",{})]),r=new Ie({}),i=new Ie({}),o=new Ie({}),s=new Ie(""),a=new mn(n,r,o,s,i,R,t,e.root);return a.snapshot=e.root,new qa(new $e(a,[]),e)}function U0(t){let e={},n={},r={},i="",o=new Qr([],e,r,i,n,R,t,null,{});return new Ka("",new $e(o,[]))}var mn=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(V(l=>l[go]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(e=>Xr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(e=>Xr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ya(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&t_(i)&&(r.resolve[go]=i.title),r}var Qr=class{get title(){return this.data?.[go]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ka=class extends Ga{constructor(e,n){super(n),this.url=e,af(this,n)}toString(){return e_(this._root)}};function af(t,e){e.value._routerState=t,e.children.forEach(n=>af(t,n))}function e_(t){let e=t.children.length>0?` { ${t.children.map(e_).join(", ")} } `:"";return`${t.value}${e}`}function Md(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,At(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),At(e.params,n.params)||t.paramsSubject.next(n.params),f0(e.url,n.url)||t.urlSubject.next(n.url),At(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Qd(t,e){let n=At(t.params,e.params)&&m0(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Qd(t.parent,e.parent))}function t_(t){return typeof t.title=="string"||t.title===null}var cf=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=R,this.activateEvents=new me,this.deactivateEvents=new me,this.attachEvents=new me,this.detachEvents=new me,this.parentContexts=y(Ja),this.location=y(Gr),this.changeDetector=y(qi),this.inputBinder=y(lf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Jd(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Br({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fa]})}}return t})(),Jd=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===mn?this.route:e===Ja?this.childContexts:this.parent.get(e,n)}},lf=new S("");function V0(t,e,n){let r=uo(t,e._root,n?n._root:void 0);return new qa(r,e)}function uo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=$0(t,e,n);return new $e(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>uo(t,a)),s}}let r=B0(e.value),i=e.children.map(o=>uo(t,o));return new $e(r,i)}}function $0(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return uo(t,r,i);return uo(t,r)})}function B0(t){return new mn(new Ie(t.url),new Ie(t.params),new Ie(t.queryParams),new Ie(t.fragment),new Ie(t.data),t.outlet,t.component,t)}var fo=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},n_="ngNavigationCancelingError";function Za(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=r_(!1,Be.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function r_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[n_]=!0,n.cancellationCode=e,n}function H0(t){return i_(t)&&oo(t.url)}function i_(t){return!!t&&t[n_]}var W0=(t,e,n,r)=>V(i=>(new Xd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Xd=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Md(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Kr(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Kr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Kr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Kr(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new zd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Md(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Md(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Qa=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Jr=class{constructor(e,n){this.component=e,this.route=n}};function z0(t,e,n){let r=t._root,i=e?e._root:null;return Xi(r,i,n,[r.value])}function G0(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ni(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!em(t)?t:e.get(t):r}function Xi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Kr(e);return t.children.forEach(s=>{q0(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ro(a,n.getContext(s),i)),i}function q0(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Y0(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Qa(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Xi(t,e,a?a.children:null,r,i):Xi(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Jr(a.outlet.component,s))}else s&&ro(e,a,i),i.canActivateChecks.push(new Qa(r)),o.component?Xi(t,null,a?a.children:null,r,i):Xi(t,null,n,r,i);return i}function Y0(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Yn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Yn(t.url,e.url)||!At(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qd(t,e)||!At(t.queryParams,e.queryParams);case"paramsChange":default:return!Qd(t,e)}}function ro(t,e,n){let r=Kr(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ro(s,e.children.getContext(o),n):ro(s,null,n):ro(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Jr(e.outlet.component,i)):n.canDeactivateChecks.push(new Jr(null,i)):n.canDeactivateChecks.push(new Jr(null,i))}function vo(t){return typeof t=="function"}function K0(t){return typeof t=="boolean"}function Z0(t){return t&&vo(t.canLoad)}function Q0(t){return t&&vo(t.canActivate)}function J0(t){return t&&vo(t.canActivateChild)}function X0(t){return t&&vo(t.canDeactivate)}function eA(t){return t&&vo(t.canMatch)}function o_(t){return t instanceof jt||t?.name==="EmptyError"}var Ua=Symbol("INITIAL_VALUE");function ti(){return nt(t=>Ts(t.map(e=>e.pipe(Ut(1),Al(Ua)))).pipe(V(e=>{for(let n of e)if(n!==!0){if(n===Ua)return Ua;if(n===!1||tA(n))return n}return!0}),tt(e=>e!==Ua),Ut(1)))}function tA(t){return oo(t)||t instanceof fo}function nA(t,e){return de(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?N(oe(I({},n),{guardsResult:!0})):rA(s,r,i,t).pipe(de(a=>a&&K0(a)?iA(r,o,t,e):N(a)),V(a=>oe(I({},n),{guardsResult:a})))})}function rA(t,e,n,r){return ue(t).pipe(de(i=>lA(i.component,i.route,n,e,r)),_t(i=>i!==!0,!0))}function iA(t,e,n,r){return ue(e).pipe(br(i=>Dr(sA(i.route.parent,r),oA(i.route,r),cA(t,i.path,n),aA(t,i.route,n))),_t(i=>i!==!0,!0))}function oA(t,e){return t!==null&&e&&e(new Gd(t)),N(!0)}function sA(t,e){return t!==null&&e&&e(new Wd(t)),N(!0)}function aA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(o=>As(()=>{let s=mo(e)??n,a=ni(o,s),c=Q0(a)?a.canActivate(e,t):$t(s,()=>a(e,t));return vn(c).pipe(_t())}));return N(i).pipe(ti())}function cA(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>G0(s)).filter(s=>s!==null).map(s=>As(()=>{let a=s.guards.map(c=>{let l=mo(s.node)??n,u=ni(c,l),d=J0(u)?u.canActivateChild(r,t):$t(l,()=>u(r,t));return vn(d).pipe(_t())});return N(a).pipe(ti())}));return N(o).pipe(ti())}function lA(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return N(!0);let s=o.map(a=>{let c=mo(e)??i,l=ni(a,c),u=X0(l)?l.canDeactivate(t,e,n,r):$t(c,()=>l(t,e,n,r));return vn(u).pipe(_t())});return N(s).pipe(ti())}function uA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let o=i.map(s=>{let a=ni(s,t),c=Z0(a)?a.canLoad(e,n):$t(t,()=>a(e,n));return vn(c)});return N(o).pipe(ti(),s_(r))}function s_(t){return gl(fe(e=>{if(typeof e!="boolean")throw Za(t,e)}),V(e=>e===!0))}function dA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let o=i.map(s=>{let a=ni(s,t),c=eA(a)?a.canMatch(e,n):$t(t,()=>a(e,n));return vn(c)});return N(o).pipe(ti(),s_(r))}var ho=class{constructor(e){this.segmentGroup=e||null}},po=class extends Error{constructor(e){super(),this.urlTree=e}};function Yr(t){return Cr(new ho(t))}function fA(t){return Cr(new E(4e3,!1))}function hA(t){return Cr(r_(!1,Be.GuardRejected))}var ef=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[R])return fA(`${e.redirectTo}`);i=i.children[R]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:m}=i,_=$t(o,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:m}));if(_ instanceof Gt)throw new po(_);n=_}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new po(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Gt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Y(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},tf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pA(t,e,n,r,i){let o=a_(t,e,n);return o.matched?(r=F0(e,r),dA(r,e,n,i).pipe(V(s=>s===!0?o:I({},tf)))):N(o)}function a_(t,e,n){if(e.path==="**")return gA(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},tf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||d0)(n,t,e);if(!i)return I({},tf);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?I(I({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function gA(t){return{matched:!0,parameters:t.length>0?Vy(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Ly(t,e,n,r){return n.length>0&&yA(t,n,r)?{segmentGroup:new Y(e,vA(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&_A(t,n,r)?{segmentGroup:new Y(t.segments,mA(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function mA(t,e,n,r){let i={};for(let o of n)if(Xa(t,e,o)&&!r[ht(o)]){let s=new Y([],{});i[ht(o)]=s}return I(I({},r),i)}function vA(t,e){let n={};n[R]=e;for(let r of t)if(r.path===""&&ht(r)!==R){let i=new Y([],{});n[ht(r)]=i}return n}function yA(t,e,n){return n.some(r=>Xa(t,e,r)&&ht(r)!==R)}function _A(t,e,n){return n.some(r=>Xa(t,e,r))}function Xa(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function IA(t,e,n){return e.length===0&&!t.children[n]}var nf=class{};function wA(t,e,n,r,i,o,s="emptyOnly"){return new rf(t,e,n,r,i,s,o).recognize()}var EA=31,rf=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ef(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ly(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(V(({children:n,rootSnapshot:r})=>{let i=new $e(r,n),o=new Ka("",i),s=M0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Qr([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),R,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,R,n).pipe(V(r=>({children:r,rootSnapshot:n})),nn(r=>{if(r instanceof po)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ho?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(V(s=>s instanceof $e?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ue(o).pipe(br(s=>{let a=r.children[s],c=j0(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Tl((s,a)=>(s.push(...a),s)),rn(null),Sl(),de(s=>{if(s===null)return Yr(r);let a=c_(s);return CA(a),N(a)}))}processSegment(e,n,r,i,o,s,a){return ue(n).pipe(br(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(nn(l=>{if(l instanceof ho)return N(null);throw l}))),_t(c=>!!c),nn(c=>{if(o_(c))return IA(r,i,o)?N(new nf):Yr(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return ht(r)!==s&&(s===R||!Xa(i,o,r))?Yr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Yr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=a_(n,i,o);if(!c)return Yr(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>EA&&(this.allowRedirects=!1));let h=new Qr(o,l,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Fy(i),ht(i),i.component??i._loadedComponent??null,i,jy(i)),p=Ya(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(de(_=>this.processSegment(e,r,n,_.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=pA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(nt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(nt(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Qr(f,d,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,Fy(r),ht(r),r.component??r._loadedComponent??null,r,jy(r)),m=Ya(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:_,slicedSegments:D}=Ly(n,f,h,l);if(D.length===0&&_.hasChildren())return this.processChildren(u,l,_,p).pipe(V(w=>new $e(p,w)));if(l.length===0&&D.length===0)return N(new $e(p,[]));let B=ht(r)===o;return this.processSegment(u,l,_,D,B?R:o,!0,p).pipe(V(w=>new $e(p,w instanceof $e?[w]:[])))}))):Yr(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):uA(e,n,r,this.urlSerializer).pipe(de(i=>i?this.configLoader.loadChildren(e,n).pipe(fe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):hA(n))):N({routes:[],injector:e})}};function CA(t){t.sort((e,n)=>e.value.outlet===R?-1:n.value.outlet===R?1:e.value.outlet.localeCompare(n.value.outlet))}function DA(t){let e=t.value.routeConfig;return e&&e.path===""}function c_(t){let e=[],n=new Set;for(let r of t){if(!DA(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=c_(r.children);e.push(new $e(r.value,i))}return e.filter(r=>!n.has(r))}function Fy(t){return t.data||{}}function jy(t){return t.resolve||{}}function bA(t,e,n,r,i,o){return de(s=>wA(t,e,n,r,s.extractedUrl,i,o).pipe(V(({state:a,tree:c})=>oe(I({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function SA(t,e){return de(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of l_(c))s.add(l);let a=0;return ue(s).pipe(br(c=>o.has(c)?TA(c,r,t,e):(c.data=Ya(c,c.parent,t).resolve,N(void 0))),fe(()=>a++),Sr(1),de(c=>a===s.size?N(n):Ue))})}function l_(t){let e=t.children.map(n=>l_(n)).flat();return[t,...e]}function TA(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!t_(i)&&(o[go]=i.title),AA(o,t,e,r).pipe(V(s=>(t._resolvedData=s,t.data=Ya(t,t.parent,n).resolve,null)))}function AA(t,e,n,r){let i=Od(t);if(i.length===0)return N({});let o={};return ue(i).pipe(de(s=>NA(t[s],e,n,r).pipe(_t(),fe(a=>{if(a instanceof fo)throw Za(new io,a);o[s]=a}))),Sr(1),bl(o),nn(s=>o_(s)?Ue:Cr(s)))}function NA(t,e,n,r){let i=mo(e)??r,o=ni(t,i),s=o.resolve?o.resolve(e,n):$t(i,()=>o(e,n));return vn(s)}function Rd(t){return nt(e=>{let n=t(e);return n?ue(n).pipe(V(()=>e)):N(e)})}var u_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===R);return r}getResolvedTitleForRoute(n){return n.data[go]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(MA),providedIn:"root"})}}return t})(),MA=(()=>{class t extends u_{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(k(Ry))}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),uf=new S("",{providedIn:"root",factory:()=>({})}),RA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=St({type:t,selectors:[["ng-component"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(r,i){r&1&&ft(0,"router-outlet")},dependencies:[cf],encapsulation:2})}}return t})();function df(t){let e=t.children&&t.children.map(df),n=e?oe(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==R&&(n.component=RA),n}var ff=new S(""),xA=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=y(hd)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return N(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=vn(n.loadComponent()).pipe(V(d_),fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),bi(()=>{this.componentLoaders.delete(n)})),i=new _r(r,()=>new Se).pipe(yr());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=OA(r,this.compiler,n,this.onLoadEndListener).pipe(bi(()=>{this.childrenLoaders.delete(r)})),s=new _r(o,()=>new Se).pipe(yr());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function OA(t,e,n,r){return vn(t.loadChildren()).pipe(V(d_),de(i=>i instanceof Vi||Array.isArray(i)?N(i):ue(e.compileModuleAsync(i))),V(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(ff,[],{optional:!0,self:!0}).flat()),{routes:s.map(df),injector:o}}))}function PA(t){return t&&typeof t=="object"&&"default"in t}function d_(t){return PA(t)?t.default:t}var hf=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(kA),providedIn:"root"})}}return t})(),kA=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),LA=new S("");var FA=new S(""),jA=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Se,this.transitionAbortSubject=new Se,this.configLoader=y(xA),this.environmentInjector=y(Ge),this.urlSerializer=y(sf),this.rootContexts=y(Ja),this.location=y(Yi),this.inputBindingEnabled=y(lf,{optional:!0})!==null,this.titleStrategy=y(u_),this.options=y(uf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=y(hf),this.createViewTransition=y(LA,{optional:!0}),this.navigationErrorHandler=y(FA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Bd(i)),r=i=>this.events.next(new Hd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(oe(I(I({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ie({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:no,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tt(o=>o.id!==0),V(o=>oe(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nt(o=>{let s=!1,a=!1;return N(o).pipe(nt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Be.SupersededByNewNavigation),Ue;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?oe(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new Zn(c.id,this.urlSerializer.serialize(c.rawUrl),d,Fd.IgnoredSameUrlNavigation)),c.resolve(!1),Ue}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return N(c).pipe(nt(d=>{let f=this.transitions?.getValue();return this.events.next(new ao(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?Ue:Promise.resolve(d)}),bA(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),fe(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=oe(I({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new za(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:m}=c,_=new ao(d,this.urlSerializer.serialize(f),h,p);this.events.next(_);let D=Xy(this.rootComponentType).snapshot;return this.currentTransition=o=oe(I({},c),{targetSnapshot:D,urlAfterRedirects:f,extras:oe(I({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(o)}else{let d="";return this.events.next(new Zn(c.id,this.urlSerializer.serialize(c.extractedUrl),d,Fd.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ue}}),fe(c=>{let l=new jd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),V(c=>(this.currentTransition=o=oe(I({},c),{guards:z0(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),nA(this.environmentInjector,c=>this.events.next(c)),fe(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Za(this.urlSerializer,c.guardsResult);let l=new Ud(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),tt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Be.GuardRejected),!1)),Rd(c=>{if(c.guards.canActivateChecks.length)return N(c).pipe(fe(l=>{let u=new Vd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),nt(l=>{let u=!1;return N(l).pipe(SA(this.paramsInheritanceStrategy,this.environmentInjector),fe({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Be.NoDataFromResolver)}}))}),fe(l=>{let u=new $d(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Rd(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(fe(f=>{u.component=f}),V(()=>{})));for(let f of u.children)d.push(...l(f));return d};return Ts(l(c.targetSnapshot.root)).pipe(rn(null),Ut(1))}),Rd(()=>this.afterPreactivation()),nt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?ue(u).pipe(V(()=>o)):N(o)}),V(c=>{let l=V0(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=oe(I({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),fe(()=>{this.events.next(new lo)}),W0(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ut(1),fe({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Nl(this.transitionAbortSubject.pipe(fe(c=>{throw c}))),bi(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Be.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),nn(c=>{if(a=!0,i_(c))this.events.next(new zt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),H0(c)?this.events.next(new ei(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new co(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let u=$t(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof fo){let{message:d,cancellationCode:f}=Za(this.urlSerializer,u);this.events.next(new zt(o.id,this.urlSerializer.serialize(o.extractedUrl),d,f)),this.events.next(new ei(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=n.errorHandler(c);o.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Ue}))}))}cancelNavigationTransition(n,r,i){let o=new zt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function UA(t){return t!==no}var VA=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y($A),providedIn:"root"})}}return t})(),of=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},$A=(()=>{class t extends of{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gu(t)))(i||t)}})()}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),f_=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:()=>y(BA),providedIn:"root"})}}return t})(),BA=(()=>{class t extends f_{constructor(){super(...arguments),this.location=y(Yi),this.urlSerializer=y(sf),this.options=y(uf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=y(hf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Xy(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ao)this.stateMemento=this.createStateMemento();else if(n instanceof Zn)this.rawUrlTree=r.initialUrl;else if(n instanceof za){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof lo?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof zt&&(n.code===Be.GuardRejected||n.code===Be.NoDataFromResolver)?this.restoreHistory(r):n instanceof co?this.restoreHistory(r,!0):n instanceof Kn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Gt?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=I(I({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=I(I({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Gu(t)))(i||t)}})()}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),eo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(eo||{});function HA(t,e){t.events.pipe(tt(n=>n instanceof Kn||n instanceof zt||n instanceof co||n instanceof Zn),V(n=>n instanceof Kn||n instanceof Zn?eo.COMPLETE:(n instanceof zt?n.code===Be.Redirect||n.code===Be.SupersededByNewNavigation:!1)?eo.REDIRECTING:eo.FAILED),tt(n=>n!==eo.REDIRECTING),Ut(1)).subscribe(()=>{e()})}function WA(t){throw t}var zA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},h_=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=y(Ra),this.stateManager=y(f_),this.options=y(uf,{optional:!0})||{},this.pendingTasks=y(Wr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=y(jA),this.urlSerializer=y(sf),this.location=y(Yi),this.urlHandlingStrategy=y(hf),this._events=new Se,this.errorHandler=this.options.errorHandler||WA,this.navigated=!1,this.routeReuseStrategy=y(VA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=y(ff,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!y(lf,{optional:!0}),this.eventsSubscription=new se,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof zt&&r.code!==Be.Redirect&&r.code!==Be.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Kn)this.navigated=!0;else if(r instanceof ei){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=I({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UA(i.source)},s);this.scheduleNavigation(a,no,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YA(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),no,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=I({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(df),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=Ky(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return Zy(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=oo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,no,null,r)}navigate(n,r={skipLocationChange:!1}){return qA(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=I({},zA):r===!1?i=I({},GA):i=r,oo(n))return xy(this.currentUrlTree,n,i);let o=this.parseUrl(n);return xy(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return HA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function qA(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}function YA(t){return!(t instanceof lo)&&!(t instanceof ei)}var KA=new S("");function p_(t,...e){return dn([{provide:ff,multi:!0,useValue:t},[],{provide:mn,useFactory:ZA,deps:[h_]},{provide:fd,multi:!0,useFactory:QA},e.map(n=>n.\u0275providers)])}function ZA(t){return t.routerState.root}function QA(){let t=y(at);return e=>{let n=t.get(Wn);if(e!==n.components[0])return;let r=t.get(h_),i=t.get(JA);t.get(XA)===1&&r.initialNavigation(),t.get(eN,null,x.Optional)?.setUpPreloading(),t.get(KA,null,x.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var JA=new S("",{factory:()=>new Se}),XA=new S("",{providedIn:"root",factory:()=>1});var eN=new S("");var yn=function(t){return t.Oval="oval",t.Diamond="diamond",t.Squigle="squiggle",t}(yn||{}),_n=function(t){return t.Red="red",t.Green="green",t.Blue="blue",t}(_n||{}),In=function(t){return t.Solid="solid",t.Striped="striped",t.Open="open",t}(In||{});var yo=class{Cards=[];constructor(){this.newCards()}newCards(){var e=[yn.Diamond,yn.Oval,yn.Squigle],n=[_n.Red,_n.Green,_n.Blue],r=[In.Open,In.Solid,In.Striped],i=this.Cards,o=1;for(let s=1;s<=3;s++)e.forEach(a=>{n.forEach(c=>{r.forEach(l=>{var u={Color:c,Fill:l,Count:s,Shape:a,Id:o,Selected:!1,Blink:!1};i.push(u),o++})})})}findMissingSetCard(e,n){let r=e.Color===n.Color,i=e.Count===n.Count,o=e.Fill===n.Fill,s=e.Shape===n.Shape,a=r?e.Color:this.missingColor(e.Color,n.Color),c=i?e.Count:this.missingCount(e.Count,n.Count),l=o?e.Fill:this.missingFill(e.Fill,n.Fill),u=s?e.Shape:this.missingShape(e.Shape,n.Shape);return this.Cards.find(d=>d.Color===a&&d.Count===c&&d.Fill===l&&d.Shape===u)}missingColor(e,n){let r=[_n.Red,_n.Green,_n.Blue];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}missingCount(e,n){let r=[1,2,3];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}missingShape(e,n){let r=[yn.Diamond,yn.Oval,yn.Squigle];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}missingFill(e,n){let r=[In.Open,In.Solid,In.Striped];return this.removeFrom(r,e),this.removeFrom(r,n),r[0]}removeFrom(e,n){let r=e.indexOf(n);r>-1&&e.splice(r,1)}};var nN=(t,e)=>({card:!0,selected:t,blink:e});function rN(t,e){if(t&1&&ft(0,"img",2),t&2){let n=Ye();we("src",n.ImagePath(),Ia)}}function iN(t,e){if(t&1&&ft(0,"img",2),t&2){let n=Ye();we("src",n.ImagePath(),Ia)}}var g_=(()=>{class t{CardInfo;CardSelected=new me;CardUnSelected=new me;ImagePath(){var n=this.CardInfo;return`set_picts/${n.Shape}_${n.Fill}_${n.Color}.png`}clicked(){this.CardInfo.Selected=!this.CardInfo.Selected,this.CardInfo.Selected?this.CardSelected.emit(this.CardInfo):this.CardUnSelected.emit(this.CardInfo)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=St({type:t,selectors:[["app-card"]],inputs:{CardInfo:"CardInfo"},outputs:{CardSelected:"CardSelected",CardUnSelected:"CardUnSelected"},standalone:!0,features:[Tt],decls:5,vars:7,consts:[[3,"click","ngClass"],[1,"card-images"],[3,"src"],[3,"src",4,"ngIf"]],template:function(r,i){r&1&&(X(0,"div",0),Pe("click",function(){return i.clicked()}),X(1,"div",1),ft(2,"img",2),dt(3,rN,1,1,"img",3)(4,iN,1,1,"img",3),ee()()),r&2&&(we("ngClass",Xv(4,nN,i.CardInfo.Selected,i.CardInfo.Blink)),ae(2),we("src",i.ImagePath(),Ia),ae(),we("ngIf",i.CardInfo.Count>1),ae(),we("ngIf",i.CardInfo.Count>2))},dependencies:[Gn,Iy,ka],styles:[".card[_ngcontent-%COMP%]{background-color:#fff;width:13vw;padding:1vw;margin:0 auto;border-radius:.5vw}.blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blinker .3s linear infinite}@keyframes _ngcontent-%COMP%_blinker{50%{background-color:#f2f297}}.selected[_ngcontent-%COMP%]{background-color:#d8d9ee!important}.card-images[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:2vw;padding-bottom:2vw}.card-images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5vw;height:auto;display:block;transform:rotate(90deg);margin:-.3vw}"]})}return t})();function oN(t,e){if(t&1&&(X(0,"div",1)(1,"div",2),De(2),ee()()),t&2){let n=Ye();ae(2),gn(" ",n.Message," ")}}var m_=(()=>{class t{Message="";Visible=!1;static \u0275fac=function(r){return new(r||t)};static \u0275cmp=St({type:t,selectors:[["app-dialog"]],inputs:{Message:"Message",Visible:"Visible"},standalone:!0,features:[Tt],decls:1,vars:1,consts:[["class","center-screen",4,"ngIf"],[1,"center-screen"],[1,"dialog"]],template:function(r,i){r&1&&dt(0,oN,3,1,"div",0),r&2&&we("ngIf",i.Visible)},dependencies:[Gn,ka]})}return t})();var qt=class{static getToday(){var e=new Date().toISOString();return e.split("T")[0]}};var gf={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw Qn(e)},Qn=function(t){return new Error("Firebase Database ("+gf.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var y_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sN=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},tc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,u=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|l>>6,h=l&63;c||(h=64,s||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new mf;let f=o<<2|a>>4;if(r.push(f),l!==64){let h=a<<4&240|l>>2;if(r.push(h),d!==64){let p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},mf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},yf=function(t){let e=y_(t);return tc.encodeByteArray(e,!0)},_o=function(t){return yf(t).replace(/\./g,"")},Io=function(t){try{return tc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function __(t){return I_(void 0,t)}function I_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!aN(n)||(t[n]=I_(t[n],e[n]));return t}function aN(t){return t!=="__proto__"}function cN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lN=()=>cN().__FIREBASE_DEFAULTS__,uN=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Io(t[1]);return e&&JSON.parse(e)},_f=()=>{try{return lN()||uN()||dN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w_=t=>{var e,n;return(n=(e=_f())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},E_=t=>{let e=w_(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},If=()=>{var t;return(t=_f())===null||t===void 0?void 0:t.config},C_=t=>{var e;return(e=_f())===null||e===void 0?void 0:e[`_${t}`]};var wn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function D_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_o(JSON.stringify(n)),_o(JSON.stringify(s)),""].join(".")}function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wo(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function b_(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S_(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mt(){return gf.NODE_CLIENT===!0||gf.NODE_ADMIN===!0}function T_(){try{return typeof indexedDB=="object"}catch{return!1}}function A_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var fN="FirebaseError",Nt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fN,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}},Yt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?hN(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Nt(i,a,r)}};function hN(t,e){return t.replace(pN,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var pN=/\{\$([^}]+)}/g;function ri(t){return JSON.parse(t)}function le(t){return JSON.stringify(t)}var N_=function(t){let e={},n={},r={},i="";try{let o=t.split(".");e=ri(Io(o[0])||""),n=ri(Io(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var M_=function(t){let e=N_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},R_=function(t){let e=N_(t).claims;return typeof e=="object"&&e.admin===!0};function Rt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function rc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Eo(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Co(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(v_(o)&&v_(s)){if(!Co(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function v_(t){return t!==null&&typeof t=="object"}function Do(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ec=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);let f=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<n;){if(s===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}};function x_(t,e){let n=new vf(t,e);return n.subscribe.bind(n)}var vf=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pf),i.error===void 0&&(i.error=pf),i.complete===void 0&&(i.complete=pf);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function gN(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pf(){}function ic(t,e){return`${t} failed: ${e} argument `}var O_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,g(r<t.length,"Surrogate pair missing trail surrogate.");let s=t.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bo=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var eB=4*60*60*1e3;function Qe(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Xn="[DEFAULT]";var oc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new wn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vN(e))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Xn){return this.instances.has(e)}getOptions(e=Xn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xn){return this.component?this.component.multipleInstances?e:Xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mN(t){return t===Xn?void 0:t}function vN(t){return t.instantiationMode==="EAGER"}var So=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new oc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var yN=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),_N={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},IN=Z.INFO,wN={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},EN=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=wN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},En=class{constructor(e){this.name=e,this._logLevel=IN,this._logHandler=EN,this._userLogHandler=null,yN.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_N[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var CN=(t,e)=>e.some(n=>t instanceof n),P_,k_;function DN(){return P_||(P_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bN(){return k_||(k_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var L_=new WeakMap,Ef=new WeakMap,F_=new WeakMap,wf=new WeakMap,Df=new WeakMap;function SN(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(xt(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&L_.set(n,t)}).catch(()=>{}),Df.set(e,t),e}function TN(t){if(Ef.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Ef.set(t,e)}var Cf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||F_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function j_(t){Cf=t(Cf)}function AN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(sc(this),e,...n);return F_.set(r,e.sort?e.sort():[e]),xt(r)}:bN().includes(t)?function(...e){return t.apply(sc(this),e),xt(L_.get(this))}:function(...e){return xt(t.apply(sc(this),e))}}function NN(t){return typeof t=="function"?AN(t):(t instanceof IDBTransaction&&TN(t),CN(t,DN())?new Proxy(t,Cf):t)}function xt(t){if(t instanceof IDBRequest)return SN(t);if(wf.has(t))return wf.get(t);let e=NN(t);return e!==t&&(wf.set(t,e),Df.set(e,t)),e}var sc=t=>Df.get(t);function V_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=xt(s);return r&&s.addEventListener("upgradeneeded",c=>{r(xt(s.result),c.oldVersion,c.newVersion,xt(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var MN=["get","getKey","getAll","getAllKeys","count"],RN=["put","add","delete","clear"],bf=new Map;function U_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bf.get(e))return bf.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=RN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MN.includes(n)))return;let o=function(s,...a){return v(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return bf.set(e,o),o}j_(t=>oe(I({},t),{get:(e,n,r)=>U_(e,n)||t.get(e,n,r),has:(e,n)=>!!U_(e,n)||t.has(e,n)}));var Tf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xN(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function xN(t){let e=t.getComponent();return e?.type==="VERSION"}var Af="@firebase/app",$_="0.10.13";var Kt=new En("@firebase/app"),ON="@firebase/app-compat",PN="@firebase/analytics-compat",kN="@firebase/analytics",LN="@firebase/app-check-compat",FN="@firebase/app-check",jN="@firebase/auth",UN="@firebase/auth-compat",VN="@firebase/database",$N="@firebase/data-connect",BN="@firebase/database-compat",HN="@firebase/functions",WN="@firebase/functions-compat",zN="@firebase/installations",GN="@firebase/installations-compat",qN="@firebase/messaging",YN="@firebase/messaging-compat",KN="@firebase/performance",ZN="@firebase/performance-compat",QN="@firebase/remote-config",JN="@firebase/remote-config-compat",XN="@firebase/storage",eM="@firebase/storage-compat",tM="@firebase/firestore",nM="@firebase/vertexai-preview",rM="@firebase/firestore-compat",iM="firebase",oM="10.14.1";var Nf="[DEFAULT]",sM={[Af]:"fire-core",[ON]:"fire-core-compat",[kN]:"fire-analytics",[PN]:"fire-analytics-compat",[FN]:"fire-app-check",[LN]:"fire-app-check-compat",[jN]:"fire-auth",[UN]:"fire-auth-compat",[VN]:"fire-rtdb",[$N]:"fire-data-connect",[BN]:"fire-rtdb-compat",[HN]:"fire-fn",[WN]:"fire-fn-compat",[zN]:"fire-iid",[GN]:"fire-iid-compat",[qN]:"fire-fcm",[YN]:"fire-fcm-compat",[KN]:"fire-perf",[ZN]:"fire-perf-compat",[QN]:"fire-rc",[JN]:"fire-rc-compat",[XN]:"fire-gcs",[eM]:"fire-gcs-compat",[tM]:"fire-fst",[rM]:"fire-fst-compat",[nM]:"fire-vertex","fire-js":"fire-js",[iM]:"fire-js-all"};var To=new Map,aM=new Map,Mf=new Map;function B_(t,e){try{t.container.addComponent(e)}catch(n){Kt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){let e=t.name;if(Mf.has(e))return Kt.debug(`There were multiple attempts to register component ${e}.`),!1;Mf.set(e,t);for(let n of To.values())B_(n,t);for(let n of aM.values())B_(n,t);return!0}function Pf(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t.settings!==void 0}var cM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new Yt("app","Firebase",cM);var Rf=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}};var oi=oM;function kf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Nf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cn.create("bad-app-name",{appName:String(i)});if(n||(n=If()),!n)throw Cn.create("no-options");let o=To.get(i);if(o){if(Co(n,o.options)&&Co(r,o.config))return o;throw Cn.create("duplicate-app",{appName:i})}let s=new So(i);for(let c of Mf.values())s.addComponent(c);let a=new Rf(n,r,s);return To.set(i,a),a}function No(t=Nf){let e=To.get(t);if(!e&&t===Nf&&If())return kf();if(!e)throw Cn.create("no-app",{appName:t});return e}function ac(){return Array.from(To.values())}function ve(t,e,n){var r;let i=(r=sM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kt.warn(a.join(" "));return}Dn(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var lM="firebase-heartbeat-database",uM=1,Ao="firebase-heartbeat-store",Sf=null;function G_(){return Sf||(Sf=V_(lM,uM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ao)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cn.create("idb-open",{originalErrorMessage:t.message})})),Sf}function dM(t){return v(this,null,function*(){try{let n=(yield G_()).transaction(Ao),r=yield n.objectStore(Ao).get(q_(t));return yield n.done,r}catch(e){if(e instanceof Nt)Kt.warn(e.message);else{let n=Cn.create("idb-get",{originalErrorMessage:e?.message});Kt.warn(n.message)}}})}function H_(t,e){return v(this,null,function*(){try{let r=(yield G_()).transaction(Ao,"readwrite");yield r.objectStore(Ao).put(e,q_(t)),yield r.done}catch(n){if(n instanceof Nt)Kt.warn(n.message);else{let r=Cn.create("idb-set",{originalErrorMessage:n?.message});Kt.warn(r.message)}}})}function q_(t){return`${t.name}!${t.options.appId}`}var fM=1024,hM=30*24*60*60*1e3,xf=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Of(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=W_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=hM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kt.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=W_(),{heartbeatsToSend:r,unsentEntries:i}=pM(this._heartbeatsCache.heartbeats),o=_o(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Kt.warn(n),""}})}};function W_(){return new Date().toISOString().substring(0,10)}function pM(t,e=fM){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),z_(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),z_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Of=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return T_()?A_().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield dM(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return H_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return H_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function z_(t){return _o(JSON.stringify({version:2,heartbeats:t})).length}function gM(t){Dn(new Je("platform-logger",e=>new Tf(e),"PRIVATE")),Dn(new Je("heartbeat",e=>new xf(e),"PRIVATE")),ve(Af,$_,t),ve(Af,$_,"esm2017"),ve("fire-js","")}gM("");var mM="firebase",vM="10.14.1";ve(mM,vM,"app");var ai=new un("ANGULARFIRE2_VERSION");function Ff(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ro=(t,e)=>{let n=e?[e]:ac(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Mo=class{constructor(){return Ro(yM)}},yM="app-check";function si(){}var cc=class{zone;delegate;constructor(e,n=wl){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Lf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si)),n.pipe(fe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xo=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new cc(Zone.current)),this.insideAngular=n.run(()=>new cc(Zone.current,Il)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(k(te))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function _M(t){return lc().ngZone.runOutsideAngular(()=>t())}function er(t){return lc().ngZone.run(()=>t())}function IM(t){return wM(lc())(t)}function wM(t){return function(n){return n=n.lift(new Lf(t.ngZone)),n.pipe(tn(t.outsideAngular),en(t.insideAngular))}}var EM=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),er(()=>t.apply(void 0,r))},bn=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=er(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",si,{},si,si))),r[o]=EM(r[o],n));let i=_M(()=>t.apply(this,r));if(!e)if(i instanceof z){let o=lc();return i.pipe(tn(o.outsideAngular),en(o.insideAngular))}else return er(()=>i);return i instanceof z?i.pipe(IM):i instanceof Promise?er(()=>new Promise((o,s)=>i.then(a=>er(()=>o(a)),a=>er(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:er(()=>i)};var tr=class{constructor(e){return e}},Oo=class{constructor(){return ac()}};function CM(t){return t&&t.length===1?t[0]:new tr(No())}var jf=new S("angularfire2._apps"),DM={provide:tr,useFactory:CM,deps:[[new ct,jf]]},bM={provide:Oo,deps:[[new ct,jf]]};function SM(t){return(e,n)=>{let r=n.get(pn);ve("angularfire",ai.full,"core"),ve("angularfire",ai.full,"app"),ve("angular",ey.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new tr(i)}}function Y_(t,...e){return dn([DM,bM,{provide:jf,useFactory:SM(t),multi:!0,deps:[te,at,xo,...e]}])}var K_=bn(kf,!0);function rI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iI=rI,oI=new Yt("auth","Firebase",rI());var hc=new En("@firebase/auth");function TM(t,...e){hc.logLevel<=Z.WARN&&hc.warn(`Auth (${oi}): ${t}`,...e)}function dc(t,...e){hc.logLevel<=Z.ERROR&&hc.error(`Auth (${oi}): ${t}`,...e)}function Z_(t,...e){throw Zf(t,...e)}function Kf(t,...e){return Zf(t,...e)}function sI(t,e,n){let r=Object.assign(Object.assign({},iI()),{[e]:n});return new Yt("auth","Firebase",r).create(e,{appName:t.name})}function fc(t){return sI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zf(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oI.create(t,...e)}function q(t,e,...n){if(!t)throw Zf(e,...n)}function Po(t){let e="INTERNAL ASSERTION FAILED: "+t;throw dc(e),new Error(e)}function pc(t,e){t||Po(e)}function AM(){return Q_()==="http:"||Q_()==="https:"}function Q_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function NM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AM()||S_()||"connection"in navigator)?navigator.onLine:!0}function MM(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var rr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,pc(n>e,"Short delay should be less than long delay!"),this.isMobile=wo()||nc()}get(){return NM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function RM(t,e){pc(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var gc=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var OM=new rr(3e4,6e4);function aI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function _c(o,s,a,c){return v(this,arguments,function*(t,e,n,r,i={}){return cI(t,i,()=>v(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Do(Object.assign({key:t.config.apiKey},u)).slice(1),f=yield t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);let h=Object.assign({method:e,headers:f},l);return b_()||(h.referrerPolicy="no-referrer"),gc.fetch()(lI(t,t.config.apiHost,n,d),h)}))})}function cI(t,e,n){return v(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},xM),e);try{let i=new $f(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw uc(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw uc(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw uc(t,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sI(t,u,l);Z_(t,u)}}catch(i){if(i instanceof Nt)throw i;Z_(t,"network-request-failed",{message:String(i)})}})}function lI(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?RM(t.config,i):`${t.config.apiScheme}://${i}`}var $f=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kf(this.auth,"network-request-failed")),OM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function uc(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Kf(t,e,r);return i.customData._tokenResponse=n,i}function PM(t,e){return v(this,null,function*(){return _c(t,"POST","/v1/accounts:delete",e)})}function uI(t,e){return v(this,null,function*(){return _c(t,"POST","/v1/accounts:lookup",e)})}function ko(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Qf(t,e=!1){return v(this,null,function*(){let n=Qe(t),r=yield n.getIdToken(e),i=dI(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ko(Uf(i.auth_time)),issuedAtTime:ko(Uf(i.iat)),expirationTime:ko(Uf(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Uf(t){return Number(t)*1e3}function dI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{let i=Io(n);return i?JSON.parse(i):(dc("Failed to decode base64 JWT payload"),null)}catch(i){return dc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function J_(t){let e=dI(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Bf(t,e,n=!1){return v(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Nt&&kM(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function kM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Hf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),n)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Fo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ko(this.lastLoginAt),this.creationTime=ko(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function mc(t){return v(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Bf(t,uI(n,{idToken:r}));q(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fI(o.providerUserInfo):[],a=LM(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,u=c?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Fo(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function Jf(t){return v(this,null,function*(){let e=Qe(t);yield mc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fI(t){return t.map(e=>{var{providerId:n}=e,r=El(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FM(t,e){return v(this,null,function*(){let n=yield cI(t,{},()=>v(this,null,function*(){let r=Do({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=lI(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gc.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function jM(t,e){return v(this,null,function*(){return _c(t,"POST","/v2/accounts:revokeToken",aI(t,e))})}var Lo=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");let n=J_(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return v(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield FM(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Po("not implemented")}};function Sn(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var jo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=El(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fo(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let n=yield Bf(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Qf(this,e)}reload(){return Jf(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield mc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(ii(this.auth.app))return Promise.reject(fc(this.auth));let e=yield this.getIdToken();return yield Bf(this,PM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,l,u;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,D=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:T,isAnonymous:ie,providerData:F,stsTokenManager:K}=n;q(w&&K,e,"internal-error");let pe=Lo.fromJSON(this.name,K);q(typeof w=="string",e,"internal-error"),Sn(d,e.name),Sn(f,e.name),q(typeof T=="boolean",e,"internal-error"),q(typeof ie=="boolean",e,"internal-error"),Sn(h,e.name),Sn(p,e.name),Sn(m,e.name),Sn(_,e.name),Sn(D,e.name),Sn(B,e.name);let _e=new t({uid:w,auth:e,email:f,emailVerified:T,displayName:d,isAnonymous:ie,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:pe,createdAt:D,lastLoginAt:B});return F&&Array.isArray(F)&&(_e.providerData=F.map(Re=>Object.assign({},Re))),_&&(_e._redirectEventId=_),_e}static _fromIdTokenResponse(e,n,r=!1){return v(this,null,function*(){let i=new Lo;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield mc(o),o})}static _fromGetAccountInfoResponse(e,n,r){return v(this,null,function*(){let i=n.users[0];q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?fI(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Lo;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var X_=new Map;function nr(t){pc(t instanceof Function,"Expected a class definition");let e=X_.get(t);return e?(pc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X_.set(t,e),e)}var UM=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(n,r){return v(this,null,function*(){this.storage[n]=r})}_get(n){return v(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return v(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Wf=UM;function Vf(t,e,n){return`firebase:${t}:${e}:${n}`}var vc=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Vf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Vf("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?jo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(this,null,function*(){if(!n.length)return new t(nr(Wf),e,r);let i=(yield Promise.all(n.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||nr(Wf),s=Vf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let u=yield l._get(s);if(u){let d=jo._fromJSON(e,u);l!==o&&(a=d),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>v(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function eI(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zM(e))return"Blackberry";if(GM(e))return"Webos";if($M(e))return"Safari";if((e.includes("chrome/")||BM(e))&&!e.includes("edge/"))return"Chrome";if(WM(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function VM(t=pt()){return/firefox\//i.test(t)}function $M(t=pt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BM(t=pt()){return/crios\//i.test(t)}function HM(t=pt()){return/iemobile/i.test(t)}function WM(t=pt()){return/android/i.test(t)}function zM(t=pt()){return/blackberry/i.test(t)}function GM(t=pt()){return/webos/i.test(t)}function hI(t,e=[]){let n;switch(t){case"Browser":n=eI(pt());break;case"Worker":n=`${eI(pt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oi}/${r}`}var zf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function qM(n){return v(this,arguments,function*(t,e={}){return _c(t,"GET","/v2/passwordPolicy",aI(t,e))})}var YM=6,Gf=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:YM,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var qf=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yc(this),this.idTokenSubscription=new yc(this),this.beforeStateQueue=new zf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=nr(n)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield vc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let n=yield uI(this,{idToken:e}),r=yield jo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var n;if(ii(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield mc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=MM()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(ii(this.app))return Promise.reject(fc(this));let n=e?Qe(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return v(this,null,function*(){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return ii(this.app)?Promise.reject(fc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ii(this.app)?Promise.reject(fc(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield qM(this),n=new Gf(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jM(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&nr(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=yield vc.create(this,[nr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return v(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&TM(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function KM(t){return Qe(t)}var yc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=x_(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ZM={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QM(t){ZM=t}function JM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function XM(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var QB=JM("rcb"),JB=new rr(3e4,6e4);var XB=new rr(2e3,1e4);var e2=10*60*1e3;var t2=new rr(3e4,6e4);var n2=new rr(5e3,15e3);var r2=encodeURIComponent("fac");var tI="@firebase/auth",nI="1.7.9";var Yf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function eR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function tR(t){Dn(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hI(t)},l=new qf(r,i,o,c);return XM(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Je("auth-internal",e=>{let n=KM(e.getProvider("auth").getImmediate());return(r=>new Yf(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ve(tI,nI,eR(t)),ve(tI,nI,"esm2017")}var nR=5*60,i2=C_("authIdTokenMaxAge")||nR;function rR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}QM({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Kf("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",rR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});tR("Browser");var nx="auth";var Ic=class{constructor(){return Ro(nx)}};var pI="@firebase/database",gI="1.0.8";var tp="";function rx(t){tp=t}var sh=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),le(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ri(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var ah=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Rt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var GI=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new sh(e)}}catch{}return new ah},or=GI("localStorage"),ch=GI("sessionStorage");var ui=new En("@firebase/database"),ix=function(){let t=1;return function(){return t++}}(),qI=function(t){let e=O_(t),n=new ec;n.update(e);let r=n.digest();return tc.encodeByteArray(r)},ts=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ts.apply(null,r):typeof r=="object"?e+=le(r):e+=r,e+=" "}return e},ar=null,mI=!0,ox=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ui.logLevel=Z.VERBOSE,ar=ui.log.bind(ui),e&&ch.set("logging_enabled",!0)):typeof t=="function"?ar=t:(ar=null,ch.remove("logging_enabled"))},be=function(...t){if(mI===!0&&(mI=!1,ar===null&&ch.get("logging_enabled")===!0&&ox(!0)),ar){let e=ts.apply(null,t);ar(e)}},ns=function(t){return function(...e){be(t,...e)}},lh=function(...t){let e="FIREBASE INTERNAL ERROR: "+ts(...t);ui.error(e)},Zt=function(...t){let e=`FIREBASE FATAL ERROR: ${ts(...t)}`;throw ui.error(e),new Error(e)},ke=function(...t){let e="FIREBASE WARNING: "+ts(...t);ui.warn(e)},sx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ke("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},YI=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ax=function(t){if(Mt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},fi="[MIN_NAME]",cr="[MAX_NAME]",_i=function(t,e){if(t===e)return 0;if(t===fi||e===cr)return-1;if(e===fi||t===cr)return 1;{let n=vI(t),r=vI(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},cx=function(t,e){return t===e?0:t<e?-1:1},Uo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+le(e))},np=function(t){if(typeof t!="object"||t===null)return le(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=le(e[r]),n+=":",n+=np(t[e[r]]);return n+="}",n},KI=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Le(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var ZI=function(t){g(!YI(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},lx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ux=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var fx=new RegExp("^-?(0*)\\d{1,10}$"),hx=-2147483648,px=2147483647,vI=function(t){if(fx.test(t)){let e=Number(t);if(e>=hx&&e<=px)return e}return null},Ii=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ke("Exception was thrown by user callback.",n),e},Math.floor(0))}},gx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wo=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var uh=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ke(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var dh=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ke(e)}},zo=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Ec="5",QI="v",JI="s",XI="r",ew="f",tw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nw="ls",rw="p",fh="ac",iw="websocket",ow="long_polling";var Cc=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=or.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&or.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function mx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function sw(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===iw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ow)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);mx(t)&&(n.ns=t.namespace);let i=[];return Le(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var hh=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Rt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return __(this.counters_)}};var Xf={},eh={};function rp(t){let e=t.toString();return Xf[e]||(Xf[e]=new hh),Xf[e]}function vx(t,e){let n=t.toString();return eh[n]||(eh[n]=e()),eh[n]}var ph=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ii(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var yI="start",yx="close",_x="pLPCommand",Ix="pRTLPCB",aw="id",cw="pw",lw="ser",wx="cb",Ex="seg",Cx="ts",Dx="d",bx="dframe",uw=1870,dw=30,Sx=uw-dw,Tx=25e3,Ax=3e4,gh=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ns(e),this.stats_=rp(n),this.urlFn=c=>(this.appCheckToken&&(c[fh]=this.appCheckToken),sw(n,ow,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ph(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ax)),ax(()=>{if(this.isClosed_)return;this.scriptTagHolder=new mh((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===yI)this.id=a,this.password=c;else if(s===yx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[yI]="t",r[lw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[wx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[QI]=Ec,this.transportSessionId&&(r[JI]=this.transportSessionId),this.lastSessionId&&(r[nw]=this.lastSessionId),this.applicationId&&(r[rw]=this.applicationId),this.appCheckToken&&(r[fh]=this.appCheckToken),typeof location<"u"&&location.hostname&&tw.test(location.hostname)&&(r[XI]=ew);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Mt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!lx()&&!ux()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=yf(n),i=KI(r,Sx);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Mt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[bx]="t",r[aw]=e,r[cw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=le(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},mh=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Mt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ix(),window[_x+this.uniqueCallbackIdentifier]=e,window[Ix+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){be("frame writing exception"),a.stack&&be(a.stack),be(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||be("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[aw]=this.myID,e[cw]=this.myPW,e[lw]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+dw+r.length<=uw;){let s=this.pendingSegs.shift();r=r+"&"+Ex+i+"="+s.seg+"&"+Cx+i+"="+s.ts+"&"+Dx+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Tx)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){Mt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{be("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Nx=16384,Mx=45e3,Dc=null;typeof MozWebSocket<"u"?Dc=MozWebSocket:typeof WebSocket<"u"&&(Dc=WebSocket);var Vo=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ns(this.connId),this.stats_=rp(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[QI]=Ec,!Mt()&&typeof location<"u"&&location.hostname&&tw.test(location.hostname)&&(a[XI]=ew),r&&(a[JI]=r),i&&(a[nw]=i),o&&(a[fh]=o),s&&(a[rw]=s),sw(n,iw,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,or.set("previous_websocket_failure",!0);try{let i;if(Mt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Ec}/${tp}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Dc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Dc!==null&&!t.forceDisallow_}static previouslyFailed(){return or.isInMemoryStorage||or.get("previous_websocket_failure")===!0}markConnectionHealthy(){or.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ri(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=le(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=KI(r,Nx);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Mx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Rx=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[gh,Vo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Vo&&Vo.isAvailable(),i=r&&!Vo.previouslyFailed();if(n.webSocketOnly&&(r||ke("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Vo];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),xx=6e4,Ox=5e3,Px=10*1024,kx=100*1024,th="t",_I="d",Lx="s",II="r",Fx="e",wI="o",EI="a",CI="n",DI="p",jx="h",vh=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ns("c:"+this.id+":"),this.transportManager_=new Rx(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Px?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(th in e){let n=e[th];n===EI?this.upgradeIfSecondaryHealthy_():n===II?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Uo("t",e),r=Uo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:DI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:EI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:CI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Uo("t",e),r=Uo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Uo(th,e);if(_I in e){let r=e[_I];if(n===jx){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===CI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Lx?this.onConnectionShutdown_(r):n===II?this.onReset_(r):n===Fx?lh("Server Error: "+r):n===wI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lh("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ec!==r&&ke("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Ox))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:DI,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(or.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var bc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Sc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Tc=class t extends Sc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!wo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var bI=32,SI=768,Q=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function G(){return new Q("")}function j(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Nn(t){return t.pieces_.length-t.pieceNum_}function ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Q(t.pieces_,e)}function fw(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ux(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function hw(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pw(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Q(e,0)}function he(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Q(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Me(t,e){let n=j(t),r=j(e);if(n===null)return e;if(n===r)return Me(ne(t),ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gw(t,e){if(Nn(t)!==Nn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function mt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Nn(t)>Nn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var yh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=hw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=bo(this.parts_[r]);mw(this)}};function Vx(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=bo(e),mw(t)}function $x(t){let e=t.parts_.pop();t.byteLength_-=bo(e),t.parts_.length>0&&(t.byteLength_-=1)}function mw(t){if(t.byteLength_>SI)throw new Error(t.errorPrefix_+"has a key path longer than "+SI+" bytes ("+t.byteLength_+").");if(t.parts_.length>bI)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bI+") or object contains a cycle "+ir(t))}function ir(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var _h=class t extends Sc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var $o=1e3,Bx=60*5*1e3,TI=30*1e3,Hx=1.3,Wx=3e4,zx="server_kill",AI=3,ip=(()=>{class t extends bc{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=ns("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$o,this.maxReconnectDelay_=Bx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Mt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_h.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Tc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(le(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new wn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Rt(n,"w")){let i=Jn(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();ke(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||R_(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=TI)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=M_(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+le(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):lh("Unrecognized action received from server: "+le(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$o,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=$o,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Wx&&(this.reconnectDelay_=$o),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Hx)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?be("getToken() completed but was canceled"):(be("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new vh(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{ke(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(zx)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ke(f),l())}}})}interrupt(n){be("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){be("Resuming connection for reason: "+n),delete this.interruptReasons_[n],rc(this.interruptReasons_)&&(this.reconnectDelay_=$o,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>np(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new Q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){be("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=AI&&(this.reconnectDelay_=TI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){be("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=AI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Mt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+tp.replace(/\./g,"-")]=1,wo()?n["framework.cordova"]=1:nc()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Tc.getInstance().currentlyOnline();return rc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),P=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var hi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new P(fi,e),i=new P(fi,n);return this.compare(r,i)!==0}minPost(){return P.MIN}};var wc,Ac=class extends hi{static get __EMPTY_NODE(){return wc}static set __EMPTY_NODE(e){wc=e}compare(e,n){return _i(e.name,n.name)}isDefinedOn(e){throw Qn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return P.MIN}maxPost(){return new P(cr,wc)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new P(e,wc)}toString(){return".key"}},di=new Ac;var li=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},gt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Xe.EMPTY_NODE,this.right=s??Xe.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xe.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Xe.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Ih=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new gt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Xe=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,gt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new li(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new li(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new li(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new li(this.root_,null,this.comparator_,!0,e)}};Xe.EMPTY_NODE=new Ih;function Gx(t,e){return _i(t.name,e.name)}function op(t,e){return _i(t,e)}var wh;function qx(t){wh=t}var vw=function(t){return typeof t=="number"?"number:"+ZI(t):"string:"+t},yw=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Rt(e,".sv"),"Priority must be a string or number.")}else g(t===wh||t.isEmpty(),"priority of unexpected type.");g(t===wh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var NI,pi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),yw(this.priorityNode_)}static set __childrenNodeConstructor(n){NI=n}static get __childrenNodeConstructor(){return NI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:j(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=j(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||Nn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ne(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+vw(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=ZI(this.value_):n+=this.value_,this.lazyHash_=qI(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),_w,Iw;function Yx(t){_w=t}function Kx(t){Iw=t}var Eh=class extends hi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?_i(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return P.MIN}maxPost(){return new P(cr,new pi("[PRIORITY-POST]",Iw))}makePost(e,n){let r=_w(e);return new P(n,new pi("[PRIORITY-POST]",r))}toString(){return".priority"}},ce=new Eh;var Zx=Math.log(2),Ch=class{constructor(e){let n=o=>parseInt(Math.log(o)/Zx,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Nc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new gt(f,d.node,gt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),m=i(h+1,l);return d=t[h],f=n?n(d):d,new gt(f,d.node,gt.BLACK,p,m)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,m){let _=d-p,D=d;d-=p;let B=i(_+1,D),w=t[_],T=n?n(w):w;h(new gt(T,w.node,m,null,B))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let m=c.nextBitIsOne(),_=Math.pow(2,c.count-(p+1));m?f(_,gt.BLACK):(f(_,gt.BLACK),f(_,gt.RED))}return u},s=new Ch(t.length),a=o(s);return new Xe(r||e,a)};var nh,ci={},gi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(ci&&ce,"ChildrenNode.ts has not been loaded"),nh=nh||new t({".priority":ci},{".priority":ce}),nh}get(e){let n=Jn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xe?n:null}hasIndex(e){return Rt(this.indexSet_,e.toString())}addIndex(e,n){g(e!==di,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(P.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Nc(r,e.getCompare()):a=ci;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Eo(this.indexes_,(i,o)=>{let s=Jn(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===ci)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(P.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Nc(a,s.getCompare())}else return ci;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new P(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Eo(this.indexes_,i=>{if(i===ci)return i;{let o=n.get(e.name);return o?i.remove(new P(e.name,o)):i}});return new t(r,this.indexSet_)}};var Bo,M=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&yw(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Bo||(Bo=new t(new Xe(op),null,gi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Bo}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Bo:r}}getChild(n){let r=j(n);return r===null?this:this.getImmediateChild(r).getChild(ne(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new P(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Bo:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=j(n);if(i===null)return r;{g(j(n)!==".priority"||Nn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ne(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(ce,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+vw(this.getPriority().val())+":"),this.forEachChild(ce,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":qI(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new P(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new P(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new P(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,P.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,P.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===rs?-1:0}withIndex(n){if(n===di||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===di||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ce),o=r.getIterator(ce),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===di?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Dh=class extends M{constructor(){super(new Xe(op),M.EMPTY_NODE,gi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return M.EMPTY_NODE}isEmpty(){return!1}},rs=new Dh;Object.defineProperties(P,{MIN:{value:new P(fi,M.EMPTY_NODE)},MAX:{value:new P(cr,rs)}});Ac.__EMPTY_NODE=M.EMPTY_NODE;pi.__childrenNodeConstructor=M;qx(rs);Kx(rs);var Qx=!0;function ye(t,e=null){if(t===null)return M.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new pi(n,ye(e))}if(!(t instanceof Array)&&Qx){let n=[],r=!1;if(Le(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=ye(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new P(s,c)))}}),n.length===0)return M.EMPTY_NODE;let o=Nc(n,Gx,s=>s.name,op);if(r){let s=Nc(n,ce.getCompare());return new M(o,ye(e),new gi({".priority":s},{".priority":ce}))}else return new M(o,ye(e),gi.Default)}else{let n=M.EMPTY_NODE;return Le(t,(r,i)=>{if(Rt(t,r)&&r.substring(0,1)!=="."){let o=ye(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ye(e))}}Yx(ye);var bh=class extends hi{constructor(e){super(),this.indexPath_=e,g(!L(e)&&j(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?_i(e.name,n.name):o}makePost(e,n){let r=ye(e),i=M.EMPTY_NODE.updateChild(this.indexPath_,r);return new P(n,i)}maxPost(){let e=M.EMPTY_NODE.updateChild(this.indexPath_,rs);return new P(cr,e)}toString(){return hw(this.indexPath_,0).join("/")}};var Sh=class extends hi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?_i(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(e,n){let r=ye(e);return new P(n,r)}toString(){return".value"}},Jx=new Sh;function ww(t){return{type:"value",snapshotNode:t}}function mi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ko(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Zo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Xx(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Qo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Ko(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(mi(n,r)):s.trackChildChange(Zo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ce,(i,o)=>{n.hasChild(i)||r.trackChildChange(Ko(i,o))}),n.isLeafNode()||n.forEachChild(ce,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Zo(i,o,s))}else r.trackChildChange(mi(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?M.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Mc=class t{constructor(e){this.indexedFilter_=new Qo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new P(n,r))||(r=M.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=M.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(M.EMPTY_NODE);let o=this;return n.forEachChild(ce,(s,a)=>{o.matches(new P(s,a))||(i=i.updateImmediateChild(s,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Th=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Mc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new P(n,r))||(r=M.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=M.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=M.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(M.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new P(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Zo(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Ko(n,d));let m=a.updateImmediateChild(n,M.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(mi(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Ko(l.name,l.node)),o.trackChildChange(mi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,M.EMPTY_NODE)):e}};var Ah=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ce}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fi}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ce}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function eO(t){return t.loadsAllData()?new Qo(t.getIndex()):t.hasLimit()?new Th(t):new Mc(t)}function MI(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ce?n="$priority":t.index_===Jx?n="$value":t.index_===di?n="$key":(g(t.index_ instanceof bh,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=le(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=le(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+le(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=le(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+le(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function RI(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ce&&(e.i=t.index_.toString()),e}var Nh=class t extends bc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ns("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=MI(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Jn(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=MI(e._queryParams),r=e._path.toString(),i=new wn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Do(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ri(a.responseText)}catch{ke("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ke("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Mh=class{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Rc(){return{value:null,children:new Map}}function Ew(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=j(e);t.children.has(r)||t.children.set(r,Rc());let i=t.children.get(r);e=ne(e),Ew(i,e,n)}}function Rh(t,e,n){t.value!==null?n(e,t.value):tO(t,(r,i)=>{let o=new Q(e.toString()+"/"+r);Rh(i,o,n)})}function tO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var xh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Le(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var xI=10*1e3,nO=30*1e3,rO=5*60*1e3,Oh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new xh(e);let r=xI+(nO-xI)*Math.random();Wo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Le(e,(i,o)=>{o>0&&Rt(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Wo(this.reportStats_.bind(this),Math.floor(Math.random()*2*rO))}};var Ot=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Ot||{});function Cw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ap(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ph=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ot.ACK_USER_WRITE,this.source=Cw()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Q(e));return new t(G(),n,this.revert)}}else return g(j(this.path)===e,"operationForChild called for unrelated child."),new t(ne(this.path),this.affectedTree,this.revert)}};var xc=class t{constructor(e,n){this.source=e,this.path=n,this.type=Ot.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new t(this.source,G()):new t(this.source,ne(this.path))}};var vi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ot.OVERWRITE}operationForChild(e){return L(this.path)?new t(this.source,G(),this.snap.getImmediateChild(e)):new t(this.source,ne(this.path),this.snap)}};var Oc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ot.MERGE}operationForChild(e){if(L(this.path)){let n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new vi(this.source,G(),n.value):new t(this.source,G(),n)}else return g(j(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Pt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;let n=j(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var kh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function iO(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Xx(s.childName,s.snapshotNode))}),Ho(t,i,"child_removed",e,r,n),Ho(t,i,"child_added",e,r,n),Ho(t,i,"child_moved",o,r,n),Ho(t,i,"child_changed",e,r,n),Ho(t,i,"value",e,r,n),i}function Ho(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>sO(t,a,c)),s.forEach(a=>{let c=oO(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function oO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function sO(t,e,n){if(e.childName==null||n.childName==null)throw Qn("Should only compare child_ events.");let r=new P(e.childName,e.snapshotNode),i=new P(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Wc(t,e){return{eventCache:t,serverCache:e}}function Go(t,e,n,r){return Wc(new Pt(e,n,r),t.serverCache)}function Dw(t,e,n,r){return Wc(t.eventCache,new Pt(e,n,r))}function Pc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function lr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var rh,aO=()=>(rh||(rh=new Xe(cx)),rh),Fe=class t{constructor(e,n=aO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Le(e,(r,i)=>{n=n.set(new Q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if(L(e))return null;{let r=j(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ne(e),n);return o!=null?{path:he(new Q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{let n=j(e),r=this.children.get(n);return r!==null?r.subtree(ne(e)):new t(null)}}set(e,n){if(L(e))return new t(n,this.children);{let r=j(e),o=(this.children.get(r)||new t(null)).set(ne(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(L(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=j(e),r=this.children.get(n);if(r){let i=r.remove(ne(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(L(e))return this.value;{let n=j(e),r=this.children.get(n);return r?r.get(ne(e)):null}}setTree(e,n){if(L(e))return n;{let r=j(e),o=(this.children.get(r)||new t(null)).setTree(ne(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(G(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(he(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(L(e))return null;{let o=j(e),s=this.children.get(o);return s?s.findOnPath_(ne(e),he(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,r){if(L(e))return this;{this.value&&r(n,this.value);let i=j(e),o=this.children.get(i);return o?o.foreachOnPath_(ne(e),he(n,i),r):new t(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(he(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var vt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Fe(null))}};function qo(t,e,n){if(L(e))return new vt(new Fe(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Me(i,e);return o=o.updateChild(s,n),new vt(t.writeTree_.set(i,o))}else{let i=new Fe(n),o=t.writeTree_.setTree(e,i);return new vt(o)}}}function OI(t,e,n){let r=t;return Le(n,(i,o)=>{r=qo(r,he(e,i),o)}),r}function PI(t,e){if(L(e))return vt.empty();{let n=t.writeTree_.setTree(e,new Fe(null));return new vt(n)}}function Lh(t,e){return ur(t,e)!=null}function ur(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Me(n.path,e)):null}function kI(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ce,(r,i)=>{e.push(new P(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new P(r,i.value))}),e}function Tn(t,e){if(L(e))return t;{let n=ur(t,e);return n!=null?new vt(new Fe(n)):new vt(t.writeTree_.subtree(e))}}function Fh(t){return t.writeTree_.isEmpty()}function yi(t,e){return bw(G(),t.writeTree_,e)}function bw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=bw(he(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(he(t,".priority"),r)),n}}function zc(t,e){return Nw(e,t)}function cO(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=qo(t.visibleWrites,e,n)),t.lastWriteId=r}function lO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function uO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&dO(a,r.path)?i=!1:mt(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return fO(t),!0;if(r.snap)t.visibleWrites=PI(t.visibleWrites,r.path);else{let a=r.children;Le(a,c=>{t.visibleWrites=PI(t.visibleWrites,he(r.path,c))})}return!0}else return!1}function dO(t,e){if(t.snap)return mt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&mt(he(t.path,n),e))return!0;return!1}function fO(t){t.visibleWrites=Sw(t.allWrites,hO,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function hO(t){return t.visible}function Sw(t,e,n){let r=vt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)mt(n,s)?(a=Me(n,s),r=qo(r,a,o.snap)):mt(s,n)&&(a=Me(s,n),r=qo(r,G(),o.snap.getChild(a)));else if(o.children){if(mt(n,s))a=Me(n,s),r=OI(r,a,o.children);else if(mt(s,n))if(a=Me(s,n),L(a))r=OI(r,G(),o.children);else{let c=Jn(o.children,j(a));if(c){let l=c.getChild(ne(a));r=qo(r,G(),l)}}}else throw Qn("WriteRecord should have .snap or .children")}}return r}function Tw(t,e,n,r,i){if(!r&&!i){let o=ur(t.visibleWrites,e);if(o!=null)return o;{let s=Tn(t.visibleWrites,e);if(Fh(s))return n;if(n==null&&!Lh(s,G()))return null;{let a=n||M.EMPTY_NODE;return yi(s,a)}}}else{let o=Tn(t.visibleWrites,e);if(!i&&Fh(o))return n;if(!i&&n==null&&!Lh(o,G()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(mt(l.path,e)||mt(e,l.path))},a=Sw(t.allWrites,s,e),c=n||M.EMPTY_NODE;return yi(a,c)}}}function pO(t,e,n){let r=M.EMPTY_NODE,i=ur(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ce,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Tn(t.visibleWrites,e);return n.forEachChild(ce,(s,a)=>{let c=yi(Tn(o,new Q(s)),a);r=r.updateImmediateChild(s,c)}),kI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Tn(t.visibleWrites,e);return kI(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function gO(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=he(e,n);if(Lh(t.visibleWrites,o))return null;{let s=Tn(t.visibleWrites,o);return Fh(s)?i.getChild(n):yi(s,i.getChild(n))}}function mO(t,e,n,r){let i=he(e,n),o=ur(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Tn(t.visibleWrites,i);return yi(s,r.getNode().getImmediateChild(n))}else return null}function vO(t,e){return ur(t.visibleWrites,e)}function yO(t,e,n,r,i,o,s){let a,c=Tn(t.visibleWrites,e),l=ur(c,G());if(l!=null)a=l;else if(n!=null)a=yi(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function _O(){return{visibleWrites:vt.empty(),allWrites:[],lastWriteId:-1}}function kc(t,e,n,r){return Tw(t.writeTree,t.treePath,e,n,r)}function cp(t,e){return pO(t.writeTree,t.treePath,e)}function LI(t,e,n,r){return gO(t.writeTree,t.treePath,e,n,r)}function Lc(t,e){return vO(t.writeTree,he(t.treePath,e))}function IO(t,e,n,r,i,o){return yO(t.writeTree,t.treePath,e,n,r,i,o)}function lp(t,e,n){return mO(t.writeTree,t.treePath,e,n)}function Aw(t,e){return Nw(he(t.treePath,e),t.writeTree)}function Nw(t,e){return{treePath:t,writeTree:e}}var jh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Zo(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ko(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,mi(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Zo(r,e.snapshotNode,i.oldSnap));else throw Qn("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Uh=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Mw=new Uh,Jo=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Pt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lp(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:lr(this.viewCache_),o=IO(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function wO(t){return{filter:t}}function EO(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function CO(t,e,n,r,i){let o=new jh,s,a;if(n.type===Ot.OVERWRITE){let l=n;l.source.fromUser?s=Vh(t,e,l.path,l.snap,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!L(l.path),s=Fc(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===Ot.MERGE){let l=n;l.source.fromUser?s=bO(t,e,l.path,l.children,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=$h(t,e,l.path,l.children,r,i,a,o))}else if(n.type===Ot.ACK_USER_WRITE){let l=n;l.revert?s=AO(t,e,l.path,r,i,o):s=SO(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===Ot.LISTEN_COMPLETE)s=TO(t,e,n.path,r,o);else throw Qn("Unknown operation type: "+n.type);let c=o.getChanges();return DO(e,s,c),{viewCache:s,changes:c}}function DO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Pc(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ww(Pc(e)))}}function Rw(t,e,n,r,i,o){let s=e.eventCache;if(Lc(r,n)!=null)return e;{let a,c;if(L(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=lr(e),u=l instanceof M?l:M.EMPTY_NODE,d=cp(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=kc(r,lr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=j(n);if(l===".priority"){g(Nn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=LI(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ne(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=LI(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=lp(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Go(e,a,s.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function Fc(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(L(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=j(n);if(!c.isCompleteForPath(n)&&Nn(n)>1)return e;let p=ne(n),_=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),_):l=u.updateChild(c.getNode(),h,_,p,Mw,null)}let d=Dw(e,l,c.isFullyInitialized()||L(n),u.filtersNodes()),f=new Jo(i,d,o);return Rw(t,d,n,i,f,a)}function Vh(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new Jo(i,e,o);if(L(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Go(e,l,!0,t.filter.filtersNodes());else{let d=j(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Go(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ne(n),h=a.getNode().getImmediateChild(d),p;if(L(f))p=r;else{let m=u.getCompleteChild(d);m!=null?fw(f)===".priority"&&m.getChild(pw(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=M.EMPTY_NODE}if(h.equals(p))c=e;else{let m=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=Go(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function FI(t,e){return t.eventCache.isCompleteForChild(e)}function bO(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=he(n,c);FI(e,j(u))&&(a=Vh(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=he(n,c);FI(e,j(u))||(a=Vh(t,a,u,l,i,o,s))}),a}function jI(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function $h(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;L(n)?l=r:l=new Fe(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=jI(t,h,f);c=Fc(t,c,new Q(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),m=jI(t,p,f);c=Fc(t,c,new Q(d),m,i,o,s,a)}}),c}function SO(t,e,n,r,i,o,s){if(Lc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(L(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Fc(t,e,n,c.getNode().getChild(n),i,o,a,s);if(L(n)){let l=new Fe(null);return c.getNode().forEachChild(di,(u,d)=>{l=l.set(new Q(u),d)}),$h(t,e,n,l,i,o,a,s)}else return e}else{let l=new Fe(null);return r.foreach((u,d)=>{let f=he(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),$h(t,e,n,l,i,o,a,s)}}function TO(t,e,n,r,i){let o=e.serverCache,s=Dw(e,o.getNode(),o.isFullyInitialized()||L(n),o.isFiltered());return Rw(t,s,n,r,Mw,i)}function AO(t,e,n,r,i,o){let s;if(Lc(r,n)!=null)return e;{let a=new Jo(r,e,i),c=e.eventCache.getNode(),l;if(L(n)||j(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=kc(r,lr(e));else{let d=e.serverCache.getNode();g(d instanceof M,"serverChildren would be complete if leaf node"),u=cp(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=j(n),d=lp(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ne(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,M.EMPTY_NODE,ne(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=kc(r,lr(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Lc(r,G())!=null,Go(e,l,s,t.filter.filtersNodes())}}var Bh=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Qo(r.getIndex()),o=eO(r);this.processor_=wO(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(M.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(M.EMPTY_NODE,a.getNode(),null),u=new Pt(c,s.isFullyInitialized(),i.filtersNodes()),d=new Pt(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Wc(d,u),this.eventGenerator_=new kh(this.query_)}get query(){return this.query_}};function NO(t){return t.viewCache_.serverCache.getNode()}function MO(t){return Pc(t.viewCache_)}function RO(t,e){let n=lr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(j(e)).isEmpty())?n.getChild(e):null}function UI(t){return t.eventRegistrations_.length===0}function xO(t,e){t.eventRegistrations_.push(e)}function VI(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function $I(t,e,n,r){e.type===Ot.MERGE&&e.source.queryId!==null&&(g(lr(t.viewCache_),"We should always have a full cache before handling merges"),g(Pc(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=CO(t.processor_,i,e,n,r);return EO(t.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,xw(t,o.changes,o.viewCache.eventCache.getNode(),null)}function OO(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ce,(o,s)=>{r.push(mi(o,s))}),n.isFullyInitialized()&&r.push(ww(n.getNode())),xw(t,r,n.getNode(),e)}function xw(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return iO(t.eventGenerator_,e,n,i)}var jc,Uc=class{constructor(){this.views=new Map}};function PO(t){g(!jc,"__referenceConstructor has already been defined"),jc=t}function kO(){return g(jc,"Reference.ts has not been loaded"),jc}function LO(t){return t.views.size===0}function up(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),$I(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat($I(s,e,n,r));return o}}function Ow(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=kc(n,i?r:null),c=!1;a?c=!0:r instanceof M?(a=cp(n,r),c=!1):(a=M.EMPTY_NODE,c=!1);let l=Wc(new Pt(a,c,!1),new Pt(r,i,!1));return new Bh(e,l)}return s}function FO(t,e,n,r,i,o){let s=Ow(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),xO(s,n),OO(s,n)}function jO(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Mn(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(VI(l,n,r)),UI(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(VI(c,n,r)),UI(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Mn(t)&&o.push(new(kO())(e._repo,e._path)),{removed:o,events:s}}function Pw(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function An(t,e){let n=null;for(let r of t.views.values())n=n||RO(r,e);return n}function kw(t,e){if(e._queryParams.loadsAllData())return Gc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function Lw(t,e){return kw(t,e)!=null}function Mn(t){return Gc(t)!=null}function Gc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Vc;function UO(t){g(!Vc,"__referenceConstructor has already been defined"),Vc=t}function VO(){return g(Vc,"Reference.ts has not been loaded"),Vc}var $O=1,$c=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=_O(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Fw(t,e,n,r,i){return cO(t.pendingWriteTree_,e,n,r,i),i?os(t,new vi(Cw(),e,n)):[]}function sr(t,e,n=!1){let r=lO(t.pendingWriteTree_,e);if(uO(t.pendingWriteTree_,e)){let o=new Fe(null);return r.snap!=null?o=o.set(G(),!0):Le(r.children,s=>{o=o.set(new Q(s),!0)}),os(t,new Ph(r.path,o,n))}else return[]}function is(t,e,n){return os(t,new vi(sp(),e,n))}function BO(t,e,n){let r=Fe.fromObject(n);return os(t,new Oc(sp(),e,r))}function HO(t,e){return os(t,new xc(sp(),e))}function WO(t,e,n){let r=fp(t,n);if(r){let i=hp(r),o=i.path,s=i.queryId,a=Me(o,e),c=new xc(ap(s),a);return pp(t,o,c)}else return[]}function jw(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||Lw(s,e))){let c=jO(s,e,n,r);LO(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>Mn(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=YO(f);for(let p=0;p<h.length;++p){let m=h[p],_=m.query,D=Bw(t,m);t.listenProvider_.startListening(Yo(_),Xo(t,_),D.hashFn,D.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Yo(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(qc(f));t.listenProvider_.stopListening(Yo(f),h)}))}KO(t,l)}return a}function Uw(t,e,n,r){let i=fp(t,r);if(i!=null){let o=hp(i),s=o.path,a=o.queryId,c=Me(s,e),l=new vi(ap(a),c,n);return pp(t,s,l)}else return[]}function zO(t,e,n,r){let i=fp(t,r);if(i){let o=hp(i),s=o.path,a=o.queryId,c=Me(s,e),l=Fe.fromObject(n),u=new Oc(ap(a),c,l);return pp(t,s,u)}else return[]}function GO(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Me(f,i);o=o||An(h,p),s=s||Mn(h)});let a=t.syncPointTree_.get(i);a?(s=s||Mn(a),o=o||An(a,G())):(a=new Uc,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=M.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let m=An(p,G());m&&(o=o.updateImmediateChild(h,m))}));let l=Lw(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=qc(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=ZO();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=zc(t.pendingWriteTree_,i),d=FO(a,e,n,u,o,c);if(!l&&!s&&!r){let f=kw(a,e);d=d.concat(QO(t,e,f))}return d}function dp(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Me(s,e),l=An(a,c);if(l)return l});return Tw(i,e,o,n,!0)}function qO(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Me(l,n);r=r||An(u,d)});let i=t.syncPointTree_.get(n);i?r=r||An(i,G()):(i=new Uc,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new Pt(r,!0,!1):null,a=zc(t.pendingWriteTree_,e._path),c=Ow(i,e,a,o?s.getNode():M.EMPTY_NODE,o);return MO(c)}function os(t,e){return Vw(e,t.syncPointTree_,null,zc(t.pendingWriteTree_,G()))}function Vw(t,e,n,r){if(L(t.path))return $w(t,e,n,r);{let i=e.get(G());n==null&&i!=null&&(n=An(i,G()));let o=[],s=j(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=Aw(r,s);o=o.concat(Vw(a,c,l,u))}return i&&(o=o.concat(up(i,t,r,n))),o}}function $w(t,e,n,r){let i=e.get(G());n==null&&i!=null&&(n=An(i,G()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=Aw(r,s),u=t.operationForChild(s);u&&(o=o.concat($w(u,a,c,l)))}),i&&(o=o.concat(up(i,t,r,n))),o}function Bw(t,e){let n=e.query,r=Xo(t,n);return{hashFn:()=>(NO(e)||M.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?WO(t,n._path,r):HO(t,n._path);{let o=dx(i,n);return jw(t,n,null,o)}}}}function Xo(t,e){let n=qc(e);return t.queryToTagMap.get(n)}function qc(t){return t._path.toString()+"$"+t._queryIdentifier}function fp(t,e){return t.tagToQueryMap.get(e)}function hp(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}}function pp(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=zc(t.pendingWriteTree_,e);return up(r,n,i,null)}function YO(t){return t.fold((e,n,r)=>{if(n&&Mn(n))return[Gc(n)];{let i=[];return n&&(i=Pw(n)),Le(r,(o,s)=>{i=i.concat(s)}),i}})}function Yo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(VO())(t._repo,t._path):t}function KO(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=qc(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function ZO(){return $O++}function QO(t,e,n){let r=e._path,i=Xo(t,e),o=Bw(t,n),s=t.listenProvider_.startListening(Yo(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!Mn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!L(l)&&u&&Mn(u))return[Gc(u).query];{let f=[];return u&&(f=f.concat(Pw(u).map(h=>h.query))),Le(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(Yo(u),Xo(t,u))}}return s}var Hh=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Wh=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=he(this.path_,e);return new t(this.syncTree_,n)}node(){return dp(this.syncTree_,this.path_)}},JO=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},BI=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return XO(t[".sv"],e,n);if(typeof t[".sv"]=="object")return eP(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},XO=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},eP=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},tP=function(t,e,n,r){return gp(e,new Wh(n,t),r)},Hw=function(t,e,n){return gp(t,new Hh(e),n)};function gp(t,e,n){let r=t.getPriority().val(),i=BI(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=BI(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new pi(a,ye(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new pi(i))),s.forEachChild(ce,(a,c)=>{let l=gp(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var es=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function mp(t,e){let n=e instanceof Q?e:new Q(e),r=t,i=j(n);for(;i!==null;){let o=Jn(r.node.children,i)||{children:{},childCount:0};r=new es(i,r,o),n=ne(n),i=j(n)}return r}function wi(t){return t.node.value}function Ww(t,e){t.node.value=e,zh(t)}function zw(t){return t.node.childCount>0}function nP(t){return wi(t)===void 0&&!zw(t)}function Yc(t,e){Le(t.node.children,(n,r)=>{e(new es(n,t,r))})}function Gw(t,e,n,r){n&&!r&&e(t),Yc(t,i=>{Gw(i,e,!0,r)}),n&&r&&e(t)}function rP(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ss(t){return new Q(t.parent===null?t.name:ss(t.parent)+"/"+t.name)}function zh(t){t.parent!==null&&iP(t.parent,t.name,t)}function iP(t,e,n){let r=nP(n),i=Rt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,zh(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,zh(t))}var oP=/[\[\].#$\/\u0000-\u001F\u007F]/,sP=/[\[\].#$\u0000-\u001F\u007F]/,ih=10*1024*1024,qw=function(t){return typeof t=="string"&&t.length!==0&&!oP.test(t)},Yw=function(t){return typeof t=="string"&&t.length!==0&&!sP.test(t)},aP=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Yw(t)};var cP=function(t,e,n,r){r&&e===void 0||vp(ic(t,"value"),e,n)},vp=function(t,e,n){let r=n instanceof Q?new yh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ir(r));if(typeof e=="function")throw new Error(t+"contains a function "+ir(r)+" with contents = "+e.toString());if(YI(e))throw new Error(t+"contains "+e.toString()+" "+ir(r));if(typeof e=="string"&&e.length>ih/3&&bo(e)>ih)throw new Error(t+"contains a string greater than "+ih+" utf8 bytes "+ir(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Le(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!qw(s)))throw new Error(t+" contains an invalid key ("+s+") "+ir(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Vx(r,s),vp(t,a,r),$x(r)}),i&&o)throw new Error(t+' contains ".value" child '+ir(r)+" in addition to actual children.")}};var Kw=function(t,e,n,r){if(!(r&&n===void 0)&&!Yw(n))throw new Error(ic(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lP=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Kw(t,e,n,r)},uP=function(t,e){if(j(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},dP=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!aP(n))throw new Error(ic(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Gh=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Zw(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!gw(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function kt(t,e,n){Zw(t,n),fP(t,r=>mt(r,e)||mt(e,r))}function fP(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(hP(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function hP(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();ar&&be("event: "+n.toString()),Ii(r)}}}var pP="repo_interrupt",gP=25,qh=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rc(),this.transactionQueueTree_=new es,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function mP(t,e,n){if(t.stats_=rp(t.repoInfo_),t.forceRestClient_||gx())t.server_=new Nh(t.repoInfo_,(r,i,o,s)=>{HI(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>WI(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{le(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ip(t.repoInfo_,e,(r,i,o,s)=>{HI(t,r,i,o,s)},r=>{WI(t,r)},r=>{yP(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=vx(t.repoInfo_,()=>new Oh(t.stats_,t.server_)),t.infoData_=new Mh,t.infoSyncTree_=new $c({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=is(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),_p(t,"connected",!1),t.serverSyncTree_=new $c({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);kt(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function vP(t){let n=t.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function yp(t){return JO({timestamp:vP(t)})}function HI(t,e,n,r,i){t.dataUpdateCount++;let o=new Q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Eo(n,l=>ye(l));s=zO(t.serverSyncTree_,o,c,i)}else{let c=ye(n);s=Uw(t.serverSyncTree_,o,c,i)}else if(r){let c=Eo(n,l=>ye(l));s=BO(t.serverSyncTree_,o,c)}else{let c=ye(n);s=is(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Zc(t,o)),kt(t.eventQueue_,a,s)}function WI(t,e){_p(t,"connected",e),e===!1&&wP(t)}function yP(t,e){Le(e,(n,r)=>{_p(t,n,r)})}function _p(t,e,n){let r=new Q("/.info/"+e),i=ye(n);t.infoData_.updateSnapshot(r,i);let o=is(t.infoSyncTree_,r,i);kt(t.eventQueue_,r,o)}function Qw(t){return t.nextWriteId_++}function _P(t,e,n){let r=qO(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=ye(i).withIndex(e._queryParams.getIndex());GO(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=is(t.serverSyncTree_,e._path,o);else{let a=Xo(t.serverSyncTree_,e);s=Uw(t.serverSyncTree_,e._path,o,a)}return kt(t.eventQueue_,e._path,s),jw(t.serverSyncTree_,e,n,null,!0),o},i=>(Kc(t,"get for query "+le(e)+" failed: "+i),Promise.reject(new Error(i))))}function IP(t,e,n,r,i){Kc(t,"set",{path:e.toString(),value:n,priority:r});let o=yp(t),s=ye(n,r),a=dp(t.serverSyncTree_,e),c=Hw(s,a,o),l=Qw(t),u=Fw(t.serverSyncTree_,e,c,l,!0);Zw(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||ke("set at "+e+" failed: "+f);let m=sr(t.serverSyncTree_,l,!p);kt(t.eventQueue_,e,m),CP(t,i,f,h)});let d=nE(t,e);Zc(t,d),kt(t.eventQueue_,d,[])}function wP(t){Kc(t,"onDisconnectEvents");let e=yp(t),n=Rc();Rh(t.onDisconnect_,G(),(i,o)=>{let s=tP(i,o,t.serverSyncTree_,e);Ew(n,i,s)});let r=[];Rh(n,G(),(i,o)=>{r=r.concat(is(t.serverSyncTree_,i,o));let s=nE(t,i);Zc(t,s)}),t.onDisconnect_=Rc(),kt(t.eventQueue_,G(),r)}function EP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(pP)}function Kc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),be(n,...e)}function CP(t,e,n,r){e&&Ii(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function Jw(t,e,n){return dp(t.serverSyncTree_,e,n)||M.EMPTY_NODE}function Ip(t,e=t.transactionQueueTree_){if(e||Qc(t,e),wi(e)){let n=eE(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&DP(t,ss(e),n)}else zw(e)&&Yc(e,n=>{Ip(t,n)})}function DP(t,e,n){let r=n.map(l=>l.currentWriteId),i=Jw(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Me(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Kc(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(sr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Qc(t,mp(t.transactionQueueTree_,e)),Ip(t,t.transactionQueueTree_),kt(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Ii(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ke("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Zc(t,e)}},s)}function Zc(t,e){let n=Xw(t,e),r=ss(n),i=eE(t,n);return bP(t,i,r),r}function bP(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Me(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(sr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=gP)u=!0,d="maxretry",i=i.concat(sr(t.serverSyncTree_,c.currentWriteId,!0));else{let f=Jw(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){vp("transaction failed: Data returned ",h,c.path);let p=ye(h);typeof h=="object"&&h!=null&&Rt(h,".priority")||(p=p.updatePriority(f.getPriority()));let _=c.currentWriteId,D=yp(t),B=Hw(p,f,D);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=B,c.currentWriteId=Qw(t),s.splice(s.indexOf(_),1),i=i.concat(Fw(t.serverSyncTree_,c.path,B,c.currentWriteId,c.applyLocally)),i=i.concat(sr(t.serverSyncTree_,_,!0))}else u=!0,d="nodata",i=i.concat(sr(t.serverSyncTree_,c.currentWriteId,!0))}kt(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Qc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ii(r[a]);Ip(t,t.transactionQueueTree_)}function Xw(t,e){let n,r=t.transactionQueueTree_;for(n=j(e);n!==null&&wi(r)===void 0;)r=mp(r,n),e=ne(e),n=j(e);return r}function eE(t,e){let n=[];return tE(t,e,n),n.sort((r,i)=>r.order-i.order),n}function tE(t,e,n){let r=wi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Yc(e,i=>{tE(t,i,n)})}function Qc(t,e){let n=wi(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Ww(e,n.length>0?n:void 0)}Yc(e,r=>{Qc(t,r)})}function nE(t,e){let n=ss(Xw(t,e)),r=mp(t.transactionQueueTree_,e);return rP(r,i=>{oh(t,i)}),oh(t,r),Gw(r,i=>{oh(t,i)}),n}function oh(t,e){let n=wi(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(sr(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Ww(e,void 0):n.length=o+1,kt(t.eventQueue_,ss(e),i);for(let s=0;s<r.length;s++)Ii(r[s])}}function SP(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function TP(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ke(`Invalid query segment '${n}' in query '${t}'`)}return e}var zI=function(t,e){let n=AP(t),r=n.namespace;n.domain==="firebase.com"&&Zt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Zt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||sx();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Cc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Q(n.pathString)}},AP=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=SP(t.substring(u,d)));let f=TP(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Yh=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+le(this.snapshot.exportVal())}},Kh=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Zh=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Qh=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:fw(this._path)}get ref(){return new Qt(this._repo,this._path)}get _queryIdentifier(){let e=RI(this._queryParams),n=np(e);return n==="{}"?"default":n}get _queryObject(){return RI(this._queryParams)}isEqual(e){if(e=Qe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=gw(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ux(this._path)}};var Qt=class t extends Qh{constructor(e,n){super(e,n,new Ah,!1)}get parent(){let e=pw(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Bc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new Q(e),r=Hc(this.ref,e);return new t(this._node.getChild(n),r,ce)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Hc(this.ref,r),ce)))}hasChild(e){let n=new Q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function rE(t,e){return t=Qe(t),t._checkNotDeleted("ref"),e!==void 0?Hc(t._root,e):t._root}function Hc(t,e){return t=Qe(t),j(t._path)===null?lP("child","path",e,!1):Kw("child","path",e,!1),new Qt(t._repo,he(t._path,e))}function iE(t,e){t=Qe(t),uP("set",t._path),cP("set",e,t._path,!1);let n=new wn;return IP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function oE(t){t=Qe(t);let e=new Zh(()=>{}),n=new Jh(e);return _P(t._repo,t,n).then(r=>new Bc(r,new Qt(t._repo,t._path),t._queryParams.getIndex()))}var Jh=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Yh("value",this,new Bc(e.snapshotNode,new Qt(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Kh(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}};PO(Qt);UO(Qt);var NP="FIREBASE_DATABASE_EMULATOR_HOST",Xh={},MP=!1;function RP(t,e,n,r){t.repoInfo_=new Cc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function xP(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Zt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),be("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=zI(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[NP]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=zI(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new zo(zo.OWNER):new dh(t.name,t.options,e);dP("Invalid Firebase Database URL",s),L(s.path)||Zt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=PP(a,t,u,new uh(t.name,n));return new ep(d,t)}function OP(t,e){let n=Xh[e];(!n||n[t.key]!==t)&&Zt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),EP(t),delete n[t.key]}function PP(t,e,n,r){let i=Xh[e.name];i||(i={},Xh[e.name]=i);let o=i[t.toURLString()];return o&&Zt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new qh(t,MP,n,r),i[t.toURLString()]=o,o}var ep=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(mP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qt(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&(OP(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Zt("Cannot call "+e+" on a deleted database.")}};function sE(t=No(),e){let n=Pf(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=E_("database");r&&aE(n,...r)}return n}function aE(t,e,n,r={}){t=Qe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Zt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Zt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new zo(zo.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:D_(r.mockUserToken,t.app.options.projectId);o=new zo(s)}RP(i,e,n,o)}function kP(t){rx(oi),Dn(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return xP(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),ve(pI,gI,t),ve(pI,gI,"esm2017")}ip.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ip.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};kP();var dr=class{constructor(e){return e}},cE="database",wp=class{constructor(){return Ro(cE)}};var Ep=new S("angularfire2.database-instances");function LP(t,e){let n=Ff(cE,t,e);return n&&new dr(n)}function FP(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new dr(r)}}var jP={provide:wp,deps:[[new ct,Ep]]},UP={provide:dr,useFactory:LP,deps:[[new ct,Ep],tr]};function lE(t,...e){return ve("angularfire",ai.full,"rtdb"),dn([UP,jP,{provide:Ep,useFactory:FP(t),multi:!0,deps:[te,at,xo,Oo,[new ct,Ic],[new ct,Mo],...e]}])}var Cp=bn(oE,!0),Jc=bn(sE,!0);var Dp=bn(rE,!0);var uE=bn(iE,!0);var as=VE(TE());var AE=(()=>{class t{rng=(0,as.default)(qt.getToday());constructor(){this.rng=(0,as.default)(qt.getToday())}setTodaySeed(){this.rng=(0,as.default)(qt.getToday())}setSeed(n){this.rng=(0,as.default)(n)}getRandom(){return this.rng()}getRandomInt(n,r){return Math.floor(this.rng()*(r-n+1))+n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qP(t,e){if(t&1){let n=dd();X(0,"app-card",13),Pe("CardSelected",function(i){ga(n);let o=Ye();return ma(o.cardSelected(i))})("CardUnSelected",function(i){ga(n);let o=Ye();return ma(o.cardUnSelected(i))}),ee()}if(t&2){let n=e.$implicit;we("CardInfo",n)}}function YP(t,e){if(t&1&&ft(0,"app-card",18),t&2){let n=e.$implicit;we("CardInfo",n)}}function KP(t,e){if(t&1&&(X(0,"div",16),dt(1,YP,1,1,"app-card",17),ee()),t&2){let n=e.$implicit;ae(),we("ngForOf",n)}}function ZP(t,e){if(t&1&&(X(0,"div",7)(1,"div",14),De(2),ee(),dt(3,KP,2,1,"div",15),ee()),t&2){let n=Ye();ae(2),gn("Found ",n.Found.length,""),ae(),we("ngForOf",n.Found)}}function QP(t,e){if(t&1&&(X(0,"tr")(1,"td"),De(2),ee(),X(3,"td",21),De(4),ee(),X(5,"td"),De(6),ee()()),t&2){let n=e.$implicit,r=e.$index,i=Ye(2);ae(2),gn("",r+1,"."),ae(2),Hn(n.user),ae(2),Hn(i.formatTime(n.time))}}function JP(t,e){if(t&1){let n=dd();X(0,"div",19),Pe("click",function(){ga(n);let i=Ye();return ma(i.ShowToplist=!1)}),X(1,"div",20)(2,"table"),Qv(3,QP,7,3,"tr",null,Zv),ee()()()}if(t&2){let n=Ye();ae(3),Jv(n.Toplist)}}var Rp=(()=>{class t{randomService;route;database=y(dr);GameType="daily";title="daily-set";Deck=new yo;SelectedCards=[];Tabel=[];Found=[];FoundIds=[];ExistingIds=[];SetCount=0;TotalSeconds=0;Time="00:00";Started=new Date().getTime();TimeHandle=null;showDialog=!1;dialogMessage="";Today=qt.getToday();HintCount=0;UserName="Guest";Toplist=[];ShowToplist=!1;GameId="";constructor(n,r){this.randomService=n,this.route=r,this.setUserName(),r.params.subscribe(i=>{let o=i.id;o?this.startRandom(o):this.startDaily()})}showToplist(){this.getTopList(this.Today).then(n=>{this.Toplist=n}),this.ShowToplist=!0}storeResult(n,r,i){if(this.GameType==="random")return;let o=`${r}/${n}`,s=Dp(this.database,o);Cp(s).then(a=>{if(a.exists()){console.log("Data already exists. Not saving.");return}uE(s,{time:i}).then(()=>{console.log("Data saved successfully!")}).catch(c=>{console.error("Error saving data:",c)})}).catch(a=>{console.error("Error checking existing data:",a)})}getTopList(n,r=10){return v(this,null,function*(){let i=Jc(),o=Dp(i,n);try{let s=yield Cp(o);if(!s.exists())return console.log("No results found for this gameId."),[];let a=[];return s.forEach(c=>{let l=c.key,u=c.val().time;a.push({user:l,time:u})}),a.sort((c,l)=>c.time-l.time).slice(0,r)}catch(s){return console.error("Error fetching top list:",s),[]}})}getCardPath(n){return`set_picts/${n.Shape}_${n.Fill}_${n.Color}.png`}startTime(){this.TimeHandle=setInterval(()=>{let r=new Date().getTime()-this.Started,i=Math.floor(r/1e3);i+=this.HintCount*60,this.TotalSeconds=i;let o=this.formatTime(i);this.Time=o},1e3)}formatTime(n){let r=Math.floor(n/60),i=n%60;return`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}cardUnSelected(n){let r=this.SelectedCards.indexOf(n);r>-1&&this.SelectedCards.splice(r,1)}cardSelected(n){let r=this.SelectedCards;if(r.push(n),r.length==3&&this.isSet(r[0],r[1],r[2])){r.forEach(o=>o.Selected=!1);let i=this.getId(this.SelectedCards);this.FoundIds.indexOf(i)==-1?(this.FoundIds.push(i),this.Found.push(structuredClone(this.SelectedCards)),this.SelectedCards.forEach(o=>this.blink(o)),this.Found.length===this.SetCount&&(this.storeResult(this.UserName,this.Today,this.TotalSeconds),clearInterval(this.TimeHandle),this.dialogMessage="Good! Your time:"+this.Time,this.showDialog=!0)):this.Found.forEach(o=>{let s=this.getId(o);i===s&&o.forEach(a=>this.blink(a))}),this.SelectedCards=[]}}getId(n){return n.sort((i,o)=>i.Id-o.Id).map(i=>i.Id).join("_")}isSet(n,r,i){return!(!this.allAreSameOrAllDiffer(n.Color,r.Color,i.Color)||!this.allAreSameOrAllDiffer(n.Count,r.Count,i.Count)||!this.allAreSameOrAllDiffer(n.Shape,r.Shape,i.Shape)||!this.allAreSameOrAllDiffer(n.Fill,r.Fill,i.Fill))}allAreSameOrAllDiffer(n,r,i){return n===r&&r===i&&n===i||n!==r&&r!==i&&n!==i}setTable(){for(this.addRandomcard();this.Tabel.length<11&&(this.addRandomcard(),this.Tabel.length!==11);){var n=this.Tabel.length;let o=this.Tabel[n-1],s=this.Tabel[n-2];this.createSetOrAddRandom(o,s)}let r=this.Tabel[10],i=this.Tabel[0];this.createSetOrAddRandom(r,i),this.Tabel=this.shuffelArray(this.Tabel)}shuffelArray(n){let r=n.slice();for(let i=r.length-1;i>0;i--){let o=this.randomService.getRandomInt(0,i);[r[i],r[o]]=[r[o],r[i]]}return r}createSetOrAddRandom(n,r){let i=this.Deck.findMissingSetCard(n,r);i&&!this.Tabel.find(o=>o.Id==i.Id)?this.Tabel.push(i):this.addRandomcard()}addRandomcard(){let n=this.randomService.getRandomInt(0,80),r=this.Deck.Cards[n];this.Tabel.find(i=>i.Id===r.Id)?this.addRandomcard():this.Tabel.push(r)}countSets(){let n=[];for(let r=0;r<this.Tabel.length;r++)for(let i=r+1;i<this.Tabel.length;i++)for(let o=i+1;o<this.Tabel.length;o++)if(this.isSet(this.Tabel[r],this.Tabel[i],this.Tabel[o])){let s=this.getId([this.Tabel[r],this.Tabel[i],this.Tabel[o]]);n.indexOf(s)<0&&n.push(s)}this.SetCount=n.length,this.ExistingIds=n}giveHint(){for(let n=0;n<this.ExistingIds.length;n++){let r=this.ExistingIds[n];if(this.FoundIds.indexOf(r)==-1){let i=r.split("_"),o=this.HintCount%2==0?i[0]:i[1],s=this.Tabel.find(a=>a.Id==parseInt(o));s&&this.blink(s),this.HintCount++;return}}}blink(n){n.Blink=!0,setTimeout(()=>{n.Blink=!1},500)}shuffleTable(){this.Tabel=this.shuffelArray(this.Tabel)}changeUserName(){let n=prompt("What is your name?");n?localStorage.setItem("set-user-name",n):n="Guest",this.UserName=n}setUserName(){let n=localStorage.getItem("set-user-name");n||(n=prompt("What is your name?"),n?localStorage.setItem("set-user-name",n):n="Guest"),this.UserName=n}seedRandomAndStart(){let n=Math.floor(Math.random()*1e3).toString();location.href=`game/${n}`}startRandom(n){this.GameType="random",this.GameId=n,this.randomService.setSeed(n),this.startGame()}startDaily(){this.GameType="daily",this.randomService.setTodaySeed(),this.startGame()}startGame(){this.SelectedCards=[],this.Tabel=[],this.Found=[],this.FoundIds=[],this.ExistingIds=[],this.SetCount=0,this.Time="00:00",this.TotalSeconds=0,this.HintCount=0,this.Started=new Date().getTime(),this.showDialog=!1,this.dialogMessage="",this.Today=qt.getToday(),this.Deck=new yo,this.Deck.Cards=this.shuffelArray(this.Deck.Cards),this.setTable(),this.countSets(),this.startTime()}static \u0275fac=function(r){return new(r||t)(Ve(AE),Ve(mn))};static \u0275cmp=St({type:t,selectors:[["app-root"]],standalone:!0,features:[Tt],decls:28,vars:9,consts:[[1,"app-container"],[1,"buttons"],[3,"click"],[1,"tabel"],[1,"sub-header"],[1,"grid"],[3,"CardInfo","CardSelected","CardUnSelected",4,"ngFor","ngForOf"],[1,"founds-container"],[1,"usertime"],["href","#",1,"user",3,"click"],[1,"time"],[3,"click","Visible","Message"],[1,"center-screen"],[3,"CardSelected","CardUnSelected","CardInfo"],[1,"found-count"],["class","founds-row",4,"ngFor","ngForOf"],[1,"founds-row"],[3,"CardInfo",4,"ngFor","ngForOf"],[3,"CardInfo"],[1,"center-screen",3,"click"],[1,"toplist","dialog"],[1,"name"]],template:function(r,i){r&1&&(X(0,"div",0)(1,"div",1)(2,"button",2),Pe("click",function(){return i.startDaily()}),De(3,"Daily"),ee(),X(4,"button",2),Pe("click",function(){return i.seedRandomAndStart()}),De(5,"Random"),ee(),X(6,"button",2),Pe("click",function(){return i.shuffleTable()}),De(7,"Shuffle"),ee(),X(8,"button",2),Pe("click",function(){return i.giveHint()}),De(9,"Hint"),ee(),X(10,"button",2),Pe("click",function(){return i.showToplist()}),De(11,"Toplist"),ee()(),X(12,"div",3)(13,"div",4)(14,"span"),De(15),ee(),X(16,"span"),De(17),ee()(),X(18,"div",5),dt(19,qP,1,1,"app-card",6),ee()(),dt(20,ZP,4,2,"div",7),ee(),X(21,"div",8)(22,"a",9),Pe("click",function(){return i.changeUserName()}),De(23),ee(),X(24,"div",10),De(25),ee()(),X(26,"app-dialog",11),Pe("click",function(){return i.showDialog=!1}),ee(),dt(27,JP,5,0,"div",12)),r&2&&(ae(15),gn("Find the ",i.SetCount," sets"),ae(2),Hn(i.GameType=="random"?"Id: "+i.GameId:i.Today),ae(2),we("ngForOf",i.Tabel),ae(),ud(i.Found.length>0?20:-1),ae(3),Hn(i.UserName),ae(2),Hn(i.Time),ae(),we("Visible",i.showDialog)("Message",i.dialogMessage),ae(),ud(i.ShowToplist?27:-1))},dependencies:[g_,Gn,wy,m_],styles:[".buttons[_ngcontent-%COMP%]{display:flex;gap:2vw;padding-bottom:2vh}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:2em}.text[_ngcontent-%COMP%]{font-size:1.5em}.tabel[_ngcontent-%COMP%]{float:left}.founds-container[_ngcontent-%COMP%]{font-size:x-large;margin-top:1em;float:left;scale:.6;transform-origin:top left}.founds-container[_ngcontent-%COMP%]   .found-count[_ngcontent-%COMP%]{display:block;text-align:center}.founds-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:8px}.sub-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:.3vw;background-color:#ccc;padding:.3vw}.usertime[_ngcontent-%COMP%]{position:absolute;right:.1em;top:.1em}.time[_ngcontent-%COMP%]{font-size:1.5em}.toplist[_ngcontent-%COMP%]{font-size:.85rem;flex-direction:column}.toplist[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:.5rem}.toplist[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left}"]})}return t})();var NE=[{path:"game/:id",component:Rp},{path:"**",component:Rp}];var ME={providers:[Y_(()=>K_({projectId:"set-card-game-b7b55",appId:"1:314036741918:web:13991a7c172a1b2efecb0f",databaseURL:"https://set-card-game-b7b55-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"set-card-game-b7b55.firebasestorage.app",apiKey:"AIzaSyDZAx444-7oW19-zQFktsp_2Ef6D5lHD4A",authDomain:"set-card-game-b7b55.firebaseapp.com",messagingSenderId:"314036741918"})),lE(()=>Jc()),sy({eventCoalescing:!0}),p_(NE)]};var RE=(()=>{class t{title="testingrout";static \u0275fac=function(r){return new(r||t)};static \u0275cmp=St({type:t,selectors:[["app-root"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(r,i){r&1&&ft(0,"router-outlet")},dependencies:[cf]})}return t})();My(RE,ME).catch(t=>console.error(t));
